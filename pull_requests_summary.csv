Commit ID,Changes,Comments
1463a176bf652172560c3893c84b61c86e1b47f5,"diff --git a/src/main/java/com/manh/cp/appointment/appointment/constants/FeatureFlagConstants.java b/src/main/java/com/manh/cp/appointment/appointment/constants/FeatureFlagConstants.java
index dd0b50b37..84bb7cd76 100644
--- a/src/main/java/com/manh/cp/appointment/appointment/constants/FeatureFlagConstants.java
+++ b/src/main/java/com/manh/cp/appointment/appointment/constants/FeatureFlagConstants.java
@@ -33,5 +33,5 @@ public class FeatureFlagConstants
 
     public static final String FF_24_4_FIX_EDIT_APPOINTMENT_DATE = ""SUP-522225#2024-08"";
 
-    public static final String FF_99_9_FIX_FACILITY_DAY_LEVEL_SCOPE_FOR_NON_UTC_TIMEZONE = ""SUP-504432#2024-08"";
+    public static final String FF_99_9_FIX_FACILITY_DAY_LEVEL_SCOPE_FOR_NON_UTC_TIMEZONE = ""SUP-518897#2024-08"";
 }
",
39c8f648fdb08e8717237ae4ffca5b181cd3fd33,"diff --git a/gradle.properties b/gradle.properties
index 63e41475e..541cd2205 100644
--- a/gradle.properties
+++ b/gradle.properties
@@ -1 +1 @@
-dbChecksum=5cf61ada06975e25d78b471e00b5184e
+dbChecksum=153d228ee28c89f7182274a47fc7cd8e
diff --git a/src/component-test/java/com/manh/cp/appointment/parameterizedTests/CapacityParameterizedTests.java b/src/component-test/java/com/manh/cp/appointment/parameterizedTests/CapacityParameterizedTests.java
index 816a8d5b4..0a4648a8d 100644
--- a/src/component-test/java/com/manh/cp/appointment/parameterizedTests/CapacityParameterizedTests.java
+++ b/src/component-test/java/com/manh/cp/appointment/parameterizedTests/CapacityParameterizedTests.java
@@ -55,6 +55,14 @@ public class CapacityParameterizedTests extends ParameterizedTestBase
             { ""test 11"", ""appointment/appointment/parameterizedTests/capacityTests/test11/"" },
             { ""test 12"", ""appointment/appointment/parameterizedTests/capacityTests/test12/"" },
             { ""test 13"", ""appointment/appointment/parameterizedTests/capacityTests/test13/"" },
+            { ""test 14"", ""appointment/appointment/parameterizedTests/capacityTests/test14/"" },
+            { ""test 15"", ""appointment/appointment/parameterizedTests/capacityTests/test15/"" },
+            { ""test 16"", ""appointment/appointment/parameterizedTests/capacityTests/test16/"" },
+            { ""test 17"", ""appointment/appointment/parameterizedTests/capacityTests/test17/"" },
+            { ""test 18"", ""appointment/appointment/parameterizedTests/capacityTests/test18/"" },
+            { ""test 19"", ""appointment/appointment/parameterizedTests/capacityTests/test19/"" },
+            { ""test 20"", ""appointment/appointment/parameterizedTests/capacityTests/test20/"" },
+            { ""test 21"", ""appointment/appointment/parameterizedTests/capacityTests/test21/"" },
     });
 
     ///////////////////////////////////////////////////////////////////////////////////////////////////////////////////
@@ -88,8 +96,6 @@ public class CapacityParameterizedTests extends ParameterizedTestBase
         context = Context.renewContext(null, ""system"", ""1"", null, null,
                 facilityId, null, null, ""1"");
 
-        // testUtil.clearTables(context);
-
         // set FF
         String ffFileName = directory + ""/config/disable_ff.json"";
         if (JsonUtil.fileResourceExists(ffFileName))
@@ -111,6 +117,14 @@ public class CapacityParameterizedTests extends ParameterizedTestBase
         setApplicationParameterService(
                 AppointmentApplicationParameters.APT_REDESIGN_ENABLED.getParameterId(),
                 Boolean.TRUE.toString());
+
+        // Remove old entities that may exist
+        String fileName = directory + ""/config/cleanup.json"";
+        if (JsonUtil.fileResourceExists(fileName))
+        {
+            Document breakdownDocument = JsonUtil.readDocument(directory + ""/config/cleanup.json"");
+            deleteEntities(breakdownDocument);
+        }
     }
 
     @After
@@ -120,14 +134,6 @@ public class CapacityParameterizedTests extends ParameterizedTestBase
 
         context.removeAdditionalAttribute(""component-test"", EXTENSION_POINTS);
 
-        // set FF
-        String fileName = directory + ""/config/breakdown.json"";
-        if (JsonUtil.fileResourceExists(fileName))
-        {
-            Document breakdownDocument = JsonUtil.readDocument(directory + ""/config/breakdown.json"");
-            deleteEntities(breakdownDocument);
-        }
-
         setApplicationParameterService(
                 AppointmentApplicationParameters.APT_REDESIGN_ENABLED.getParameterId(),
                 Boolean.FALSE.toString());
diff --git a/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test1/config/breakdown.json b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test1/config/cleanup.json
similarity index 100%
rename from src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test1/config/breakdown.json
rename to src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test1/config/cleanup.json
diff --git a/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test1/output/1.json b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test1/output/1.json
index a61ef2812..92d992b05 100644
--- a/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test1/output/1.json
+++ b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test1/output/1.json
@@ -1,46 +1,39 @@
 {
     ""TimeIntervalUtilization"": [
         {
-            ""TotalCapacity"": 10,
-            ""RemainingCapacity"": 9,
-            ""MaxLiveUnloadCpty"": 10,
-            ""RemainingLiveUnloadCpty"": 9,
+            ""ScheduledAppointments"": 1,
+            ""ScheduledLiveUnloadAppts"": 1,
             ""ResourceUnitId"": ""CAPACITY_TEST_1.1"",
             ""AppointmentDate"": ""2034-01-04""
         },
         {
-            ""TotalCapacity"": 10,
-            ""RemainingCapacity"": 9,
-            ""MaxLiveUnloadCpty"": 10,
-            ""RemainingLiveUnloadCpty"": 9,
+            ""ScheduledAppointments"": 1,
+            ""ScheduledLiveUnloadAppts"": 1,
             ""ResourceUnitId"": ""CAPACITY_TEST_1.2"",
             ""AppointmentDate"": ""2034-01-04""
         }
     ],
     ""DayLevelUtilization"": [
         {
-            ""TotalCapacity"": 10,
-            ""RemainingCapacity"": 9,
+            ""ScheduledAppointments"": 1,
+            ""ScheduledLiveUnloadAppts"": 1,
             ""ResourceUnitId"": ""CAPACITY_TEST_1.1"",
             ""AppointmentDate"": ""2034-01-04"",
-            ""ConstraintTypeId"": ""NUMBER_OF_APPOINTMENTS"",
             ""WeekDayId"": ""3""
         },
         {
-            ""TotalCapacity"": 10,
-            ""RemainingCapacity"": 9,
+            ""ScheduledAppointments"": 1,
+            ""ScheduledLiveUnloadAppts"": 1,
             ""ResourceUnitId"": ""CAPACITY_TEST_1.2"",
             ""AppointmentDate"": ""2034-01-04"",
-            ""ConstraintTypeId"": ""NUMBER_OF_APPOINTMENTS"",
             ""WeekDayId"": ""3""
         }
     ],
     ""FacilityLevelUtilization"": [
         {
-            ""TotalCapacity"": 10,
-            ""RemainingCapacity"": 9,
+            ""ScheduledAppointments"": 1,
+            ""ScheduledLiveUnloadAppts"": 1,
             ""AppointmentDate"": ""2034-01-04"",
-            ""ConstraintTypeId"": ""NUMBER_OF_APPOINTMENTS"",
             ""WeekDayId"": ""3""
         }
     ],
diff --git a/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test10/config/breakdown.json b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test10/config/cleanup.json
similarity index 100%
rename from src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test10/config/breakdown.json
rename to src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test10/config/cleanup.json
diff --git a/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test10/output/1.json b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test10/output/1.json
index 99b967b1a..ec0d32661 100644
--- a/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test10/output/1.json
+++ b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test10/output/1.json
@@ -1,27 +1,22 @@
 {
     ""TimeIntervalUtilization"": [
         {
-            ""TotalCapacity"": 4,
-            ""RemainingCapacity"": 4,
+            ""ScheduledAppointments"": 0,
             ""ResourceUnitId"": ""CAPACITY_TEST_10"",
             ""AppointmentDate"": ""2034-01-04""
         }
     ],
     ""DayLevelUtilization"": [
         {
-            ""TotalCapacity"": 10,
-            ""RemainingCapacity"": 10,
+            ""ScheduledAppointments"": 0,
             ""ResourceUnitId"": ""CAPACITY_TEST_10"",
             ""AppointmentDate"": ""2034-01-04"",
-            ""ConstraintTypeId"": ""NUMBER_OF_APPOINTMENTS"",
             ""WeekDayId"": ""3""
         }
     ],
     ""FacilityLevelUtilization"": [
         {
-            ""TotalCapacity"": 10,
-            ""RemainingCapacity"": 10,
-            ""ConstraintTypeId"": ""NUMBER_OF_APPOINTMENTS"",
+            ""ScheduledAppointments"": 0,
             ""AppointmentDate"": ""2034-01-04"",
             ""WeekDayId"": ""3""
         }
diff --git a/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test11/config/breakdown.json b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test11/config/cleanup.json
similarity index 100%
rename from src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test11/config/breakdown.json
rename to src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test11/config/cleanup.json
diff --git a/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test11/output/1.json b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test11/output/1.json
index 7415e88ec..614797840 100644
--- a/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test11/output/1.json
+++ b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test11/output/1.json
@@ -1,60 +1,48 @@
 {
     ""TimeIntervalUtilization"": [
         {
-            ""TotalCapacity"": 10,
-            ""RemainingCapacity"": 9,
+            ""ScheduledAppointments"": 1,
             ""ResourceUnitId"": ""CAPACITY_TEST_11"",
             ""AppointmentDate"": ""2034-01-04""
         },
         {
-            ""TotalCapacity"": 10,
-            ""RemainingCapacity"": 9,
+            ""ScheduledAppointments"": 1,
             ""ResourceUnitId"": ""CAPACITY_TEST_11"",
             ""AppointmentDate"": ""2034-01-04""
         },
         {
-            ""TotalCapacity"": 10,
-            ""RemainingCapacity"": 9,
+            ""ScheduledAppointments"": 1,
             ""ResourceUnitId"": ""CAPACITY_TEST_11"",
             ""AppointmentDate"": ""2034-01-04""
         },
         {
-            ""TotalCapacity"": 10,
-            ""RemainingCapacity"": 9,
+            ""ScheduledAppointments"": 1,
             ""ResourceUnitId"": ""CAPACITY_TEST_11"",
             ""AppointmentDate"": ""2034-01-05""
         }
     ],
     ""DayLevelUtilization"": [
         {
-            ""TotalCapacity"": 10,
-            ""RemainingCapacity"": 8,
+            ""ScheduledAppointments"": 2,
             ""ResourceUnitId"": ""CAPACITY_TEST_11"",
             ""AppointmentDate"": ""2034-01-04"",
-            ""ConstraintTypeId"": ""NUMBER_OF_APPOINTMENTS"",
             ""WeekDayId"": ""3""
         },
         {
-            ""TotalCapacity"": 10,
-            ""RemainingCapacity"": 9,
+            ""ScheduledAppointments"": 1,
             ""ResourceUnitId"": ""CAPACITY_TEST_11"",
             ""AppointmentDate"": ""2034-01-05"",
-            ""ConstraintTypeId"": ""NUMBER_OF_APPOINTMENTS"",
             ""WeekDayId"": ""4""
         }
     ],
     ""FacilityLevelUtilization"": [
         {
-            ""TotalCapacity"": 10,
-            ""RemainingCapacity"": 8,
-            ""ConstraintTypeId"": ""NUMBER_OF_APPOINTMENTS"",
+            ""ScheduledAppointments"": 2,
             ""AppointmentDate"": ""2034-01-04"",
             ""WeekDayId"": ""3""
         },
         {
-            ""TotalCapacity"": 10,
-            ""RemainingCapacity"": 9,
-            ""ConstraintTypeId"": ""NUMBER_OF_APPOINTMENTS"",
+            ""ScheduledAppointments"": 1,
             ""AppointmentDate"": ""2034-01-05"",
             ""WeekDayId"": ""4""
         }
diff --git a/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test12/config/breakdown.json b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test12/config/cleanup.json
similarity index 100%
rename from src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test12/config/breakdown.json
rename to src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test12/config/cleanup.json
diff --git a/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test12/description.txt b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test12/description.txt
index 0d3771d01..4075cb3b5 100644
--- a/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test12/description.txt
+++ b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test12/description.txt
@@ -1 +1 @@
-The resource unit has no day level capacities assigned, so it should reject the appointment and no capacities should be consumed
+The resource unit has no day level capacities assigned, but that shouldn't matter and the appointment should be scheduled anyway
diff --git a/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test12/input/1.json b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test12/input/1.json
index c8ef553f4..f411d7b14 100644
--- a/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test12/input/1.json
+++ b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test12/input/1.json
@@ -28,14 +28,7 @@
                             ]
                         }
                     ],
-                    ""DayLevelScope"": [
-                        {
-                            ""EffectiveDateTime"": ""1980-01-01T00:00:00"",
-                            ""ExpirationDateTime"": ""2035-01-01T00:00:00"",
-                            ""Exception"": false,
-                            ""DayLevelCapacity"": []
-                        }
-                    ]
+                    ""DayLevelScope"": []
                 }
             ]
         }
diff --git a/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test12/output/1.json b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test12/output/1.json
index 514546dd6..5c4e628ba 100644
--- a/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test12/output/1.json
+++ b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test12/output/1.json
@@ -1,18 +1,43 @@
 {
     ""TimeIntervalUtilization"": [
         {
-            ""TotalCapacity"": 10,
-            ""RemainingCapacity"": 10,
+            ""ScheduledAppointments"": 1,
             ""ResourceUnitId"": ""CAPACITY_TEST_12"",
             ""AppointmentDate"": ""2034-01-04""
         }
     ],
-    ""DayLevelUtilization"": [],
-    ""FacilityLevelUtilization"": [],
-    ""Schedule"": [],
+    ""DayLevelUtilization"": [
+        {
+            ""ScheduledAppointments"": 1,
+            ""AppointmentDate"": ""2034-01-04"",
+            ""ResourceUnitId"": ""CAPACITY_TEST_12"",
+            ""WeekDayId"": ""3""
+        }
+    ],
+    ""FacilityLevelUtilization"": [
+        {
+            ""ScheduledAppointments"": 1,
+            ""AppointmentDate"": ""2034-01-04"",
+            ""WeekDayId"": ""3""
+        }
+    ],
+    ""Schedule"": [
+        {
+            ""StartDateTime"": ""2034-01-04T12:00:00"",
+            ""EndDateTime"": ""2034-01-04T13:00:00"",
+            ""ScheduleResources"": [
+                {
+                    ""ResourceGroupName"": ""CAPACITY_TEST_12"",
+                    ""ResourceName"": ""CAPACITY_TEST_12""
+                }
+            ]
+        }
+    ],
     ""Appointment"": [
         {
-            ""AppointmentSchedules"": []
+            ""AppointmentSchedules"": [
+                {}
+            ]
         }
     ]
 }
diff --git a/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test13/config/breakdown.json b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test13/config/cleanup.json
similarity index 100%
rename from src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test13/config/breakdown.json
rename to src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test13/config/cleanup.json
diff --git a/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test13/output/1.json b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test13/output/1.json
index c280c1786..17c22bcc5 100644
--- a/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test13/output/1.json
+++ b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test13/output/1.json
@@ -1,20 +1,13 @@
 {
     ""TimeIntervalUtilization"": [
         {
-            ""TotalCapacity"": 10,
-            ""RemainingCapacity"": 10,
-            ""MaxLiveLoadCpty"": 0,
-            ""RemainingLiveLoadCpty"": 0,
-            ""MaxLiveUnloadCpty"": null,
-            ""RemainingLiveUnloadCpty"": null,
-            ""MaxDropEmptyCpty"": null,
-            ""RemainingDropEmptyCpty"": null,
-            ""MaxDropUnloadCpty"": null,
-            ""RemainingDropUnloadCpty"": null,
-            ""MaxPickupEmptyCpty"": null,
-            ""RemainingPickupEmptyCpty"": null,
-            ""MaxPickupLoadCpty"": null,
-            ""RemainingPickupLoadCpty"": null,
+            ""ScheduledAppointments"": 0,
+            ""ScheduledLiveLoadAppts"": 0,
+            ""ScheduledLiveUnloadAppts"": 0,
+            ""ScheduledDropEmptyAppts"": 0,
+            ""ScheduledDropUnloadAppts"": 0,
+            ""ScheduledPickupEmptyAppts"": 0,
+            ""ScheduledPickupLoadAppts"": 0,
             ""ResourceUnitId"": ""CAPACITY_TEST_13"",
             ""AppointmentDate"": ""2034-01-04""
         }
diff --git a/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test2/config/breakdown.json b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test14/config/cleanup.json
similarity index 100%
rename from src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test2/config/breakdown.json
rename to src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test14/config/cleanup.json
diff --git a/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test14/config/facilityId.json b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test14/config/facilityId.json
new file mode 100644
index 000000000..83165797f
--- /dev/null
+++ b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test14/config/facilityId.json
@@ -0,0 +1,3 @@
+{
+    ""FacilityId"": ""01""
+}
diff --git a/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test14/description.txt b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test14/description.txt
new file mode 100644
index 000000000..86a5f6c16
--- /dev/null
+++ b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test14/description.txt
@@ -0,0 +1 @@
+An exception time interval scope with 0 capacity should overwrite the default scope, preventing the appointment from being created
diff --git a/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test14/input/1.json b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test14/input/1.json
new file mode 100644
index 000000000..cc0ae0ff6
--- /dev/null
+++ b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test14/input/1.json
@@ -0,0 +1,78 @@
+{
+    ""TimeIntervalDefinition"": [
+        {
+            ""TimeIntervalDefinitionId"": ""Wednesday0_24"",
+            ""StartTimeHours"": 0,
+            ""StartTimeMinutes"": 0,
+            ""EndTimeHours"": 24,
+            ""EndTimeMinutes"": 0,
+            ""TimeIntervalLength"": 60,
+            ""Wednesday"": true
+        }
+    ],
+    ""ResourceGroup"": [
+        {
+            ""ResourceGroupName"": ""CAPACITY_TEST_14"",
+            ""ResourceUnit"": [
+                {
+                    ""ResourceId"": ""CAPACITY_TEST_14"",
+                    ""TimeIntervalScope"" : [
+                        {
+                            ""EffectiveDateTime"": ""1980-01-01T00:00:00"",
+                            ""ExpirationDateTime"": ""2035-01-01T00:00:00"",
+                            ""Exception"": false,
+                            ""TimeIntervalCapacity"": [
+                                {
+                                    ""TimeIntervalDefinition"": ""Wednesday0_24"",
+                                    ""MaxAppointments"": 10,
+                                    ""MaxLiveUnloadAppointments"": 10
+                                }
+                            ]
+                        },
+                        {
+                            ""EffectiveDateTime"": ""2034-01-04T00:00:00"",
+                            ""ExpirationDateTime"": ""2034-01-04T23:59:59"",
+                            ""Exception"": true,
+                            ""TimeIntervalCapacity"": [
+                                {
+                                    ""TimeIntervalDefinition"": ""Wednesday0_24"",
+                                    ""MaxAppointments"": 0,
+                                    ""MaxLiveUnloadAppointments"": 10
+                                }
+                            ]
+                        }
+                    ],
+                    ""DayLevelScope"": [
+                        {
+                            ""EffectiveDateTime"": ""1980-01-01T00:00:00"",
+                            ""ExpirationDateTime"": ""2035-01-01T00:00:00"",
+                            ""Exception"": false,
+                            ""DayLevelCapacity"": [
+                                {
+                                    ""DaysOfWeekId"": ""All"",
+                                    ""CapacityConstraintTypeId"": ""NUMBER_OF_APPOINTMENTS"",
+                                    ""Capacity"": 10,
+                                    ""CapacityConstraintAttribute"": null
+                                }
+                            ]
+                        }
+                    ]
+                }
+            ]
+        }
+    ],
+    ""FacilityDayLevelScope"": [
+        {
+            ""EffectiveDateTime"": ""1980-01-01T00:00:00"",
+            ""ExpirationDateTime"": ""2035-01-01T00:00:00"",
+            ""Exception"": false,
+            ""FacilityDayLevelCapacity"": [
+                {
+                    ""CapacityConstraintTypeId"": ""NUMBER_OF_APPOINTMENTS"",
+                    ""Capacity"": 10,
+                    ""DaysOfWeekId"": ""All""
+                }
+            ]
+        }
+    ]
+}
diff --git a/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test14/input/appointment.json b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test14/input/appointment.json
new file mode 100644
index 000000000..40b51bfa3
--- /dev/null
+++ b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test14/input/appointment.json
@@ -0,0 +1,17 @@
+{
+  ""Appointment"": [
+    {
+      ""Duration"": ""60"",
+      ""AppointmentStatusId"": ""1000"",
+      ""ArrivalDateTime"": ""2034-01-04T12:00:00"",
+      ""PreferredDateTime"":  ""2034-01-04T12:00:00"",
+      ""AppointmentTypeId"": ""LIVE_UNLOAD"",
+      ""Resources"": [
+        {
+          ""GroupName"": ""CAPACITY_TEST_14"",
+          ""ResourceName"": ""CAPACITY_TEST_14""
+        }
+      ]
+    }
+  ]
+}
diff --git a/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test14/output/1.json b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test14/output/1.json
new file mode 100644
index 000000000..0a4e80dcf
--- /dev/null
+++ b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test14/output/1.json
@@ -0,0 +1,17 @@
+{
+    ""TimeIntervalUtilization"": [
+        {
+            ""ScheduledAppointments"": 0,
+            ""ResourceUnitId"": ""CAPACITY_TEST_14"",
+            ""AppointmentDate"": ""2034-01-04""
+        }
+    ],
+    ""DayLevelUtilization"": [],
+    ""FacilityLevelUtilization"": [],
+    ""Schedule"": [],
+    ""Appointment"": [
+        {
+            ""AppointmentSchedules"": []
+        }
+    ]
+}
diff --git a/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test3/config/breakdown.json b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test15/config/cleanup.json
similarity index 100%
rename from src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test3/config/breakdown.json
rename to src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test15/config/cleanup.json
diff --git a/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test15/config/facilityId.json b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test15/config/facilityId.json
new file mode 100644
index 000000000..83165797f
--- /dev/null
+++ b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test15/config/facilityId.json
@@ -0,0 +1,3 @@
+{
+    ""FacilityId"": ""01""
+}
diff --git a/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test15/description.txt b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test15/description.txt
new file mode 100644
index 000000000..0c2503144
--- /dev/null
+++ b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test15/description.txt
@@ -0,0 +1 @@
+An exception day level scope with 0 capacity should overwrite the default scope, preventing the appointment from being created
diff --git a/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test15/input/1.json b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test15/input/1.json
new file mode 100644
index 000000000..2da384759
--- /dev/null
+++ b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test15/input/1.json
@@ -0,0 +1,79 @@
+{
+    ""TimeIntervalDefinition"": [
+        {
+            ""TimeIntervalDefinitionId"": ""Wednesday0_24"",
+            ""StartTimeHours"": 0,
+            ""StartTimeMinutes"": 0,
+            ""EndTimeHours"": 24,
+            ""EndTimeMinutes"": 0,
+            ""TimeIntervalLength"": 60,
+            ""Wednesday"": true
+        }
+    ],
+    ""ResourceGroup"": [
+        {
+            ""ResourceGroupName"": ""CAPACITY_TEST_15"",
+            ""ResourceUnit"": [
+                {
+                    ""ResourceId"": ""CAPACITY_TEST_15"",
+                    ""TimeIntervalScope"" : [
+                        {
+                            ""EffectiveDateTime"": ""1980-01-01T00:00:00"",
+                            ""ExpirationDateTime"": ""2035-01-01T00:00:00"",
+                            ""Exception"": false,
+                            ""TimeIntervalCapacity"": [
+                                {
+                                    ""TimeIntervalDefinition"": ""Wednesday0_24"",
+                                    ""MaxAppointments"": 10,
+                                    ""MaxLiveUnloadAppointments"": 10
+                                }
+                            ]
+                        }
+                    ],
+                    ""DayLevelScope"": [
+                        {
+                            ""EffectiveDateTime"": ""1980-01-01T00:00:00"",
+                            ""ExpirationDateTime"": ""2035-01-01T00:00:00"",
+                            ""Exception"": false,
+                            ""DayLevelCapacity"": [
+                                {
+                                    ""DaysOfWeekId"": ""All"",
+                                    ""CapacityConstraintTypeId"": ""NUMBER_OF_APPOINTMENTS"",
+                                    ""Capacity"": 10,
+                                    ""CapacityConstraintAttribute"": null
+                                }
+                            ]
+                        },
+                        {
+                            ""EffectiveDateTime"": ""2034-01-04T00:00:00"",
+                            ""ExpirationDateTime"": ""2034-01-04T23:59:59"",
+                            ""Exception"": true,
+                            ""DayLevelCapacity"": [
+                                {
+                                    ""DaysOfWeekId"": ""All"",
+                                    ""CapacityConstraintTypeId"": ""NUMBER_OF_APPOINTMENTS"",
+                                    ""Capacity"": 0,
+                                    ""CapacityConstraintAttribute"": null
+                                }
+                            ]
+                        }
+                    ]
+                }
+            ]
+        }
+    ],
+    ""FacilityDayLevelScope"": [
+        {
+            ""EffectiveDateTime"": ""1980-01-01T00:00:00"",
+            ""ExpirationDateTime"": ""2035-01-01T00:00:00"",
+            ""Exception"": false,
+            ""FacilityDayLevelCapacity"": [
+                {
+                    ""CapacityConstraintTypeId"": ""NUMBER_OF_APPOINTMENTS"",
+                    ""Capacity"": 10,
+                    ""DaysOfWeekId"": ""All""
+                }
+            ]
+        }
+    ]
+}
diff --git a/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test15/input/appointment.json b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test15/input/appointment.json
new file mode 100644
index 000000000..82210a683
--- /dev/null
+++ b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test15/input/appointment.json
@@ -0,0 +1,17 @@
+{
+  ""Appointment"": [
+    {
+      ""Duration"": ""60"",
+      ""AppointmentStatusId"": ""1000"",
+      ""ArrivalDateTime"": ""2034-01-04T12:00:00"",
+      ""PreferredDateTime"":  ""2034-01-04T12:00:00"",
+      ""AppointmentTypeId"": ""LIVE_UNLOAD"",
+      ""Resources"": [
+        {
+          ""GroupName"": ""CAPACITY_TEST_15"",
+          ""ResourceName"": ""CAPACITY_TEST_15""
+        }
+      ]
+    }
+  ]
+}
diff --git a/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test15/output/1.json b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test15/output/1.json
new file mode 100644
index 000000000..7902cc398
--- /dev/null
+++ b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test15/output/1.json
@@ -0,0 +1,24 @@
+{
+    ""TimeIntervalUtilization"": [
+        {
+            ""ScheduledAppointments"": 0,
+            ""ResourceUnitId"": ""CAPACITY_TEST_15"",
+            ""AppointmentDate"": ""2034-01-04""
+        }
+    ],
+    ""DayLevelUtilization"": [
+        {
+            ""ScheduledAppointments"": 0,
+            ""ResourceUnitId"": ""CAPACITY_TEST_15"",
+            ""AppointmentDate"": ""2034-01-04"",
+            ""WeekDayId"": ""3""
+        }
+    ],
+    ""FacilityLevelUtilization"": [],
+    ""Schedule"": [],
+    ""Appointment"": [
+        {
+            ""AppointmentSchedules"": []
+        }
+    ]
+}
diff --git a/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test4/config/breakdown.json b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test16/config/cleanup.json
similarity index 100%
rename from src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test4/config/breakdown.json
rename to src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test16/config/cleanup.json
diff --git a/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test16/config/facilityId.json b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test16/config/facilityId.json
new file mode 100644
index 000000000..83165797f
--- /dev/null
+++ b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test16/config/facilityId.json
@@ -0,0 +1,3 @@
+{
+    ""FacilityId"": ""01""
+}
diff --git a/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test16/description.txt b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test16/description.txt
new file mode 100644
index 000000000..024377964
--- /dev/null
+++ b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test16/description.txt
@@ -0,0 +1 @@
+An exception facility level scope with 0 capacity should overwrite the default scope, preventing the appointment from being created
diff --git a/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test16/input/1.json b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test16/input/1.json
new file mode 100644
index 000000000..01e87f25f
--- /dev/null
+++ b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test16/input/1.json
@@ -0,0 +1,78 @@
+{
+    ""TimeIntervalDefinition"": [
+        {
+            ""TimeIntervalDefinitionId"": ""Wednesday0_24"",
+            ""StartTimeHours"": 0,
+            ""StartTimeMinutes"": 0,
+            ""EndTimeHours"": 24,
+            ""EndTimeMinutes"": 0,
+            ""TimeIntervalLength"": 60,
+            ""Wednesday"": true
+        }
+    ],
+    ""ResourceGroup"": [
+        {
+            ""ResourceGroupName"": ""CAPACITY_TEST_16"",
+            ""ResourceUnit"": [
+                {
+                    ""ResourceId"": ""CAPACITY_TEST_16"",
+                    ""TimeIntervalScope"" : [
+                        {
+                            ""EffectiveDateTime"": ""1980-01-01T00:00:00"",
+                            ""ExpirationDateTime"": ""2035-01-01T00:00:00"",
+                            ""Exception"": false,
+                            ""TimeIntervalCapacity"": [
+                                {
+                                    ""TimeIntervalDefinition"": ""Wednesday0_24"",
+                                    ""MaxAppointments"": 10,
+                                    ""MaxLiveUnloadAppointments"": 10
+                                }
+                            ]
+                        }
+                    ],
+                    ""DayLevelScope"": [
+                        {
+                            ""EffectiveDateTime"": ""1980-01-01T00:00:00"",
+                            ""ExpirationDateTime"": ""2035-01-01T00:00:00"",
+                            ""Exception"": false,
+                            ""DayLevelCapacity"": [
+                                {
+                                    ""DaysOfWeekId"": ""All"",
+                                    ""CapacityConstraintTypeId"": ""NUMBER_OF_APPOINTMENTS"",
+                                    ""Capacity"": 10,
+                                    ""CapacityConstraintAttribute"": null
+                                }
+                            ]
+                        }
+                    ]
+                }
+            ]
+        }
+    ],
+    ""FacilityDayLevelScope"": [
+        {
+            ""EffectiveDateTime"": ""1980-01-01T00:00:00"",
+            ""ExpirationDateTime"": ""2035-01-01T00:00:00"",
+            ""Exception"": false,
+            ""FacilityDayLevelCapacity"": [
+                {
+                    ""CapacityConstraintTypeId"": ""NUMBER_OF_APPOINTMENTS"",
+                    ""Capacity"": 10,
+                    ""DaysOfWeekId"": ""All""
+                }
+            ]
+        },
+        {
+            ""EffectiveDateTime"": ""2034-01-04T00:00:00"",
+            ""ExpirationDateTime"": ""2034-01-04T23:59:59"",
+            ""Exception"": true,
+            ""FacilityDayLevelCapacity"": [
+                {
+                    ""CapacityConstraintTypeId"": ""NUMBER_OF_APPOINTMENTS"",
+                    ""Capacity"": 0,
+                    ""DaysOfWeekId"": ""All""
+                }
+            ]
+        }
+    ]
+}
diff --git a/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test16/input/appointment.json b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test16/input/appointment.json
new file mode 100644
index 000000000..6de4a1e61
--- /dev/null
+++ b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test16/input/appointment.json
@@ -0,0 +1,17 @@
+{
+  ""Appointment"": [
+    {
+      ""Duration"": ""60"",
+      ""AppointmentStatusId"": ""1000"",
+      ""ArrivalDateTime"": ""2034-01-04T12:00:00"",
+      ""PreferredDateTime"":  ""2034-01-04T12:00:00"",
+      ""AppointmentTypeId"": ""LIVE_UNLOAD"",
+      ""Resources"": [
+        {
+          ""GroupName"": ""CAPACITY_TEST_16"",
+          ""ResourceName"": ""CAPACITY_TEST_16""
+        }
+      ]
+    }
+  ]
+}
diff --git a/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test16/output/1.json b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test16/output/1.json
new file mode 100644
index 000000000..6d2299f1d
--- /dev/null
+++ b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test16/output/1.json
@@ -0,0 +1,30 @@
+{
+    ""TimeIntervalUtilization"": [
+        {
+            ""ScheduledAppointments"": 0,
+            ""ResourceUnitId"": ""CAPACITY_TEST_16"",
+            ""AppointmentDate"": ""2034-01-04""
+        }
+    ],
+    ""DayLevelUtilization"": [
+        {
+            ""ScheduledAppointments"": 0,
+            ""ResourceUnitId"": ""CAPACITY_TEST_16"",
+            ""AppointmentDate"": ""2034-01-04"",
+            ""WeekDayId"": ""3""
+        }
+    ],
+    ""FacilityLevelUtilization"": [
+        {
+            ""ScheduledAppointments"": 0,
+            ""AppointmentDate"": ""2034-01-04"",
+            ""WeekDayId"": ""3""
+        }
+    ],
+    ""Schedule"": [],
+    ""Appointment"": [
+        {
+            ""AppointmentSchedules"": []
+        }
+    ]
+}
diff --git a/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test5/config/breakdown.json b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test17/config/cleanup.json
similarity index 100%
rename from src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test5/config/breakdown.json
rename to src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test17/config/cleanup.json
diff --git a/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test17/config/facilityId.json b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test17/config/facilityId.json
new file mode 100644
index 000000000..83165797f
--- /dev/null
+++ b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test17/config/facilityId.json
@@ -0,0 +1,3 @@
+{
+    ""FacilityId"": ""01""
+}
diff --git a/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test17/description.txt b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test17/description.txt
new file mode 100644
index 000000000..7f963ab83
--- /dev/null
+++ b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test17/description.txt
@@ -0,0 +1,3 @@
+The time interval capacity should be ignored and overridden with the specific time interval capacity. Only one drop empty
+appointment should be scheduled since there is a max of 1 and the drop empty should be scheduled because the specific
+time interval capacity has a max of 1.
diff --git a/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test17/input/1.json b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test17/input/1.json
new file mode 100644
index 000000000..2676fff05
--- /dev/null
+++ b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test17/input/1.json
@@ -0,0 +1,76 @@
+{
+    ""TimeIntervalDefinition"": [
+        {
+            ""TimeIntervalDefinitionId"": ""Wednesday0_24"",
+            ""StartTimeHours"": 0,
+            ""StartTimeMinutes"": 0,
+            ""EndTimeHours"": 24,
+            ""EndTimeMinutes"": 0,
+            ""TimeIntervalLength"": 60,
+            ""Wednesday"": true
+        }
+    ],
+    ""ResourceGroup"": [
+        {
+            ""ResourceGroupName"": ""CAPACITY_TEST_17"",
+            ""ResourceUnit"": [
+                {
+                    ""ResourceId"": ""CAPACITY_TEST_17"",
+                    ""TimeIntervalScope"" : [
+                        {
+                            ""EffectiveDateTime"": ""1980-01-01T00:00:00"",
+                            ""ExpirationDateTime"": ""2035-01-01T00:00:00"",
+                            ""TimeIntervalCapacity"": [
+                                {
+                                    ""TimeIntervalDefinition"": ""Wednesday0_24"",
+                                    ""MaxAppointments"": 10,
+                                    ""MaxLiveLoadAppointments"": 10,
+                                    ""MaxDropEmptyAppointments"": 0
+                                }
+                            ],
+                            ""SpecificTimeIntervalsCapacity"": [
+                                {
+                                    ""DaysOfWeekId"": 3,
+                                    ""StartTimeHours"": 12,
+                                    ""StartTimeMinutes"": 0,
+                                    ""MaxAppointments"": 10,
+                                    ""MaxLiveLoadAppointments"": 1,
+                                    ""MaxDropEmptyAppointments"": 1
+                                }
+                            ]
+                        }
+                    ],
+                    ""DayLevelScope"": [
+                        {
+                            ""EffectiveDateTime"": ""1980-01-01T00:00:00"",
+                            ""ExpirationDateTime"": ""2035-01-01T00:00:00"",
+                            ""Exception"": false,
+                            ""DayLevelCapacity"": [
+                                {
+                                    ""DaysOfWeekId"": ""All"",
+                                    ""CapacityConstraintTypeId"": ""NUMBER_OF_APPOINTMENTS"",
+                                    ""Capacity"": 10,
+                                    ""CapacityConstraintAttribute"": null
+                                }
+                            ]
+                        }
+                    ]
+                }
+            ]
+        }
+    ],
+    ""FacilityDayLevelScope"": [
+        {
+            ""EffectiveDateTime"": ""1980-01-01T00:00:00"",
+            ""ExpirationDateTime"": ""2035-01-01T00:00:00"",
+            ""Exception"": false,
+            ""FacilityDayLevelCapacity"": [
+                {
+                    ""CapacityConstraintTypeId"": ""NUMBER_OF_APPOINTMENTS"",
+                    ""Capacity"": 10,
+                    ""DaysOfWeekId"": ""All""
+                }
+            ]
+        }
+    ]
+}
diff --git a/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test17/input/appointment.json b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test17/input/appointment.json
new file mode 100644
index 000000000..694fb7fa4
--- /dev/null
+++ b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test17/input/appointment.json
@@ -0,0 +1,43 @@
+{
+  ""Appointment"": [
+    {
+      ""Duration"": ""60"",
+      ""AppointmentStatusId"": ""1000"",
+      ""ArrivalDateTime"": ""2034-01-04T12:00:00"",
+      ""PreferredDateTime"":  ""2034-01-04T12:00:00"",
+      ""AppointmentTypeId"": ""LIVE_LOAD"",
+      ""Resources"": [
+        {
+          ""GroupName"": ""CAPACITY_TEST_17"",
+          ""ResourceName"": ""CAPACITY_TEST_17""
+        }
+      ]
+    },
+    {
+      ""Duration"": ""60"",
+      ""AppointmentStatusId"": ""1000"",
+      ""ArrivalDateTime"": ""2034-01-04T12:00:00"",
+      ""PreferredDateTime"":  ""2034-01-04T12:00:00"",
+      ""AppointmentTypeId"": ""LIVE_LOAD"",
+      ""Resources"": [
+        {
+          ""GroupName"": ""CAPACITY_TEST_17"",
+          ""ResourceName"": ""CAPACITY_TEST_17""
+        }
+      ]
+    },
+    {
+      ""Duration"": ""60"",
+      ""AppointmentStatusId"": ""1000"",
+      ""ArrivalDateTime"": ""2034-01-04T12:00:00"",
+      ""PreferredDateTime"":  ""2034-01-04T12:00:00"",
+      ""AppointmentTypeId"": ""DROP_EMPTY"",
+      ""Resources"": [
+        {
+          ""GroupName"": ""CAPACITY_TEST_17"",
+          ""ResourceName"": ""CAPACITY_TEST_17""
+        }
+      ]
+    }
+  ]
+}
diff --git a/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test17/output/1.json b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test17/output/1.json
new file mode 100644
index 000000000..b323168a0
--- /dev/null
+++ b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test17/output/1.json
@@ -0,0 +1,64 @@
+{
+    ""TimeIntervalUtilization"": [
+        {
+            ""ScheduledAppointments"": 2,
+            ""ResourceUnitId"": ""CAPACITY_TEST_17"",
+            ""AppointmentDate"": ""2034-01-04""
+        }
+    ],
+    ""DayLevelUtilization"": [
+        {
+            ""ScheduledAppointments"": 2,
+            ""ResourceUnitId"": ""CAPACITY_TEST_17"",
+            ""AppointmentDate"": ""2034-01-04"",
+            ""WeekDayId"": ""3""
+        }
+    ],
+    ""FacilityLevelUtilization"": [
+        {
+            ""ScheduledAppointments"": 2,
+            ""AppointmentDate"": ""2034-01-04"",
+            ""WeekDayId"": ""3""
+        }
+    ],
+    ""Schedule"": [
+        {
+            ""StartDateTime"": ""2034-01-04T12:00:00"",
+            ""EndDateTime"": ""2034-01-04T13:00:00"",
+            ""ScheduleResources"": [
+                {
+                    ""ResourceGroupName"": ""CAPACITY_TEST_17"",
+                    ""ResourceName"": ""CAPACITY_TEST_17""
+                }
+            ]
+        },
+        {
+            ""StartDateTime"": ""2034-01-04T12:00:00"",
+            ""EndDateTime"": ""2034-01-04T13:00:00"",
+            ""ScheduleResources"": [
+                {
+                    ""ResourceGroupName"": ""CAPACITY_TEST_17"",
+                    ""ResourceName"": ""CAPACITY_TEST_17""
+                }
+            ]
+        }
+    ],
+    ""Appointment"": [
+        {
+            ""AppointmentTypeId"": ""LIVE_LOAD"",
+            ""AppointmentSchedules"": [
+                {}
+            ]
+        },
+        {
+            ""AppointmentTypeId"": ""LIVE_LOAD"",
+            ""AppointmentSchedules"": []
+        },
+        {
+            ""AppointmentTypeId"": ""DROP_EMPTY"",
+            ""AppointmentSchedules"": [
+                {}
+            ]
+        }
+    ]
+}
diff --git a/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test6/config/breakdown.json b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test18/config/cleanup.json
similarity index 100%
rename from src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test6/config/breakdown.json
rename to src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test18/config/cleanup.json
diff --git a/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test18/config/facilityId.json b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test18/config/facilityId.json
new file mode 100644
index 000000000..83165797f
--- /dev/null
+++ b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test18/config/facilityId.json
@@ -0,0 +1,3 @@
+{
+    ""FacilityId"": ""01""
+}
diff --git a/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test18/description.txt b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test18/description.txt
new file mode 100644
index 000000000..2068e6c81
--- /dev/null
+++ b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test18/description.txt
@@ -0,0 +1,4 @@
+This test is just to make sure the system can find the right specific time interval capacity. All the invalid capacities
+have a capacity greater than 0, but the only one that applies has an appointment type capacity of 0 across the board.
+
+Basically, they should all get rejected.
diff --git a/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test18/input/1.json b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test18/input/1.json
new file mode 100644
index 000000000..eacf0b13b
--- /dev/null
+++ b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test18/input/1.json
@@ -0,0 +1,110 @@
+{
+    ""TimeIntervalDefinition"": [
+        {
+            ""TimeIntervalDefinitionId"": ""Wednesday0_24"",
+            ""StartTimeHours"": 0,
+            ""StartTimeMinutes"": 0,
+            ""EndTimeHours"": 24,
+            ""EndTimeMinutes"": 0,
+            ""TimeIntervalLength"": 60,
+            ""Wednesday"": true
+        }
+    ],
+    ""ResourceGroup"": [
+        {
+            ""ResourceGroupName"": ""CAPACITY_TEST_18"",
+            ""ResourceUnit"": [
+                {
+                    ""ResourceId"": ""CAPACITY_TEST_18"",
+                    ""TimeIntervalScope"" : [
+                        {
+                            ""EffectiveDateTime"": ""1980-01-01T00:00:00"",
+                            ""ExpirationDateTime"": ""2035-01-01T00:00:00"",
+                            ""TimeIntervalCapacity"": [
+                                {
+                                    ""TimeIntervalDefinition"": ""Wednesday0_24"",
+                                    ""MaxAppointments"": 10,
+                                    ""MaxPickupLoadAppointments"": 10,
+                                    ""MaxDropUnloadAppointments"": 10,
+                                    ""MaxPickupEmptyAppointments"": 10,
+                                    ""MaxLiveUnloadAppointments"": 10
+                                }
+                            ],
+                            ""SpecificTimeIntervalsCapacity"": [
+                                {
+                                    ""DaysOfWeekId"": 4,
+                                    ""StartTimeHours"": 12,
+                                    ""StartTimeMinutes"": 0,
+                                    ""MaxAppointments"": 10,
+                                    ""MaxPickupLoadAppointments"": 10,
+                                    ""MaxDropUnloadAppointments"": 10,
+                                    ""MaxPickupEmptyAppointments"": 10,
+                                    ""MaxLiveUnloadAppointments"": 10
+                                },
+                                {
+                                    ""DaysOfWeekId"": 3,
+                                    ""StartTimeHours"": 10,
+                                    ""StartTimeMinutes"": 0,
+                                    ""MaxAppointments"": 10,
+                                    ""MaxPickupLoadAppointments"": 10,
+                                    ""MaxDropUnloadAppointments"": 10,
+                                    ""MaxPickupEmptyAppointments"": 10,
+                                    ""MaxLiveUnloadAppointments"": 10
+                                },
+                                {
+                                    ""DaysOfWeekId"": 3,
+                                    ""StartTimeHours"": 13,
+                                    ""StartTimeMinutes"": 0,
+                                    ""MaxAppointments"": 10,
+                                    ""MaxPickupLoadAppointments"": 10,
+                                    ""MaxDropUnloadAppointments"": 10,
+                                    ""MaxPickupEmptyAppointments"": 10,
+                                    ""MaxLiveUnloadAppointments"": 10
+                                },
+                                {
+                                    ""DaysOfWeekId"": 3,
+                                    ""StartTimeHours"": 12,
+                                    ""StartTimeMinutes"": 30,
+                                    ""MaxAppointments"": 10,
+                                    ""MaxPickupLoadAppointments"": 0,
+                                    ""MaxDropUnloadAppointments"": 0,
+                                    ""MaxPickupEmptyAppointments"": 0,
+                                    ""MaxLiveUnloadAppointments"": 0
+                                }
+                            ]
+                        }
+                    ],
+                    ""DayLevelScope"": [
+                        {
+                            ""EffectiveDateTime"": ""1980-01-01T00:00:00"",
+                            ""ExpirationDateTime"": ""2035-01-01T00:00:00"",
+                            ""Exception"": false,
+                            ""DayLevelCapacity"": [
+                                {
+                                    ""DaysOfWeekId"": ""All"",
+                                    ""CapacityConstraintTypeId"": ""NUMBER_OF_APPOINTMENTS"",
+                                    ""Capacity"": 10,
+                                    ""CapacityConstraintAttribute"": null
+                                }
+                            ]
+                        }
+                    ]
+                }
+            ]
+        }
+    ],
+    ""FacilityDayLevelScope"": [
+        {
+            ""EffectiveDateTime"": ""1980-01-01T00:00:00"",
+            ""ExpirationDateTime"": ""2035-01-01T00:00:00"",
+            ""Exception"": false,
+            ""FacilityDayLevelCapacity"": [
+                {
+                    ""CapacityConstraintTypeId"": ""NUMBER_OF_APPOINTMENTS"",
+                    ""Capacity"": 10,
+                    ""DaysOfWeekId"": ""All""
+                }
+            ]
+        }
+    ]
+}
diff --git a/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test18/input/appointment.json b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test18/input/appointment.json
new file mode 100644
index 000000000..d4c215572
--- /dev/null
+++ b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test18/input/appointment.json
@@ -0,0 +1,56 @@
+{
+  ""Appointment"": [
+    {
+      ""Duration"": ""60"",
+      ""AppointmentStatusId"": ""1000"",
+      ""ArrivalDateTime"": ""2034-01-04T12:00:00"",
+      ""PreferredDateTime"":  ""2034-01-04T12:00:00"",
+      ""AppointmentTypeId"": ""PICKUP_LOAD"",
+      ""Resources"": [
+        {
+          ""GroupName"": ""CAPACITY_TEST_18"",
+          ""ResourceName"": ""CAPACITY_TEST_18""
+        }
+      ]
+    },
+    {
+      ""Duration"": ""60"",
+      ""AppointmentStatusId"": ""1000"",
+      ""ArrivalDateTime"": ""2034-01-04T12:00:00"",
+      ""PreferredDateTime"":  ""2034-01-04T12:00:00"",
+      ""AppointmentTypeId"": ""DROP_UNLOAD"",
+      ""Resources"": [
+        {
+          ""GroupName"": ""CAPACITY_TEST_18"",
+          ""ResourceName"": ""CAPACITY_TEST_18""
+        }
+      ]
+    },
+    {
+      ""Duration"": ""60"",
+      ""AppointmentStatusId"": ""1000"",
+      ""ArrivalDateTime"": ""2034-01-04T12:00:00"",
+      ""PreferredDateTime"":  ""2034-01-04T12:00:00"",
+      ""AppointmentTypeId"": ""PICKUP_EMPTY"",
+      ""Resources"": [
+        {
+          ""GroupName"": ""CAPACITY_TEST_18"",
+          ""ResourceName"": ""CAPACITY_TEST_18""
+        }
+      ]
+    },
+    {
+      ""Duration"": ""60"",
+      ""AppointmentStatusId"": ""1000"",
+      ""ArrivalDateTime"": ""2034-01-04T12:00:00"",
+      ""PreferredDateTime"":  ""2034-01-04T12:00:00"",
+      ""AppointmentTypeId"": ""LIVE_UNLOAD"",
+      ""Resources"": [
+        {
+          ""GroupName"": ""CAPACITY_TEST_18"",
+          ""ResourceName"": ""CAPACITY_TEST_18""
+        }
+      ]
+    }
+  ]
+}
diff --git a/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test18/output/1.json b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test18/output/1.json
new file mode 100644
index 000000000..a87da46c6
--- /dev/null
+++ b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test18/output/1.json
@@ -0,0 +1,30 @@
+{
+    ""TimeIntervalUtilization"": [
+        {
+            ""ScheduledAppointments"": 0,
+            ""ResourceUnitId"": ""CAPACITY_TEST_18"",
+            ""AppointmentDate"": ""2034-01-04""
+        }
+    ],
+    ""DayLevelUtilization"": [],
+    ""FacilityLevelUtilization"": [],
+    ""Schedule"": [],
+    ""Appointment"": [
+        {
+            ""AppointmentTypeId"": ""PICKUP_LOAD"",
+            ""AppointmentSchedules"": []
+        },
+        {
+            ""AppointmentTypeId"": ""DROP_UNLOAD"",
+            ""AppointmentSchedules"": []
+        },
+        {
+            ""AppointmentTypeId"": ""PICKUP_EMPTY"",
+            ""AppointmentSchedules"": []
+        },
+        {
+            ""AppointmentTypeId"": ""LIVE_UNLOAD"",
+            ""AppointmentSchedules"": []
+        }
+    ]
+}
diff --git a/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test7/config/breakdown.json b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test19/config/cleanup.json
similarity index 100%
rename from src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test7/config/breakdown.json
rename to src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test19/config/cleanup.json
diff --git a/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test19/config/facilityId.json b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test19/config/facilityId.json
new file mode 100644
index 000000000..83165797f
--- /dev/null
+++ b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test19/config/facilityId.json
@@ -0,0 +1,3 @@
+{
+    ""FacilityId"": ""01""
+}
diff --git a/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test19/description.txt b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test19/description.txt
new file mode 100644
index 000000000..1b850e8d0
--- /dev/null
+++ b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test19/description.txt
@@ -0,0 +1,3 @@
+There is a specific time interval capacity, but all the appointment type capacities are all null, so they should default
+to the default time interval capacity for each appointment type. Only 1 LIVE_LOAD appointment should be scheduled because
+it is the only one with any capacity.
diff --git a/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test19/input/1.json b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test19/input/1.json
new file mode 100644
index 000000000..ced91764a
--- /dev/null
+++ b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test19/input/1.json
@@ -0,0 +1,78 @@
+{
+    ""TimeIntervalDefinition"": [
+        {
+            ""TimeIntervalDefinitionId"": ""Wednesday0_24"",
+            ""StartTimeHours"": 0,
+            ""StartTimeMinutes"": 0,
+            ""EndTimeHours"": 24,
+            ""EndTimeMinutes"": 0,
+            ""TimeIntervalLength"": 60,
+            ""Wednesday"": true
+        }
+    ],
+    ""ResourceGroup"": [
+        {
+            ""ResourceGroupName"": ""CAPACITY_TEST_19"",
+            ""ResourceUnit"": [
+                {
+                    ""ResourceId"": ""CAPACITY_TEST_19"",
+                    ""TimeIntervalScope"" : [
+                        {
+                            ""EffectiveDateTime"": ""1980-01-01T00:00:00"",
+                            ""ExpirationDateTime"": ""2035-01-01T00:00:00"",
+                            ""TimeIntervalCapacity"": [
+                                {
+                                    ""TimeIntervalDefinition"": ""Wednesday0_24"",
+                                    ""MaxAppointments"": 10,
+                                    ""MaxLiveLoadAppointments"": 1,
+                                    ""MaxDropEmptyAppointments"": 0,
+                                    ""MaxPickupLoadAppointments"": 0,
+                                    ""MaxDropUnloadAppointments"": 0,
+                                    ""MaxPickupEmptyAppointments"": 0,
+                                    ""MaxLiveUnloadAppointments"": 0
+                                }
+                            ],
+                            ""SpecificTimeIntervalsCapacity"": [
+                                {
+                                    ""DaysOfWeekId"": 3,
+                                    ""StartTimeHours"": 12,
+                                    ""StartTimeMinutes"": 0,
+                                    ""MaxAppointments"": 10
+                                }
+                            ]
+                        }
+                    ],
+                    ""DayLevelScope"": [
+                        {
+                            ""EffectiveDateTime"": ""1980-01-01T00:00:00"",
+                            ""ExpirationDateTime"": ""2035-01-01T00:00:00"",
+                            ""Exception"": false,
+                            ""DayLevelCapacity"": [
+                                {
+                                    ""DaysOfWeekId"": ""All"",
+                                    ""CapacityConstraintTypeId"": ""NUMBER_OF_APPOINTMENTS"",
+                                    ""Capacity"": 10,
+                                    ""CapacityConstraintAttribute"": null
+                                }
+                            ]
+                        }
+                    ]
+                }
+            ]
+        }
+    ],
+    ""FacilityDayLevelScope"": [
+        {
+            ""EffectiveDateTime"": ""1980-01-01T00:00:00"",
+            ""ExpirationDateTime"": ""2035-01-01T00:00:00"",
+            ""Exception"": false,
+            ""FacilityDayLevelCapacity"": [
+                {
+                    ""CapacityConstraintTypeId"": ""NUMBER_OF_APPOINTMENTS"",
+                    ""Capacity"": 10,
+                    ""DaysOfWeekId"": ""All""
+                }
+            ]
+        }
+    ]
+}
diff --git a/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test19/input/appointment.json b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test19/input/appointment.json
new file mode 100644
index 000000000..892771abd
--- /dev/null
+++ b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test19/input/appointment.json
@@ -0,0 +1,95 @@
+{
+  ""Appointment"": [
+    {
+      ""Duration"": ""60"",
+      ""AppointmentStatusId"": ""1000"",
+      ""ArrivalDateTime"": ""2034-01-04T12:00:00"",
+      ""PreferredDateTime"":  ""2034-01-04T12:00:00"",
+      ""AppointmentTypeId"": ""DROP_EMPTY"",
+      ""Resources"": [
+        {
+          ""GroupName"": ""CAPACITY_TEST_19"",
+          ""ResourceName"": ""CAPACITY_TEST_19""
+        }
+      ]
+    },
+    {
+      ""Duration"": ""60"",
+      ""AppointmentStatusId"": ""1000"",
+      ""ArrivalDateTime"": ""2034-01-04T12:00:00"",
+      ""PreferredDateTime"":  ""2034-01-04T12:00:00"",
+      ""AppointmentTypeId"": ""PICKUP_LOAD"",
+      ""Resources"": [
+        {
+          ""GroupName"": ""CAPACITY_TEST_19"",
+          ""ResourceName"": ""CAPACITY_TEST_19""
+        }
+      ]
+    },
+    {
+      ""Duration"": ""60"",
+      ""AppointmentStatusId"": ""1000"",
+      ""ArrivalDateTime"": ""2034-01-04T12:00:00"",
+      ""PreferredDateTime"":  ""2034-01-04T12:00:00"",
+      ""AppointmentTypeId"": ""DROP_UNLOAD"",
+      ""Resources"": [
+        {
+          ""GroupName"": ""CAPACITY_TEST_19"",
+          ""ResourceName"": ""CAPACITY_TEST_19""
+        }
+      ]
+    },
+    {
+      ""Duration"": ""60"",
+      ""AppointmentStatusId"": ""1000"",
+      ""ArrivalDateTime"": ""2034-01-04T12:00:00"",
+      ""PreferredDateTime"":  ""2034-01-04T12:00:00"",
+      ""AppointmentTypeId"": ""PICKUP_EMPTY"",
+      ""Resources"": [
+        {
+          ""GroupName"": ""CAPACITY_TEST_19"",
+          ""ResourceName"": ""CAPACITY_TEST_19""
+        }
+      ]
+    },
+    {
+      ""Duration"": ""60"",
+      ""AppointmentStatusId"": ""1000"",
+      ""ArrivalDateTime"": ""2034-01-04T12:00:00"",
+      ""PreferredDateTime"":  ""2034-01-04T12:00:00"",
+      ""AppointmentTypeId"": ""LIVE_UNLOAD"",
+      ""Resources"": [
+        {
+          ""GroupName"": ""CAPACITY_TEST_19"",
+          ""ResourceName"": ""CAPACITY_TEST_19""
+        }
+      ]
+    },
+    {
+      ""Duration"": ""60"",
+      ""AppointmentStatusId"": ""1000"",
+      ""ArrivalDateTime"": ""2034-01-04T12:00:00"",
+      ""PreferredDateTime"":  ""2034-01-04T12:00:00"",
+      ""AppointmentTypeId"": ""LIVE_LOAD"",
+      ""Resources"": [
+        {
+          ""GroupName"": ""CAPACITY_TEST_19"",
+          ""ResourceName"": ""CAPACITY_TEST_19""
+        }
+      ]
+    },
+    {
+      ""Duration"": ""60"",
+      ""AppointmentStatusId"": ""1000"",
+      ""ArrivalDateTime"": ""2034-01-04T12:00:00"",
+      ""PreferredDateTime"":  ""2034-01-04T12:00:00"",
+      ""AppointmentTypeId"": ""LIVE_LOAD"",
+      ""Resources"": [
+        {
+          ""GroupName"": ""CAPACITY_TEST_19"",
+          ""ResourceName"": ""CAPACITY_TEST_19""
+        }
+      ]
+    }
+  ]
+}
diff --git a/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test19/output/1.json b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test19/output/1.json
new file mode 100644
index 000000000..bf7e11915
--- /dev/null
+++ b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test19/output/1.json
@@ -0,0 +1,74 @@
+{
+    ""TimeIntervalUtilization"": [
+        {
+            ""ScheduledAppointments"": 1,
+            ""ScheduledLiveLoadAppts"": 1,
+            ""ScheduledLiveUnloadAppts"": 0,
+            ""ScheduledDropEmptyAppts"": 0,
+            ""ScheduledDropUnloadAppts"": 0,
+            ""ScheduledPickupEmptyAppts"": 0,
+            ""ScheduledPickupLoadAppts"": 0,
+            ""ResourceUnitId"": ""CAPACITY_TEST_19"",
+            ""AppointmentDate"": ""2034-01-04""
+        }
+    ],
+    ""DayLevelUtilization"": [
+        {
+            ""ScheduledAppointments"": 1,
+            ""ResourceUnitId"": ""CAPACITY_TEST_19"",
+            ""AppointmentDate"": ""2034-01-04"",
+            ""WeekDayId"": ""3""
+        }
+    ],
+    ""FacilityLevelUtilization"": [
+        {
+            ""ScheduledAppointments"": 1,
+            ""AppointmentDate"": ""2034-01-04"",
+            ""WeekDayId"": ""3""
+        }
+    ],
+    ""Schedule"": [
+        {
+            ""StartDateTime"": ""2034-01-04T12:00:00"",
+            ""EndDateTime"": ""2034-01-04T13:00:00"",
+            ""ScheduleResources"": [
+                {
+                    ""ResourceGroupName"": ""CAPACITY_TEST_19"",
+                    ""ResourceName"": ""CAPACITY_TEST_19""
+                }
+            ]
+        }
+    ],
+    ""Appointment"": [
+        {
+            ""AppointmentTypeId"": ""LIVE_LOAD"",
+            ""AppointmentSchedules"": [
+                {}
+            ]
+        },
+        {
+            ""AppointmentTypeId"": ""LIVE_LOAD"",
+            ""AppointmentSchedules"": []
+        },
+        {
+            ""AppointmentTypeId"": ""DROP_EMPTY"",
+            ""AppointmentSchedules"": []
+        },
+        {
+            ""AppointmentTypeId"": ""PICKUP_LOAD"",
+            ""AppointmentSchedules"": []
+        },
+        {
+            ""AppointmentTypeId"": ""DROP_UNLOAD"",
+            ""AppointmentSchedules"": []
+        },
+        {
+            ""AppointmentTypeId"": ""PICKUP_EMPTY"",
+            ""AppointmentSchedules"": []
+        },
+        {
+            ""AppointmentTypeId"": ""LIVE_UNLOAD"",
+            ""AppointmentSchedules"": []
+        }
+    ]
+}
diff --git a/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test8/config/breakdown.json b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test2/config/cleanup.json
similarity index 100%
rename from src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test8/config/breakdown.json
rename to src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test2/config/cleanup.json
diff --git a/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test2/input/1.json b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test2/input/1.json
index 89c20be0d..9f4a7f57d 100644
--- a/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test2/input/1.json
+++ b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test2/input/1.json
@@ -63,8 +63,7 @@
     ],
     ""FacilityLevelUtilization"": [
         {
-            ""TotalCapacity"": 10,
-            ""RemainingCapacity"": 0,
+            ""ScheduledAppointments"": 10,
             ""ConstraintTypeId"": ""NUMBER_OF_APPOINTMENTS"",
             ""AppointmentDate"": ""2034-01-04"",
             ""WeekDayId"": ""3""
diff --git a/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test2/output/1.json b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test2/output/1.json
index a7971ef5f..ebf468137 100644
--- a/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test2/output/1.json
+++ b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test2/output/1.json
@@ -1,28 +1,35 @@
 {
     ""TimeIntervalUtilization"": [
         {
-            ""TotalCapacity"": 10,
-            ""RemainingCapacity"": 10,
+            ""ScheduledAppointments"": 0,
             ""ResourceUnitId"": ""CAPACITY_TEST_2"",
             ""AppointmentDate"": ""2034-01-04""
         }
     ],
     ""DayLevelUtilization"": [
         {
-            ""TotalCapacity"": 10,
-            ""RemainingCapacity"": 10,
+            ""ScheduledAppointments"": 0,
+            ""ScheduledLiveLoadAppts"": 0,
+            ""ScheduledLiveUnloadAppts"": 0,
+            ""ScheduledDropEmptyAppts"": 0,
+            ""ScheduledDropUnloadAppts"": 0,
+            ""ScheduledPickupEmptyAppts"": 0,
+            ""ScheduledPickupLoadAppts"": 0,
             ""ResourceUnitId"": ""CAPACITY_TEST_2"",
             ""AppointmentDate"": ""2034-01-04"",
-            ""ConstraintTypeId"": ""NUMBER_OF_APPOINTMENTS"",
             ""WeekDayId"": ""3""
         }
     ],
     ""FacilityLevelUtilization"": [
         {
-            ""TotalCapacity"": 10,
-            ""RemainingCapacity"": 0,
+            ""ScheduledAppointments"": 10,
+            ""ScheduledLiveLoadAppts"": 0,
+            ""ScheduledLiveUnloadAppts"": 0,
+            ""ScheduledDropEmptyAppts"": 0,
+            ""ScheduledDropUnloadAppts"": 0,
+            ""ScheduledPickupEmptyAppts"": 0,
+            ""ScheduledPickupLoadAppts"": 0,
             ""AppointmentDate"": ""2034-01-04"",
-            ""ConstraintTypeId"": ""NUMBER_OF_APPOINTMENTS"",
             ""WeekDayId"": ""3""
         }
     ],
diff --git a/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test9/config/breakdown.json b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test20/config/cleanup.json
similarity index 100%
rename from src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test9/config/breakdown.json
rename to src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test20/config/cleanup.json
diff --git a/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test20/config/facilityId.json b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test20/config/facilityId.json
new file mode 100644
index 000000000..83165797f
--- /dev/null
+++ b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test20/config/facilityId.json
@@ -0,0 +1,3 @@
+{
+    ""FacilityId"": ""01""
+}
diff --git a/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test20/description.txt b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test20/description.txt
new file mode 100644
index 000000000..08d100b5e
--- /dev/null
+++ b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test20/description.txt
@@ -0,0 +1 @@
+There is no day or facility level scope or capacity, but it shouldn't matter and the appointment should still be scheduled
diff --git a/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test20/input/1.json b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test20/input/1.json
new file mode 100644
index 000000000..b3ef578b8
--- /dev/null
+++ b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test20/input/1.json
@@ -0,0 +1,44 @@
+{
+    ""TimeIntervalDefinition"": [
+        {
+            ""TimeIntervalDefinitionId"": ""Wednesday0_24"",
+            ""StartTimeHours"": 0,
+            ""StartTimeMinutes"": 0,
+            ""EndTimeHours"": 24,
+            ""EndTimeMinutes"": 0,
+            ""TimeIntervalLength"": 60,
+            ""Wednesday"": true
+        }
+    ],
+    ""ResourceGroup"": [
+        {
+            ""ResourceGroupName"": ""CAPACITY_TEST_20"",
+            ""ResourceUnit"": [
+                {
+                    ""ResourceId"": ""CAPACITY_TEST_20"",
+                    ""TimeIntervalScope"" : [
+                        {
+                            ""EffectiveDateTime"": ""1980-01-01T00:00:00"",
+                            ""ExpirationDateTime"": ""2035-01-01T00:00:00"",
+                            ""TimeIntervalCapacity"": [
+                                {
+                                    ""TimeIntervalDefinition"": ""Wednesday0_24"",
+                                    ""MaxAppointments"": 10
+                                }
+                            ]
+                        }
+                    ],
+                    ""DayLevelScope"": [
+                        {
+                            ""EffectiveDateTime"": ""1980-01-01T00:00:00"",
+                            ""ExpirationDateTime"": ""2035-01-01T00:00:00"",
+                            ""Exception"": false,
+                            ""DayLevelCapacity"": []
+                        }
+                    ]
+                }
+            ]
+        }
+    ],
+    ""FacilityDayLevelScope"": []
+}
diff --git a/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test20/input/appointment.json b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test20/input/appointment.json
new file mode 100644
index 000000000..e0f53983f
--- /dev/null
+++ b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test20/input/appointment.json
@@ -0,0 +1,17 @@
+{
+  ""Appointment"": [
+    {
+      ""Duration"": ""60"",
+      ""AppointmentStatusId"": ""1000"",
+      ""ArrivalDateTime"": ""2034-01-04T12:00:00"",
+      ""PreferredDateTime"":  ""2034-01-04T12:00:00"",
+      ""AppointmentTypeId"": ""DROP_UNLOAD"",
+      ""Resources"": [
+        {
+          ""GroupName"": ""CAPACITY_TEST_20"",
+          ""ResourceName"": ""CAPACITY_TEST_20""
+        }
+      ]
+    }
+  ]
+}
diff --git a/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test20/output/1.json b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test20/output/1.json
new file mode 100644
index 000000000..03472e428
--- /dev/null
+++ b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test20/output/1.json
@@ -0,0 +1,43 @@
+{
+    ""TimeIntervalUtilization"": [
+        {
+            ""ScheduledAppointments"": 1,
+            ""ResourceUnitId"": ""CAPACITY_TEST_20"",
+            ""AppointmentDate"": ""2034-01-04""
+        }
+    ],
+    ""DayLevelUtilization"": [
+        {
+            ""ScheduledAppointments"": 1,
+            ""ResourceUnitId"": ""CAPACITY_TEST_20"",
+            ""AppointmentDate"": ""2034-01-04"",
+            ""WeekDayId"": ""3""
+        }
+    ],
+    ""FacilityLevelUtilization"": [
+        {
+            ""ScheduledAppointments"": 1,
+            ""AppointmentDate"": ""2034-01-04"",
+            ""WeekDayId"": ""3""
+        }
+    ],
+    ""Schedule"": [
+        {
+            ""StartDateTime"": ""2034-01-04T12:00:00"",
+            ""EndDateTime"": ""2034-01-04T13:00:00"",
+            ""ScheduleResources"": [
+                {
+                    ""ResourceGroupName"": ""CAPACITY_TEST_20"",
+                    ""ResourceName"": ""CAPACITY_TEST_20""
+                }
+            ]
+        }
+    ],
+    ""Appointment"": [
+        {
+            ""AppointmentSchedules"": [
+                {}
+            ]
+        }
+    ]
+}
diff --git a/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test21/config/cleanup.json b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test21/config/cleanup.json
new file mode 100644
index 000000000..66c3fb05b
--- /dev/null
+++ b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test21/config/cleanup.json
@@ -0,0 +1,8 @@
+{
+  ""TimeIntervalUtilization"": [],
+  ""DayLevelUtilization"": [],
+  ""FacilityLevelUtilization"": [],
+  ""FacilityDayLevelScope"": [],
+  ""Schedule"": [],
+  ""Appointment"": []
+}
diff --git a/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test21/config/disable_ff.json b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test21/config/disable_ff.json
new file mode 100644
index 000000000..db578d94d
--- /dev/null
+++ b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test21/config/disable_ff.json
@@ -0,0 +1,3 @@
+{
+  ""FeatureFlags"": ""Dummy FF Goes Here""
+}
diff --git a/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test21/config/facilityId.json b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test21/config/facilityId.json
new file mode 100644
index 000000000..83165797f
--- /dev/null
+++ b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test21/config/facilityId.json
@@ -0,0 +1,3 @@
+{
+    ""FacilityId"": ""01""
+}
diff --git a/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test21/description.txt b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test21/description.txt
new file mode 100644
index 000000000..9f5c951a1
--- /dev/null
+++ b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test21/description.txt
@@ -0,0 +1,2 @@
+There are facility and day level capacities with a limit of 0, but their constraint type is UOM which isn't supported,
+so the appointment should be scheduled anyway
diff --git a/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test21/input/1.json b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test21/input/1.json
new file mode 100644
index 000000000..57bc3fd34
--- /dev/null
+++ b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test21/input/1.json
@@ -0,0 +1,65 @@
+{
+    ""TimeIntervalDefinition"": [
+        {
+            ""TimeIntervalDefinitionId"": ""Wednesday0_24"",
+            ""StartTimeHours"": 0,
+            ""StartTimeMinutes"": 0,
+            ""EndTimeHours"": 24,
+            ""EndTimeMinutes"": 0,
+            ""TimeIntervalLength"": 60,
+            ""Wednesday"": true
+        }
+    ],
+    ""ResourceGroup"": [
+        {
+            ""ResourceGroupName"": ""CAPACITY_TEST_21"",
+            ""ResourceUnit"": [
+                {
+                    ""ResourceId"": ""CAPACITY_TEST_21"",
+                    ""TimeIntervalScope"" : [
+                        {
+                            ""EffectiveDateTime"": ""1980-01-01T00:00:00"",
+                            ""ExpirationDateTime"": ""2035-01-01T00:00:00"",
+                            ""TimeIntervalCapacity"": [
+                                {
+                                    ""TimeIntervalDefinition"": ""Wednesday0_24"",
+                                    ""MaxAppointments"": 10,
+                                    ""MaxLiveUnloadAppointments"": 10
+                                }
+                            ]
+                        }
+                    ],
+                    ""DayLevelScope"": [
+                        {
+                            ""EffectiveDateTime"": ""1980-01-01T00:00:00"",
+                            ""ExpirationDateTime"": ""2035-01-01T00:00:00"",
+                            ""Exception"": false,
+                            ""DayLevelCapacity"": [
+                                {
+                                    ""DaysOfWeekId"": ""All"",
+                                    ""CapacityConstraintTypeId"": ""UOM"",
+                                    ""Capacity"": 0,
+                                    ""CapacityConstraintAttribute"": null
+                                }
+                            ]
+                        }
+                    ]
+                }
+            ]
+        }
+    ],
+    ""FacilityDayLevelScope"": [
+        {
+            ""EffectiveDateTime"": ""1980-01-01T00:00:00"",
+            ""ExpirationDateTime"": ""2035-01-01T00:00:00"",
+            ""Exception"": false,
+            ""FacilityDayLevelCapacity"": [
+                {
+                    ""CapacityConstraintTypeId"": ""UOM"",
+                    ""Capacity"": 0,
+                    ""DaysOfWeekId"": ""All""
+                }
+            ]
+        }
+    ]
+}
diff --git a/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test21/input/appointment.json b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test21/input/appointment.json
new file mode 100644
index 000000000..73ff78978
--- /dev/null
+++ b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test21/input/appointment.json
@@ -0,0 +1,16 @@
+{
+  ""Appointment"": [
+    {
+      ""Duration"": ""60"",
+      ""AppointmentStatusId"": ""1000"",
+      ""ArrivalDateTime"": ""2034-01-04T12:00:00"",
+      ""PreferredDateTime"":  ""2034-01-04T12:00:00"",
+      ""AppointmentTypeId"": ""LIVE_UNLOAD"",
+      ""Resources"": [
+        {
+          ""GroupName"": ""CAPACITY_TEST_21"",
+          ""ResourceName"": ""CAPACITY_TEST_21""
+        }]
+    }
+  ]
+}
diff --git a/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test21/output/1.json b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test21/output/1.json
new file mode 100644
index 000000000..9de33691a
--- /dev/null
+++ b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test21/output/1.json
@@ -0,0 +1,46 @@
+{
+    ""TimeIntervalUtilization"": [
+        {
+            ""ScheduledAppointments"": 1,
+            ""ScheduledLiveUnloadAppts"": 1,
+            ""ResourceUnitId"": ""CAPACITY_TEST_21"",
+            ""AppointmentDate"": ""2034-01-04""
+        }
+    ],
+    ""DayLevelUtilization"": [
+        {
+            ""ScheduledAppointments"": 1,
+            ""ScheduledLiveUnloadAppts"": 1,
+            ""ResourceUnitId"": ""CAPACITY_TEST_21"",
+            ""AppointmentDate"": ""2034-01-04"",
+            ""WeekDayId"": ""3""
+        }
+    ],
+    ""FacilityLevelUtilization"": [
+        {
+            ""ScheduledAppointments"": 1,
+            ""ScheduledLiveUnloadAppts"": 1,
+            ""AppointmentDate"": ""2034-01-04"",
+            ""WeekDayId"": ""3""
+        }
+    ],
+    ""Schedule"": [
+        {
+            ""StartDateTime"": ""2034-01-04T12:00:00"",
+            ""EndDateTime"": ""2034-01-04T13:00:00"",
+            ""ScheduleResources"": [
+                {
+                    ""ResourceGroupName"": ""CAPACITY_TEST_21"",
+                    ""ResourceName"": ""CAPACITY_TEST_21""
+                }
+            ]
+        }
+    ],
+    ""Appointment"": [
+        {
+            ""AppointmentSchedules"": [
+                {}
+            ]
+        }
+    ]
+}
diff --git a/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test3/config/cleanup.json b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test3/config/cleanup.json
new file mode 100644
index 000000000..66c3fb05b
--- /dev/null
+++ b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test3/config/cleanup.json
@@ -0,0 +1,8 @@
+{
+  ""TimeIntervalUtilization"": [],
+  ""DayLevelUtilization"": [],
+  ""FacilityLevelUtilization"": [],
+  ""FacilityDayLevelScope"": [],
+  ""Schedule"": [],
+  ""Appointment"": []
+}
diff --git a/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test3/output/1.json b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test3/output/1.json
index 6461caf76..a140f107a 100644
--- a/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test3/output/1.json
+++ b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test3/output/1.json
@@ -1,36 +1,32 @@
 {
     ""TimeIntervalUtilization"": [
         {
-            ""TotalCapacity"": 10,
-            ""RemainingCapacity"": 9,
+            ""ScheduledAppointments"": 1,
+            ""ScheduledLiveLoadAppts"": 1,
             ""ResourceUnitId"": ""CAPACITY_TEST_3"",
             ""AppointmentDate"": ""2034-01-04""
         },
         {
-            ""TotalCapacity"": 5,
-            ""RemainingCapacity"": 4,
-            ""MaxLiveLoadCpty"": 5,
-            ""RemainingLiveLoadCpty"": 4,
+            ""ScheduledAppointments"": 1,
+            ""ScheduledLiveLoadAppts"": 1,
             ""ResourceUnitId"": ""CAPACITY_TEST_3"",
             ""AppointmentDate"": ""2034-01-04""
         }
     ],
     ""DayLevelUtilization"": [
         {
-            ""TotalCapacity"": 10,
-            ""RemainingCapacity"": 9,
+            ""ScheduledAppointments"": 1,
+            ""ScheduledLiveLoadAppts"": 1,
             ""ResourceUnitId"": ""CAPACITY_TEST_3"",
             ""AppointmentDate"": ""2034-01-04"",
-            ""ConstraintTypeId"": ""NUMBER_OF_APPOINTMENTS"",
             ""WeekDayId"": ""3""
         }
     ],
     ""FacilityLevelUtilization"": [
         {
-            ""TotalCapacity"": 10,
-            ""RemainingCapacity"": 9,
+            ""ScheduledAppointments"": 1,
+            ""ScheduledLiveLoadAppts"": 1,
             ""AppointmentDate"": ""2034-01-04"",
-            ""ConstraintTypeId"": ""NUMBER_OF_APPOINTMENTS"",
             ""WeekDayId"": ""3""
         }
     ],
diff --git a/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test4/config/cleanup.json b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test4/config/cleanup.json
new file mode 100644
index 000000000..66c3fb05b
--- /dev/null
+++ b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test4/config/cleanup.json
@@ -0,0 +1,8 @@
+{
+  ""TimeIntervalUtilization"": [],
+  ""DayLevelUtilization"": [],
+  ""FacilityLevelUtilization"": [],
+  ""FacilityDayLevelScope"": [],
+  ""Schedule"": [],
+  ""Appointment"": []
+}
diff --git a/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test4/input/1.json b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test4/input/1.json
index 904f2015f..972352d44 100644
--- a/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test4/input/1.json
+++ b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test4/input/1.json
@@ -78,8 +78,7 @@
     ],
     ""DayLevelUtilization"": [
         {
-            ""TotalCapacity"": 10,
-            ""RemainingCapacity"": 7,
+            ""ScheduledAppointments"": 3,
             ""AppointmentDate"": ""2034-01-04"",
             ""ConstraintTypeId"": ""NUMBER_OF_APPOINTMENTS"",
             ""WeekDayId"": ""3"",
@@ -88,8 +87,7 @@
     ],
     ""FacilityLevelUtilization"": [
         {
-            ""TotalCapacity"": 10,
-            ""RemainingCapacity"": 3,
+            ""ScheduledAppointments"": 7,
             ""ConstraintTypeId"": ""NUMBER_OF_APPOINTMENTS"",
             ""AppointmentDate"": ""2034-01-05"",
             ""WeekDayId"": ""4""
diff --git a/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test4/output/1.json b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test4/output/1.json
index ab1fe6521..5eb1a3624 100644
--- a/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test4/output/1.json
+++ b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test4/output/1.json
@@ -1,53 +1,45 @@
 {
     ""TimeIntervalUtilization"": [
         {
-            ""TotalCapacity"": 10,
-            ""RemainingCapacity"": 9,
-            ""MaxDropEmptyCpty"": 10,
-            ""RemainingDropEmptyCpty"": 9,
+            ""ScheduledAppointments"": 1,
+            ""ScheduledDropEmptyAppts"": 1,
             ""ResourceUnitId"": ""CAPACITY_TEST_4"",
             ""AppointmentDate"": ""2034-01-04""
         },
         {
-            ""TotalCapacity"": 5,
-            ""RemainingCapacity"": 4,
-            ""MaxDropEmptyCpty"": 5,
-            ""RemainingDropEmptyCpty"": 4,
+            ""ScheduledAppointments"": 1,
+            ""ScheduledDropEmptyAppts"": 1,
             ""ResourceUnitId"": ""CAPACITY_TEST_4"",
             ""AppointmentDate"": ""2034-01-05""
         }
     ],
     ""DayLevelUtilization"": [
         {
-            ""TotalCapacity"": 10,
-            ""RemainingCapacity"": 6,
+            ""ScheduledAppointments"": 4,
+            ""ScheduledDropEmptyAppts"": 1,
             ""ResourceUnitId"": ""CAPACITY_TEST_4"",
             ""AppointmentDate"": ""2034-01-04"",
-            ""ConstraintTypeId"": ""NUMBER_OF_APPOINTMENTS"",
             ""WeekDayId"": ""3""
         },
         {
-            ""TotalCapacity"": 10,
-            ""RemainingCapacity"": 9,
+            ""ScheduledAppointments"": 1,
+            ""ScheduledDropEmptyAppts"": 1,
             ""ResourceUnitId"": ""CAPACITY_TEST_4"",
             ""AppointmentDate"": ""2034-01-05"",
-            ""ConstraintTypeId"": ""NUMBER_OF_APPOINTMENTS"",
             ""WeekDayId"": ""4""
         }
     ],
     ""FacilityLevelUtilization"": [
         {
-            ""TotalCapacity"": 10,
-            ""RemainingCapacity"": 9,
+            ""ScheduledAppointments"": 1,
+            ""ScheduledDropEmptyAppts"": 1,
             ""AppointmentDate"": ""2034-01-04"",
-            ""ConstraintTypeId"": ""NUMBER_OF_APPOINTMENTS"",
             ""WeekDayId"": ""3""
         },
         {
-            ""TotalCapacity"": 10,
-            ""RemainingCapacity"": 2,
+            ""ScheduledAppointments"": 8,
+            ""ScheduledDropEmptyAppts"": 1,
             ""AppointmentDate"": ""2034-01-05"",
-            ""ConstraintTypeId"": ""NUMBER_OF_APPOINTMENTS"",
             ""WeekDayId"": ""4""
         }
     ],
diff --git a/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test5/config/cleanup.json b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test5/config/cleanup.json
new file mode 100644
index 000000000..66c3fb05b
--- /dev/null
+++ b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test5/config/cleanup.json
@@ -0,0 +1,8 @@
+{
+  ""TimeIntervalUtilization"": [],
+  ""DayLevelUtilization"": [],
+  ""FacilityLevelUtilization"": [],
+  ""FacilityDayLevelScope"": [],
+  ""Schedule"": [],
+  ""Appointment"": []
+}
diff --git a/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test5/input/1.json b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test5/input/1.json
index b5328c783..7c248f72f 100644
--- a/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test5/input/1.json
+++ b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test5/input/1.json
@@ -60,6 +60,7 @@
                 },
                 {
                     ""CapacityConstraintTypeId"": ""APPOINTMENT_TYPE"",
+                    ""CapacityConstraintAttribute"": ""LIVE_UNLOAD"",
                     ""Capacity"": 10,
                     ""DaysOfWeekId"": ""Wednesday""
                 },
@@ -73,8 +74,7 @@
     ],
     ""FacilityLevelUtilization"": [
         {
-            ""TotalCapacity"": 10,
-            ""RemainingCapacity"": 0,
+            ""ScheduledAppointments"": 10,
             ""ConstraintTypeId"": ""NUMBER_OF_APPOINTMENTS"",
             ""AppointmentDate"": ""2034-01-04"",
             ""WeekDayId"": ""3""
diff --git a/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test5/output/1.json b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test5/output/1.json
index f944c0b10..6c27da5a1 100644
--- a/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test5/output/1.json
+++ b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test5/output/1.json
@@ -1,34 +1,22 @@
 {
     ""TimeIntervalUtilization"": [
         {
-            ""TotalCapacity"": 10,
-            ""RemainingCapacity"": 10,
+            ""ScheduledAppointments"": 0,
             ""ResourceUnitId"": ""CAPACITY_TEST_5"",
             ""AppointmentDate"": ""2034-01-04""
         }
     ],
     ""DayLevelUtilization"": [
         {
-            ""TotalCapacity"": 10,
-            ""RemainingCapacity"": 10,
+            ""ScheduledAppointments"": 0,
             ""ResourceUnitId"": ""CAPACITY_TEST_5"",
             ""AppointmentDate"": ""2034-01-04"",
-            ""ConstraintTypeId"": ""NUMBER_OF_APPOINTMENTS"",
             ""WeekDayId"": ""3""
         }
     ],
     ""FacilityLevelUtilization"": [
         {
-            ""TotalCapacity"": 10,
-            ""RemainingCapacity"": 0,
-            ""ConstraintTypeId"": ""NUMBER_OF_APPOINTMENTS"",
-            ""AppointmentDate"": ""2034-01-04"",
-            ""WeekDayId"": ""3""
-        },
-        {
-            ""TotalCapacity"": 10,
-            ""RemainingCapacity"": 10,
-            ""ConstraintTypeId"": ""APPOINTMENT_TYPE"",
+            ""ScheduledAppointments"": 10,
             ""AppointmentDate"": ""2034-01-04"",
             ""WeekDayId"": ""3""
         }
diff --git a/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test6/config/cleanup.json b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test6/config/cleanup.json
new file mode 100644
index 000000000..66c3fb05b
--- /dev/null
+++ b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test6/config/cleanup.json
@@ -0,0 +1,8 @@
+{
+  ""TimeIntervalUtilization"": [],
+  ""DayLevelUtilization"": [],
+  ""FacilityLevelUtilization"": [],
+  ""FacilityDayLevelScope"": [],
+  ""Schedule"": [],
+  ""Appointment"": []
+}
diff --git a/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test6/output/1.json b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test6/output/1.json
index f8665e0df..a859eff32 100644
--- a/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test6/output/1.json
+++ b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test6/output/1.json
@@ -1,38 +1,32 @@
 {
     ""TimeIntervalUtilization"": [
         {
-            ""TotalCapacity"": 1,
-            ""RemainingCapacity"": 0,
-            ""MaxDropUnloadCpty"": 99,
-            ""RemainingDropUnloadCpty"": 98,
+            ""ScheduledAppointments"": 1,
+            ""ScheduledDropUnloadAppts"": 1,
             ""ResourceUnitId"": ""CAPACITY_TEST_6"",
             ""AppointmentDate"": ""2034-01-04""
         },
         {
-            ""TotalCapacity"": 1,
-            ""RemainingCapacity"": 1,
-            ""MaxDropUnloadCpty"": 99,
-            ""RemainingDropUnloadCpty"": 99,
+            ""ScheduledAppointments"": 0,
+            ""ScheduledDropUnloadAppts"": 0,
             ""ResourceUnitId"": ""CAPACITY_TEST_6"",
             ""AppointmentDate"": ""2034-01-04""
         }
     ],
     ""DayLevelUtilization"": [
         {
-            ""TotalCapacity"": 10,
-            ""RemainingCapacity"": 9,
+            ""ScheduledAppointments"": 1,
+            ""ScheduledDropUnloadAppts"": 1,
             ""ResourceUnitId"": ""CAPACITY_TEST_6"",
             ""AppointmentDate"": ""2034-01-04"",
-            ""ConstraintTypeId"": ""NUMBER_OF_APPOINTMENTS"",
             ""WeekDayId"": ""3""
         }
     ],
     ""FacilityLevelUtilization"": [
         {
-            ""TotalCapacity"": 10,
-            ""RemainingCapacity"": 9,
+            ""ScheduledAppointments"": 1,
+            ""ScheduledDropUnloadAppts"": 1,
             ""AppointmentDate"": ""2034-01-04"",
-            ""ConstraintTypeId"": ""NUMBER_OF_APPOINTMENTS"",
             ""WeekDayId"": ""3""
         }
     ],
diff --git a/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test7/config/cleanup.json b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test7/config/cleanup.json
new file mode 100644
index 000000000..66c3fb05b
--- /dev/null
+++ b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test7/config/cleanup.json
@@ -0,0 +1,8 @@
+{
+  ""TimeIntervalUtilization"": [],
+  ""DayLevelUtilization"": [],
+  ""FacilityLevelUtilization"": [],
+  ""FacilityDayLevelScope"": [],
+  ""Schedule"": [],
+  ""Appointment"": []
+}
diff --git a/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test7/input/1.json b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test7/input/1.json
index bf1b8d3e3..7dcb0c5bb 100644
--- a/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test7/input/1.json
+++ b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test7/input/1.json
@@ -43,8 +43,8 @@
                                 {
                                     ""DaysOfWeekId"": ""All"",
                                     ""CapacityConstraintTypeId"": ""APPOINTMENT_TYPE"",
-                                    ""Capacity"": 10,
-                                    ""CapacityConstraintAttribute"": null
+                                    ""CapacityConstraintAttribute"": ""LIVE_UNLOAD"",
+                                    ""Capacity"": 10
                                 },
                                 {
                                     ""DaysOfWeekId"": ""Wednesday"",
@@ -75,10 +75,8 @@
     ],
     ""DayLevelUtilization"": [
         {
-            ""TotalCapacity"": 10,
-            ""RemainingCapacity"": 0,
+            ""ScheduledAppointments"": 10,
             ""ResourceUnitId"": ""CAPACITY_TEST_7"",
-            ""ConstraintTypeId"": ""UOM"",
             ""AppointmentDate"": ""2034-01-04"",
             ""WeekDayId"": ""3""
         }
diff --git a/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test7/output/1.json b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test7/output/1.json
index 9fa6f709a..ecaa14dcb 100644
--- a/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test7/output/1.json
+++ b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test7/output/1.json
@@ -1,47 +1,20 @@
 {
     ""TimeIntervalUtilization"": [
         {
-            ""TotalCapacity"": 10,
-            ""RemainingCapacity"": 10,
+            ""ScheduledAppointments"": 0,
             ""ResourceUnitId"": ""CAPACITY_TEST_7"",
             ""AppointmentDate"": ""2034-01-04""
         }
     ],
     ""DayLevelUtilization"": [
         {
-            ""TotalCapacity"": 10,
-            ""RemainingCapacity"": 0,
+            ""ScheduledAppointments"": 10,
             ""ResourceUnitId"": ""CAPACITY_TEST_7"",
             ""AppointmentDate"": ""2034-01-04"",
-            ""ConstraintTypeId"": ""UOM"",
-            ""WeekDayId"": ""3""
-        },
-        {
-            ""TotalCapacity"": 10,
-            ""RemainingCapacity"": 10,
-            ""ResourceUnitId"": ""CAPACITY_TEST_7"",
-            ""AppointmentDate"": ""2034-01-04"",
-            ""ConstraintTypeId"": ""APPOINTMENT_TYPE"",
-            ""WeekDayId"": ""3""
-        },
-        {
-            ""TotalCapacity"": 10,
-            ""RemainingCapacity"": 10,
-            ""ResourceUnitId"": ""CAPACITY_TEST_7"",
-            ""AppointmentDate"": ""2034-01-04"",
-            ""ConstraintTypeId"": ""NUMBER_OF_APPOINTMENTS"",
-            ""WeekDayId"": ""3""
-        }
-    ],
-    ""FacilityLevelUtilization"": [
-        {
-            ""TotalCapacity"": 10,
-            ""RemainingCapacity"": 10,
-            ""ConstraintTypeId"": ""NUMBER_OF_APPOINTMENTS"",
-            ""AppointmentDate"": ""2034-01-04"",
             ""WeekDayId"": ""3""
         }
     ],
+    ""FacilityLevelUtilization"": [],
     ""Schedule"": [],
     ""Appointment"": [
         {
diff --git a/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test8/config/cleanup.json b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test8/config/cleanup.json
new file mode 100644
index 000000000..66c3fb05b
--- /dev/null
+++ b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test8/config/cleanup.json
@@ -0,0 +1,8 @@
+{
+  ""TimeIntervalUtilization"": [],
+  ""DayLevelUtilization"": [],
+  ""FacilityLevelUtilization"": [],
+  ""FacilityDayLevelScope"": [],
+  ""Schedule"": [],
+  ""Appointment"": []
+}
diff --git a/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test8/input/1.json b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test8/input/1.json
index 7298e224c..2b77dd55c 100644
--- a/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test8/input/1.json
+++ b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test8/input/1.json
@@ -44,8 +44,8 @@
                                 {
                                     ""DaysOfWeekId"": ""Thursday"",
                                     ""CapacityConstraintTypeId"": ""APPOINTMENT_TYPE"",
-                                    ""Capacity"": 0,
-                                    ""CapacityConstraintAttribute"": null
+                                    ""CapacityConstraintAttribute"": ""PICKUP_EMPTY"",
+                                    ""Capacity"": 0
                                 }
                             ]
                         }
@@ -75,8 +75,7 @@
     ],
     ""DayLevelUtilization"": [
         {
-            ""TotalCapacity"": 10,
-            ""RemainingCapacity"": 0,
+            ""ScheduledAppointments"": 10,
             ""ResourceUnitId"": ""CAPACITY_TEST_8"",
             ""ConstraintTypeId"": ""UOM"",
             ""AppointmentDate"": ""2034-01-05"",
@@ -85,8 +84,7 @@
     ],
     ""FacilityLevelUtilization"": [
         {
-            ""TotalCapacity"": 10,
-            ""RemainingCapacity"": 0,
+            ""ScheduledAppointments"": 10,
             ""ConstraintTypeId"": ""NUMBER_OF_APPOINTMENTS"",
             ""AppointmentDate"": ""2034-01-05"",
             ""WeekDayId"": ""4""
diff --git a/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test8/output/1.json b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test8/output/1.json
index 9cc1b8e88..a13ae7a27 100644
--- a/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test8/output/1.json
+++ b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test8/output/1.json
@@ -1,44 +1,38 @@
 {
     ""TimeIntervalUtilization"": [
         {
-            ""TotalCapacity"": 10,
-            ""RemainingCapacity"": 9,
-            ""MaxPickupEmptyCpty"": 10,
-            ""RemainingPickupEmptyCpty"": 9,
+            ""ScheduledAppointments"": 1,
+            ""ScheduledPickupEmptyAppts"": 1,
             ""ResourceUnitId"": ""CAPACITY_TEST_8"",
             ""AppointmentDate"": ""2034-01-04""
         }
     ],
     ""DayLevelUtilization"": [
         {
-            ""TotalCapacity"": 10,
-            ""RemainingCapacity"": 0,
+            ""ScheduledAppointments"": 10,
+            ""ScheduledPickupEmptyAppts"": 0,
             ""ResourceUnitId"": ""CAPACITY_TEST_8"",
-            ""ConstraintTypeId"": ""UOM"",
             ""AppointmentDate"": ""2034-01-05"",
             ""WeekDayId"": ""4""
         },
         {
-            ""TotalCapacity"": 10,
-            ""RemainingCapacity"": 9,
+            ""ScheduledAppointments"": 1,
+            ""ScheduledPickupEmptyAppts"": 1,
             ""ResourceUnitId"": ""CAPACITY_TEST_8"",
             ""AppointmentDate"": ""2034-01-04"",
-            ""ConstraintTypeId"": ""NUMBER_OF_APPOINTMENTS"",
             ""WeekDayId"": ""3""
         }
     ],
     ""FacilityLevelUtilization"": [
         {
-            ""TotalCapacity"": 10,
-            ""RemainingCapacity"": 9,
-            ""ConstraintTypeId"": ""NUMBER_OF_APPOINTMENTS"",
+            ""ScheduledAppointments"": 1,
+            ""ScheduledPickupEmptyAppts"": 1,
             ""AppointmentDate"": ""2034-01-04"",
             ""WeekDayId"": ""3""
         },
         {
-            ""TotalCapacity"": 10,
-            ""RemainingCapacity"": 0,
-            ""ConstraintTypeId"": ""NUMBER_OF_APPOINTMENTS"",
+            ""ScheduledAppointments"": 10,
+            ""ScheduledPickupEmptyAppts"": 0,
             ""AppointmentDate"": ""2034-01-05"",
             ""WeekDayId"": ""4""
         }
diff --git a/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test9/config/cleanup.json b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test9/config/cleanup.json
new file mode 100644
index 000000000..66c3fb05b
--- /dev/null
+++ b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test9/config/cleanup.json
@@ -0,0 +1,8 @@
+{
+  ""TimeIntervalUtilization"": [],
+  ""DayLevelUtilization"": [],
+  ""FacilityLevelUtilization"": [],
+  ""FacilityDayLevelScope"": [],
+  ""Schedule"": [],
+  ""Appointment"": []
+}
diff --git a/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test9/output/1.json b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test9/output/1.json
index 32815b2ad..a332e29eb 100644
--- a/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test9/output/1.json
+++ b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test9/output/1.json
@@ -1,54 +1,44 @@
 {
     ""TimeIntervalUtilization"": [
         {
-            ""TotalCapacity"": 1,
-            ""RemainingCapacity"": 0,
-            ""MaxPickupLoadCpty"": 1,
-            ""RemainingPickupLoadCpty"": 0,
+            ""ScheduledAppointments"": 1,
+            ""ScheduledPickupLoadAppts"": 1,
             ""ResourceUnitId"": ""CAPACITY_TEST_9"",
             ""AppointmentDate"": ""2034-01-04""
         },
         {
-            ""TotalCapacity"": 2,
-            ""RemainingCapacity"": 1,
-            ""MaxPickupLoadCpty"": 2,
-            ""RemainingPickupLoadCpty"": 1,
+            ""ScheduledAppointments"": 1,
+            ""ScheduledPickupLoadAppts"": 1,
             ""ResourceUnitId"": ""CAPACITY_TEST_9"",
             ""AppointmentDate"": ""2034-01-04""
         },
         {
-            ""TotalCapacity"": 2,
-            ""RemainingCapacity"": 1,
-            ""MaxPickupLoadCpty"": 2,
-            ""RemainingPickupLoadCpty"": 1,
+            ""ScheduledAppointments"": 1,
+            ""ScheduledPickupLoadAppts"": 1,
             ""ResourceUnitId"": ""CAPACITY_TEST_9"",
             ""AppointmentDate"": ""2034-01-04""
         },
         {
-            ""TotalCapacity"": 3,
-            ""RemainingCapacity"": 2,
-            ""MaxPickupLoadCpty"": 3,
-            ""RemainingPickupLoadCpty"": 2,
+            ""ScheduledAppointments"": 1,
+            ""ScheduledPickupLoadAppts"": 1,
             ""ResourceUnitId"": ""CAPACITY_TEST_9"",
             ""AppointmentDate"": ""2034-01-04""
         }
     ],
     ""DayLevelUtilization"": [
         {
-            ""TotalCapacity"": 1,
-            ""RemainingCapacity"": 0,
+            ""ScheduledAppointments"": 1,
+            ""ScheduledPickupLoadAppts"": 1,
             ""ResourceUnitId"": ""CAPACITY_TEST_9"",
             ""AppointmentDate"": ""2034-01-04"",
-            ""ConstraintTypeId"": ""NUMBER_OF_APPOINTMENTS"",
             ""WeekDayId"": ""3""
         }
     ],
     ""FacilityLevelUtilization"": [
         {
-            ""TotalCapacity"": 1,
-            ""RemainingCapacity"": 0,
+            ""ScheduledAppointments"": 1,
+            ""ScheduledPickupLoadAppts"": 1,
             ""AppointmentDate"": ""2034-01-04"",
-            ""ConstraintTypeId"": ""NUMBER_OF_APPOINTMENTS"",
             ""WeekDayId"": ""3""
         }
     ],
diff --git a/src/main/java/com/manh/cp/appointment/appointment/impl/service/AppointmentManagerHelper.java b/src/main/java/com/manh/cp/appointment/appointment/impl/service/AppointmentManagerHelper.java
index 8798460fb..24efed0be 100644
--- a/src/main/java/com/manh/cp/appointment/appointment/impl/service/AppointmentManagerHelper.java
+++ b/src/main/java/com/manh/cp/appointment/appointment/impl/service/AppointmentManagerHelper.java
@@ -976,72 +976,103 @@ public class AppointmentManagerHelper
     {
         for (TimeIntervalUtilization timeIntervalUtilization : enhancedAppointmentDTO.getTimeIntervalUtilizations())
         {
-            timeIntervalUtilization.setRemainingCapacity(timeIntervalUtilization.getRemainingCapacity() - 1);
-
             switch (AppointmentType.valueOf(enhancedAppointmentDTO.getAppointmentTypeId()))
             {
                 case LIVE_UNLOAD:
-                    if (timeIntervalUtilization.getRemainingLiveUnloadCpty() != null)
-                    {
-                        timeIntervalUtilization
-                                .setRemainingLiveUnloadCpty(
-                                        timeIntervalUtilization.getRemainingLiveUnloadCpty() - 1);
-                    }
+                    timeIntervalUtilization.setScheduledLiveUnloadAppts(
+                            timeIntervalUtilization.getScheduledLiveUnloadAppts() + 1);
                     break;
                 case LIVE_LOAD:
-                    if (timeIntervalUtilization.getRemainingLiveLoadCpty() != null)
-                    {
-                        timeIntervalUtilization
-                                .setRemainingLiveLoadCpty(
-                                        timeIntervalUtilization.getRemainingLiveLoadCpty() - 1);
-                    }
+                    timeIntervalUtilization.setScheduledLiveLoadAppts(
+                            timeIntervalUtilization.getScheduledLiveLoadAppts() + 1);
                     break;
                 case PICKUP_LOAD:
-                    if (timeIntervalUtilization.getRemainingPickupLoadCpty() != null)
-                    {
-                        timeIntervalUtilization
-                                .setRemainingPickupLoadCpty(
-                                        timeIntervalUtilization.getRemainingPickupLoadCpty() - 1);
-                    }
+                    timeIntervalUtilization.setScheduledPickupLoadAppts(
+                            timeIntervalUtilization.getScheduledPickupLoadAppts() + 1);
                     break;
                 case PICKUP_EMPTY:
-                    if (timeIntervalUtilization.getRemainingPickupEmptyCpty() != null)
-                    {
-                        timeIntervalUtilization
-                                .setRemainingPickupEmptyCpty(
-                                        timeIntervalUtilization.getRemainingPickupEmptyCpty() - 1);
-                    }
+                    timeIntervalUtilization.setScheduledPickupEmptyAppts(
+                            timeIntervalUtilization.getScheduledPickupEmptyAppts() + 1);
                     break;
                 case DROP_EMPTY:
-                    if (timeIntervalUtilization.getRemainingDropEmptyCpty() != null)
-                    {
-                        timeIntervalUtilization
-                                .setRemainingDropEmptyCpty(
-                                        timeIntervalUtilization.getRemainingDropEmptyCpty() - 1);
-                    }
+                    timeIntervalUtilization.setScheduledDropEmptyAppts(
+                            timeIntervalUtilization.getScheduledDropEmptyAppts() + 1);
                     break;
                 case DROP_UNLOAD:
-                    if (timeIntervalUtilization.getRemainingDropUnloadCpty() != null)
-                    {
-                        timeIntervalUtilization
-                                .setRemainingDropUnloadCpty(
-                                        timeIntervalUtilization.getRemainingDropUnloadCpty() - 1);
-                    }
+                    timeIntervalUtilization.setScheduledDropUnloadAppts(
+                            timeIntervalUtilization.getScheduledDropUnloadAppts() + 1);
                     break;
             }
 
+            timeIntervalUtilization.setScheduledAppointments(timeIntervalUtilization.getScheduledAppointments() + 1);
             timeIntervalUtilizationService.save(context, timeIntervalUtilization, null, true);
         }
 
         for (DayLevelUtilization dayLevelUtilization : enhancedAppointmentDTO.getDayLevelUtilizations())
         {
-            dayLevelUtilization.setRemainingCapacity(dayLevelUtilization.getRemainingCapacity() - 1);
+            switch (AppointmentType.valueOf(enhancedAppointmentDTO.getAppointmentTypeId()))
+            {
+                case LIVE_UNLOAD:
+                    dayLevelUtilization.setScheduledLiveUnloadAppts(
+                            dayLevelUtilization.getScheduledLiveUnloadAppts() + 1);
+                    break;
+                case LIVE_LOAD:
+                    dayLevelUtilization.setScheduledLiveLoadAppts(
+                            dayLevelUtilization.getScheduledLiveLoadAppts() + 1);
+                    break;
+                case PICKUP_LOAD:
+                    dayLevelUtilization.setScheduledPickupLoadAppts(
+                            dayLevelUtilization.getScheduledPickupLoadAppts() + 1);
+                    break;
+                case PICKUP_EMPTY:
+                    dayLevelUtilization.setScheduledPickupEmptyAppts(
+                            dayLevelUtilization.getScheduledPickupEmptyAppts() + 1);
+                    break;
+                case DROP_EMPTY:
+                    dayLevelUtilization.setScheduledDropEmptyAppts(
+                            dayLevelUtilization.getScheduledDropEmptyAppts() + 1);
+                    break;
+                case DROP_UNLOAD:
+                    dayLevelUtilization.setScheduledDropUnloadAppts(
+                            dayLevelUtilization.getScheduledDropUnloadAppts() + 1);
+                    break;
+            }
+
+            dayLevelUtilization.setScheduledAppointments(dayLevelUtilization.getScheduledAppointments() + 1);
             dayLevelUtilizationService.save(context, dayLevelUtilization, null, true);
         }
 
         for (FacilityLevelUtilization facilityLevelUtilization : enhancedAppointmentDTO.getFacilityLevelUtilizations())
         {
-            facilityLevelUtilization.setRemainingCapacity(facilityLevelUtilization.getRemainingCapacity() - 1);
+            switch (AppointmentType.valueOf(enhancedAppointmentDTO.getAppointmentTypeId()))
+            {
+                case LIVE_UNLOAD:
+                    facilityLevelUtilization.setScheduledLiveUnloadAppts(
+                            facilityLevelUtilization.getScheduledLiveUnloadAppts() + 1);
+                    break;
+                case LIVE_LOAD:
+                    facilityLevelUtilization.setScheduledLiveLoadAppts(
+                            facilityLevelUtilization.getScheduledLiveLoadAppts() + 1);
+                    break;
+                case PICKUP_LOAD:
+                    facilityLevelUtilization.setScheduledPickupLoadAppts(
+                            facilityLevelUtilization.getScheduledPickupLoadAppts() + 1);
+                    break;
+                case PICKUP_EMPTY:
+                    facilityLevelUtilization.setScheduledPickupEmptyAppts(
+                            facilityLevelUtilization.getScheduledPickupEmptyAppts() + 1);
+                    break;
+                case DROP_EMPTY:
+                    facilityLevelUtilization.setScheduledDropEmptyAppts(
+                            facilityLevelUtilization.getScheduledDropEmptyAppts() + 1);
+                    break;
+                case DROP_UNLOAD:
+                    facilityLevelUtilization.setScheduledDropUnloadAppts(
+                            facilityLevelUtilization.getScheduledDropUnloadAppts() + 1);
+                    break;
+            }
+
+            facilityLevelUtilization.setScheduledAppointments(facilityLevelUtilization.getScheduledAppointments() + 1);
             facilityLevelUtilizationService.save(context, facilityLevelUtilization, null, true);
         }
     }
diff --git a/src/main/java/com/manh/cp/appointment/appointment/impl/service/CapacityManager.java b/src/main/java/com/manh/cp/appointment/appointment/impl/service/CapacityManager.java
index 375de030a..8bc6ec28b 100644
--- a/src/main/java/com/manh/cp/appointment/appointment/impl/service/CapacityManager.java
+++ b/src/main/java/com/manh/cp/appointment/appointment/impl/service/CapacityManager.java
@@ -33,15 +33,16 @@ import org.springframework.transaction.annotation.Transactional;
 import org.springframework.util.CollectionUtils;
 
 import com.manh.cp.appointment.appointment.client.Constants.AppointmentType;
+import com.manh.cp.appointment.appointment.constants.CapacityConstraintType;
 import com.manh.cp.appointment.core.api.domain.DayLevelCapacity;
 import com.manh.cp.appointment.core.api.domain.DayLevelScope;
 import com.manh.cp.appointment.core.api.domain.DayLevelUtilization;
 import com.manh.cp.appointment.core.api.domain.DayLevelUtilizationBase;
 import com.manh.cp.appointment.core.api.domain.FacilityDayLevelCapacity;
-import com.manh.cp.appointment.core.api.domain.FacilityDayLevelScope;
 import com.manh.cp.appointment.core.api.domain.FacilityLevelUtilization;
 import com.manh.cp.appointment.core.api.domain.FacilityLevelUtilizationBase;
 import com.manh.cp.appointment.core.api.domain.ResourceUnit;
+import com.manh.cp.appointment.core.api.domain.SpecificTimeIntervalsCapacity;
 import com.manh.cp.appointment.core.api.domain.TimeIntervalCapacity;
 import com.manh.cp.appointment.core.api.domain.TimeIntervalDefinition;
 import com.manh.cp.appointment.core.api.domain.TimeIntervalScope;
@@ -57,6 +58,7 @@ import com.manh.cp.appointment.core.api.service.TimeSlotService;
 import com.manh.cp.appointment.core.dto.CapacityDTO;
 import com.manh.cp.appointment.core.dto.SingleDayTimeIntervalDefinition;
 import com.manh.cp.appointment.core.impl.domain.entity.DayLevelUtilizationEntity;
+import com.manh.cp.appointment.core.impl.domain.entity.FacilityDayLevelScopeEntity;
 import com.manh.cp.appointment.core.impl.domain.entity.FacilityLevelUtilizationEntity;
 import com.manh.cp.appointment.core.impl.domain.entity.TimeIntervalUtilizationEntity;
 import com.manh.cp.fw.common.Context;
@@ -126,12 +128,10 @@ public class CapacityManager
                 .filter(scope -> !scope.getEffectiveDateTime()
                         .isAfter(appointmentStartTime)
                         && scope.getExpirationDateTime().isAfter(appointmentStartTime))
-                .findFirst().orElse(null);
+                .max(Comparator.comparing(TimeIntervalScope::getException)).orElse(null);
 
         if (timeIntervalScope != null)
         {
-            capacityDTO.resetCapacityCheck();
-
             List<SingleDayTimeIntervalDefinition> applicableCapacities =
                     getSingleDayTimeIntervalDefinitions(timeIntervalScope, appointmentStartTime, appointmentDuration);
 
@@ -154,7 +154,12 @@ public class CapacityManager
 
                 while (capacityDTO.getTotalAppointmentDurationAccountedFor() < appointmentDuration)
                 {
-                    TimeSlot timeSlot = getMatchingTimeSlot(timeSlots, capacityDTO.getTimeSlotAvailabilityCheck());
+                    String dayOfWeek =
+                            String.valueOf(capacityDTO.getTimeSlotAvailabilityCheck().getDayOfWeek().getValue());
+
+                    TimeSlot timeSlot = timeSlots.stream().filter(
+                            slot -> timeSlotOverlapsTime(slot, capacityDTO.getTimeSlotAvailabilityCheck(), dayOfWeek))
+                            .findFirst().orElse(null);
 
                     if (timeSlot == null)
                     {
@@ -170,14 +175,18 @@ public class CapacityManager
 
                     if (timeIntervalUtilization == null)
                     {
-                        timeIntervalUtilization = createAptTimeIntervalScopeUtil(context,
-                                singleDayTimeIntervalDefinition, timeSlot, capacityDTO, resourceUnit);
+                        timeIntervalUtilization =
+                                createAptTimeIntervalScopeUtil(context, timeSlot, capacityDTO, resourceUnit);
                     }
 
+                    SpecificTimeIntervalsCapacity specificTimeIntervalsCapacity = getSpecificTimeIntervalsCapacity(
+                            timeIntervalScope, timeSlot, capacityDTO.getTimeSlotAvailabilityCheck());
+
                     if (timeIntervalUtilizationHasCapacity(timeIntervalUtilization,
-                            capacityDTO.getAppointmentTypeId()))
+                            capacityDTO.getAppointmentTypeId(), specificTimeIntervalsCapacity,
+                            singleDayTimeIntervalDefinition.getTimeIntervalCapacity()))
                     {
-                        if ((checkDayAndFacilityLevelCapacity(context, resourceUnit, capacityDTO)))
+                        if (validateDayAndFacilityLevelCapacity(context, resourceUnit, capacityDTO))
                         {
                             capacityDTO.getTimeIntervalUtilizations().add(timeIntervalUtilization);
                             capacityDTO.incrementTimeSlotCheck(timeSlot.getEndTime());
@@ -190,6 +199,7 @@ public class CapacityManager
 
                         if (capacityDTO.getTotalAppointmentDurationAccountedFor() >= appointmentDuration)
                         {
+                            capacityDTO.setAllCapacityChecksAreValid(true);
                             return;
                         }
                     }
@@ -209,13 +219,12 @@ public class CapacityManager
         }
         else
         {
-            logger.error(""-- No time interval scope was found for resource unit [{}], "" +
-                    ""so skipping utilization consumption"",
+            logger.error(""-- No time interval scope was found for resource unit [{}], so failing utilization check"",
                     resourceUnit.getResourceId());
         }
     }
 
-    private boolean checkDayAndFacilityLevelCapacity(Context context, ResourceUnit resourceUnit,
+    private boolean validateDayAndFacilityLevelCapacity(Context context, ResourceUnit resourceUnit,
             CapacityDTO capacityDTO)
     {
         if (isDayCapacityAlreadyValid(capacityDTO, capacityDTO.getTimeSlotAvailabilityCheck()))
@@ -223,12 +232,21 @@ public class CapacityManager
             return true;
         }
 
-        boolean dayLevelCapacityIsValid = false;
         DayLevelScope dayLevelScope = resourceUnit.getDayLevelScopeList().stream()
                 .filter(scope -> !scope.getEffectiveDateTime()
                         .isAfter(capacityDTO.getTimeSlotAvailabilityCheck())
                         && scope.getExpirationDateTime().isAfter(capacityDTO.getTimeSlotAvailabilityCheck()))
-                .findFirst().orElse(null);
+                .max(Comparator.comparing(DayLevelScope::getException)).orElse(null);
+
+        DayLevelUtilization dayLevelUtilization =
+                dayLevelUtilizationService.findByAppointmentDateAndResourceUnit(context,
+                        capacityDTO.getTimeSlotAvailabilityCheck(), resourceUnit.getResourceId());
+
+        if (dayLevelUtilization == null)
+        {
+            dayLevelUtilization =
+                    createAptDayLevelScopeUtilization(context, capacityDTO, resourceUnit);
+        }
 
         if (dayLevelScope != null)
         {
@@ -242,46 +260,30 @@ public class CapacityManager
 
             for (DayLevelCapacity dayLevelCapacity : dayLevelCapacities)
             {
-                DayLevelUtilization dayLevelUtilization =
-                        dayLevelUtilizationService.findByAppointmentDateConstraintTypeAndResourceUnit(context,
-                                capacityDTO.getTimeSlotAvailabilityCheck(),
-                                dayLevelCapacity.getCapacityConstraintTypeId(), resourceUnit.getResourceId());
-
-                if (dayLevelUtilization == null)
-                {
-                    dayLevelUtilization =
-                            createAptDayLevelScopeUtilization(context, dayLevelCapacity, capacityDTO, resourceUnit);
-                }
-
-                if (dayLevelUtilization.getRemainingCapacity() > 0
-                        && checkAndConsumeFacilityLevelCapacity(context, capacityDTO.getTimeSlotAvailabilityCheck(),
-                                capacityDTO))
-                {
-                    dayLevelCapacityIsValid = true;
-                    capacityDTO.getDayLevelUtilizations().add(dayLevelUtilization);
-                }
-                else
+                if (!dayLevelUtilizationHasCapacity(dayLevelUtilization, capacityDTO.getAppointmentTypeId(),
+                        dayLevelCapacity))
                 {
                     logger.debug(""-- Capacity for day level scope [{}] is already 0,"" +
                             "" so checking for the next available time slot"",
                             dayLevelUtilization.getDayLevelUtilizationId());
 
-                    dayLevelCapacityIsValid = false;
-                    break;
+                    return false;
                 }
             }
         }
         else
         {
-            logger.error(""-- No day level scope was found for resource unit [{}] and effective datetime [{}], "" +
-                    ""so skipping utilization consumption"",
+            logger.debug(""-- No day level scope was found for resource unit [{}] and effective datetime [{}], "" +
+                    ""so skipping day level utilization check"",
                     resourceUnit.getResourceId(), capacityDTO.getTimeSlotAvailabilityCheck());
         }
 
-        return dayLevelCapacityIsValid;
+        capacityDTO.getDayLevelUtilizations().add(dayLevelUtilization);
+
+        return validateFacilityLevelCapacity(context, capacityDTO.getTimeSlotAvailabilityCheck(), capacityDTO);
     }
 
-    private boolean checkAndConsumeFacilityLevelCapacity(Context context, LocalDateTime appointmentDateTime,
+    private boolean validateFacilityLevelCapacity(Context context, LocalDateTime appointmentDateTime,
             CapacityDTO capacityDTO)
     {
         if (isFacilityCapacityAlreadyValid(capacityDTO, capacityDTO.getTimeSlotAvailabilityCheck()))
@@ -289,16 +291,27 @@ public class CapacityManager
             return true;
         }
 
-        boolean facilityLevelCapacityIsValid = false;
-        FacilityDayLevelScope facilityDayLevelScope =
+        List<FacilityDayLevelScopeEntity> availableFacilityLevelScopes =
                 facilityDayLevelScopeService.getByEffectiveDate(context, appointmentDateTime);
 
-        if (facilityDayLevelScope != null)
+        FacilityDayLevelScopeEntity effectiveFacilityDayLevelScope = availableFacilityLevelScopes.stream()
+                .max(Comparator.comparing(FacilityDayLevelScopeEntity::getException)).orElse(null);
+
+        FacilityLevelUtilization facilityLevelUtilization =
+                facilityLevelUtilizationService.findByAppointmentDate(context, appointmentDateTime);
+
+        if (facilityLevelUtilization == null)
+        {
+            facilityLevelUtilization =
+                    createAptFacLevelScopeUtilization(context, appointmentDateTime);
+        }
+
+        if (effectiveFacilityDayLevelScope != null)
         {
             String appointmentDayOfWeek = capacityDTO.getTimeSlotAvailabilityCheck().getDayOfWeek().name();
 
             List<FacilityDayLevelCapacity> facilityLevelCapacities =
-                    facilityDayLevelScope.getFacilityDayLevelCapacityList().stream()
+                    effectiveFacilityDayLevelScope.getFacilityDayLevelCapacityList().stream()
                             .filter(capacity -> capacity.getDaysOfWeekId().equals(ALL_DAYS_OF_WEEK)
                                     || capacity.getDaysOfWeekId().toUpperCase().equals(appointmentDayOfWeek))
                             .sorted(Comparator.comparing(FacilityDayLevelCapacity::getCapacityConstraintTypeId))
@@ -306,47 +319,30 @@ public class CapacityManager
 
             for (FacilityDayLevelCapacity facilityDayLevelCapacity : facilityLevelCapacities)
             {
-                FacilityLevelUtilization facilityLevelUtilization =
-                        facilityLevelUtilizationService.findByAppointmentDateAndConstraintType(context,
-                                appointmentDateTime,
-                                facilityDayLevelCapacity.getCapacityConstraintTypeId());
-
-                if (facilityLevelUtilization == null)
-                {
-                    facilityLevelUtilization =
-                            createAptFacLevelScopeUtilization(context, facilityDayLevelCapacity, appointmentDateTime);
-                }
-
-                if (facilityLevelUtilization.getRemainingCapacity() > 0)
-                {
-                    facilityLevelCapacityIsValid = true;
-                    capacityDTO.getFacilityLevelUtilizations().add(facilityLevelUtilization);
-                }
-                else
+                if (!facilityLevelUtilizationHasCapacity(facilityLevelUtilization, capacityDTO.getAppointmentTypeId(),
+                        facilityDayLevelCapacity))
                 {
                     logger.debug(""-- Capacity for facility level scope [{}] is already 0,"" +
                             "" so checking for the next available time slot"",
                             facilityLevelUtilization.getFacilityLevelUtilizationId());
 
-                    facilityLevelCapacityIsValid = false;
-                    break;
+                    return false;
                 }
             }
         }
         else
         {
-            logger.error(""-- No facility level scope was found for effective datetime [{}], "" +
-                    ""so skipping utilization consumption"", appointmentDateTime);
+            logger.debug(""-- No facility level scope was found for effective datetime [{}], "" +
+                    ""so skipping facility level utilization check"", appointmentDateTime);
         }
 
-        return facilityLevelCapacityIsValid;
+        capacityDTO.getFacilityLevelUtilizations().add(facilityLevelUtilization);
+
+        return true;
     }
 
-    private TimeSlot getMatchingTimeSlot(List<TimeSlot> timeSlots, LocalDateTime comparatorTime)
+    private boolean timeSlotOverlapsTime(TimeSlot slot, LocalDateTime comparatorTime, String dayOfWeek)
     {
-        String dayOfWeek = String.valueOf(comparatorTime.getDayOfWeek().getValue());
-
-        return timeSlots.stream().filter(slot -> {
         LocalDateTime slotStartTime =
                 LocalDateTime.of(comparatorTime.toLocalDate(), LocalTime.parse(slot.getStartTime()));
         LocalDateTime slotEndTime =
@@ -360,9 +356,6 @@ public class CapacityManager
         return (dayOfWeek.equals(slot.getDayOfWeekId())
                 && !slotStartTime.isAfter(comparatorTime)
                 && slotEndTime.isAfter(comparatorTime));
-
-        }).findFirst()
-                .orElse(null);
     }
 
     private List<SingleDayTimeIntervalDefinition> getSingleDayTimeIntervalDefinitions(
@@ -470,42 +463,164 @@ public class CapacityManager
     }
 
     private boolean timeIntervalUtilizationHasCapacity(TimeIntervalUtilization timeIntervalUtilization,
-            AppointmentType appointmentType)
+            AppointmentType appointmentType, SpecificTimeIntervalsCapacity specificTimeIntervalsCapacity,
+            TimeIntervalCapacity timeIntervalCapacity)
+    {
+        Integer maxAppointmentTypeCapacity = null;
+        long appointmentTypesScheduledSoFar = 0;
+        long maxAppointments =
+                specificTimeIntervalsCapacity != null ? specificTimeIntervalsCapacity.getMaxAppointments()
+                        : timeIntervalCapacity.getMaxAppointments();
+
+        switch (appointmentType)
+        {
+            case LIVE_UNLOAD:
+                appointmentTypesScheduledSoFar = timeIntervalUtilization.getScheduledLiveUnloadAppts();
+                maxAppointmentTypeCapacity = specificTimeIntervalsCapacity != null
+                        && specificTimeIntervalsCapacity.getMaxLiveUnloadAppointments() != null
+                                ? specificTimeIntervalsCapacity.getMaxLiveUnloadAppointments()
+                                : timeIntervalCapacity.getMaxLiveUnloadAppointments();
+                break;
+            case LIVE_LOAD:
+                appointmentTypesScheduledSoFar = timeIntervalUtilization.getScheduledLiveLoadAppts();
+                maxAppointmentTypeCapacity = specificTimeIntervalsCapacity != null
+                        && specificTimeIntervalsCapacity.getMaxLiveLoadAppointments() != null
+                                ? specificTimeIntervalsCapacity.getMaxLiveLoadAppointments()
+                                : timeIntervalCapacity.getMaxLiveLoadAppointments();
+                break;
+            case PICKUP_LOAD:
+                appointmentTypesScheduledSoFar = timeIntervalUtilization.getScheduledPickupLoadAppts();
+                maxAppointmentTypeCapacity = specificTimeIntervalsCapacity != null
+                        && specificTimeIntervalsCapacity.getMaxPickupLoadAppointments() != null
+                                ? specificTimeIntervalsCapacity.getMaxPickupLoadAppointments()
+                                : timeIntervalCapacity.getMaxPickupLoadAppointments();
+                break;
+            case PICKUP_EMPTY:
+                appointmentTypesScheduledSoFar = timeIntervalUtilization.getScheduledPickupEmptyAppts();
+                maxAppointmentTypeCapacity = specificTimeIntervalsCapacity != null
+                        && specificTimeIntervalsCapacity.getMaxPickupEmptyAppointments() != null
+                                ? specificTimeIntervalsCapacity.getMaxPickupEmptyAppointments()
+                                : timeIntervalCapacity.getMaxPickupEmptyAppointments();
+                break;
+            case DROP_EMPTY:
+                appointmentTypesScheduledSoFar = timeIntervalUtilization.getScheduledDropEmptyAppts();
+                maxAppointmentTypeCapacity = specificTimeIntervalsCapacity != null
+                        && specificTimeIntervalsCapacity.getMaxDropEmptyAppointments() != null
+                                ? specificTimeIntervalsCapacity.getMaxDropEmptyAppointments()
+                                : timeIntervalCapacity.getMaxDropEmptyAppointments();
+                break;
+            case DROP_UNLOAD:
+                appointmentTypesScheduledSoFar = timeIntervalUtilization.getScheduledDropUnloadAppts();
+                maxAppointmentTypeCapacity = specificTimeIntervalsCapacity != null
+                        && specificTimeIntervalsCapacity.getMaxDropUnloadAppointments() != null
+                                ? specificTimeIntervalsCapacity.getMaxDropUnloadAppointments()
+                                : timeIntervalCapacity.getMaxDropUnloadAppointments();
+                break;
+        }
+
+        return (timeIntervalUtilization.getScheduledAppointments() < maxAppointments
+                && (maxAppointmentTypeCapacity == null || appointmentTypesScheduledSoFar < maxAppointmentTypeCapacity));
+    }
+
+    private boolean dayLevelUtilizationHasCapacity(DayLevelUtilization dayLevelUtilization,
+            AppointmentType appointmentType, DayLevelCapacity dayLevelCapacity)
+    {
+        long scheduledAppointments = 0;
+
+        if (dayLevelCapacity.getCapacityConstraintTypeId().equals(CapacityConstraintType.UOM.name()))
+        {
+            // UOM isn't supported, so skipping it
+            return true;
+        }
+        else if (dayLevelCapacity.getCapacityConstraintTypeId().equals(CapacityConstraintType.APPOINTMENT_TYPE.name()))
+        {
+            if (!appointmentType.name().equals(dayLevelCapacity.getCapacityConstraintAttribute()))
             {
-        Integer appointmentTypeCapacity = null;
+                return true;
+            }
 
             switch (appointmentType)
             {
                 case LIVE_UNLOAD:
-                appointmentTypeCapacity = timeIntervalUtilization.getRemainingLiveUnloadCpty();
+                    scheduledAppointments = dayLevelUtilization.getScheduledLiveUnloadAppts();
                     break;
                 case LIVE_LOAD:
-                appointmentTypeCapacity = timeIntervalUtilization.getRemainingLiveLoadCpty();
+                    scheduledAppointments = dayLevelUtilization.getScheduledLiveLoadAppts();
                     break;
                 case PICKUP_LOAD:
-                appointmentTypeCapacity = timeIntervalUtilization.getRemainingPickupLoadCpty();
+                    scheduledAppointments = dayLevelUtilization.getScheduledPickupLoadAppts();
                     break;
                 case PICKUP_EMPTY:
-                appointmentTypeCapacity = timeIntervalUtilization.getRemainingPickupEmptyCpty();
+                    scheduledAppointments = dayLevelUtilization.getScheduledPickupEmptyAppts();
                     break;
                 case DROP_EMPTY:
-                appointmentTypeCapacity = timeIntervalUtilization.getRemainingDropEmptyCpty();
+                    scheduledAppointments = dayLevelUtilization.getScheduledDropEmptyAppts();
                     break;
                 case DROP_UNLOAD:
-                appointmentTypeCapacity = timeIntervalUtilization.getRemainingDropUnloadCpty();
+                    scheduledAppointments = dayLevelUtilization.getScheduledDropUnloadAppts();
                     break;
             }
+        }
+        else
+        {
+            scheduledAppointments = dayLevelUtilization.getScheduledAppointments();
+        }
+
+        return dayLevelCapacity.getCapacity() == null || scheduledAppointments < dayLevelCapacity.getCapacity();
+    }
+
+    private boolean facilityLevelUtilizationHasCapacity(FacilityLevelUtilization facilityLevelUtilization,
+            AppointmentType appointmentType, FacilityDayLevelCapacity facilityDayLevelCapacity)
+    {
+        long scheduledAppointments = 0;
 
-        return timeIntervalUtilization.getRemainingCapacity() > 0
-                && (appointmentTypeCapacity == null || appointmentTypeCapacity > 0);
+        if (facilityDayLevelCapacity.getCapacityConstraintTypeId().equals(CapacityConstraintType.UOM.name()))
+        {
+            // UOM isn't supported, so skipping it
+            return true;
+        }
+        else if (facilityDayLevelCapacity.getCapacityConstraintTypeId()
+                .equals(CapacityConstraintType.APPOINTMENT_TYPE.name()))
+        {
+            if (!appointmentType.name().equals(facilityDayLevelCapacity.getCapacityConstraintAttribute()))
+            {
+                return true;
+            }
+
+            switch (appointmentType)
+            {
+                case LIVE_UNLOAD:
+                    scheduledAppointments = facilityLevelUtilization.getScheduledLiveUnloadAppts();
+                    break;
+                case LIVE_LOAD:
+                    scheduledAppointments = facilityLevelUtilization.getScheduledLiveLoadAppts();
+                    break;
+                case PICKUP_LOAD:
+                    scheduledAppointments = facilityLevelUtilization.getScheduledPickupLoadAppts();
+                    break;
+                case PICKUP_EMPTY:
+                    scheduledAppointments = facilityLevelUtilization.getScheduledPickupEmptyAppts();
+                    break;
+                case DROP_EMPTY:
+                    scheduledAppointments = facilityLevelUtilization.getScheduledDropEmptyAppts();
+                    break;
+                case DROP_UNLOAD:
+                    scheduledAppointments = facilityLevelUtilization.getScheduledDropUnloadAppts();
+                    break;
+            }
+        }
+        else
+        {
+            scheduledAppointments = facilityLevelUtilization.getScheduledAppointments();
+        }
+
+        return facilityDayLevelCapacity.getCapacity() == null
+                || scheduledAppointments < facilityDayLevelCapacity.getCapacity();
     }
 
     private TimeIntervalUtilization createAptTimeIntervalScopeUtil(Context context,
-            SingleDayTimeIntervalDefinition singleDayTimeIntervalDefinition,
             TimeSlot timeSlot, CapacityDTO capacityDTO, ResourceUnit resourceUnit)
     {
-        TimeIntervalCapacity timeIntervalCapacity = singleDayTimeIntervalDefinition.getTimeIntervalCapacity();
-
         TimeIntervalUtilizationBase.Key key =
                 new TimeIntervalUtilizationBase.Key(UUID.randomUUID().toString());
         securityKeyHelper.validateAndSetSecurityKey(context, TimeIntervalUtilization.ENTITY_NAME, null,
@@ -517,32 +632,11 @@ public class CapacityManager
         timeIntervalUtilization.setResourceUnitId(resourceUnit.getResourceId());
         timeIntervalUtilization.setAppointmentDate(capacityDTO.getTimeSlotAvailabilityCheck().toLocalDate());
 
-        timeIntervalUtilization.setTotalCapacity((long) timeIntervalCapacity.getMaxAppointments());
-        timeIntervalUtilization.setRemainingCapacity(timeIntervalUtilization.getTotalCapacity());
-
-        timeIntervalUtilization.setMaxDropEmptyCpty(timeIntervalCapacity.getMaxDropEmptyAppointments());
-        timeIntervalUtilization.setRemainingDropEmptyCpty(timeIntervalUtilization.getMaxDropEmptyCpty());
-
-        timeIntervalUtilization.setMaxDropUnloadCpty(timeIntervalCapacity.getMaxDropUnloadAppointments());
-        timeIntervalUtilization.setRemainingDropUnloadCpty(timeIntervalUtilization.getMaxDropUnloadCpty());
-
-        timeIntervalUtilization.setMaxLiveLoadCpty(timeIntervalCapacity.getMaxLiveLoadAppointments());
-        timeIntervalUtilization.setRemainingLiveLoadCpty(timeIntervalUtilization.getMaxLiveLoadCpty());
-
-        timeIntervalUtilization.setMaxLiveUnloadCpty(timeIntervalCapacity.getMaxLiveUnloadAppointments());
-        timeIntervalUtilization.setRemainingLiveUnloadCpty(timeIntervalUtilization.getMaxLiveUnloadCpty());
-
-        timeIntervalUtilization.setMaxPickupEmptyCpty(timeIntervalCapacity.getMaxPickupEmptyAppointments());
-        timeIntervalUtilization.setRemainingPickupEmptyCpty(timeIntervalUtilization.getMaxPickupEmptyCpty());
-
-        timeIntervalUtilization.setMaxPickupLoadCpty(timeIntervalCapacity.getMaxPickupLoadAppointments());
-        timeIntervalUtilization.setRemainingPickupLoadCpty(timeIntervalUtilization.getMaxPickupLoadCpty());
-
         return timeIntervalUtilizationService.save(context, timeIntervalUtilization, null, true);
     }
 
-    public DayLevelUtilization createAptDayLevelScopeUtilization(Context context, DayLevelCapacity dayLevelCapacity,
-            CapacityDTO capacityDTO, ResourceUnit resourceUnit)
+    private DayLevelUtilization createAptDayLevelScopeUtilization(Context context, CapacityDTO capacityDTO,
+            ResourceUnit resourceUnit)
     {
         DayLevelUtilization.Key key =
                 new DayLevelUtilizationBase.Key(UUID.randomUUID().toString());
@@ -551,19 +645,16 @@ public class CapacityManager
         DayLevelUtilization dayLevelUtilization =
                 EntityFactory.getFactory().newEntity(DayLevelUtilizationEntity.class, key);
 
-        dayLevelUtilization.setTotalCapacity(dayLevelCapacity.getCapacity());
-        dayLevelUtilization.setRemainingCapacity(dayLevelUtilization.getTotalCapacity());
         dayLevelUtilization.setResourceUnitId(resourceUnit.getResourceId());
         dayLevelUtilization.setWeekDayId(
                 String.valueOf(capacityDTO.getTimeSlotAvailabilityCheck().getDayOfWeek().getValue()));
         dayLevelUtilization.setAppointmentDate(capacityDTO.getTimeSlotAvailabilityCheck().toLocalDate());
-        dayLevelUtilization.setConstraintTypeId(dayLevelCapacity.getCapacityConstraintTypeId());
 
         return dayLevelUtilizationService.save(context, dayLevelUtilization, null, true);
     }
 
-    public FacilityLevelUtilization createAptFacLevelScopeUtilization(Context context,
-            FacilityDayLevelCapacity facilityDayLevelCapacity, LocalDateTime appointmentDateTime)
+    private FacilityLevelUtilization createAptFacLevelScopeUtilization(Context context,
+            LocalDateTime appointmentDateTime)
     {
         FacilityLevelUtilization.Key key =
                 new FacilityLevelUtilizationBase.Key(UUID.randomUUID().toString());
@@ -572,12 +663,35 @@ public class CapacityManager
         FacilityLevelUtilization facilityLevelUtilization =
                 EntityFactory.getFactory().newEntity(FacilityLevelUtilizationEntity.class, key);
 
-        facilityLevelUtilization.setTotalCapacity(facilityDayLevelCapacity.getCapacity());
-        facilityLevelUtilization.setRemainingCapacity(facilityLevelUtilization.getTotalCapacity());
         facilityLevelUtilization.setWeekDayId(String.valueOf(appointmentDateTime.getDayOfWeek().getValue()));
         facilityLevelUtilization.setAppointmentDate(appointmentDateTime.toLocalDate());
-        facilityLevelUtilization.setConstraintTypeId(facilityDayLevelCapacity.getCapacityConstraintTypeId());
 
         return facilityLevelUtilizationService.save(context, facilityLevelUtilization, null, true);
     }
+
+    private SpecificTimeIntervalsCapacity getSpecificTimeIntervalsCapacity(TimeIntervalScope timeIntervalScope,
+            TimeSlot timeSlot, LocalDateTime appointmentTime)
+    {
+        String appointmentDayOfWeek = String.valueOf(appointmentTime.getDayOfWeek().getValue());
+
+        for (SpecificTimeIntervalsCapacity timeIntervalsCapacity : timeIntervalScope
+                .getSpecificTimeIntervalsCapacityList())
+        {
+            if (!timeIntervalsCapacity.getDaysOfWeekId().equals(appointmentDayOfWeek))
+            {
+                continue;
+            }
+
+            LocalDateTime specificTimeIntervalCapacityStartTime =
+                    LocalDateTime.of(appointmentTime.toLocalDate(), LocalTime.of(
+                            timeIntervalsCapacity.getStartTimeHours(), timeIntervalsCapacity.getStartTimeMinutes()));
+
+            if (timeSlotOverlapsTime(timeSlot, specificTimeIntervalCapacityStartTime, appointmentDayOfWeek))
+            {
+                return timeIntervalsCapacity;
+            }
+        }
+
+        return null;
+    }
 }
diff --git a/src/main/java/com/manh/cp/appointment/core/api/service/DayLevelUtilizationService.java b/src/main/java/com/manh/cp/appointment/core/api/service/DayLevelUtilizationService.java
index eac9ff5da..5c4ebb60b 100644
--- a/src/main/java/com/manh/cp/appointment/core/api/service/DayLevelUtilizationService.java
+++ b/src/main/java/com/manh/cp/appointment/core/api/service/DayLevelUtilizationService.java
@@ -24,7 +24,6 @@ import com.manh.cp.fw.common.Context;
 
 public interface DayLevelUtilizationService extends DayLevelUtilizationServiceBase
 {
-    DayLevelUtilization findByAppointmentDateConstraintTypeAndResourceUnit(Context context,
-            LocalDateTime appointmentDate,
-            String constraintType, String resourceUnit);
+    DayLevelUtilization findByAppointmentDateAndResourceUnit(Context context, LocalDateTime appointmentDate,
+            String resourceUnit);
 }
diff --git a/src/main/java/com/manh/cp/appointment/core/api/service/FacilityDayLevelScopeService.java b/src/main/java/com/manh/cp/appointment/core/api/service/FacilityDayLevelScopeService.java
index cfdf5fa45..014aa3c1b 100644
--- a/src/main/java/com/manh/cp/appointment/core/api/service/FacilityDayLevelScopeService.java
+++ b/src/main/java/com/manh/cp/appointment/core/api/service/FacilityDayLevelScopeService.java
@@ -21,11 +21,12 @@ import java.time.LocalDateTime;
 import java.util.List;
 
 import com.manh.cp.appointment.core.api.domain.FacilityDayLevelScope;
+import com.manh.cp.appointment.core.impl.domain.entity.FacilityDayLevelScopeEntity;
 import com.manh.cp.fw.common.Context;
 
 public interface FacilityDayLevelScopeService extends FacilityDayLevelScopeServiceBase
 {
     List<FacilityDayLevelScope> getAllFacilityDayLevelScopeList(Context context);
 
-    FacilityDayLevelScope getByEffectiveDate(Context context, LocalDateTime effectiveDateTime);
+    List<FacilityDayLevelScopeEntity> getByEffectiveDate(Context context, LocalDateTime effectiveDateTime);
 }
diff --git a/src/main/java/com/manh/cp/appointment/core/api/service/FacilityLevelUtilizationService.java b/src/main/java/com/manh/cp/appointment/core/api/service/FacilityLevelUtilizationService.java
index aca4c49f0..90acc4d73 100644
--- a/src/main/java/com/manh/cp/appointment/core/api/service/FacilityLevelUtilizationService.java
+++ b/src/main/java/com/manh/cp/appointment/core/api/service/FacilityLevelUtilizationService.java
@@ -24,6 +24,5 @@ import com.manh.cp.fw.common.Context;
 
 public interface FacilityLevelUtilizationService extends FacilityLevelUtilizationServiceBase
 {
-    FacilityLevelUtilization findByAppointmentDateAndConstraintType(Context context, LocalDateTime appointmentDate,
-            String constraintType);
+    FacilityLevelUtilization findByAppointmentDate(Context context, LocalDateTime appointmentDate);
 }
diff --git a/src/main/java/com/manh/cp/appointment/core/dto/CapacityDTO.java b/src/main/java/com/manh/cp/appointment/core/dto/CapacityDTO.java
index 3efa9d8b8..e3b24ed4f 100644
--- a/src/main/java/com/manh/cp/appointment/core/dto/CapacityDTO.java
+++ b/src/main/java/com/manh/cp/appointment/core/dto/CapacityDTO.java
@@ -44,6 +44,8 @@ public class CapacityDTO
 
     private Long totalAppointmentDurationAccountedFor;
 
+    private boolean allCapacityChecksAreValid = false;
+
     private Set<TimeIntervalUtilization> timeIntervalUtilizations = new HashSet<>();
 
     private Set<DayLevelUtilization> dayLevelUtilizations = new HashSet<>();
@@ -57,6 +59,7 @@ public class CapacityDTO
         appointmentDateTime = enhancedAppointmentDTO.getPreferredDateTime();
         appointmentDuration = enhancedAppointmentDTO.getDuration();
         appointmentTypeId = AppointmentType.valueOf(enhancedAppointmentDTO.getAppointmentTypeId());
+        resetCapacityCheck();
     }
 
     public void resetCapacityCheck()
@@ -135,10 +138,13 @@ public class CapacityDTO
         return appointmentTypeId;
     }
 
+    public void setAllCapacityChecksAreValid(boolean allCapacityChecksAreValid)
+    {
+        this.allCapacityChecksAreValid = allCapacityChecksAreValid;
+    }
+
     public boolean allCapacityChecksAreValid()
     {
-        return !timeIntervalUtilizations.isEmpty() && !dayLevelUtilizations.isEmpty()
-                && !facilityLevelUtilizations.isEmpty()
-                && totalAppointmentDurationAccountedFor >= appointmentDuration;
+        return allCapacityChecksAreValid && totalAppointmentDurationAccountedFor >= appointmentDuration;
     }
 }
diff --git a/src/main/java/com/manh/cp/appointment/core/impl/service/DayLevelUtilizationServiceImpl.java b/src/main/java/com/manh/cp/appointment/core/impl/service/DayLevelUtilizationServiceImpl.java
index 74e105827..5697d1f67 100644
--- a/src/main/java/com/manh/cp/appointment/core/impl/service/DayLevelUtilizationServiceImpl.java
+++ b/src/main/java/com/manh/cp/appointment/core/impl/service/DayLevelUtilizationServiceImpl.java
@@ -26,34 +26,22 @@ import com.manh.cp.appointment.core.api.domain.DayLevelUtilization;
 import com.manh.cp.appointment.core.api.service.DayLevelUtilizationService;
 import com.manh.cp.appointment.core.impl.domain.entity.QDayLevelUtilizationEntity;
 import com.manh.cp.fw.common.Context;
-import com.manh.cp.fw.core.logging.CPLoggerFactory;
-import com.manh.cp.fw.core.logging.Logger;
 
 @Component
 public class DayLevelUtilizationServiceImpl extends DayLevelUtilizationServiceImplBase
         implements DayLevelUtilizationService
 {
-    private final Logger logger = CPLoggerFactory.getLogger(DayLevelUtilizationServiceImpl.class);
-
-    public DayLevelUtilization findByAppointmentDateConstraintTypeAndResourceUnit(Context context,
-            LocalDateTime appointmentDate,
-            String constraintType, String resourceUnit)
+    public DayLevelUtilization findByAppointmentDateAndResourceUnit(Context context, LocalDateTime appointmentDate,
+            String resourceUnit)
     {
-        logger.trace("">> findByAppointmentDateConstraintTypeAndResourceUnit()"");
-
         QDayLevelUtilizationEntity qDayLevelUtilization =
                 QDayLevelUtilizationEntity.dayLevelUtilizationEntity;
 
         JPQLQuery query = createQueryObject(context);
 
-        DayLevelUtilization dayLevelUtilization = query.from(qDayLevelUtilization)
+        return query.from(qDayLevelUtilization)
                 .where(qDayLevelUtilization.appointmentDate.eq(appointmentDate.toLocalDate())
-                        .and(qDayLevelUtilization.constraintTypeId.eq(constraintType)
-                                .and(qDayLevelUtilization.resourceUnitId.eq(resourceUnit))))
+                        .and(qDayLevelUtilization.resourceUnitId.eq(resourceUnit)))
                 .singleResult(qDayLevelUtilization);
-
-        logger.trace(""<< findByAppointmentDateConstraintTypeAndResourceUnit()"");
-
-        return dayLevelUtilization;
     }
 }
diff --git a/src/main/java/com/manh/cp/appointment/core/impl/service/FacilityDayLevelScopeServiceImpl.java b/src/main/java/com/manh/cp/appointment/core/impl/service/FacilityDayLevelScopeServiceImpl.java
index 9508f8dac..7d44613cf 100644
--- a/src/main/java/com/manh/cp/appointment/core/impl/service/FacilityDayLevelScopeServiceImpl.java
+++ b/src/main/java/com/manh/cp/appointment/core/impl/service/FacilityDayLevelScopeServiceImpl.java
@@ -77,7 +77,7 @@ public class FacilityDayLevelScopeServiceImpl extends FacilityDayLevelScopeServi
         return facilityDayLevelScopes;
     }
 
-    public FacilityDayLevelScope getByEffectiveDate(Context context, LocalDateTime effectiveDateTime)
+    public List<FacilityDayLevelScopeEntity> getByEffectiveDate(Context context, LocalDateTime effectiveDateTime)
     {
         logger.trace("">> FacilityDayLevelScopeServiceImpl::getByEffectiveDate"");
 
@@ -87,14 +87,14 @@ public class FacilityDayLevelScopeServiceImpl extends FacilityDayLevelScopeServi
         JPQLQuery query = createQueryObject(context);
         setFacilityDayLevelScopeQueryHelper(query);
 
-        FacilityDayLevelScopeEntity facilityDayLevelScope = query.from(qFacilityDayLevelScopeEntity)
+        List<FacilityDayLevelScopeEntity> facilityDayLevelScopes = query.from(qFacilityDayLevelScopeEntity)
                 .where(qFacilityDayLevelScopeEntity.effectiveDateTime.loe(effectiveDateTime)
                         .and(qFacilityDayLevelScopeEntity.expirationDateTime.gt(effectiveDateTime)))
-                .singleResult(qFacilityDayLevelScopeEntity);
+                .listResults(qFacilityDayLevelScopeEntity).getResults();
 
         logger.trace(""<< FacilityDayLevelScopeServiceImpl::getByEffectiveDate"");
 
-        return facilityDayLevelScope;
+        return facilityDayLevelScopes;
     }
 
     private void setFacilityDayLevelScopeQueryHelper(JPQLQuery query)
diff --git a/src/main/java/com/manh/cp/appointment/core/impl/service/FacilityLevelUtilizationServiceImpl.java b/src/main/java/com/manh/cp/appointment/core/impl/service/FacilityLevelUtilizationServiceImpl.java
index b18e4c37a..337177fe9 100644
--- a/src/main/java/com/manh/cp/appointment/core/impl/service/FacilityLevelUtilizationServiceImpl.java
+++ b/src/main/java/com/manh/cp/appointment/core/impl/service/FacilityLevelUtilizationServiceImpl.java
@@ -26,33 +26,20 @@ import com.manh.cp.appointment.core.api.domain.FacilityLevelUtilization;
 import com.manh.cp.appointment.core.api.service.FacilityLevelUtilizationService;
 import com.manh.cp.appointment.core.impl.domain.entity.QFacilityLevelUtilizationEntity;
 import com.manh.cp.fw.common.Context;
-import com.manh.cp.fw.core.logging.CPLoggerFactory;
-import com.manh.cp.fw.core.logging.Logger;
 
 @Component
 public class FacilityLevelUtilizationServiceImpl extends FacilityLevelUtilizationServiceImplBase
         implements FacilityLevelUtilizationService
 {
-    private final Logger logger = CPLoggerFactory.getLogger(FacilityLevelUtilizationServiceImpl.class);
-
-    public FacilityLevelUtilization findByAppointmentDateAndConstraintType(Context context,
-            LocalDateTime appointmentDate,
-            String constraintType)
+    public FacilityLevelUtilization findByAppointmentDate(Context context, LocalDateTime appointmentDate)
     {
-        logger.trace("">> findByAppointmentDateAndConstraintType()"");
-
         QFacilityLevelUtilizationEntity qFacilityLevelUtilization =
                 QFacilityLevelUtilizationEntity.facilityLevelUtilizationEntity;
 
         JPQLQuery query = createQueryObject(context);
 
-        FacilityLevelUtilization facilityLevelUtilization = query.from(qFacilityLevelUtilization)
-                .where(qFacilityLevelUtilization.appointmentDate.eq(appointmentDate.toLocalDate())
-                        .and(qFacilityLevelUtilization.constraintTypeId.eq(constraintType)))
+        return query.from(qFacilityLevelUtilization)
+                .where(qFacilityLevelUtilization.appointmentDate.eq(appointmentDate.toLocalDate()))
                 .singleResult(qFacilityLevelUtilization);
-
-        logger.trace(""<< findByAppointmentDateAndConstraintType()"");
-
-        return facilityLevelUtilization;
     }
 }
diff --git a/src/main/resources/metaData/AppointmentEntities.xml b/src/main/resources/metaData/AppointmentEntities.xml
index 513d606ad..8da9a52e0 100644
--- a/src/main/resources/metaData/AppointmentEntities.xml
+++ b/src/main/resources/metaData/AppointmentEntities.xml
@@ -267,7 +267,6 @@
             <property name=""daysOfWeekId"" type=""id"" nullable=""false"" description=""day of week for which the capacity constraints would apply""/>
             <property name=""startTimeHours"" type=""shortInteger""  nullable=""false"" description=""start hour for which the capacity constraints would apply""/>
             <property name=""startTimeMinutes"" type=""shortInteger"" nullable=""false"" description=""start minutes for which the capacity constraints would apply""/>
-
             <property name=""maxAppointments"" type=""shortInteger"" nullable=""false"" description=""Maximum number of Appointments""/>
             <property name=""maxLiveLoadAppointments"" type=""shortInteger"" nullable=""true"" description=""Maximum number of Live load Appointments""/>
             <property name=""maxPickupLoadAppointments"" type=""shortInteger"" nullable=""true"" description=""Maximum number of Pickup load Appointments""/>
@@ -418,20 +417,13 @@
             <property name=""resourceUnitId"" type=""id"" nullable=""false"" description=""The resource unit of the time interval scope utilization""/>
             <property name=""timeSlotId"" type=""id"" nullable=""false"" description=""The time slot of the time interval scope utilization""/>
             <property name=""appointmentDate"" type=""date"" nullable=""false"" description=""The appointment date of the time interval scope utilization""/>
-            <property name=""totalCapacity"" type=""integer"" nullable=""false"" description=""The total capacity of the time interval scope utilization""/>
-            <property name=""remainingCapacity"" type=""integer"" nullable=""false"" description=""The remaining capacity of the time interval scope utilization""/>
-            <property name=""maxLiveLoadCpty"" type=""shortInteger"" nullable=""true"" description=""Maximum number of Live load Appointments""/>
-            <property name=""remainingLiveLoadCpty"" type=""shortInteger"" nullable=""true"" description=""Maximum number of Live load Appointments""/>
-            <property name=""maxLiveUnloadCpty"" type=""shortInteger"" nullable=""true"" description=""Maximum number of Live Unload Appointments""/>
-            <property name=""remainingLiveUnloadCpty"" type=""shortInteger"" nullable=""true"" description=""Maximum number of Live Unload Appointments""/>
-            <property name=""maxPickupLoadCpty"" type=""shortInteger"" nullable=""true"" description=""Maximum number of Pickup load Appointments""/>
-            <property name=""remainingPickupLoadCpty"" type=""shortInteger"" nullable=""true"" description=""Maximum number of Pickup load Appointments""/>
-            <property name=""maxPickupEmptyCpty"" type=""shortInteger"" nullable=""true"" description=""Maximum number of Pickup empty Appointments""/>
-            <property name=""remainingPickupEmptyCpty"" type=""shortInteger"" nullable=""true"" description=""Maximum number of Pickup empty Appointments""/>
-            <property name=""maxDropUnloadCpty"" type=""shortInteger"" nullable=""true"" description=""Maximum number of Drop Unload Appointments""/>
-            <property name=""remainingDropUnloadCpty"" type=""shortInteger"" nullable=""true"" description=""Maximum number of Drop Unload Appointments""/>
-            <property name=""maxDropEmptyCpty"" type=""shortInteger"" nullable=""true"" description=""Maximum number of Drop Empty Appointments""/>
-            <property name=""remainingDropEmptyCpty"" type=""shortInteger"" nullable=""true"" description=""Maximum number of Drop Empty Appointments""/>
+            <property name=""scheduledAppointments"" type=""integer"" nullable=""false"" defaultValue=""0"" description=""How many appointments have been scheduled for this time interval scope utilization""/>
+            <property name=""scheduledLiveLoadAppts"" type=""integer"" nullable=""false"" defaultValue=""0"" description=""Scheduled number of Live load Appointments""/>
+            <property name=""scheduledLiveUnloadAppts"" type=""integer"" nullable=""false"" defaultValue=""0"" description=""Scheduled number of Live Unload Appointments""/>
+            <property name=""scheduledPickupLoadAppts"" type=""integer"" nullable=""false"" defaultValue=""0"" description=""Scheduled number of Pickup load Appointments""/>
+            <property name=""scheduledPickupEmptyAppts"" type=""integer"" nullable=""false"" defaultValue=""0"" description=""Scheduled number of Pickup empty Appointments""/>
+            <property name=""scheduledDropUnloadAppts"" type=""integer"" nullable=""false"" defaultValue=""0"" description=""Scheduled number of Drop Unload Appointments""/>
+            <property name=""scheduledDropEmptyAppts"" type=""integer"" nullable=""false"" defaultValue=""0"" description=""Scheduled number of Drop Empty Appointments""/>
             <businessKeys>
                 <businessKey>
                     <property name=""timeIntervalUtilizationId"" />
@@ -450,10 +442,13 @@
             <property name=""resourceUnitId"" type=""id"" nullable=""false"" description=""Resource unit of the day level utilization""/>
             <property name=""weekDayId"" type=""id"" nullable=""false"" description=""Day of the week of the appointment date""/>
             <property name=""appointmentDate"" type=""date"" nullable=""false"" description=""Appointment Date of the day level utilization""/>
-            <property name=""totalCapacity"" type=""integer"" nullable=""false"" description=""Total Capacity of the day level utilization""/>
-            <property name=""remainingCapacity"" type=""integer"" nullable=""false"" description=""Remaining Capacity of the day level utilization""/>
-            <property name=""constraintTypeId"" type=""id"" nullable=""true"" description=""Constraint type of the day level scope""/>
-            <property name=""constraintAttributeId"" type=""id"" nullable=""true"" description=""Constraint attribute of the day level scope""/>
+            <property name=""scheduledAppointments"" type=""integer"" nullable=""false"" defaultValue=""0"" description=""Remaining Capacity of the day level utilization""/>
+            <property name=""scheduledLiveLoadAppts"" type=""integer"" nullable=""false"" defaultValue=""0"" description=""Scheduled number of Live load Appointments""/>
+            <property name=""scheduledLiveUnloadAppts"" type=""integer"" nullable=""false"" defaultValue=""0"" description=""Scheduled number of Live Unload Appointments""/>
+            <property name=""scheduledPickupLoadAppts"" type=""integer"" nullable=""false"" defaultValue=""0"" description=""Scheduled number of Pickup load Appointments""/>
+            <property name=""scheduledPickupEmptyAppts"" type=""integer"" nullable=""false"" defaultValue=""0"" description=""Scheduled number of Pickup empty Appointments""/>
+            <property name=""scheduledDropUnloadAppts"" type=""integer"" nullable=""false"" defaultValue=""0"" description=""Scheduled number of Drop Unload Appointments""/>
+            <property name=""scheduledDropEmptyAppts"" type=""integer"" nullable=""false"" defaultValue=""0"" description=""Scheduled number of Drop Empty Appointments""/>
             <businessKeys>
                 <businessKey>
                     <property name=""dayLevelUtilizationId"" />
@@ -471,10 +466,13 @@
             <property name=""facilityLevelUtilizationId"" type=""id"" nullable=""false"" description=""BK of the entity""/>
             <property name=""weekDayId"" type=""id"" nullable=""false"" description=""Day of the week of the appointment date""/>
             <property name=""appointmentDate"" type=""date"" nullable=""false"" description=""Appointment date of the facility level utilization""/>
-            <property name=""totalCapacity"" type=""integer"" nullable=""false"" description=""Total capacity of the facility level utilization""/>
-            <property name=""remainingCapacity"" type=""integer"" nullable=""false"" description=""Remaining capacity of the facility level utilization""/>
-            <property name=""constraintTypeId"" type=""id"" nullable=""true"" description=""Constraint type of the facility level scope""/>
-            <property name=""constraintAttributeId"" type=""id"" nullable=""true"" description=""Constraint type of the facility level scope""/>
+            <property name=""scheduledAppointments"" type=""integer"" nullable=""false"" defaultValue=""0"" description=""How many appointments have been scheduled for this facility level utilization""/>
+            <property name=""scheduledLiveLoadAppts"" type=""integer"" nullable=""false"" defaultValue=""0"" description=""Scheduled number of Live load Appointments""/>
+            <property name=""scheduledLiveUnloadAppts"" type=""integer"" nullable=""false"" defaultValue=""0"" description=""Scheduled number of Live Unload Appointments""/>
+            <property name=""scheduledPickupLoadAppts"" type=""integer"" nullable=""false"" defaultValue=""0"" description=""Scheduled number of Pickup load Appointments""/>
+            <property name=""scheduledPickupEmptyAppts"" type=""integer"" nullable=""false"" defaultValue=""0"" description=""Scheduled number of Pickup empty Appointments""/>
+            <property name=""scheduledDropUnloadAppts"" type=""integer"" nullable=""false"" defaultValue=""0"" description=""Scheduled number of Drop Unload Appointments""/>
+            <property name=""scheduledDropEmptyAppts"" type=""integer"" nullable=""false"" defaultValue=""0"" description=""Scheduled number of Drop Empty Appointments""/>
             <businessKeys>
                 <businessKey>
                     <property name=""facilityLevelUtilizationId"" />
diff --git a/version.txt b/version.txt
index 2b9cabc07..62d44807d 100644
--- a/version.txt
+++ b/version.txt
@@ -1 +1 @@
-20.12.0
+20.13.0
","Question\(may be to BA\) : Can we have Day Level Capacity defined with both # of appointment as well as for appointment type?
Same question as Day Level Capacity 
do we need to set scheduled Appt count as 1 ?
I only increase the count to 1 if the appointment is scheduled. Otherwise, it will be created with the count as 0
I’m really not sure why they wouldn’t just create two separate records for that. What would your constraint type Id even look like in that scenario? That being said, it doesn’t look like we have any validations for this field, as I was able to create a capacity record with the constraint type “garbage”
@{5c3e1980d254b55db84d9cb4} - if they create 2 day level records one for #of appointments and one more for appt type , we are validating against both?
@{6152e14e289a54006ab32626} One day level utilization record will have all the information needed for both capacity checks, so I pull it once at the start and use it for all the capacity checks for that day
review : we are checking for facility level capacity at 2 place. line@268 \(here\) and line#290. Do we need at both place?
do we need to check null for `timeIntervalUtilization.getScheduledLiveUnloadAppts()` ? 
That’s a fair point. If all the capacity checks pass, I can return the result of the facility capacity check. No reason to list it in two places with two conditions"
949be2ac0e957cfbe981da242384424b4786067a,"diff --git a/src/component-test/java/com/manh/cp/appointment/appointment/DaylightSavings/AppointmentDaylightChangeParameterizedTest.java b/src/component-test/java/com/manh/cp/appointment/appointment/DaylightSavings/AppointmentDaylightChangeParameterizedTest.java
index 92a3ad5d8..88421b0ca 100644
--- a/src/component-test/java/com/manh/cp/appointment/appointment/DaylightSavings/AppointmentDaylightChangeParameterizedTest.java
+++ b/src/component-test/java/com/manh/cp/appointment/appointment/DaylightSavings/AppointmentDaylightChangeParameterizedTest.java
@@ -44,6 +44,7 @@ import com.manh.cp.appointment.appointment.TestUtil;
 import com.manh.cp.appointment.appointment.api.service.AppointmentMapService;
 import com.manh.cp.appointment.appointment.client.dto.calendar.CalendarGridIntervalCapacities;
 import com.manh.cp.appointment.appointment.client.dto.calendar.CalendarResponseDTO;
+import com.manh.cp.appointment.appointment.constants.FeatureFlagConstants;
 import com.manh.cp.appointment.appointment.constants.FeatureIdentifier;
 import com.manh.cp.appointment.appointment.impl.service.AppointmentManager;
 import com.manh.cp.appointment.appointment.mocks.MockAppointmentUtil;
@@ -55,6 +56,7 @@ import com.manh.cp.fw.core.logging.Logger;
 import com.manh.cp.fw.core.rest.RestApiResponse;
 import com.manh.cp.fw.dmtest.JsonUtil;
 import com.manh.cp.fw.entity.domain.entity.EntityList;
+import com.manh.cp.fw.featureflags.test.AssumeFlagEnabled;
 import com.manh.cp.fw.query.Query;
 import com.manh.cp.schedule.calendar.api.service.CalendarDefinitionService;
 import com.manh.cp.schedule.utilization.fetch.FetcherFactory;
@@ -118,6 +120,9 @@ public class AppointmentDaylightChangeParameterizedTest extends ParameterizedTes
 
         context.setTransactionAttribute(""component-test"",
                 FeatureIdentifier.FeatureFlags24_3.CONSIDER_DAY_LIGHT_SAVINGS_FOR_SOUTH_AMERICA.getFeatureId(), true);
+        context.setTransactionAttribute(""component-test"",
+                FeatureFlagConstants.FF_99_9_FIX_FACILITY_DAY_LEVEL_SCOPE_FOR_NON_UTC_TIMEZONE,
+                true);
 
         dataRemover.removeAllData(context);
         clearCache(""CalendarDefinition::DomainEntity::retail"");
@@ -188,6 +193,7 @@ public class AppointmentDaylightChangeParameterizedTest extends ParameterizedTes
 
     @Test
     @Transactional(propagation = Propagation.REQUIRES_NEW)
+    @AssumeFlagEnabled(FeatureFlagConstants.FF_99_9_FIX_FACILITY_DAY_LEVEL_SCOPE_FOR_NON_UTC_TIMEZONE)
     public void testCalendarData()
     {
         logger.debug("">> Test Scenarios for Time Zone : [{}]"", timeZone);
diff --git a/src/component-test/java/com/manh/cp/appointment/appointment/RecommendationTests.java b/src/component-test/java/com/manh/cp/appointment/appointment/RecommendationTests.java
index 3834dcdcf..f69552040 100644
--- a/src/component-test/java/com/manh/cp/appointment/appointment/RecommendationTests.java
+++ b/src/component-test/java/com/manh/cp/appointment/appointment/RecommendationTests.java
@@ -202,11 +202,15 @@ public class RecommendationTests extends AbstractComponentTest
         appointmentParameterCriteriaService.save(context, appointmentParameterCriteria);
 
         context.setTransactionAttribute(""component-test"",
-                FeatureIdentifier.FeatureFlags99_9.CONSIDER_DAY_LIGHT_SAVING_CHANGE.getFeatureId(),
+                FeatureIdentifier.FeatureFlags24_3.CONSIDER_DAY_LIGHT_SAVINGS_FOR_SOUTH_AMERICA.getFeatureId(),
                 true);
+
         context.setTransactionAttribute(""component-test"",
                 FeatureIdentifier.FeatureFlags24_3.AVOID_RECOMMENDING_PAST_DATE_TIMESLOTS.getFeatureId(),
                 true);
+        context.setTransactionAttribute(""component-test"",
+                FeatureFlagConstants.FF_99_9_FIX_FACILITY_DAY_LEVEL_SCOPE_FOR_NON_UTC_TIMEZONE,
+                true);
     }
 
     @After
@@ -215,8 +219,11 @@ public class RecommendationTests extends AbstractComponentTest
         mockAppointmentUtil.setFacilityTimeZone(null);
 
         context.setTransactionAttribute(""component-test"",
-                FeatureIdentifier.FeatureFlags99_9.CONSIDER_DAY_LIGHT_SAVING_CHANGE.getFeatureId(),
+                FeatureIdentifier.FeatureFlags24_3.CONSIDER_DAY_LIGHT_SAVINGS_FOR_SOUTH_AMERICA.getFeatureId(),
                 false);
+        context.setTransactionAttribute(""component-test"",
+                FeatureFlagConstants.FF_99_9_FIX_FACILITY_DAY_LEVEL_SCOPE_FOR_NON_UTC_TIMEZONE,
+                true);
 
         TimeZone resetTimeZone = TimeZone.getTimeZone(""UTC"");
         mockAppointmentUtil.setFacilityTimeZone(resetTimeZone);
@@ -1631,6 +1638,7 @@ public class RecommendationTests extends AbstractComponentTest
      * Test to verify recommednations are provided when the requested timeslot is 11:30-11:45pM and timezone is not UTC
      */
     @Test
+    @AssumeFlagEnabled(FeatureFlagConstants.FF_99_9_FIX_FACILITY_DAY_LEVEL_SCOPE_FOR_NON_UTC_TIMEZONE)
     public void testRecommendationAndCreationForLast11PMWindow() throws Exception
     {
         TimeZone timeZone = TimeZone.getTimeZone(""America/New_York"");
diff --git a/src/component-test/java/com/manh/cp/appointment/appointment/ScheduleCarrierAppointmentTest.java b/src/component-test/java/com/manh/cp/appointment/appointment/ScheduleCarrierAppointmentTest.java
index 538ed8e51..5458020f0 100644
--- a/src/component-test/java/com/manh/cp/appointment/appointment/ScheduleCarrierAppointmentTest.java
+++ b/src/component-test/java/com/manh/cp/appointment/appointment/ScheduleCarrierAppointmentTest.java
@@ -296,10 +296,10 @@ public class ScheduleCarrierAppointmentTest extends AbstractComponentTest
         String appointmentPath = ""/appointment/appointment/scheduleCarrierAppointmentTest/AppointmentWithVendorPO.json"";
         String appointmentId = ""ROLLOVER_ERROR_WITH_NO_UTILIZATION"";
         Document appointmentDocument = JsonUtil.readDocument(appointmentPath);
-        appointmentDocument.put(""WindowEndDateTime"", LocalDateTime.now().plusWeeks(2).toString());
+        appointmentDocument.put(""WindowEndDateTime"", LocalDateTime.now().plusWeeks(3).toString());
         appointmentDocument.put(""AppointmentId"", appointmentId);
-        LocalDateTime preferredAppointmentTime = testUtil.getNextDayOfWeek(
-                LocalDateTime.now().plusWeeks(1).toLocalDate().atTime(17, 0), DayOfWeek.TUESDAY);
+        LocalDateTime preferredAppointmentTime =
+                LocalDateTime.now().plusWeeks(2).toLocalDate().atTime(17, 0);
 
         preferredAppointmentTime = preferredAppointmentTime.withNano(0);
 
diff --git a/src/main/java/com/manh/cp/appointment/appointment/constants/FeatureFlagConstants.java b/src/main/java/com/manh/cp/appointment/appointment/constants/FeatureFlagConstants.java
index 8f36e6296..dd0b50b37 100644
--- a/src/main/java/com/manh/cp/appointment/appointment/constants/FeatureFlagConstants.java
+++ b/src/main/java/com/manh/cp/appointment/appointment/constants/FeatureFlagConstants.java
@@ -32,4 +32,6 @@ public class FeatureFlagConstants
     public static final String FF_24_4_ERROR_MESSAGES_WITH_APPOINTMENT_ID = ""SUP-516677#2024-08"";
 
     public static final String FF_24_4_FIX_EDIT_APPOINTMENT_DATE = ""SUP-522225#2024-08"";
+
+    public static final String FF_99_9_FIX_FACILITY_DAY_LEVEL_SCOPE_FOR_NON_UTC_TIMEZONE = ""SUP-504432#2024-08"";
 }
diff --git a/src/main/java/com/manh/cp/appointment/core/impl/service/FacilityDayLevelScheduleAssociator.java b/src/main/java/com/manh/cp/appointment/core/impl/service/FacilityDayLevelScheduleAssociator.java
index 753450e44..181ecafe1 100644
--- a/src/main/java/com/manh/cp/appointment/core/impl/service/FacilityDayLevelScheduleAssociator.java
+++ b/src/main/java/com/manh/cp/appointment/core/impl/service/FacilityDayLevelScheduleAssociator.java
@@ -29,6 +29,7 @@ import org.springframework.stereotype.Component;
 
 import com.manh.cp.appointment.appointment.api.service.FeatureFlagService;
 import com.manh.cp.appointment.appointment.constants.AppointmentConstants;
+import com.manh.cp.appointment.appointment.constants.FeatureFlagConstants;
 import com.manh.cp.appointment.appointment.impl.service.AppointmentUtil;
 import com.manh.cp.appointment.appointment.impl.service.EntityToDTOConverter;
 import com.manh.cp.appointment.core.api.domain.*;
@@ -546,6 +547,14 @@ public class FacilityDayLevelScheduleAssociator
         ZonedDateTime sequenceStartTimeAtFacility;
 
         LocalDateTime currentTime = LocalDateTime.now(ZoneId.of(AppointmentConstants.DEFAULT_TIMEZONE));
+        if (featureFlagService
+                .isOn(FeatureFlagConstants.FF_99_9_FIX_FACILITY_DAY_LEVEL_SCOPE_FOR_NON_UTC_TIMEZONE))
+        {
+            sequenceStartTimeAtFacility = ZonedDateTime.of(LocalDateTime.of(1972, 1, 1, startHour, startMinutes),
+                    timeZone.toZoneId());
+        }
+        else
+        {
             int currentYear = currentTime.getYear();
             Month currentMonth = currentTime.getMonth();
             int currentDay = currentTime.getDayOfMonth();
@@ -553,6 +562,7 @@ public class FacilityDayLevelScheduleAssociator
             sequenceStartTimeAtFacility =
                     ZonedDateTime.of(LocalDateTime.of(currentYear, currentMonth, currentDay, startHour, startMinutes),
                             timeZone.toZoneId());
+        }
 
         for (int i = 0; i < 8; i++)
         {
diff --git a/src/main/java/com/manh/cp/appointment/core/impl/service/ResourceAvailabilityServiceImpl.java b/src/main/java/com/manh/cp/appointment/core/impl/service/ResourceAvailabilityServiceImpl.java
index 6fe9f7bbe..0c89ddb36 100644
--- a/src/main/java/com/manh/cp/appointment/core/impl/service/ResourceAvailabilityServiceImpl.java
+++ b/src/main/java/com/manh/cp/appointment/core/impl/service/ResourceAvailabilityServiceImpl.java
@@ -48,6 +48,7 @@ import com.manh.cp.appointment.appointment.client.Constants.ErrorDefinitionIdBun
 import com.manh.cp.appointment.appointment.client.dto.ApplicableAppointmentParametersDTO;
 import com.manh.cp.appointment.appointment.constants.AppointmentConstants;
 import com.manh.cp.appointment.appointment.constants.CapacityConstraintLevel;
+import com.manh.cp.appointment.appointment.constants.FeatureFlagConstants;
 import com.manh.cp.appointment.appointment.constants.FeatureIdentifier;
 import com.manh.cp.appointment.appointment.impl.service.AppointmentUtil;
 import com.manh.cp.appointment.core.api.domain.CapacityScope;
@@ -1351,6 +1352,22 @@ public class ResourceAvailabilityServiceImpl<T extends AppointmentInputDTO> impl
                         ImmutablePair.of(dayLightAdjustedScheduleUtilzation, capacity);
                 dayLightAdjustedScheduleUtilizations.add(fsSchedulePair);
             }
+            else if (featureFlagService
+                    .isOn(FeatureFlagConstants.FF_99_9_FIX_FACILITY_DAY_LEVEL_SCOPE_FOR_NON_UTC_TIMEZONE)
+                    && wasConfigurationMadeDuringDayLightSavings && !isInputInDaylightSavings)
+            {
+                ScheduleUtilization.Builder builder = ScheduleUtilization.newBuilder();
+                DateTimeRange dayLightAdjustedDateTimeRange = DateTimeRange
+                        .from(dateTimeRangeFW.getStart().plusHours(1), dateTimeRangeFW.getEnd().plusHours(1));
+                ScheduleUtilization dayLightAdjustedScheduleUtilzation = builder
+                        .withCalendarScheduleId(fwCalendarScheduleId)
+                        .withDateTimeRange(dayLightAdjustedDateTimeRange)
+                        .withCapacityTypeUtilizations(capacityTypeUtilizationsFW)
+                        .build();
+                Pair<ScheduleUtilization, Integer> fsSchedulePair =
+                        ImmutablePair.of(dayLightAdjustedScheduleUtilzation, capacity);
+                dayLightAdjustedScheduleUtilizations.add(fsSchedulePair);
+            }
             else
             {
                 Pair<ScheduleUtilization, Integer> fsSchedulePair =
@@ -1365,19 +1382,59 @@ public class ResourceAvailabilityServiceImpl<T extends AppointmentInputDTO> impl
         return dayLightAdjustedScheduleUtilizations;
     }
 
-    protected List<LocalDateTime> getStartOfDaysWithInWindow(LocalDateTime windowStart, LocalDateTime windowEnd,
+    protected List<LocalDateTime> getStartOfDaysWithInWindow(LocalDateTime windowStart,
+            LocalDateTime windowEnd,
             TimeZone facilityTimeZone)
     {
         logger.debug(""windowStart = {}, windowEnd = {}, facilityTimeZone = {} "", windowStart, windowEnd,
                 facilityTimeZone);
         LocalDateTime timeOfDay = windowStart;
 
+        boolean wasConfigurationMadeDuringDayLightSavings =
+                appointmentUtil.wasConfigurationMadeDuringDayLightSavings(facilityTimeZone);
+        boolean isConsiderDayLightSavingsForSouthAmericaFFEnabled = featureFlagService
+                .isOn(FeatureIdentifier.FeatureFlags24_3.CONSIDER_DAY_LIGHT_SAVINGS_FOR_SOUTH_AMERICA);
+        boolean isConsiderDayLightSavingChangeFFEnabled = featureFlagService
+                .isOn(FeatureIdentifier.FeatureFlags99_9.CONSIDER_DAY_LIGHT_SAVING_CHANGE);
+
         ZonedDateTime windowStartUTC = ZonedDateTime.of(timeOfDay, ZoneId.of(""UTC""));
         ZonedDateTime windowStartFacility = windowStartUTC.withZoneSameInstant(facilityTimeZone.toZoneId());
         ZonedDateTime dayStartAtFacility = windowStartFacility.withHour(0).withMinute(0).withSecond(0).withNano(0);
         ZonedDateTime dayStartUTC = dayStartAtFacility.withZoneSameInstant(ZoneId.of(""UTC""));
         LocalDateTime dayStart = dayStartUTC.toLocalDateTime();
 
+        if (featureFlagService
+                .isOn(FeatureFlagConstants.FF_99_9_FIX_FACILITY_DAY_LEVEL_SCOPE_FOR_NON_UTC_TIMEZONE))
+        {
+            if (wasConfigurationMadeDuringDayLightSavings)
+            {
+                if (!appointmentUtil.isInputInDaylightSavings(windowEnd, facilityTimeZone,
+                        isConsiderDayLightSavingsForSouthAmericaFFEnabled, isConsiderDayLightSavingChangeFFEnabled))
+                {
+                    windowEnd = windowEnd.minusHours(1);
+                }
+                if (!appointmentUtil.isInputInDaylightSavings(dayStart, facilityTimeZone,
+                        isConsiderDayLightSavingsForSouthAmericaFFEnabled, isConsiderDayLightSavingChangeFFEnabled))
+                {
+                    dayStart = dayStart.minusHours(1);
+                }
+            }
+            else
+            {
+                if (appointmentUtil.isInputInDaylightSavings(windowEnd, facilityTimeZone,
+                        isConsiderDayLightSavingsForSouthAmericaFFEnabled, isConsiderDayLightSavingChangeFFEnabled))
+                {
+                    windowEnd = windowEnd.plusHours(1);
+                }
+                if (appointmentUtil.isInputInDaylightSavings(dayStart, facilityTimeZone,
+                        isConsiderDayLightSavingsForSouthAmericaFFEnabled, isConsiderDayLightSavingChangeFFEnabled))
+                {
+                    dayStart = dayStart.plusHours(1);
+                }
+
+            }
+        }
+
         List<LocalDateTime> listOfDayStarts = new ArrayList<>();
         listOfDayStarts.add(dayStart);
 
diff --git a/src/main/java/com/manh/cp/appointment/core/impl/service/UtilizationHelper.java b/src/main/java/com/manh/cp/appointment/core/impl/service/UtilizationHelper.java
index 08d3aaf09..5309355a2 100644
--- a/src/main/java/com/manh/cp/appointment/core/impl/service/UtilizationHelper.java
+++ b/src/main/java/com/manh/cp/appointment/core/impl/service/UtilizationHelper.java
@@ -34,6 +34,7 @@ import org.apache.commons.lang3.tuple.Pair;
 import org.springframework.beans.factory.annotation.Autowired;
 
 import com.manh.cp.appointment.appointment.api.service.FeatureFlagService;
+import com.manh.cp.appointment.appointment.constants.FeatureFlagConstants;
 import com.manh.cp.appointment.appointment.constants.FeatureIdentifier;
 import com.manh.cp.appointment.appointment.impl.service.AppointmentUtil;
 import com.manh.cp.appointment.core.api.domain.CapacityScope;
@@ -376,6 +377,24 @@ public class UtilizationHelper<T extends AppointmentInputDTO>
             }
         }
 
+        // Changes for Southern Hemisphere
+
+        if (featureFlagService
+                .isOn(FeatureFlagConstants.FF_99_9_FIX_FACILITY_DAY_LEVEL_SCOPE_FOR_NON_UTC_TIMEZONE)
+                && wasConfigurationMadeDuringDayLightSavings)
+        {
+            if (!appointmentUtil.isInputInDaylightSavings(startTime, facilityTimeZone,
+                    isConsiderDayLightSavingsForSouthAmericaFFEnabled, isConsiderDayLightSavingChangeFFEnabled))
+            {
+                startTime = startTime.minusHours(1);
+            }
+            if (!appointmentUtil.isInputInDaylightSavings(endTime, facilityTimeZone,
+                    isConsiderDayLightSavingsForSouthAmericaFFEnabled, isConsiderDayLightSavingChangeFFEnabled))
+            {
+                endTime = endTime.minusHours(1);
+            }
+        }
+
         LocalDateTime currentTimeBeforeFetchUtilization = LocalDateTime.now();
 
         FetcherResponse response = fetcherFactory.getFetcher(FetchType.FETCH_BY_WINDOW)
","why do we need to set this ?
resolve sonar issues please
we may be removing `CONSIDER_DAY_LIGHT_SAVING_CHANGE` FF. `CONSIDER_DAY_LIGHT_SAVINGS_FOR_SOUTH_AMERICA` will be used to FF protect the daylight saving changes.
move to new FF format we are moving to.
with this we will have some data in 1972 date and some in current year. we have tested with mix of data , only old data format  and only new data format?
move ff to penalty box. we can enabled for customer if they face this issue.
We have tested with new data format. This will be called only when a client is creating/editing the Facility Day Level Scope."
4acc32ac9bf2dde41083bac73dc15f89cc69345d,"diff --git a/build.gradle b/build.gradle
index 71e710c22..4ef6125d0 100644
--- a/build.gradle
+++ b/build.gradle
@@ -64,8 +64,8 @@ project.ext.set(""gitRevision"", org.ajoberstar.grgit.Grgit.open(dir: project.root
 dependencies {
     implementation project(':appointment-client')
 
-    annotationProcessor(libraries.javax_annotation_api)
-    annotationProcessor(libraries.javax_persistence)
+    annotationProcessor(libraries.jakarta_annotation_api)
+    annotationProcessor(libraries.jakarta_persistence)
     annotationProcessor(libraries.querydsl_apt)
     annotationProcessor(libraries.querydsl_apt_jpa)
 
diff --git a/client/appointment-client.gradle b/client/appointment-client.gradle
index ae91b4c6d..54634be42 100644
--- a/client/appointment-client.gradle
+++ b/client/appointment-client.gradle
@@ -41,7 +41,7 @@ dependencies {
     implementation(libraries.jackson_core)
     implementation(libraries.jackson_databind)
     implementation(libraries.jackson_datatype_jsr310)
-    implementation(libraries.javax_annotation_api)
+    implementation(libraries.jakarta_annotation_api)
 
     implementation(libraries.fw_entity_client)
     implementation(libraries.fw_codegen_model)
diff --git a/gradle.properties b/gradle.properties
index b136b3610..418f1cea5 100644
--- a/gradle.properties
+++ b/gradle.properties
@@ -1 +1 @@
-dbChecksum=b97f193b19c08d1dfa63251627e8d203
+dbChecksum=3ac3ea18b0b93372f2fa6e24982c7068
diff --git a/libraries.gradle b/libraries.gradle
index 78013e253..cfe13577b 100644
--- a/libraries.gradle
+++ b/libraries.gradle
@@ -1,8 +1,8 @@
 ext {
-    cloudPlatformVersion = '1.15.0.SB2'
+    cloudPlatformVersion = '1.16.0.SB2'
     powermockVersion = '2.0.9'
     querydslVersion = '3.7.4'
-    sceReleaseVersion = '2024.05.3.SB2'
+    sceReleaseVersion = '2024.07.2.SB2'
     springBootVersion = '2.3.9.RELEASE'
     springCloudVersion = 'Hoxton.SR12'
     shipmentVersion='1.822.0-SNAPSHOT'
@@ -22,8 +22,8 @@ ext {
         fw_codegen_runner: ""com.manh.cp.fw:fw-codegen-runner"",
         fw_messaging_rabbitmq: ""com.manh.cp.fw:fw-messaging-rabbitmq"",
         google_cloud_storage: ""com.google.cloud:google-cloud-storage:2.2.3"",
-        javax_annotation_api: ""javax.annotation:javax.annotation-api"",
-        javax_persistence: ""org.eclipse.persistence:javax.persistence"",
+        jakarta_annotation_api: ""jakarta.annotation:jakarta.annotation-api"",
+        jakarta_persistence: ""org.eclipse.persistence:jakarta.persistence"",
         jaxb_api: ""javax.xml.bind:jaxb-api:2.3.0"",
         jaxws_api: ""javax.xml.ws:jaxws-api:2.3.1"",
         powermock_api_mockito2: ""org.powermock:powermock-api-mockito2:${powermockVersion}"",
diff --git a/src/main/resources/seedData/resources_1__apt.json b/src/main/resources/seedData/resources_1__apt.json
index 373b05928..73c92c5e6 100644
--- a/src/main/resources/seedData/resources_1__apt.json
+++ b/src/main/resources/seedData/resources_1__apt.json
@@ -20030,6 +20030,166 @@
       ""ResourceTypeId"": ""system"",
       ""ResourceDescription"": ""Get ProcLock by PK or Business Keys"",
       ""ComponentRouteName"": ""appointment""
+    },
+    {
+      ""generated"": true,
+      ""ResourceId"": ""appointment::transaction::read"",
+      ""HttpMethod"": ""GET"",
+      ""Url"": ""/appointment/api/errorHandler/errorResourceType"",
+      ""IsConfigurable"": false,
+      ""ResourceTypeId"": ""system"",
+      ""ResourceDescription"": ""Get errorResourceType(s)"",
+      ""ComponentRouteName"": ""appointment""
+    },
+    {
+      ""generated"": true,
+      ""ResourceId"": ""appointment::transaction::admin"",
+      ""HttpMethod"": ""POST"",
+      ""Url"": ""/appointment/api/errorHandler/errorResourceType"",
+      ""IsConfigurable"": false,
+      ""ResourceTypeId"": ""system"",
+      ""ResourceDescription"": ""Create ErrorResourceType"",
+      ""ComponentRouteName"": ""appointment""
+    },
+    {
+      ""generated"": true,
+      ""ResourceId"": ""appointment::transaction::admin"",
+      ""HttpMethod"": ""POST"",
+      ""Url"": ""/appointment/api/errorHandler/errorResourceType/deleteBusinessKey"",
+      ""IsConfigurable"": false,
+      ""ResourceTypeId"": ""system"",
+      ""ResourceDescription"": ""Delete errorResourceType By Business Keys"",
+      ""ComponentRouteName"": ""appointment""
+    },
+    {
+      ""generated"": true,
+      ""ResourceId"": ""appointment::transaction::read"",
+      ""HttpMethod"": ""GET"",
+      ""Url"": ""/appointment/api/errorHandler/errorResourceType/excelTemplate"",
+      ""IsConfigurable"": false,
+      ""ResourceTypeId"": ""system"",
+      ""ResourceDescription"": ""Get Excel template for import"",
+      ""ComponentRouteName"": ""appointment""
+    },
+    {
+      ""generated"": true,
+      ""ResourceId"": ""appointment::transaction::read"",
+      ""HttpMethod"": ""GET"",
+      ""Url"": ""/appointment/api/errorHandler/errorResourceType/export"",
+      ""IsConfigurable"": false,
+      ""ResourceTypeId"": ""system"",
+      ""ResourceDescription"": ""Export ErrorResourceType"",
+      ""ComponentRouteName"": ""appointment""
+    },
+    {
+      ""generated"": true,
+      ""ResourceId"": ""appointment::transaction::read"",
+      ""HttpMethod"": ""GET"",
+      ""Url"": ""/appointment/api/errorHandler/errorResourceType/exportExcel"",
+      ""IsConfigurable"": false,
+      ""ResourceTypeId"": ""system"",
+      ""ResourceDescription"": ""Export ErrorResourceType to Excel"",
+      ""ComponentRouteName"": ""appointment""
+    },
+    {
+      ""generated"": true,
+      ""ResourceId"": ""appointment::transaction::admin"",
+      ""HttpMethod"": ""POST"",
+      ""Url"": ""/appointment/api/errorHandler/errorResourceType/import"",
+      ""IsConfigurable"": false,
+      ""ResourceTypeId"": ""system"",
+      ""ResourceDescription"": ""Deprecated Api - Import errorResourceType(s)"",
+      ""ComponentRouteName"": ""appointment""
+    },
+    {
+      ""generated"": true,
+      ""ResourceId"": ""appointment::transaction::admin"",
+      ""HttpMethod"": ""POST"",
+      ""Url"": ""/appointment/api/errorHandler/errorResourceType/importExcel"",
+      ""IsConfigurable"": false,
+      ""ResourceTypeId"": ""system"",
+      ""ResourceDescription"": ""Import errorResourceType(s) from Excel"",
+      ""ComponentRouteName"": ""appointment""
+    },
+    {
+      ""generated"": true,
+      ""ResourceId"": ""appointment::transaction::read"",
+      ""HttpMethod"": ""GET"",
+      ""Url"": ""/appointment/api/errorHandler/errorResourceType/resourceTypeId/{resourceTypeId}"",
+      ""IsConfigurable"": false,
+      ""ResourceTypeId"": ""system"",
+      ""ResourceDescription"": ""Get ErrorResourceType By Business Keys"",
+      ""ComponentRouteName"": ""appointment""
+    },
+    {
+      ""generated"": true,
+      ""ResourceId"": ""appointment::transaction::admin"",
+      ""HttpMethod"": ""PUT"",
+      ""Url"": ""/appointment/api/errorHandler/errorResourceType/resourceTypeId/{resourceTypeId}"",
+      ""IsConfigurable"": false,
+      ""ResourceTypeId"": ""system"",
+      ""ResourceDescription"": ""Update ErrorResourceType By Business Keys"",
+      ""ComponentRouteName"": ""appointment""
+    },
+    {
+      ""generated"": true,
+      ""ResourceId"": ""appointment::transaction::admin"",
+      ""HttpMethod"": ""POST"",
+      ""Url"": ""/appointment/api/errorHandler/errorResourceType/save"",
+      ""IsConfigurable"": false,
+      ""ResourceTypeId"": ""system"",
+      ""ResourceDescription"": ""Save errorResourceType"",
+      ""ComponentRouteName"": ""appointment""
+    },
+    {
+      ""generated"": true,
+      ""ResourceId"": ""appointment::transaction::read"",
+      ""HttpMethod"": ""POST"",
+      ""Url"": ""/appointment/api/errorHandler/errorResourceType/search"",
+      ""IsConfigurable"": false,
+      ""ResourceTypeId"": ""system"",
+      ""ResourceDescription"": ""Search using complex query"",
+      ""ComponentRouteName"": ""appointment""
+    },
+    {
+      ""generated"": true,
+      ""ResourceId"": ""appointment::transaction::read"",
+      ""HttpMethod"": ""GET"",
+      ""Url"": ""/appointment/api/errorHandler/errorResourceType/{pk}"",
+      ""IsConfigurable"": false,
+      ""ResourceTypeId"": ""system"",
+      ""ResourceDescription"": ""Get ErrorResourceType by PK"",
+      ""ComponentRouteName"": ""appointment""
+    },
+    {
+      ""generated"": true,
+      ""ResourceId"": ""appointment::transaction::admin"",
+      ""HttpMethod"": ""PUT"",
+      ""Url"": ""/appointment/api/errorHandler/errorResourceType/{pk}"",
+      ""IsConfigurable"": false,
+      ""ResourceTypeId"": ""system"",
+      ""ResourceDescription"": ""Update errorResourceType"",
+      ""ComponentRouteName"": ""appointment""
+    },
+    {
+      ""generated"": true,
+      ""ResourceId"": ""appointment::transaction::admin"",
+      ""HttpMethod"": ""DELETE"",
+      ""Url"": ""/appointment/api/errorHandler/errorResourceType/{pk}"",
+      ""IsConfigurable"": false,
+      ""ResourceTypeId"": ""system"",
+      ""ResourceDescription"": ""Delete errorResourceType"",
+      ""ComponentRouteName"": ""appointment""
+    },
+    {
+      ""generated"": true,
+      ""ResourceId"": ""appointment::transaction::read"",
+      ""HttpMethod"": ""POST"",
+      ""Url"": ""/appointment/api/errorHandler/errorResourceTypeByPKorBK"",
+      ""IsConfigurable"": false,
+      ""ResourceTypeId"": ""system"",
+      ""ResourceDescription"": ""Get ErrorResourceType by PK or Business Keys"",
+      ""ComponentRouteName"": ""appointment""
     }
   ]
 }
diff --git a/src/main/resources/seedData/resources_2__apt.json b/src/main/resources/seedData/resources_2__apt.json
index 8cf014482..ed8d1586c 100644
--- a/src/main/resources/seedData/resources_2__apt.json
+++ b/src/main/resources/seedData/resources_2__apt.json
@@ -19392,6 +19392,96 @@
       ""ResourceTypeId"": ""system"",
       ""ResourceDescription"": ""Get InheritanceStrategy by PK"",
       ""ComponentRouteName"": ""appointment""
+    },
+    {
+      ""generated"": false,
+      ""ResourceId"": ""appointment::transaction::admin"",
+      ""HttpMethod"": ""POST"",
+      ""Url"": ""/appointment/api/errorHandler/errorResourceType/aggregate"",
+      ""IsConfigurable"": false,
+      ""ResourceTypeId"": ""system"",
+      ""ResourceDescription"": ""Aggregate Search using complex query"",
+      ""ComponentRouteName"": ""appointment""
+    },
+    {
+      ""generated"": false,
+      ""ResourceId"": ""appointment::transaction::admin"",
+      ""HttpMethod"": ""POST"",
+      ""Url"": ""/appointment/api/errorHandler/errorResourceType/asyncExportExcel"",
+      ""IsConfigurable"": false,
+      ""ResourceTypeId"": ""system"",
+      ""ResourceDescription"": ""Asynchronously export ErrorResourceType(s) to excel workbook."",
+      ""ComponentRouteName"": ""appointment""
+    },
+    {
+      ""generated"": false,
+      ""ResourceId"": ""appointment::transaction::admin"",
+      ""HttpMethod"": ""POST"",
+      ""Url"": ""/appointment/api/errorHandler/errorResourceType/asyncImportExcel"",
+      ""IsConfigurable"": false,
+      ""ResourceTypeId"": ""system"",
+      ""ResourceDescription"": ""Asynchronously Import ErrorResourceType(s) from Excel workbook"",
+      ""ComponentRouteName"": ""appointment""
+    },
+    {
+      ""generated"": false,
+      ""ResourceId"": ""appointment::transaction::admin"",
+      ""HttpMethod"": ""POST"",
+      ""Url"": ""/appointment/api/errorHandler/errorResourceType/bulkImport"",
+      ""IsConfigurable"": false,
+      ""ResourceTypeId"": ""system"",
+      ""ResourceDescription"": ""Bulk Import errorResourceType(s)"",
+      ""ComponentRouteName"": ""appointment""
+    },
+    {
+      ""generated"": false,
+      ""ResourceId"": ""appointment::transaction::read"",
+      ""HttpMethod"": ""GET"",
+      ""Url"": ""/appointment/api/errorHandler/errorResourceType/exportByPKRange"",
+      ""IsConfigurable"": false,
+      ""ResourceTypeId"": ""system"",
+      ""ResourceDescription"": ""Export ErrorResourceType(s) for a range of PKs"",
+      ""ComponentRouteName"": ""appointment""
+    },
+    {
+      ""generated"": false,
+      ""ResourceId"": ""appointment::transaction::read"",
+      ""HttpMethod"": ""GET"",
+      ""Url"": ""/appointment/api/errorHandler/errorResourceType/listRangePKs"",
+      ""IsConfigurable"": false,
+      ""ResourceTypeId"": ""system"",
+      ""ResourceDescription"": ""List of Range PKs errorResourceType(s)"",
+      ""ComponentRouteName"": ""appointment""
+    },
+    {
+      ""generated"": false,
+      ""ResourceId"": ""appointment::transaction::read"",
+      ""HttpMethod"": ""GET"",
+      ""Url"": ""/appointment/api/errorHandler/errorResourceType/pkRange/search"",
+      ""IsConfigurable"": false,
+      ""ResourceTypeId"": ""system"",
+      ""ResourceDescription"": ""Get errorResourceType(s) for a range of PKs"",
+      ""ComponentRouteName"": ""appointment""
+    },
+    {
+      ""generated"": false,
+      ""ResourceId"": ""appointment::transaction::read"",
+      ""HttpMethod"": ""GET"",
+      ""Url"": ""/appointment/api/errorHandler/errorResourceTypeByBK"",
+      ""IsConfigurable"": false,
+      ""ResourceTypeId"": ""system"",
+      ""ResourceDescription"": ""Get ErrorResourceType By Business Keys"",
+      ""ComponentRouteName"": ""appointment""
+    },
+    {
+      ""generated"": false,
+      ""ResourceId"": ""appointment::transaction::read"",
+      ""HttpMethod"": ""GET"",
+      ""Url"": ""/appointment/api/errorHandler/errorResourceTypeByPK"",
+      ""IsConfigurable"": false,
+      ""ResourceTypeId"": ""system"",
+      ""ResourceDescription"": ""Get ErrorResourceType by PK"",
+      ""ComponentRouteName"": ""appointment""
     }
   ]
 }
diff --git a/version.txt b/version.txt
index 62d44807d..48b14e6b2 100644
--- a/version.txt
+++ b/version.txt
@@ -1 +1 @@
-20.13.0
+20.14.0
","![](https://bitbucket.org/repo/9p65goR/images/3717427412-image.png)
‌
![](https://bitbucket.org/repo/9p65goR/images/4229483173-image.png)
‌
![](https://bitbucket.org/repo/9p65goR/images/2221178231-image.png)
‌"
97ac5a506b358d29c298aecadd41060d62cecc4b,"diff --git a/src/component-test/java/com/manh/cp/appointment/appointment/AppointmentTimeSlotTest.java b/src/component-test/java/com/manh/cp/appointment/appointment/AppointmentTimeSlotTest.java
index 461e6bd19..8552ac9d1 100644
--- a/src/component-test/java/com/manh/cp/appointment/appointment/AppointmentTimeSlotTest.java
+++ b/src/component-test/java/com/manh/cp/appointment/appointment/AppointmentTimeSlotTest.java
@@ -211,6 +211,50 @@ public class AppointmentTimeSlotTest extends AbstractComponentTest
                         ""TimeIntervalDefinition_tPOATWEPTS"").size());
     }
 
+    /**
+     * Test to validate total number of time slots created given time interval definition configured as 00:00 - 10:00 &
+     * 10:00 - 15:00 & 15:00 - 24:00 with interval of 60 for all days --->7 * (10 * (60 / 60)) = 70 ---> 7 * (5 * (60 /
+     * 60)) = 35 ---> 7 * (9 * (60 / 60)) = 63 Total : = 168
+     */
+    @Test
+    public void testPopulationOfAppointmentTimeSlotWithAllDaysUsingMultipleTimeIntervalDef()
+    {
+
+        Document timeIntervalDefinitionDocument = JsonUtil.readDocument(
+                ""appointment/appointment/appointmentTimeSlot/testPopulationOfAppointmentTimeSlotWithAllDaysAndMoreTimeIntervalDef/TimeIntervalDefinition.json"");
+        timeIntervalDefinitionMapService.saveTimeIntervalDefinition(context, timeIntervalDefinitionDocument, null);
+
+        Document timeIntervalDefinitionDocument1 = JsonUtil.readDocument(
+                ""appointment/appointment/appointmentTimeSlot/testPopulationOfAppointmentTimeSlotWithAllDaysAndMoreTimeIntervalDef/TimeIntervalDefinition1.json"");
+        timeIntervalDefinitionMapService.saveTimeIntervalDefinition(context, timeIntervalDefinitionDocument1, null);
+
+        Document timeIntervalDefinitionDocument2 = JsonUtil.readDocument(
+                ""appointment/appointment/appointmentTimeSlot/testPopulationOfAppointmentTimeSlotWithAllDaysAndMoreTimeIntervalDef/TimeIntervalDefinition2.json"");
+        timeIntervalDefinitionMapService.saveTimeIntervalDefinition(context, timeIntervalDefinitionDocument2, null);
+
+        validateTotalTimeSlotCount(168);
+    }
+
+    /**
+     * Test to validate total number of time slots created given time interval definition configured between 02:00 -
+     * 12:00 & 13:00 - 18:00 with interval of 60 for one day (Monday) ---> 1 * (5 * (60 / 60)) = 5 ---> 1 * (10 * (60 /
+     * 120)) = 5 Total : = 10
+     */
+    @Test
+    public void testPopulationOfAppointmentTimeSlotWithOneDayUsingMultipleTimeIntervalDef()
+    {
+
+        Document timeIntervalDefinitionDocument = JsonUtil.readDocument(
+                ""appointment/appointment/appointmentTimeSlot/testPopulationOfAppointmentTimeSlotWithOneDayMultipleTimeIntervalDef/TimeIntervalDefinition.json"");
+        timeIntervalDefinitionMapService.saveTimeIntervalDefinition(context, timeIntervalDefinitionDocument, null);
+
+        Document timeIntervalDefinitionDocument1 = JsonUtil.readDocument(
+                ""appointment/appointment/appointmentTimeSlot/testPopulationOfAppointmentTimeSlotWithOneDayMultipleTimeIntervalDef/TimeIntervalDefinition1.json"");
+        timeIntervalDefinitionMapService.saveTimeIntervalDefinition(context, timeIntervalDefinitionDocument1, null);
+
+        validateTotalTimeSlotCount(10);
+    }
+
     private void setAppointmentParameterMinAppointmentDuration(Long minimumTime)
     {
         Page<AppointmentParameters> appointmentParameters =
diff --git a/src/component-test/resources/appointment/appointment/appointmentTimeSlot/testPopulationOfAppointmentTimeSlotWithAllDaysAndMoreTimeIntervalDef/TimeIntervalDefinition.json b/src/component-test/resources/appointment/appointment/appointmentTimeSlot/testPopulationOfAppointmentTimeSlotWithAllDaysAndMoreTimeIntervalDef/TimeIntervalDefinition.json
new file mode 100644
index 000000000..64bc343ae
--- /dev/null
+++ b/src/component-test/resources/appointment/appointment/appointmentTimeSlot/testPopulationOfAppointmentTimeSlotWithAllDaysAndMoreTimeIntervalDef/TimeIntervalDefinition.json
@@ -0,0 +1,9 @@
+{
+  ""TimeIntervalDefinitionId"": ""TimeIntervalDef_alldays1"",
+  ""StartTimeHours"": 0,
+  ""StartTimeMinutes"": 0,
+  ""EndTimeHours"": 10,
+  ""EndTimeMinutes"": 0,
+  ""TimeIntervalLength"": 60,
+  ""AllDays"": true
+}
diff --git a/src/component-test/resources/appointment/appointment/appointmentTimeSlot/testPopulationOfAppointmentTimeSlotWithAllDaysAndMoreTimeIntervalDef/TimeIntervalDefinition1.json b/src/component-test/resources/appointment/appointment/appointmentTimeSlot/testPopulationOfAppointmentTimeSlotWithAllDaysAndMoreTimeIntervalDef/TimeIntervalDefinition1.json
new file mode 100644
index 000000000..82c57ceed
--- /dev/null
+++ b/src/component-test/resources/appointment/appointment/appointmentTimeSlot/testPopulationOfAppointmentTimeSlotWithAllDaysAndMoreTimeIntervalDef/TimeIntervalDefinition1.json
@@ -0,0 +1,9 @@
+{
+  ""TimeIntervalDefinitionId"": ""TimeIntervalDef_allDays2"",
+  ""StartTimeHours"": 10,
+  ""StartTimeMinutes"": 0,
+  ""EndTimeHours"": 15,
+  ""EndTimeMinutes"": 0,
+  ""TimeIntervalLength"": 60,
+  ""AllDays"": true
+}
diff --git a/src/component-test/resources/appointment/appointment/appointmentTimeSlot/testPopulationOfAppointmentTimeSlotWithAllDaysAndMoreTimeIntervalDef/TimeIntervalDefinition2.json b/src/component-test/resources/appointment/appointment/appointmentTimeSlot/testPopulationOfAppointmentTimeSlotWithAllDaysAndMoreTimeIntervalDef/TimeIntervalDefinition2.json
new file mode 100644
index 000000000..82b5cb11c
--- /dev/null
+++ b/src/component-test/resources/appointment/appointment/appointmentTimeSlot/testPopulationOfAppointmentTimeSlotWithAllDaysAndMoreTimeIntervalDef/TimeIntervalDefinition2.json
@@ -0,0 +1,9 @@
+{
+  ""TimeIntervalDefinitionId"": ""TimeIntervalDef_allDays3"",
+  ""StartTimeHours"": 15,
+  ""StartTimeMinutes"": 0,
+  ""EndTimeHours"": 24,
+  ""EndTimeMinutes"": 0,
+  ""TimeIntervalLength"": 60,
+  ""AllDays"": true
+}
diff --git a/src/component-test/resources/appointment/appointment/appointmentTimeSlot/testPopulationOfAppointmentTimeSlotWithOneDayMultipleTimeIntervalDef/TimeIntervalDefinition.json b/src/component-test/resources/appointment/appointment/appointmentTimeSlot/testPopulationOfAppointmentTimeSlotWithOneDayMultipleTimeIntervalDef/TimeIntervalDefinition.json
new file mode 100644
index 000000000..a9846a724
--- /dev/null
+++ b/src/component-test/resources/appointment/appointment/appointmentTimeSlot/testPopulationOfAppointmentTimeSlotWithOneDayMultipleTimeIntervalDef/TimeIntervalDefinition.json
@@ -0,0 +1,10 @@
+{
+  ""TimeIntervalDefinitionId"": ""TimeIntervalDefinition_oneday1"",
+  ""StartTimeHours"": 13,
+  ""StartTimeMinutes"": 0,
+  ""EndTimeHours"": 18,
+  ""EndTimeMinutes"": 0,
+  ""TimeIntervalLength"": 60,
+  ""Monday"": true,
+  ""AllDays"": false
+}
diff --git a/src/component-test/resources/appointment/appointment/appointmentTimeSlot/testPopulationOfAppointmentTimeSlotWithOneDayMultipleTimeIntervalDef/TimeIntervalDefinition1.json b/src/component-test/resources/appointment/appointment/appointmentTimeSlot/testPopulationOfAppointmentTimeSlotWithOneDayMultipleTimeIntervalDef/TimeIntervalDefinition1.json
new file mode 100644
index 000000000..5c0c2ddc0
--- /dev/null
+++ b/src/component-test/resources/appointment/appointment/appointmentTimeSlot/testPopulationOfAppointmentTimeSlotWithOneDayMultipleTimeIntervalDef/TimeIntervalDefinition1.json
@@ -0,0 +1,10 @@
+{
+  ""TimeIntervalDefinitionId"": ""TimeIntervalDefinition_oneday2"",
+  ""StartTimeHours"": 2,
+  ""StartTimeMinutes"": 0,
+  ""EndTimeHours"": 12,
+  ""EndTimeMinutes"": 0,
+  ""TimeIntervalLength"": 120,
+  ""Monday"": true,
+  ""AllDays"": false
+}
",
c1fcce1636d4e6a240fbaf6ffa6c30058c08e69e,"diff --git a/src/component-test/java/com/manh/cp/appointment/appointment/EditAppointmentTest.java b/src/component-test/java/com/manh/cp/appointment/appointment/EditAppointmentTest.java
index f4bf5acea..d8983870c 100644
--- a/src/component-test/java/com/manh/cp/appointment/appointment/EditAppointmentTest.java
+++ b/src/component-test/java/com/manh/cp/appointment/appointment/EditAppointmentTest.java
@@ -20,6 +20,8 @@ package com.manh.cp.appointment.appointment;
 import java.time.DayOfWeek;
 import java.time.LocalDateTime;
 import java.time.LocalTime;
+import java.time.ZoneOffset;
+import java.time.ZonedDateTime;
 import java.time.format.DateTimeFormatter;
 import java.util.ArrayList;
 import java.util.Arrays;
@@ -57,6 +59,7 @@ import com.manh.cp.appointment.appointment.client.dto.AppointmentDTO;
 import com.manh.cp.appointment.appointment.client.dto.recommendation.RecommendationsOutputDTO;
 import com.manh.cp.appointment.appointment.constants.AppointmentConstants;
 import com.manh.cp.appointment.appointment.constants.AppointmentStatus;
+import com.manh.cp.appointment.appointment.constants.FeatureFlagConstants;
 import com.manh.cp.appointment.appointment.constants.FeatureIdentifier;
 import com.manh.cp.appointment.appointment.impl.service.AppointmentManager;
 import com.manh.cp.appointment.appointment.impl.service.EntityToDTOConverter;
@@ -83,6 +86,7 @@ import com.manh.cp.fw.entity.domain.entity.Page;
 import com.manh.cp.fw.errorHandler.ErrorHandlerService;
 import com.manh.cp.fw.errorHandler.api.service.ErrorDefinitionService;
 import com.manh.cp.fw.featureflags.Features;
+import com.manh.cp.fw.featureflags.test.AssumeFlagEnabled;
 import com.manh.cp.fw.query.Query;
 import com.manh.cp.schedule.calendar.api.domain.CalendarScheduleUtilization;
 import com.manh.cp.schedule.calendar.impl.service.CalendarScheduleUtilizationServiceImpl;
@@ -96,6 +100,7 @@ import com.manh.cp.schedule.domain.range.DateTimeRange;
 import com.manh.cp.schedule.utilization.fetch.FetcherFactory;
 
 import static com.manh.cp.appointment.util.RestControllerTestUtil.invokeRestCallAndValidateStatus;
+import static com.manh.cp.appointment.util.RestControllerTestUtil.invokeRestCallAndValidateWithConfirmationMessage;
 import static org.mockito.Matchers.any;
 import static org.mockito.Matchers.eq;
 import static org.mockito.Mockito.atLeastOnce;
@@ -173,6 +178,8 @@ public class EditAppointmentTest extends AbstractComponentTest
         dataRemover.removeAllData(context);
         featureFlagService = new MockFeatureFlagService(features);
         createConfiguration(context);
+        context.setTransactionAttribute(""component-test"", FeatureFlagConstants.FF_24_4_FIX_EDIT_APPOINTMENT_DATE,
+                true);
     }
 
     private void createConfiguration(Context context)
@@ -1978,4 +1985,72 @@ public class EditAppointmentTest extends AbstractComponentTest
         appointmentParameterCriteriaMapService.saveAppointmentParameterCriteria(context, criteria, null);
     }
 
+    /**
+     * Test case to validate the edit appointment date flow when the system internally recommends timeslots that match
+     * with existing scheduled time.
+     */
+    @Test
+    @AssumeFlagEnabled(FeatureFlagConstants.FF_24_4_FIX_EDIT_APPOINTMENT_DATE)
+    public void testEditAppointmentWhenRecommendationsIncludeExistingScheduleTime() throws Exception
+    {
+        String timeIntervalDefinitionPath =
+                ""/appointment/appointment/ResourceGroup/TimeIntervalDefinition.json"";
+        String resourceGroupPath =
+                ""/appointment/appointment/ResourceGroup/ResourceGroupInitial.json"";
+        testUtil.createGeneralConfigurationV2(context, timeIntervalDefinitionPath, resourceGroupPath);
+
+        String appointmentPath =
+                ""/appointment/appointment/editAppointment/editAppointment.json"";
+        Document appointmentDocument = JsonUtil.readDocument(appointmentPath);
+        String appointmentId = ""CheckApt"";
+        LocalDateTime preferredAppointmentTime = ZonedDateTime.now(ZoneOffset.UTC).toLocalDateTime().plusDays(1);
+        appointmentDocument.put(""AppointmentId"", appointmentId);
+        appointmentDocument.put(""PreferredDateTime"", preferredAppointmentTime);
+
+        // Create Appointment
+        RestApiResponse response = invokeRestCallAndValidateStatus(appointmentDocument, getMockMvc(),
+                ""/api/appointment/scheduleAppointment"", org.springframework.http.HttpStatus.OK.value());
+        Assert.assertNotNull(response);
+        Assert.assertNotNull(response.getMessages());
+
+        Appointment appointment = appointmentService.findByAppointmentId(context, appointmentId);
+        Assert.assertNotNull("" The appointment was not created"", appointment);
+        LocalDateTime appointmentScheduledDateTime = appointment.getArrivalDateTime();
+
+        errorHandlerService.clearAll(context);
+
+        // Edit Appointment
+        appointmentDocument = JsonUtil.readDocument(appointmentPath);
+        preferredAppointmentTime = appointmentScheduledDateTime.minusHours(1);
+        appointmentDocument.put(""AppointmentId"", appointmentId);
+        appointmentDocument.put(""PreferredDateTime"", preferredAppointmentTime);
+
+        RestApiResponse editResponse =
+                invokeRestCallAndValidateWithConfirmationMessage(appointmentDocument, getMockMvc(),
+                        ""/api/appointment/editAppointment"", org.springframework.http.HttpStatus.OK.value());
+
+        Assert.assertNotNull(editResponse);
+        Assert.assertNotNull(editResponse.getMessages());
+
+        appointment = appointmentService.findByAppointmentId(context, appointmentId);
+        Assert.assertEquals(preferredAppointmentTime, appointment.getArrivalDateTime());
+
+        // Edit Appointment : Verify with FF false Todo: Remove below part while removing FF
+        appointmentDocument = JsonUtil.readDocument(appointmentPath);
+        preferredAppointmentTime = preferredAppointmentTime.minusHours(1);
+        appointmentDocument.put(""AppointmentId"", appointmentId);
+        appointmentDocument.put(""PreferredDateTime"", preferredAppointmentTime);
+        context.setTransactionAttribute(""component-test"",
+                FeatureFlagConstants.FF_24_4_FIX_EDIT_APPOINTMENT_DATE, false);
+        editResponse =
+                invokeRestCallAndValidateWithConfirmationMessage(appointmentDocument, getMockMvc(),
+                        ""/api/appointment/editAppointment"", org.springframework.http.HttpStatus.OK.value());
+        Assert.assertNotNull(editResponse);
+        Assert.assertNotNull(editResponse.getMessages());
+
+        appointment = appointmentService.findByAppointmentId(context, appointmentId);
+        Assert.assertNotEquals(preferredAppointmentTime, appointment.getArrivalDateTime());
+
+    }
+
 }
diff --git a/src/component-test/java/com/manh/cp/appointment/appointment/RecommendationTests.java b/src/component-test/java/com/manh/cp/appointment/appointment/RecommendationTests.java
index 4e0cfc3c0..3834dcdcf 100644
--- a/src/component-test/java/com/manh/cp/appointment/appointment/RecommendationTests.java
+++ b/src/component-test/java/com/manh/cp/appointment/appointment/RecommendationTests.java
@@ -1787,7 +1787,7 @@ public class RecommendationTests extends AbstractComponentTest
      */
     @Test
     @Transactional
-    @AssumeFlagEnabled(FeatureFlagConstants.AVOID_RECOMMENDING_PAST_DATE_TIMESLOTS)
+    @AssumeFlagEnabled(FeatureFlagConstants.FF_24_4_AVOID_RECOMMENDING_PAST_DATE_TIMESLOTS)
     public void testRecommendationForPastSlots()
     {
         AppointmentParameters appointmentParameters =
@@ -1800,9 +1800,9 @@ public class RecommendationTests extends AbstractComponentTest
                 new Query("""", 0, 1)).getObjects().stream().findFirst().get();
 
         String timeIntervalDefinitionPath =
-                ""/appointment/appointment/recommendations/recommendationsWithSkipAvailability/TimeIntervalDefinition8-15.json"";
+                ""/appointment/appointment/ResourceGroup/TimeIntervalDefinition.json"";
         String initialResourceGroupPath =
-                ""/appointment/appointment/recommendations/recommendationsWithSkipAvailability/DockGroup.json"";
+                ""/appointment/appointment/ResourceGroup/ResourceGroupInitial.json"";
         testUtil.createGeneralConfigurationV2(context, timeIntervalDefinitionPath, initialResourceGroupPath);
 
         LocalDateTime localDateTime = LocalDateTime.now();
@@ -1838,6 +1838,7 @@ public class RecommendationTests extends AbstractComponentTest
         Assert.assertEquals(10, recommendationsOutputDTO.getRecommendations().size());
         recommendationsOutputDTO.getRecommendations().forEach(
                 recommendationDTO -> Assert
-                        .assertFalse(recommendationDTO.getRecommendationDateTime().isAfter(LocalDateTime.now())));
+                        .assertFalse(
+                                recommendationDTO.getRecommendationDateTime().isAfter(utcDateTime.toLocalDateTime())));
     }
 }
diff --git a/src/component-test/java/com/manh/cp/appointment/appointment/mocks/MockFeatureFlagService.java b/src/component-test/java/com/manh/cp/appointment/appointment/mocks/MockFeatureFlagService.java
index b8c8f13ba..12d2e472e 100644
--- a/src/component-test/java/com/manh/cp/appointment/appointment/mocks/MockFeatureFlagService.java
+++ b/src/component-test/java/com/manh/cp/appointment/appointment/mocks/MockFeatureFlagService.java
@@ -50,4 +50,16 @@ public class MockFeatureFlagService extends FeatureFlagService
         return false;
     }
 
+    public boolean isOn(String flag)
+    {
+        Context context = Context.getContext();
+        Object transactionAttribute =
+                context.getTransactionAttribute(""component-test"", flag);
+        if (transactionAttribute != null)
+        {
+            return (Boolean) transactionAttribute;
+        }
+        return false;
+    }
+
 }
diff --git a/src/component-test/resources/appointment/appointment/recommendations/recommendationsWithSkipAvailability/AppointmentWithEarliestStartAndEndDateTime.json b/src/component-test/resources/appointment/appointment/recommendations/recommendationsWithSkipAvailability/AppointmentWithEarliestStartAndEndDateTime.json
index 96b7f1187..e618b46cf 100644
--- a/src/component-test/resources/appointment/appointment/recommendations/recommendationsWithSkipAvailability/AppointmentWithEarliestStartAndEndDateTime.json
+++ b/src/component-test/resources/appointment/appointment/recommendations/recommendationsWithSkipAvailability/AppointmentWithEarliestStartAndEndDateTime.json
@@ -1,6 +1,5 @@
 {
   ""AppointmentId"": ""Appointment_aWESAEDT"",
-  ""PreferredDateTime"": ""2024-08-12T20:00:00"",
   ""ContentType"": ""EMPTY"",
   ""SkipAvailabilityCheck"" : false,
   ""SupplierPoAppointment"": false,
diff --git a/src/main/java/com/manh/cp/appointment/appointment/constants/FeatureFlagConstants.java b/src/main/java/com/manh/cp/appointment/appointment/constants/FeatureFlagConstants.java
index b426b676c..8f36e6296 100644
--- a/src/main/java/com/manh/cp/appointment/appointment/constants/FeatureFlagConstants.java
+++ b/src/main/java/com/manh/cp/appointment/appointment/constants/FeatureFlagConstants.java
@@ -25,9 +25,11 @@ public class FeatureFlagConstants
 
     }
 
-    public static final String AVOID_RECOMMENDING_PAST_DATE_TIMESLOTS = ""SUP-520690#2024-08"";
+    public static final String FF_24_4_AVOID_RECOMMENDING_PAST_DATE_TIMESLOTS = ""SUP-520690#2024-08"";
 
     public static final String ERROR_OVERRIDE_VENDOR_AND_CARRIER = ""SUP-495304#2024-08"";
 
     public static final String FF_24_4_ERROR_MESSAGES_WITH_APPOINTMENT_ID = ""SUP-516677#2024-08"";
+
+    public static final String FF_24_4_FIX_EDIT_APPOINTMENT_DATE = ""SUP-522225#2024-08"";
 }
diff --git a/src/main/java/com/manh/cp/appointment/core/impl/service/ScheduleManager.java b/src/main/java/com/manh/cp/appointment/core/impl/service/ScheduleManager.java
index c7e66393a..63707537d 100644
--- a/src/main/java/com/manh/cp/appointment/core/impl/service/ScheduleManager.java
+++ b/src/main/java/com/manh/cp/appointment/core/impl/service/ScheduleManager.java
@@ -32,6 +32,7 @@ import com.manh.cp.appointment.appointment.client.Constants.ErrorDefinitionIdBun
 import com.manh.cp.appointment.appointment.client.dto.AppointmentDTO;
 import com.manh.cp.appointment.appointment.client.dto.AppointmentScheduleRecommendationsDTO;
 import com.manh.cp.appointment.appointment.constants.AppointmentConstants;
+import com.manh.cp.appointment.appointment.constants.FeatureFlagConstants;
 import com.manh.cp.appointment.appointment.constants.FeatureIdentifier;
 import com.manh.cp.appointment.appointment.constants.YesNo;
 import com.manh.cp.appointment.appointment.impl.service.AppointmentSaveHelper;
@@ -260,9 +261,16 @@ public class ScheduleManager<T extends AppointmentInputDTO>
                     editedAppointmentInputDTO.getExistingAppointmentDetails().getExistingSchedules().get(0);
             ResourceScheduleInformation firstResourceInRecommendation =
                     resourcesInRecommendation.get(0).getResourceScheduleInformation();
+            LocalDateTime existingPreferredDateTime =
+                    editedAppointmentInputDTO.getExistingAppointment().getPreferredDateTime();
 
             boolean timeMatches = false;
-            if (existingSchedule.getStartDateTime().isEqual(firstResourceInRecommendation.getStartTime()))
+            if (existingSchedule.getStartDateTime().isEqual(firstResourceInRecommendation.getStartTime())
+                    || (featureFlagService.isOn(FeatureFlagConstants.FF_24_4_FIX_EDIT_APPOINTMENT_DATE)
+                            && !editedAppointmentInputDTO.getPreferredDateTime()
+                                    .isEqual(existingPreferredDateTime)
+                            && editedAppointmentInputDTO.getPreferredDateTime()
+                                    .isEqual(firstResourceInRecommendation.getStartTime())))
             {
                 Duration durationOfRecommendation = firstResourceInRecommendation.getDuration();
                 Duration durationOfSchedule =
@@ -371,6 +379,7 @@ public class ScheduleManager<T extends AppointmentInputDTO>
         {
             selectedRecommendation =
                     getRecommendationThatMatchesExistingSchedule(editedAppointmentInputDTO, recommendationsObject);
+            logger.debug(""--editSchedule selectedRecommendation {}"", selectedRecommendation);
             if (selectedRecommendation == null)
             {
                 selectedRecommendation = recommendationsObject.getRecommendationOptions().get(0);
","This change is made to correct the test case to demonstrate availability for 0 to 24 hours, as it intermittently fails due to unavailable time slots in the test case, where the time interval definition was initially set to 8-15 hours only.
Removed the static `LocalDateTime` and used dynamic values instead, as we are already passing them while calling the `scheduleApointment` method.
CI Report:

![](https://bitbucket.org/repo/9p65goR/images/942596491-image.png)
![](https://bitbucket.org/repo/9p65goR/images/201238242-image.png)
‌
why do we need this mocking? use AssumeFF 
@{6152e14e289a54006ab32626} - we cannot rely on the `@AssumeFlagEnabled(FeatureFlagConstants.FF_24_4_FIX_EDIT_APPOINTMENT_DATE)` annotation as it is not working as expected. This may be due to the feature flag service being mocked and set to primary, which will be removed and addressed as part of the full feature flag adoption, as confirmed by @{5f91d9370ce27c006e08e6ac} . Therefore, we need to manually set the feature flag for now.
@{6152e14e289a54006ab32626} @{557058:4f2d06b7-2446-41af-ab1a-e0d04dee6c9c} We had a requirement where it was asked why are we changing the Schedule Time when we are just updating the Appointment Content. With this change, it will always try to find the Time Slot based on Preferred Date.
change it to 

```
!editedAppointmentInputDTO.getPreferredDateTime()

                                    .isEqual(existingAppointment.getPreferredTime())
```

‌
Done."
3ecedef3e81ac4104fe3f0a028aafad496ed6b42,"diff --git a/client/src/main/java/com/manh/cp/appointment/appointment/client/Constants/ErrorDefinitionIdBundle.java b/client/src/main/java/com/manh/cp/appointment/appointment/client/Constants/ErrorDefinitionIdBundle.java
index fa9b1ccbf..3af64afda 100644
--- a/client/src/main/java/com/manh/cp/appointment/appointment/client/Constants/ErrorDefinitionIdBundle.java
+++ b/client/src/main/java/com/manh/cp/appointment/appointment/client/Constants/ErrorDefinitionIdBundle.java
@@ -185,7 +185,11 @@ public enum ErrorDefinitionIdBundle
 
     OVERLAPPING_PREFERENCE(""APT::276""),
 
-    APPOINTMENT_TIME_CHANGE_DISABLED_ON_EDIT(""APT::277"");
+    APPOINTMENT_TIME_CHANGE_DISABLED_ON_EDIT(""APT::277""),
+
+    REQUIRED_FIELD_MISSING_WITH_APPOINTMENT_ID(""APT::278""),
+
+    SCHEDULE_FRAMEWORK_ERROR_WITH_APPOINTMENT_ID(""APT::279"");
 
     private final String code;
 
diff --git a/gradle.properties b/gradle.properties
index 66317d62f..b136b3610 100644
--- a/gradle.properties
+++ b/gradle.properties
@@ -1 +1 @@
-dbChecksum=d97765f28d8f4278f664e65d18964351
+dbChecksum=b97f193b19c08d1dfa63251627e8d203
diff --git a/src/component-test/java/com/manh/cp/appointment/appointment/CreateTest.java b/src/component-test/java/com/manh/cp/appointment/appointment/CreateTest.java
index 52a42cd18..8bed5c4d9 100644
--- a/src/component-test/java/com/manh/cp/appointment/appointment/CreateTest.java
+++ b/src/component-test/java/com/manh/cp/appointment/appointment/CreateTest.java
@@ -50,6 +50,7 @@ import com.manh.cp.appointment.appointment.client.Constants.ErrorDefinitionIdBun
 import com.manh.cp.appointment.appointment.client.dto.AppointmentDTO;
 import com.manh.cp.appointment.appointment.client.dto.PurchaseOrderDTO;
 import com.manh.cp.appointment.appointment.constants.AppointmentConstants;
+import com.manh.cp.appointment.appointment.constants.FeatureFlagConstants;
 import com.manh.cp.appointment.appointment.constants.FeatureIdentifier;
 import com.manh.cp.appointment.appointment.impl.service.AppointmentManager;
 import com.manh.cp.appointment.appointment.mocks.MockFeatureFlagService;
@@ -456,7 +457,6 @@ public class CreateTest extends AbstractComponentTest
 
     @Test
     @Transactional
-    @Ignore
     public void validationsTest() throws Exception
     {
         dataRemover.removeAllData(context);
@@ -483,9 +483,16 @@ public class CreateTest extends AbstractComponentTest
 
             }
             catch (Exception error)
+            {
+                if (featureFlagService.isOn(FeatureFlagConstants.FF_24_4_ERROR_MESSAGES_WITH_APPOINTMENT_ID))
+                {
+                    expectedErrorMsg = ErrorDefinitionIdBundle.REQUIRED_FIELD_MISSING_WITH_APPOINTMENT_ID.getCode();
+                }
+                else
                 {
                     expectedErrorMsg =
                             ErrorDefinitionIdBundle.REQUIRED_FIELD_MISSING.getCode();
+                }
 
                 Assert.assertEquals(expectedErrorMsg, error.getCause().getMessage());
                 errorFound = true;
@@ -509,9 +516,16 @@ public class CreateTest extends AbstractComponentTest
 
             }
             catch (Exception error)
+            {
+                if (featureFlagService.isOn(FeatureFlagConstants.FF_24_4_ERROR_MESSAGES_WITH_APPOINTMENT_ID))
+                {
+                    expectedErrorMsg = ErrorDefinitionIdBundle.REQUIRED_FIELD_MISSING_WITH_APPOINTMENT_ID.getCode();
+                }
+                else
                 {
                     expectedErrorMsg =
                             ErrorDefinitionIdBundle.REQUIRED_FIELD_MISSING.getCode();
+                }
 
                 Assert.assertEquals(expectedErrorMsg, error.getCause().getMessage());
                 errorFound = true;
@@ -698,9 +712,16 @@ public class CreateTest extends AbstractComponentTest
 
             }
             catch (Exception error)
+            {
+                if (featureFlagService.isOn(FeatureFlagConstants.FF_24_4_ERROR_MESSAGES_WITH_APPOINTMENT_ID))
+                {
+                    expectedErrorMsg = ErrorDefinitionIdBundle.REQUIRED_FIELD_MISSING_WITH_APPOINTMENT_ID.getCode();
+                }
+                else
                 {
                     expectedErrorMsg =
                             ErrorDefinitionIdBundle.REQUIRED_FIELD_MISSING.getCode();
+                }
 
                 Assert.assertEquals(expectedErrorMsg, error.getCause().getMessage());
                 errorFound = true;
@@ -1000,7 +1021,7 @@ public class CreateTest extends AbstractComponentTest
             catch (Exception error)
             {
                 expectedErrorMsg =
-                        ErrorDefinitionIdBundle.NO_CAPACITY_DEFINED_FOR_INPUT_TIME_RANGE_FOR.getCode();
+                        ErrorDefinitionIdBundle.CUTOFF_TIME_APPOINTMENT_CREATION_NOT_ALLOWED.getCode();
                 Assert.assertEquals(expectedErrorMsg, error.getCause().getMessage());
                 errorFound = true;
                 errorHandlerService.clearAll(context);
diff --git a/src/main/java/com/manh/cp/appointment/appointment/api/service/FeatureFlagService.java b/src/main/java/com/manh/cp/appointment/appointment/api/service/FeatureFlagService.java
index 6c989fb52..ee2fa318a 100644
--- a/src/main/java/com/manh/cp/appointment/appointment/api/service/FeatureFlagService.java
+++ b/src/main/java/com/manh/cp/appointment/appointment/api/service/FeatureFlagService.java
@@ -44,4 +44,11 @@ public class FeatureFlagService
         logger.debug(""Feature flag {} is enabled {}"", flag.getFeatureId(), featureEnabled);
         return featureEnabled;
     }
+
+    public boolean isOn(String flag)
+    {
+        boolean featureEnabled = features.isOn(flag);
+        logger.debug(""Feature flag {} is enabled {}"", flag, featureEnabled);
+        return featureEnabled;
+    }
 }
diff --git a/src/main/java/com/manh/cp/appointment/appointment/constants/AppointmentConstants.java b/src/main/java/com/manh/cp/appointment/appointment/constants/AppointmentConstants.java
index 050500105..19b3595cb 100644
--- a/src/main/java/com/manh/cp/appointment/appointment/constants/AppointmentConstants.java
+++ b/src/main/java/com/manh/cp/appointment/appointment/constants/AppointmentConstants.java
@@ -288,4 +288,7 @@ public class AppointmentConstants
 
     public static final String SC_TRANSACTION_NAME_SPACE = ""ScTransaction"";
 
+    public static final String REQ_FIELD = ""ReqField"";
+
+    public static final String ERROR_DETAILS = ""ErrorDetails"";
 }
diff --git a/src/main/java/com/manh/cp/appointment/appointment/constants/FeatureFlagConstants.java b/src/main/java/com/manh/cp/appointment/appointment/constants/FeatureFlagConstants.java
index 9e0baccc0..b426b676c 100644
--- a/src/main/java/com/manh/cp/appointment/appointment/constants/FeatureFlagConstants.java
+++ b/src/main/java/com/manh/cp/appointment/appointment/constants/FeatureFlagConstants.java
@@ -28,4 +28,6 @@ public class FeatureFlagConstants
     public static final String AVOID_RECOMMENDING_PAST_DATE_TIMESLOTS = ""SUP-520690#2024-08"";
 
     public static final String ERROR_OVERRIDE_VENDOR_AND_CARRIER = ""SUP-495304#2024-08"";
+
+    public static final String FF_24_4_ERROR_MESSAGES_WITH_APPOINTMENT_ID = ""SUP-516677#2024-08"";
 }
diff --git a/src/main/java/com/manh/cp/appointment/appointment/validations/Rules/AppointmentCreationRule.java b/src/main/java/com/manh/cp/appointment/appointment/validations/Rules/AppointmentCreationRule.java
index 47ea908c2..ff560c9c1 100644
--- a/src/main/java/com/manh/cp/appointment/appointment/validations/Rules/AppointmentCreationRule.java
+++ b/src/main/java/com/manh/cp/appointment/appointment/validations/Rules/AppointmentCreationRule.java
@@ -27,22 +27,31 @@ import org.springframework.stereotype.Component;
 
 import com.manh.cp.appointment.appointment.api.service.FeatureFlagService;
 import com.manh.cp.appointment.appointment.client.Constants.ErrorDefinitionIdBundle;
+import com.manh.cp.appointment.appointment.client.dto.AppointmentBaseDTO;
 import com.manh.cp.appointment.appointment.client.dto.AppointmentDTO;
 import com.manh.cp.appointment.appointment.constants.AppointmentConstants;
+import com.manh.cp.appointment.appointment.constants.FeatureFlagConstants;
 import com.manh.cp.fw.common.Context;
 import com.manh.cp.fw.core.logging.CPLoggerFactory;
 import com.manh.cp.fw.core.logging.Logger;
 import com.manh.cp.fw.errorHandler.BusinessValidator;
 import com.manh.cp.fw.errorHandler.ErrorHandlerService;
 
+import static com.manh.cp.appointment.appointment.constants.AppointmentConstants.REQ_FIELD;
+
 @Component(""AppointmentCreationRule"")
 public class AppointmentCreationRule implements BusinessValidator
 {
     private final Logger logger = CPLoggerFactory.getLogger(AppointmentCreationRule.class);
 
-    @Autowired
     private FeatureFlagService featureFlagService;
 
+    @Autowired
+    public AppointmentCreationRule(FeatureFlagService featureFlagService)
+    {
+        this.featureFlagService = featureFlagService;
+    }
+
     @Override
     public void validate(Context context, ErrorHandlerService errorHandlerService, Object validationDO)
     {
@@ -51,15 +60,30 @@ public class AppointmentCreationRule implements BusinessValidator
 
         if (!(appointmentDTO.getApplicableAppointmentParametersDTO().getUseAppointmentSchedulingCutoffTime()))
         {
+            LocalDateTime preferredDateTime;
             if (!appointmentDTO.isInitialized(AppointmentConstants.PREFERRED_DATE_TIME))
             {
                 Map<String, Object> params = new HashMap<>();
+
+                String errorDefinitionId;
+                if (featureFlagService.isOn(FeatureFlagConstants.FF_24_4_ERROR_MESSAGES_WITH_APPOINTMENT_ID))
+                {
+                    params.put(REQ_FIELD, AppointmentConstants.PREFERRED_DATE_TIME);
+                    params.put(AppointmentBaseDTO.Fields.APPOINTMENT_ID.getCode(),
+                            appointmentDTO.isInitialized(AppointmentBaseDTO.Fields.APPOINTMENT_ID.getCode())
+                                    ? appointmentDTO.getAppointmentId() : null);
+                    errorDefinitionId = ErrorDefinitionIdBundle.REQUIRED_FIELD_MISSING_WITH_APPOINTMENT_ID.getCode();
+                }
+                else
+                {
                     params.put(""0"", AppointmentConstants.PREFERRED_DATE_TIME);
-                errorHandlerService.collectError(Context.getContext(),
-                        ErrorDefinitionIdBundle.REQUIRED_FIELD_MISSING.getCode(), params);
+                    errorDefinitionId = ErrorDefinitionIdBundle.REQUIRED_FIELD_MISSING.getCode();
                 }
-
-            LocalDateTime preferredDateTime = appointmentDTO.getPreferredDateTime().truncatedTo(ChronoUnit.MINUTES);
+                errorHandlerService.collectError(Context.getContext(), errorDefinitionId, params);
+            }
+            else
+            {
+                preferredDateTime = appointmentDTO.getPreferredDateTime().truncatedTo(ChronoUnit.MINUTES);
 
                 // cut off time Validation
                 {
@@ -76,7 +100,9 @@ public class AppointmentCreationRule implements BusinessValidator
                             params.put(""0"", preferredDateTime);
                             params.put(""1"", timeTillAppointmentCreationNotAllowed);
                             errorHandlerService.collectError(Context.getContext(),
-                                ErrorDefinitionIdBundle.CUTOFF_TIME_APPOINTMENT_CREATION_NOT_ALLOWED.getCode(), params);
+                                    ErrorDefinitionIdBundle.CUTOFF_TIME_APPOINTMENT_CREATION_NOT_ALLOWED.getCode(),
+                                    params);
+                        }
                     }
                 }
             }
diff --git a/src/main/java/com/manh/cp/appointment/appointment/validations/Rules/AppointmentDatesRule.java b/src/main/java/com/manh/cp/appointment/appointment/validations/Rules/AppointmentDatesRule.java
index 4b34be65c..f08631bc1 100644
--- a/src/main/java/com/manh/cp/appointment/appointment/validations/Rules/AppointmentDatesRule.java
+++ b/src/main/java/com/manh/cp/appointment/appointment/validations/Rules/AppointmentDatesRule.java
@@ -28,9 +28,11 @@ import org.springframework.stereotype.Component;
 
 import com.manh.cp.appointment.appointment.api.service.FeatureFlagService;
 import com.manh.cp.appointment.appointment.client.Constants.ErrorDefinitionIdBundle;
+import com.manh.cp.appointment.appointment.client.dto.AppointmentBaseDTO;
 import com.manh.cp.appointment.appointment.client.dto.AppointmentDTO;
 import com.manh.cp.appointment.appointment.constants.AppointmentConstants;
 import com.manh.cp.appointment.appointment.constants.ContentType;
+import com.manh.cp.appointment.appointment.constants.FeatureFlagConstants;
 import com.manh.cp.carrier.carrier.client.dto.CarrierDTO;
 import com.manh.cp.carrier.carrier.rest.client.CarrierConsumerServiceImpl;
 import com.manh.cp.fw.common.Context;
@@ -40,17 +42,25 @@ import com.manh.cp.fw.core.rest.RestApiResponse;
 import com.manh.cp.fw.errorHandler.BusinessValidator;
 import com.manh.cp.fw.errorHandler.ErrorHandlerService;
 
+import static com.manh.cp.appointment.appointment.constants.AppointmentConstants.REQ_FIELD;
+
 @Component(""AppointmentDatesRule"")
 public class AppointmentDatesRule implements BusinessValidator
 {
     private final Logger logger = CPLoggerFactory.getLogger(AppointmentDatesRule.class);
 
-    @Autowired
     private FeatureFlagService featureFlagService;
 
-    @Autowired
     private CarrierConsumerServiceImpl carrierConsumerService;
 
+    @Autowired
+    public AppointmentDatesRule(FeatureFlagService featureFlagService,
+            CarrierConsumerServiceImpl carrierConsumerService)
+    {
+        this.featureFlagService = featureFlagService;
+        this.carrierConsumerService = carrierConsumerService;
+    }
+
     @Override
     public void validate(Context context, ErrorHandlerService errorHandlerService, Object validationDO)
     {
@@ -60,9 +70,22 @@ public class AppointmentDatesRule implements BusinessValidator
         Map<String, Object> params = new HashMap<>();
         if (!appointmentDTO.isInitialized(""PreferredDateTime"") ||
                 appointmentDTO.getPreferredDateTime() == null)
+        {
+            String errorDefinitionId;
+            if (featureFlagService.isOn(FeatureFlagConstants.FF_24_4_ERROR_MESSAGES_WITH_APPOINTMENT_ID))
+            {
+                params.put(REQ_FIELD, AppointmentConstants.PREFERRED_DATE_TIME);
+                params.put(AppointmentBaseDTO.Fields.APPOINTMENT_ID.getCode(),
+                        appointmentDTO.isInitialized(AppointmentBaseDTO.Fields.APPOINTMENT_ID.getCode())
+                                ? appointmentDTO.getAppointmentId() : null);
+                errorDefinitionId = ErrorDefinitionIdBundle.REQUIRED_FIELD_MISSING_WITH_APPOINTMENT_ID.getCode();
+            }
+            else
             {
                 params.put(""0"", AppointmentConstants.PREFERRED_DATE_TIME);
-            errorHandlerService.collectError(context, ErrorDefinitionIdBundle.REQUIRED_FIELD_MISSING.getCode(), params);
+                errorDefinitionId = ErrorDefinitionIdBundle.REQUIRED_FIELD_MISSING.getCode();
+            }
+            errorHandlerService.collectError(context, errorDefinitionId, params);
         }
         else
         {
diff --git a/src/main/java/com/manh/cp/appointment/appointment/validations/Rules/AppointmentMandatoryFieldsRule.java b/src/main/java/com/manh/cp/appointment/appointment/validations/Rules/AppointmentMandatoryFieldsRule.java
index fef153b22..001a3fb32 100644
--- a/src/main/java/com/manh/cp/appointment/appointment/validations/Rules/AppointmentMandatoryFieldsRule.java
+++ b/src/main/java/com/manh/cp/appointment/appointment/validations/Rules/AppointmentMandatoryFieldsRule.java
@@ -21,39 +21,82 @@ import java.util.HashMap;
 import java.util.Map;
 
 import org.apache.commons.lang.StringUtils;
+import org.springframework.beans.factory.annotation.Autowired;
 import org.springframework.stereotype.Component;
 
+import com.manh.cp.appointment.appointment.api.service.FeatureFlagService;
 import com.manh.cp.appointment.appointment.client.Constants.ErrorDefinitionIdBundle;
+import com.manh.cp.appointment.appointment.client.dto.AppointmentBaseDTO;
 import com.manh.cp.appointment.appointment.client.dto.AppointmentDTO;
 import com.manh.cp.appointment.appointment.constants.AppointmentConstants;
+import com.manh.cp.appointment.appointment.constants.FeatureFlagConstants;
 import com.manh.cp.fw.common.Context;
 import com.manh.cp.fw.core.logging.CPLoggerFactory;
 import com.manh.cp.fw.core.logging.Logger;
 import com.manh.cp.fw.errorHandler.BusinessValidator;
 import com.manh.cp.fw.errorHandler.ErrorHandlerService;
 
+import static com.manh.cp.appointment.appointment.constants.AppointmentConstants.REQ_FIELD;
+
 @Component(""AppointmentMandatoryFieldsRule"")
 public class AppointmentMandatoryFieldsRule implements BusinessValidator<AppointmentDTO>
 {
     private final Logger logger = CPLoggerFactory.getLogger(AppointmentMandatoryFieldsRule.class);
 
+    public FeatureFlagService featureFlagService;
+
+    @Autowired
+    public AppointmentMandatoryFieldsRule(FeatureFlagService featureFlagService)
+    {
+        this.featureFlagService = featureFlagService;
+    }
+
     @Override
     public void validate(Context context, ErrorHandlerService errorHandlerService, AppointmentDTO appointmentDTO)
     {
         logger.trace("">> AppointmentMandatoryFieldsRule.Validate"");
 
+        boolean isErrorMessageWithApptIdEnabled =
+                featureFlagService.isOn(FeatureFlagConstants.FF_24_4_ERROR_MESSAGES_WITH_APPOINTMENT_ID);
+
         Map<String, Object> params = new HashMap<>();
         if (StringUtils.isBlank(context.getRelevantNodeId()))
+        {
+            String errorDefinitionId;
+            if (isErrorMessageWithApptIdEnabled)
+            {
+                params.put(REQ_FIELD, AppointmentConstants.FACILITY);
+                params.put(AppointmentBaseDTO.Fields.APPOINTMENT_ID.getCode(),
+                        appointmentDTO.isInitialized(AppointmentBaseDTO.Fields.APPOINTMENT_ID.getCode())
+                                ? appointmentDTO.getAppointmentId() : null);
+                errorDefinitionId = ErrorDefinitionIdBundle.REQUIRED_FIELD_MISSING_WITH_APPOINTMENT_ID.getCode();
+            }
+            else
             {
                 params.put(""0"", AppointmentConstants.FACILITY);
-            errorHandlerService.collectError(context, ErrorDefinitionIdBundle.REQUIRED_FIELD_MISSING.getCode(), params);
+                errorDefinitionId = ErrorDefinitionIdBundle.REQUIRED_FIELD_MISSING.getCode();
+            }
+            errorHandlerService.collectError(context, errorDefinitionId, params);
         }
 
         if (!appointmentDTO.isInitialized(""AppointmentTypeId"") ||
                 StringUtils.isBlank(appointmentDTO.getAppointmentTypeId()))
+        {
+            String errorDefinitionId;
+            if (isErrorMessageWithApptIdEnabled)
+            {
+                params.put(REQ_FIELD, AppointmentConstants.APPOINTMENT_TYPE);
+                params.put(AppointmentBaseDTO.Fields.APPOINTMENT_ID.getCode(),
+                        appointmentDTO.isInitialized(AppointmentBaseDTO.Fields.APPOINTMENT_ID.getCode())
+                                ? appointmentDTO.getAppointmentId() : null);
+                errorDefinitionId = ErrorDefinitionIdBundle.REQUIRED_FIELD_MISSING_WITH_APPOINTMENT_ID.getCode();
+            }
+            else
             {
                 params.put(""0"", AppointmentConstants.APPOINTMENT_TYPE);
-            errorHandlerService.collectError(context, ErrorDefinitionIdBundle.REQUIRED_FIELD_MISSING.getCode(), params);
+                errorDefinitionId = ErrorDefinitionIdBundle.REQUIRED_FIELD_MISSING.getCode();
+            }
+            errorHandlerService.collectError(context, errorDefinitionId, params);
         }
 
         if (!appointmentDTO.isInitialized(""CarrierId"") ||
diff --git a/src/main/java/com/manh/cp/appointment/core/impl/service/ResourceAvailabilityServiceImpl.java b/src/main/java/com/manh/cp/appointment/core/impl/service/ResourceAvailabilityServiceImpl.java
index 185108477..6fe9f7bbe 100644
--- a/src/main/java/com/manh/cp/appointment/core/impl/service/ResourceAvailabilityServiceImpl.java
+++ b/src/main/java/com/manh/cp/appointment/core/impl/service/ResourceAvailabilityServiceImpl.java
@@ -1024,7 +1024,7 @@ public class ResourceAvailabilityServiceImpl<T extends AppointmentInputDTO> impl
                     }
                     else
                     {
-                        scheduleUtil.throwError(context, fetcherResponse.getErrors());
+                        scheduleUtil.throwError(context, fetcherResponse.getErrors(), appointmentId);
                     }
                 }
 
diff --git a/src/main/java/com/manh/cp/appointment/core/impl/service/ScheduleUtil.java b/src/main/java/com/manh/cp/appointment/core/impl/service/ScheduleUtil.java
index 94a16fa99..a544e8cea 100644
--- a/src/main/java/com/manh/cp/appointment/core/impl/service/ScheduleUtil.java
+++ b/src/main/java/com/manh/cp/appointment/core/impl/service/ScheduleUtil.java
@@ -37,7 +37,9 @@ import org.springframework.transaction.annotation.Transactional;
 
 import com.manh.cp.appointment.appointment.api.service.FeatureFlagService;
 import com.manh.cp.appointment.appointment.client.Constants.ErrorDefinitionIdBundle;
+import com.manh.cp.appointment.appointment.client.dto.AppointmentBaseDTO;
 import com.manh.cp.appointment.appointment.constants.AppointmentConstants;
+import com.manh.cp.appointment.appointment.constants.FeatureFlagConstants;
 import com.manh.cp.appointment.appointment.util.IdGenerator;
 import com.manh.cp.appointment.core.api.domain.CapacityScope;
 import com.manh.cp.appointment.core.api.domain.FacilityCapacities;
@@ -59,6 +61,7 @@ import com.manh.cp.schedule.calendar.api.service.CalendarWindowCapacityService;
 import com.manh.cp.schedule.calendar.api.service.CalendarWindowService;
 import com.manh.cp.schedule.domain.enums.Error;
 
+import static com.manh.cp.appointment.appointment.constants.AppointmentConstants.ERROR_DETAILS;
 import static org.apache.commons.collections4.CollectionUtils.isNotEmpty;
 import static org.apache.commons.lang.StringUtils.EMPTY;
 import static org.apache.commons.lang.StringUtils.isNotBlank;
@@ -104,7 +107,7 @@ public class ScheduleUtil
 
     private static final Logger logger = CPLoggerFactory.getLogger(ScheduleUtil.class);
 
-    public void throwError(Context context, List<Error> scheduleFrameWorkErrors)
+    public void throwError(Context context, List<Error> scheduleFrameWorkErrors, String appointmentId)
     {
         List<String> errors = new ArrayList<>();
         scheduleFrameWorkErrors.forEach(error -> errors.add(error.name()));
@@ -114,10 +117,20 @@ public class ScheduleUtil
         logger.info("" Schedule fw threw errors : "" + errorString);
 
         Map<String, Object> params = new HashMap<>();
+        String errorDefinitionId;
+        if (featureFlagService.isOn(FeatureFlagConstants.FF_24_4_ERROR_MESSAGES_WITH_APPOINTMENT_ID))
+        {
+            params.put(ERROR_DETAILS, errorString);
+            params.put(AppointmentBaseDTO.Fields.APPOINTMENT_ID.getCode(), appointmentId);
+            errorDefinitionId = ErrorDefinitionIdBundle.SCHEDULE_FRAMEWORK_ERROR_WITH_APPOINTMENT_ID.getCode();
+        }
+        else
+        {
             params.put(""0"", errorString);
+            errorDefinitionId = ErrorDefinitionIdBundle.SCHEDULE_FRAMEWORK_ERROR.getCode();
+        }
 
-        errorHandlerService.collectError(context,
-                ErrorDefinitionIdBundle.SCHEDULE_FRAMEWORK_ERROR.getCode(), params);
+        errorHandlerService.collectError(context, errorDefinitionId, params);
 
     }
 
diff --git a/src/main/java/com/manh/cp/appointment/core/impl/service/UtilizationHelper.java b/src/main/java/com/manh/cp/appointment/core/impl/service/UtilizationHelper.java
index 0e333d52a..08d3aaf09 100644
--- a/src/main/java/com/manh/cp/appointment/core/impl/service/UtilizationHelper.java
+++ b/src/main/java/com/manh/cp/appointment/core/impl/service/UtilizationHelper.java
@@ -155,7 +155,7 @@ public class UtilizationHelper<T extends AppointmentInputDTO>
         List<FacilityCapacities> facilityCapacities = facilityCapacitiesService.getAllFacilityCapacities(context);
 
         FetcherResponse fetcherResponse = getAllUtilizationsForAppointmentSchedules(recommendationLine, context,
-                resourceGroupList, facilityScopes);
+                resourceGroupList, facilityScopes, appointmentInputDTO);
 
         List<DefinitionUtilization> allUtilizationsForAppointmentDuration = fetcherResponse.getDefinitionUtilizations();
 
@@ -323,7 +323,7 @@ public class UtilizationHelper<T extends AppointmentInputDTO>
     @TrackTime(value = TrackTime.DEBUG, skipArgs = true, skipResult = true)
     private FetcherResponse getAllUtilizationsForAppointmentSchedules(RecommendationLine recommendationLine,
             Context context, List<ResourceGroup> resourceGroupList,
-            Collection<FacilityDayLevelScope> facilityDayLevelScopes)
+            Collection<FacilityDayLevelScope> facilityDayLevelScopes, T appointmentInputDTO)
     {
         ResourceScheduleInformation resourceScheduleInformation1 =
                 recommendationLine.getResourcesInRecommendation().get(0).getResourceScheduleInformation();
@@ -390,7 +390,8 @@ public class UtilizationHelper<T extends AppointmentInputDTO>
 
         if (CollectionUtils.isNotEmpty(response.getErrors()))
         {
-            scheduleUtil.throwError(context, response.getErrors());
+            String appointmentId = appointmentInformationService.getAppointmentId(appointmentInputDTO);
+            scheduleUtil.throwError(context, response.getErrors(), appointmentId);
         }
 
         logger.debug("" utilization helper - allUtilizationsForAppointmentDuration = {}  "",
@@ -443,7 +444,7 @@ public class UtilizationHelper<T extends AppointmentInputDTO>
             }
             else
             {
-                scheduleUtil.throwError(context, response.getErrorList());
+                scheduleUtil.throwError(context, response.getErrorList(), appointmentId);
             }
         }
         logger.trace(""<<createUtilizations"");
@@ -565,7 +566,7 @@ public class UtilizationHelper<T extends AppointmentInputDTO>
 
         if (CollectionUtils.isNotEmpty(fetcherResponse.getErrors()))
         {
-            scheduleUtil.throwError(context, fetcherResponse.getErrors());
+            scheduleUtil.throwError(context, fetcherResponse.getErrors(), appointmentId);
         }
 
         if (CollectionUtils.isNotEmpty(fetcherResponse.getDefinitionUtilizations()))
@@ -615,7 +616,7 @@ public class UtilizationHelper<T extends AppointmentInputDTO>
 
                                             if (CollectionUtils.isNotEmpty(scheduleFWErrors))
                                             {
-                                                scheduleUtil.throwError(context, scheduleFWErrors);
+                                                scheduleUtil.throwError(context, scheduleFWErrors, appointmentId);
                                             }
                                         }
                                     }
diff --git a/src/main/resources/seedData/errorDefinition_156__appointment.json b/src/main/resources/seedData/errorDefinition_156__appointment.json
index b9c3047cb..0aa5e49f9 100644
--- a/src/main/resources/seedData/errorDefinition_156__appointment.json
+++ b/src/main/resources/seedData/errorDefinition_156__appointment.json
@@ -675,6 +675,22 @@
       ""DefaultErrorLevelId"": ""ERROR"",
       ""MinErrorLevelId"": ""ERROR"",
       ""MaxErrorLevelId"": ""ERROR""
+    },
+    {
+      ""ErrorDefinitionId"": ""APT::278"",
+      ""ShortErrorText"": ""Required Field is missing"",
+      ""ErrorText"": ""Required Field {ReqField} is missing for Appointment {AppointmentId}"",
+      ""DefaultErrorLevelId"": ""FATAL"",
+      ""MinErrorLevelId"": ""FATAL"",
+      ""MaxErrorLevelId"": ""FATAL""
+    },
+    {
+      ""ErrorDefinitionId"": ""APT::279"",
+      ""ShortErrorText"": ""Schedule framework error"",
+      ""ErrorText"": ""An error occurred with schedule framework - {ErrorDetails} for Appointment {AppointmentId}"",
+      ""DefaultErrorLevelId"": ""FATAL"",
+      ""MinErrorLevelId"": ""FATAL"",
+      ""MaxErrorLevelId"": ""FATAL""
     }
   ]
 }
diff --git a/src/test/java/com/manh/cp/appointment/appointment/impl/service/CarrierAppointmentScheduleTest.java b/src/test/java/com/manh/cp/appointment/appointment/impl/service/CarrierAppointmentScheduleTest.java
index b088aa64a..11c5effd8 100644
--- a/src/test/java/com/manh/cp/appointment/appointment/impl/service/CarrierAppointmentScheduleTest.java
+++ b/src/test/java/com/manh/cp/appointment/appointment/impl/service/CarrierAppointmentScheduleTest.java
@@ -33,6 +33,7 @@ import com.manh.cp.appointment.appointment.client.Constants.ErrorDefinitionIdBun
 import com.manh.cp.appointment.appointment.client.dto.recommendation.RecommendationDTO;
 import com.manh.cp.appointment.appointment.client.dto.recommendation.RecommendationsOutputDTO;
 import com.manh.cp.appointment.appointment.constants.AppointmentConstants;
+import com.manh.cp.appointment.appointment.constants.FeatureIdentifier;
 import com.manh.cp.appointment.appointment.impl.domain.entity.AppointmentTestData;
 import com.manh.cp.appointment.appointment.userexit.EditCarrierAppointmentUserExit;
 import com.manh.cp.appointment.appointment.userexit.ScheduleAppointmentUserExit;
@@ -97,7 +98,7 @@ public class CarrierAppointmentScheduleTest extends BaseUnitTest
                 Mockito.any());
         Mockito.doReturn(recommendationsOutputDTO).when(appointmentManagerHelper).recommendTimeSlots(Mockito.any(),
                 Mockito.any());
-        Mockito.doReturn(true).when(featureFlagService).isOn(Mockito.any());
+        Mockito.doReturn(true).when(featureFlagService).isOn((FeatureIdentifier) Mockito.any());
         Mockito.doReturn(false).when(applicationParameterService).getParameterValue(Mockito.any());
         Mockito.when(scheduleCarrierAppointmentUserExit.preprocess(Mockito.any(), Mockito.any())).thenCallRealMethod();
 
@@ -125,7 +126,7 @@ public class CarrierAppointmentScheduleTest extends BaseUnitTest
                 Mockito.any());
         Mockito.doReturn(new RecommendationsOutputDTO()).when(appointmentManagerHelper)
                 .recommendTimeSlots(Mockito.any(), Mockito.any());
-        Mockito.doReturn(true).when(featureFlagService).isOn(Mockito.any());
+        Mockito.doReturn(true).when(featureFlagService).isOn((FeatureIdentifier) Mockito.any());
         Mockito.doReturn(false).when(applicationParameterService).getParameterValue(Mockito.any());
         Mockito.when(scheduleCarrierAppointmentUserExit.preprocess(Mockito.any(), Mockito.any())).thenCallRealMethod();
 
@@ -159,7 +160,7 @@ public class CarrierAppointmentScheduleTest extends BaseUnitTest
         Mockito.doReturn(recommendationsOutputDTO).when(appointmentManagerHelper).recommendTimeSlots(Mockito.any(),
                 Mockito.any());
         Mockito.doReturn(false).when(applicationParameterService).getParameterValue(Mockito.any());
-        Mockito.doReturn(true).when(featureFlagService).isOn(Mockito.any());
+        Mockito.doReturn(true).when(featureFlagService).isOn((FeatureIdentifier) Mockito.any());
         Mockito.when(editCarrierAppointmentUserExit.preprocess(Mockito.any(), Mockito.any())).thenCallRealMethod();
 
         Document response = appointmentManagerHelper.editCarrierAppointment(context, apptDoc, null);
@@ -190,7 +191,7 @@ public class CarrierAppointmentScheduleTest extends BaseUnitTest
         Mockito.doReturn(recommendationsOutputDTO).when(appointmentManagerHelper).recommendTimeSlots(Mockito.any(),
                 Mockito.any());
         Mockito.doReturn(false).when(applicationParameterService).getParameterValue(Mockito.any());
-        Mockito.doReturn(true).when(featureFlagService).isOn(Mockito.any());
+        Mockito.doReturn(true).when(featureFlagService).isOn((FeatureIdentifier) Mockito.any());
         Mockito.when(editCarrierAppointmentUserExit.preprocess(Mockito.any(), Mockito.any())).thenCallRealMethod();
 
         Document response = appointmentManagerHelper.editCarrierAppointment(context, apptDoc, null);
diff --git a/src/test/java/com/manh/cp/appointment/core/impl/service/TimeIntervalCapacityMapServiceImplTest.java b/src/test/java/com/manh/cp/appointment/core/impl/service/TimeIntervalCapacityMapServiceImplTest.java
index e3c41eb22..c3dcf9a20 100644
--- a/src/test/java/com/manh/cp/appointment/core/impl/service/TimeIntervalCapacityMapServiceImplTest.java
+++ b/src/test/java/com/manh/cp/appointment/core/impl/service/TimeIntervalCapacityMapServiceImplTest.java
@@ -31,6 +31,7 @@ import org.springframework.test.context.junit4.SpringJUnit4ClassRunner;
 
 import com.manh.cp.appointment.appointment.api.domain.Appointment;
 import com.manh.cp.appointment.appointment.api.service.FeatureFlagService;
+import com.manh.cp.appointment.appointment.constants.FeatureIdentifier;
 import com.manh.cp.appointment.appointment.impl.domain.entity.AppointmentEntityBuilder;
 import com.manh.cp.appointment.appointment.impl.service.AppointmentUtil;
 import com.manh.cp.appointment.core.api.domain.TimeIntervalCapacity;
@@ -113,7 +114,7 @@ public class TimeIntervalCapacityMapServiceImplTest extends BaseUnitTest
         when(mockedTIS.getTimeIntervalCapacityList()).thenReturn(Collections.singletonList(timeIntervalCapacity));
 
         Page scopePages = new Page<TimeIntervalScope>(new PagingRequest(0, 1), 1L, Collections.singleton(mockedTIS));
-        when(featureFlagService.isOn(any())).thenReturn(true);
+        when(featureFlagService.isOn((FeatureIdentifier) any())).thenReturn(true);
         when(timeIntervalCapacityService.findTimeIntervalCapacityByPK(any(), any())).thenReturn(timeIntervalCapacity);
         when(timeIntervalScopeService.findAllTimeIntervalScopes(any(), any())).thenReturn(scopePages);
         when(resourceUnitMapService.getResourceUnit(any(), any(), any()))
diff --git a/src/test/java/com/manh/cp/appointment/validationsTests/AppointmentRulesTest.java b/src/test/java/com/manh/cp/appointment/validationsTests/AppointmentRulesTest.java
index a3161ff0c..afa6a3363 100644
--- a/src/test/java/com/manh/cp/appointment/validationsTests/AppointmentRulesTest.java
+++ b/src/test/java/com/manh/cp/appointment/validationsTests/AppointmentRulesTest.java
@@ -18,6 +18,7 @@
 package com.manh.cp.appointment.validationsTests;
 
 import java.math.BigDecimal;
+import java.time.LocalTime;
 import java.util.ArrayList;
 import java.util.List;
 import java.util.Locale;
@@ -25,10 +26,12 @@ import java.util.Locale;
 import org.junit.Assert;
 import org.junit.Before;
 import org.junit.Test;
+import org.junit.runner.RunWith;
 import org.mockito.InjectMocks;
 import org.mockito.Mock;
+import org.mockito.Mockito;
+import org.springframework.test.context.junit4.SpringJUnit4ClassRunner;
 
-import com.manh.cp.appointment.AbstractApptUnitTest;
 import com.manh.cp.appointment.appointment.ExternalServiceLocator;
 import com.manh.cp.appointment.appointment.api.service.FeatureFlagService;
 import com.manh.cp.appointment.appointment.client.Constants.ErrorDefinitionIdBundle;
@@ -38,19 +41,24 @@ import com.manh.cp.appointment.appointment.dto.FacilityAppointmentInputDTO;
 import com.manh.cp.appointment.appointment.impl.service.AppointmentInformationServiceImpl;
 import com.manh.cp.appointment.appointment.impl.service.FacilityInformationService;
 import com.manh.cp.appointment.appointment.validations.Rules.*;
+import com.manh.cp.carrier.carrier.rest.client.CarrierConsumerServiceImpl;
 import com.manh.cp.fw.common.Context;
 import com.manh.cp.fw.errorHandler.ErrorHandlerServiceImpl;
 import com.manh.cp.fw.errorHandler.MessageService;
+import com.manh.cp.fw.errorHandler.ValidationResult;
 import com.manh.cp.fw.errorHandler.ValidationStore;
 import com.manh.cp.fw.errorHandler.logging.api.MessageLogService;
 import com.manh.cp.fw.sccore.parameter.api.service.ApplicationParameterService;
 import com.manh.cp.fw.scoring.data.PreferenceCriteria;
+import com.manh.cp.test.BaseUnitTest;
 
 import static org.mockito.ArgumentMatchers.any;
+import static org.mockito.ArgumentMatchers.anyString;
 import static org.mockito.Mockito.when;
 import static org.mockito.MockitoAnnotations.initMocks;
 
-public class AppointmentRulesTest extends AbstractApptUnitTest
+@RunWith(SpringJUnit4ClassRunner.class)
+public class AppointmentRulesTest extends BaseUnitTest
 {
 
     private Context context;
@@ -87,13 +95,15 @@ public class AppointmentRulesTest extends AbstractApptUnitTest
     @InjectMocks
     private AppointmentInformationServiceImpl appointmentInfoService;
 
+    @Mock
+    private CarrierConsumerServiceImpl carrierConsumerService;
+
     @Before
     public void init()
     {
         context = Context.renewContext(""1"", ""supplychainadmin@1"", ""1"", Locale.US, ""1"", ""01"", null);
         initMocks(this);
         errorHandlerService = new ErrorHandlerServiceImpl(validationStore, messageService, messageLogService, true);
-
     }
 
     @Test
@@ -108,13 +118,24 @@ public class AppointmentRulesTest extends AbstractApptUnitTest
     @Test
     public void validateAppointmentDatesRuleNullTest()
     {
-        appointmentDatesRule = new AppointmentDatesRule();
+        appointmentDatesRule = new AppointmentDatesRule(featureFlagService, carrierConsumerService);
         AppointmentDTO appointmentDTO = new AppointmentDTO();
         appointmentDatesRule.validate(context, errorHandlerService, appointmentDTO);
         assertForValidationError(context, ErrorDefinitionIdBundle.REQUIRED_FIELD_MISSING.getCode());
         clearValidationErros(context);
     }
 
+    @Test
+    public void validateAppointmentDatesRuleNullTestWithNewError()
+    {
+        Mockito.when(featureFlagService.isOn(anyString())).thenReturn(true);
+        appointmentDatesRule = new AppointmentDatesRule(featureFlagService, carrierConsumerService);
+        AppointmentDTO appointmentDTO = new AppointmentDTO();
+        appointmentDatesRule.validate(context, errorHandlerService, appointmentDTO);
+        assertForValidationError(context, ErrorDefinitionIdBundle.REQUIRED_FIELD_MISSING_WITH_APPOINTMENT_ID.getCode());
+        clearValidationErros(context);
+    }
+
     @Test
     public void validateAppointmentFacilityRuleNullTest()
     {
@@ -129,17 +150,18 @@ public class AppointmentRulesTest extends AbstractApptUnitTest
     @Test
     public void validateAppointmentMandatoryFieldRuleAptTypeIdNullTest()
     {
-        appointmentMandatoryFieldsRule = new AppointmentMandatoryFieldsRule();
+        Mockito.when(featureFlagService.isOn(anyString())).thenReturn(true);
+        appointmentMandatoryFieldsRule = new AppointmentMandatoryFieldsRule(featureFlagService);
         AppointmentDTO appointmentDTO = new AppointmentDTO();
         appointmentMandatoryFieldsRule.validate(context, errorHandlerService, appointmentDTO);
-        assertForValidationError(context, ErrorDefinitionIdBundle.REQUIRED_FIELD_MISSING.getCode());
+        assertForValidationError(context, ErrorDefinitionIdBundle.REQUIRED_FIELD_MISSING_WITH_APPOINTMENT_ID.getCode());
         clearValidationErros(context);
     }
 
     @Test
     public void validateAppointmentMandatoryFieldRuleCarrierIdNullTest()
     {
-        appointmentMandatoryFieldsRule = new AppointmentMandatoryFieldsRule();
+        appointmentMandatoryFieldsRule = new AppointmentMandatoryFieldsRule(featureFlagService);
         AppointmentDTO appointmentDTO = new AppointmentDTO();
         appointmentDTO.setAppointmentTypeId(""LIVE_LOAD"");
         appointmentMandatoryFieldsRule.validate(context, errorHandlerService, appointmentDTO);
@@ -310,6 +332,33 @@ public class AppointmentRulesTest extends AbstractApptUnitTest
 
     }
 
+    @Test
+    public void validateAppointmentCreation()
+    {
+        appointmentCreationRule = new AppointmentCreationRule(featureFlagService);
+        ApplicableAppointmentParametersDTO applicableAppointmentParametersDTO =
+                new ApplicableAppointmentParametersDTO(1L, """", 2, 1L, 60L, """", false, false, LocalTime.now());
+        AppointmentDTO appointmentDTO = new AppointmentDTO();
+        appointmentDTO.setApplicableAppointmentParametersDTO(applicableAppointmentParametersDTO);
+        appointmentCreationRule.validate(context, errorHandlerService, appointmentDTO);
+        assertForValidationError(context, ErrorDefinitionIdBundle.REQUIRED_FIELD_MISSING.getCode());
+        clearValidationErros(context);
+    }
+
+    @Test
+    public void validateAppointmentCreationWithNewError()
+    {
+        Mockito.when(featureFlagService.isOn(anyString())).thenReturn(true);
+        appointmentCreationRule = new AppointmentCreationRule(featureFlagService);
+        ApplicableAppointmentParametersDTO applicableAppointmentParametersDTO =
+                new ApplicableAppointmentParametersDTO(1L, """", 2, 1L, 60L, """", false, false, LocalTime.now());
+        AppointmentDTO appointmentDTO = new AppointmentDTO();
+        appointmentDTO.setApplicableAppointmentParametersDTO(applicableAppointmentParametersDTO);
+        appointmentCreationRule.validate(context, errorHandlerService, appointmentDTO);
+        assertForValidationError(context, ErrorDefinitionIdBundle.REQUIRED_FIELD_MISSING_WITH_APPOINTMENT_ID.getCode());
+        clearValidationErros(context);
+    }
+
     public AppointmentInformationServiceImpl initialiseAppointmentInformationServiceImpl()
     {
         FacilityInformationService facilityInformationService =
@@ -320,4 +369,20 @@ public class AppointmentRulesTest extends AbstractApptUnitTest
         return appointmentInformationServiceImpl;
     }
 
+    private void assertForValidationError(Context context, String errorDefinitionId)
+    {
+        ArrayList validationResults =
+                context.getTransactionAttribute(""ErrorHandler"", ""ValidationResults"");
+
+        Assert.assertNotNull(validationResults);
+        Assert.assertTrue(validationResults.size() > 0);
+        ValidationResult result = (ValidationResult) validationResults.get(0);
+        Assert.assertEquals(errorDefinitionId, result.getErrorDefinitionId());
+    }
+
+    private void clearValidationErros(Context context)
+    {
+        context.removeTransactionAttribute(""ErrorHandler"", ""ValidationResults"");
+    }
+
 }
diff --git a/version.txt b/version.txt
index 2b9cabc07..62d44807d 100644
--- a/version.txt
+++ b/version.txt
@@ -1 +1 @@
-20.12.0
+20.13.0
","Replace 0 and 1 with the name of the item being inserted here
avoid FF mock. With minimal FF-test adoption we can use AssumeFF annotation.
add fail\(\) in case API does not return exception
do we need this?
avoid FF mock \(and other other occurrence in TC
add fail\(\) in case API does not return exception\(and for other api invocation in TC\) 
Add desc which all scenarios we are verifying"
0fa74824f9fefec08acfe117866dc587563730d5,"diff --git a/gradle.properties b/gradle.properties
index 5092163a0..66317d62f 100644
--- a/gradle.properties
+++ b/gradle.properties
@@ -1 +1 @@
-dbChecksum=158dbf4434a8060b2244b7a11aa8c4e9
+dbChecksum=d97765f28d8f4278f664e65d18964351
diff --git a/src/main/resources/seedData/inBoundMessageType_157__appointment.json b/src/main/resources/seedData/inBoundMessageType_157__appointment.json
index 886a3cb3e..4831e0bfe 100644
--- a/src/main/resources/seedData/inBoundMessageType_157__appointment.json
+++ b/src/main/resources/seedData/inBoundMessageType_157__appointment.json
@@ -259,7 +259,7 @@
       ""NoOfConsumer"": 10,
       ""MinNoOfConsumer"": 1,
       ""ServiceId"": ""UpdateResourceGroupConfigurations"",
-      ""Tags"": ""dbHighCPU,replicaLagCreator""
+      ""Tags"": ""dbHighCPU""
     },
     {
       ""MessageType"": ""YRD_APT_OffYardAppointment"",
diff --git a/version.txt b/version.txt
index 8b0beab16..2b9cabc07 100644
--- a/version.txt
+++ b/version.txt
@@ -1 +1 @@
-20.11.0
+20.12.0
","Lets not do a migration script. Just clean it up from seed. I’ll request the DBAs to handle this manually for existing customers.
Done."
26d2d44b12c28580549b6ade52bb6a4949cfe521,"diff --git a/src/component-test/java/com/manh/cp/appointment/common/ParameterizedTestBase.java b/src/component-test/java/com/manh/cp/appointment/common/ParameterizedTestBase.java
index 53839bdbb..f1a4dc554 100644
--- a/src/component-test/java/com/manh/cp/appointment/common/ParameterizedTestBase.java
+++ b/src/component-test/java/com/manh/cp/appointment/common/ParameterizedTestBase.java
@@ -46,12 +46,14 @@ import com.manh.cp.appointment.core.api.domain.DayLevelUtilization;
 import com.manh.cp.appointment.core.api.domain.FacilityDayLevelScope;
 import com.manh.cp.appointment.core.api.domain.FacilityLevelUtilization;
 import com.manh.cp.appointment.core.api.domain.ResourceGroup;
+import com.manh.cp.appointment.core.api.domain.Schedule;
 import com.manh.cp.appointment.core.api.domain.TimeIntervalDefinition;
 import com.manh.cp.appointment.core.api.domain.TimeIntervalUtilization;
 import com.manh.cp.appointment.core.rest.DayLevelUtilizationController;
 import com.manh.cp.appointment.core.rest.FacilityDayLevelScopeController;
 import com.manh.cp.appointment.core.rest.FacilityLevelUtilizationController;
 import com.manh.cp.appointment.core.rest.ResourceGroupController;
+import com.manh.cp.appointment.core.rest.ScheduleController;
 import com.manh.cp.appointment.core.rest.TimeIntervalDefinitionController;
 import com.manh.cp.appointment.core.rest.TimeIntervalUtilizationController;
 import com.manh.cp.config.JacksonObjectMapperConfig;
@@ -105,6 +107,9 @@ public abstract class ParameterizedTestBase extends AbstractComponentTest
     @Autowired
     private FacilityDayLevelScopeController facilityDayLevelScopeController;
 
+    @Autowired
+    private ScheduleController scheduleController;
+
     public Context context;
 
     public String testName;
@@ -120,6 +125,7 @@ public abstract class ParameterizedTestBase extends AbstractComponentTest
         FACILITY_LEVEL_UTILIZATION(FacilityLevelUtilization.ENTITY_NAME),
         TIME_INTERVAL_DEFINITION(TimeIntervalDefinition.ENTITY_NAME),
         FACILITY_DAY_LEVEL_SCOPE(FacilityDayLevelScope.ENTITY_NAME),
+        SCHEDULE(Schedule.ENTITY_NAME),
         ;
 
         private final String name;
@@ -207,6 +213,11 @@ public abstract class ParameterizedTestBase extends AbstractComponentTest
                             new Document(map), null, null));
                     break;
                 }
+                case SCHEDULE:
+                {
+                    list.forEach(map -> scheduleController.saveSchedule(context, new Document(map), null, null, null));
+                    break;
+                }
             }
         }
     }
@@ -285,6 +296,15 @@ public abstract class ParameterizedTestBase extends AbstractComponentTest
                     assertPojoEquals(list, documents);
                     break;
                 }
+                case SCHEDULE:
+                {
+                    List<Document> documents = scheduleController
+                            .listSchedules(context, new Query(null, 0, Integer.MAX_VALUE), null, null,
+                                    null, null, null)
+                            .getBody().getData();
+                    assertPojoEquals(list, documents);
+                    break;
+                }
             }
         }
     }
@@ -310,8 +330,11 @@ public abstract class ParameterizedTestBase extends AbstractComponentTest
                 }
                 case APPOINTMENT:
                 {
-                    list.forEach(
-                            map -> appointmentController.deleteAppointmentByBusinessKey(context, new Document(map)));
+                    List<Document> documents = appointmentController
+                            .listAppointments(context, new Query(null, 0, Integer.MAX_VALUE), null, null,
+                                    null, null, null)
+                            .getBody().getData();
+                    documents.forEach(map -> appointmentController.deleteAppointmentByBusinessKey(context, map));
                     break;
                 }
                 case TIME_INTERVAL_UTILIZATION:
@@ -361,6 +384,15 @@ public abstract class ParameterizedTestBase extends AbstractComponentTest
                             .deleteFacilityDayLevelScopeByBusinessKey(context, map));
                     break;
                 }
+                case SCHEDULE:
+                {
+                    List<Document> documents = scheduleController
+                            .listSchedules(context, new Query(null, 0, Integer.MAX_VALUE), null, null,
+                                    null, null, null)
+                            .getBody().getData();
+                    documents.forEach(map -> scheduleController.deleteScheduleByBusinessKey(context, map));
+                    break;
+                }
             }
         }
     }
diff --git a/src/component-test/java/com/manh/cp/appointment/parameterizedTests/CapacityParameterizedTests.java b/src/component-test/java/com/manh/cp/appointment/parameterizedTests/CapacityParameterizedTests.java
index 9e59eaf12..816a8d5b4 100644
--- a/src/component-test/java/com/manh/cp/appointment/parameterizedTests/CapacityParameterizedTests.java
+++ b/src/component-test/java/com/manh/cp/appointment/parameterizedTests/CapacityParameterizedTests.java
@@ -30,10 +30,9 @@ import org.junit.runners.Parameterized;
 import org.springframework.beans.factory.annotation.Autowired;
 
 import com.manh.cp.appointment.appointment.AppointmentApplicationParameters;
+import com.manh.cp.appointment.appointment.impl.service.AppointmentManagerHelper;
 import com.manh.cp.appointment.appointment.impl.service.CapacityManager;
 import com.manh.cp.appointment.common.ParameterizedTestBase;
-import com.manh.cp.appointment.core.dto.CapacityDTO;
-import com.manh.cp.appointment.core.dto.EnhancedAppointmentDTO;
 import com.manh.cp.fw.common.Context;
 import com.manh.cp.fw.common.Document;
 import com.manh.cp.fw.core.logging.CPLoggerFactory;
@@ -77,6 +76,9 @@ public class CapacityParameterizedTests extends ParameterizedTestBase
     @Autowired
     private CapacityManager capacityManager;
 
+    @Autowired
+    private AppointmentManagerHelper appointmentManagerHelper;
+
     @Before
     public void setup()
     {
@@ -151,11 +153,7 @@ public class CapacityParameterizedTests extends ParameterizedTestBase
 
             for (Map<String, Object> appointment : list)
             {
-                EnhancedAppointmentDTO enhancedAppointmentDTO =
-                        objectMapper.convertValue(appointment, EnhancedAppointmentDTO.class);
-
-                CapacityDTO capacityChecker = new CapacityDTO(enhancedAppointmentDTO);
-                capacityManager.consumeAppointmentCapacity(context, capacityChecker);
+                appointmentManagerHelper.scheduleAppointmentWithNewConfig(context, new Document(appointment), null);
             }
 
             validateEntityOutput(fileNumber);
diff --git a/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test1/config/breakdown.json b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test1/config/breakdown.json
index 6a05eef52..66c3fb05b 100644
--- a/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test1/config/breakdown.json
+++ b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test1/config/breakdown.json
@@ -2,5 +2,7 @@
   ""TimeIntervalUtilization"": [],
   ""DayLevelUtilization"": [],
   ""FacilityLevelUtilization"": [],
-  ""FacilityDayLevelScope"": []
+  ""FacilityDayLevelScope"": [],
+  ""Schedule"": [],
+  ""Appointment"": []
 }
diff --git a/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test1/description.txt b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test1/description.txt
index 57be894e1..c82717937 100644
--- a/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test1/description.txt
+++ b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test1/description.txt
@@ -1 +1,2 @@
-Standard Test. The capacity should all be there and all 3 requirements should pass.
+Standard Test. The capacity should all be there and all 3 requirements should pass for both resource groups
+1 Appointment schedule should be created, but since all the fields are randomly generated, I can't validate against anything
diff --git a/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test1/input/1.json b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test1/input/1.json
index 063a479c1..3d6f0e91b 100644
--- a/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test1/input/1.json
+++ b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test1/input/1.json
@@ -12,10 +12,46 @@
     ],
     ""ResourceGroup"": [
         {
-            ""ResourceGroupName"": ""CAPACITY_TEST_1"",
+            ""ResourceGroupName"": ""CAPACITY_TEST_1.1"",
             ""ResourceUnit"": [
                 {
-                    ""ResourceId"": ""CAPACITY_TEST_1"",
+                    ""ResourceId"": ""CAPACITY_TEST_1.1"",
+                    ""TimeIntervalScope"" : [
+                        {
+                            ""EffectiveDateTime"": ""1980-01-01T00:00:00"",
+                            ""ExpirationDateTime"": ""2035-01-01T00:00:00"",
+                            ""TimeIntervalCapacity"": [
+                                {
+                                    ""TimeIntervalDefinition"": ""Wednesday0_24"",
+                                    ""MaxAppointments"": 10,
+                                    ""MaxLiveUnloadAppointments"": 10
+                                }
+                            ]
+                        }
+                    ],
+                    ""DayLevelScope"": [
+                        {
+                            ""EffectiveDateTime"": ""1980-01-01T00:00:00"",
+                            ""ExpirationDateTime"": ""2035-01-01T00:00:00"",
+                            ""Exception"": false,
+                            ""DayLevelCapacity"": [
+                                {
+                                    ""DaysOfWeekId"": ""All"",
+                                    ""CapacityConstraintTypeId"": ""NUMBER_OF_APPOINTMENTS"",
+                                    ""Capacity"": 10,
+                                    ""CapacityConstraintAttribute"": null
+                                }
+                            ]
+                        }
+                    ]
+                }
+            ]
+        },
+        {
+            ""ResourceGroupName"": ""CAPACITY_TEST_1.2"",
+            ""ResourceUnit"": [
+                {
+                    ""ResourceId"": ""CAPACITY_TEST_1.2"",
                     ""TimeIntervalScope"" : [
                         {
                             ""EffectiveDateTime"": ""1980-01-01T00:00:00"",
diff --git a/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test1/input/appointment.json b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test1/input/appointment.json
index 09f2897e5..dc0170469 100644
--- a/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test1/input/appointment.json
+++ b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test1/input/appointment.json
@@ -1,16 +1,12 @@
 {
   ""Appointment"": [
     {
-      ""AppointmentId"": ""Appointment1"",
       ""Duration"": ""60"",
-      ""PreferredDateTime"":""2024-08-14T12:00:00"",
+      ""AppointmentStatusId"": ""1000"",
+      ""ArrivalDateTime"": ""2034-01-04T12:00:00"",
+      ""PreferredDateTime"":  ""2034-01-04T12:00:00"",
       ""AppointmentTypeId"": ""LIVE_UNLOAD"",
-      ""Resources"": [
-        {
-          ""GroupName"": ""DOCK_DOOR"",
-          ""ResourceName"": ""CAPACITY_TEST_1""
-        }
-      ]
+      ""Resources"": []
     }
   ]
 }
diff --git a/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test1/output/1.json b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test1/output/1.json
index 173cb41ba..a61ef2812 100644
--- a/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test1/output/1.json
+++ b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test1/output/1.json
@@ -5,16 +5,32 @@
             ""RemainingCapacity"": 9,
             ""MaxLiveUnloadCpty"": 10,
             ""RemainingLiveUnloadCpty"": 9,
-            ""ResourceUnitId"": ""CAPACITY_TEST_1"",
-            ""AppointmentDate"": ""2024-08-14""
+            ""ResourceUnitId"": ""CAPACITY_TEST_1.1"",
+            ""AppointmentDate"": ""2034-01-04""
+        },
+        {
+            ""TotalCapacity"": 10,
+            ""RemainingCapacity"": 9,
+            ""MaxLiveUnloadCpty"": 10,
+            ""RemainingLiveUnloadCpty"": 9,
+            ""ResourceUnitId"": ""CAPACITY_TEST_1.2"",
+            ""AppointmentDate"": ""2034-01-04""
         }
     ],
     ""DayLevelUtilization"": [
         {
             ""TotalCapacity"": 10,
             ""RemainingCapacity"": 9,
-            ""ResourceUnitId"": ""CAPACITY_TEST_1"",
-            ""AppointmentDate"": ""2024-08-14"",
+            ""ResourceUnitId"": ""CAPACITY_TEST_1.1"",
+            ""AppointmentDate"": ""2034-01-04"",
+            ""ConstraintTypeId"": ""NUMBER_OF_APPOINTMENTS"",
+            ""WeekDayId"": ""3""
+        },
+        {
+            ""TotalCapacity"": 10,
+            ""RemainingCapacity"": 9,
+            ""ResourceUnitId"": ""CAPACITY_TEST_1.2"",
+            ""AppointmentDate"": ""2034-01-04"",
             ""ConstraintTypeId"": ""NUMBER_OF_APPOINTMENTS"",
             ""WeekDayId"": ""3""
         }
@@ -23,9 +39,32 @@
         {
             ""TotalCapacity"": 10,
             ""RemainingCapacity"": 9,
-            ""AppointmentDate"": ""2024-08-14"",
+            ""AppointmentDate"": ""2034-01-04"",
             ""ConstraintTypeId"": ""NUMBER_OF_APPOINTMENTS"",
             ""WeekDayId"": ""3""
         }
+    ],
+    ""Schedule"": [
+        {
+            ""StartDateTime"": ""2034-01-04T12:00:00"",
+            ""EndDateTime"": ""2034-01-04T13:00:00"",
+            ""ScheduleResources"": [
+                {
+                    ""ResourceGroupName"": ""CAPACITY_TEST_1.1"",
+                    ""ResourceName"": ""CAPACITY_TEST_1.1""
+                },
+                {
+                    ""ResourceGroupName"": ""CAPACITY_TEST_1.2"",
+                    ""ResourceName"": ""CAPACITY_TEST_1.2""
+                }
+            ]
+        }
+    ],
+    ""Appointment"": [
+        {
+            ""AppointmentSchedules"": [
+                {}
+            ]
+        }
     ]
 }
diff --git a/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test10/config/breakdown.json b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test10/config/breakdown.json
index 6a05eef52..66c3fb05b 100644
--- a/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test10/config/breakdown.json
+++ b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test10/config/breakdown.json
@@ -2,5 +2,7 @@
   ""TimeIntervalUtilization"": [],
   ""DayLevelUtilization"": [],
   ""FacilityLevelUtilization"": [],
-  ""FacilityDayLevelScope"": []
+  ""FacilityDayLevelScope"": [],
+  ""Schedule"": [],
+  ""Appointment"": []
 }
diff --git a/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test10/input/appointment.json b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test10/input/appointment.json
index 256e3e504..001716e7e 100644
--- a/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test10/input/appointment.json
+++ b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test10/input/appointment.json
@@ -1,37 +1,40 @@
 {
   ""Appointment"": [
     {
-      ""AppointmentId"": ""Appointment1"",
       ""Duration"": ""180"",
-      ""PreferredDateTime"":""2024-08-14T06:00:00"",
+      ""AppointmentStatusId"": ""1000"",
+      ""ArrivalDateTime"": ""2034-01-04T06:00:00"",
+      ""PreferredDateTime"":  ""2034-01-04T06:00:00"",
       ""AppointmentTypeId"": ""LIVE_LOAD"",
       ""Resources"": [
         {
-          ""GroupName"": ""DOCK_DOOR"",
+          ""GroupName"": ""CAPACITY_TEST_10"",
           ""ResourceName"": ""CAPACITY_TEST_10""
         }
       ]
     },
     {
-      ""AppointmentId"": ""Appointment2"",
       ""Duration"": ""120"",
-      ""PreferredDateTime"":""2024-08-14T05:00:00"",
+      ""AppointmentStatusId"": ""1000"",
+      ""ArrivalDateTime"": ""2034-01-04T05:00:00"",
+      ""PreferredDateTime"":  ""2034-01-04T05:00:00"",
       ""AppointmentTypeId"": ""PICKUP_LOAD"",
       ""Resources"": [
         {
-          ""GroupName"": ""DOCK_DOOR"",
+          ""GroupName"": ""CAPACITY_TEST_10"",
           ""ResourceName"": ""CAPACITY_TEST_10""
         }
       ]
     },
     {
-      ""AppointmentId"": ""Appointment3"",
       ""Duration"": ""120"",
-      ""PreferredDateTime"":""2024-08-14T07:00:00"",
+      ""AppointmentStatusId"": ""1000"",
+      ""ArrivalDateTime"": ""2034-01-04T07:00:00"",
+      ""PreferredDateTime"":  ""2034-01-04T07:00:00"",
       ""AppointmentTypeId"": ""PICKUP_EMPTY"",
       ""Resources"": [
         {
-          ""GroupName"": ""DOCK_DOOR"",
+          ""GroupName"": ""CAPACITY_TEST_10"",
           ""ResourceName"": ""CAPACITY_TEST_10""
         }
       ]
diff --git a/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test10/output/1.json b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test10/output/1.json
index 66b2397b3..99b967b1a 100644
--- a/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test10/output/1.json
+++ b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test10/output/1.json
@@ -4,7 +4,7 @@
             ""TotalCapacity"": 4,
             ""RemainingCapacity"": 4,
             ""ResourceUnitId"": ""CAPACITY_TEST_10"",
-            ""AppointmentDate"": ""2024-08-14""
+            ""AppointmentDate"": ""2034-01-04""
         }
     ],
     ""DayLevelUtilization"": [
@@ -12,7 +12,7 @@
             ""TotalCapacity"": 10,
             ""RemainingCapacity"": 10,
             ""ResourceUnitId"": ""CAPACITY_TEST_10"",
-            ""AppointmentDate"": ""2024-08-14"",
+            ""AppointmentDate"": ""2034-01-04"",
             ""ConstraintTypeId"": ""NUMBER_OF_APPOINTMENTS"",
             ""WeekDayId"": ""3""
         }
@@ -22,8 +22,20 @@
             ""TotalCapacity"": 10,
             ""RemainingCapacity"": 10,
             ""ConstraintTypeId"": ""NUMBER_OF_APPOINTMENTS"",
-            ""AppointmentDate"": ""2024-08-14"",
+            ""AppointmentDate"": ""2034-01-04"",
             ""WeekDayId"": ""3""
         }
+    ],
+    ""Schedule"": [],
+    ""Appointment"": [
+        {
+            ""AppointmentSchedules"": []
+        },
+        {
+            ""AppointmentSchedules"": []
+        },
+        {
+            ""AppointmentSchedules"": []
+        }
     ]
 }
diff --git a/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test11/config/breakdown.json b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test11/config/breakdown.json
index 6a05eef52..66c3fb05b 100644
--- a/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test11/config/breakdown.json
+++ b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test11/config/breakdown.json
@@ -2,5 +2,7 @@
   ""TimeIntervalUtilization"": [],
   ""DayLevelUtilization"": [],
   ""FacilityLevelUtilization"": [],
-  ""FacilityDayLevelScope"": []
+  ""FacilityDayLevelScope"": [],
+  ""Schedule"": [],
+  ""Appointment"": []
 }
diff --git a/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test11/description.txt b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test11/description.txt
index 8093585ae..72e8e703c 100644
--- a/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test11/description.txt
+++ b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test11/description.txt
@@ -5,5 +5,5 @@ Appointment1 uses time 7:30-8:30 needs the time slots 7-8 and 8-9, so two time i
 Appointment2 uses time 23:30-00:30 needs the time slots 23-24 and 0-1, so two time interval capacities will be used across
 two different day and facility capacities
 
-Two capacities will be removed from 2024-08-14 because two appointments are made for that day, but only Appointment2 goes
-over into 2024-08-15, so only one capacity will be used on that day.
+Two capacities will be removed from 2034-01-04 because two appointments are made for that day, but only Appointment2 goes
+over into 2034-01-05, so only one capacity will be used on that day.
diff --git a/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test11/input/appointment.json b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test11/input/appointment.json
index 305136a2b..91ecd6d64 100644
--- a/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test11/input/appointment.json
+++ b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test11/input/appointment.json
@@ -1,25 +1,27 @@
 {
   ""Appointment"": [
     {
-      ""AppointmentId"": ""Appointment1"",
       ""Duration"": ""60"",
-      ""PreferredDateTime"":""2024-08-14T07:30:00"",
+      ""AppointmentStatusId"": ""1000"",
+      ""ArrivalDateTime"": ""2034-01-04T07:30:00"",
+      ""PreferredDateTime"":  ""2034-01-04T07:30:00"",
       ""AppointmentTypeId"": ""LIVE_UNLOAD"",
       ""Resources"": [
         {
-          ""GroupName"": ""DOCK_DOOR"",
+          ""GroupName"": ""CAPACITY_TEST_11"",
           ""ResourceName"": ""CAPACITY_TEST_11""
         }
       ]
     },
     {
-      ""AppointmentId"": ""Appointment2"",
       ""Duration"": ""60"",
-      ""PreferredDateTime"":""2024-08-14T23:30:00"",
+      ""AppointmentStatusId"": ""1000"",
+      ""ArrivalDateTime"": ""2034-01-04T23:30:00"",
+      ""PreferredDateTime"":  ""2034-01-04T23:30:00"",
       ""AppointmentTypeId"": ""DROP_EMPTY"",
       ""Resources"": [
         {
-          ""GroupName"": ""DOCK_DOOR"",
+          ""GroupName"": ""CAPACITY_TEST_11"",
           ""ResourceName"": ""CAPACITY_TEST_11""
         }
       ]
diff --git a/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test11/output/1.json b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test11/output/1.json
index 0d3877667..7415e88ec 100644
--- a/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test11/output/1.json
+++ b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test11/output/1.json
@@ -4,25 +4,25 @@
             ""TotalCapacity"": 10,
             ""RemainingCapacity"": 9,
             ""ResourceUnitId"": ""CAPACITY_TEST_11"",
-            ""AppointmentDate"": ""2024-08-14""
+            ""AppointmentDate"": ""2034-01-04""
         },
         {
             ""TotalCapacity"": 10,
             ""RemainingCapacity"": 9,
             ""ResourceUnitId"": ""CAPACITY_TEST_11"",
-            ""AppointmentDate"": ""2024-08-14""
+            ""AppointmentDate"": ""2034-01-04""
         },
         {
             ""TotalCapacity"": 10,
             ""RemainingCapacity"": 9,
             ""ResourceUnitId"": ""CAPACITY_TEST_11"",
-            ""AppointmentDate"": ""2024-08-14""
+            ""AppointmentDate"": ""2034-01-04""
         },
         {
             ""TotalCapacity"": 10,
             ""RemainingCapacity"": 9,
             ""ResourceUnitId"": ""CAPACITY_TEST_11"",
-            ""AppointmentDate"": ""2024-08-15""
+            ""AppointmentDate"": ""2034-01-05""
         }
     ],
     ""DayLevelUtilization"": [
@@ -30,7 +30,7 @@
             ""TotalCapacity"": 10,
             ""RemainingCapacity"": 8,
             ""ResourceUnitId"": ""CAPACITY_TEST_11"",
-            ""AppointmentDate"": ""2024-08-14"",
+            ""AppointmentDate"": ""2034-01-04"",
             ""ConstraintTypeId"": ""NUMBER_OF_APPOINTMENTS"",
             ""WeekDayId"": ""3""
         },
@@ -38,7 +38,7 @@
             ""TotalCapacity"": 10,
             ""RemainingCapacity"": 9,
             ""ResourceUnitId"": ""CAPACITY_TEST_11"",
-            ""AppointmentDate"": ""2024-08-15"",
+            ""AppointmentDate"": ""2034-01-05"",
             ""ConstraintTypeId"": ""NUMBER_OF_APPOINTMENTS"",
             ""WeekDayId"": ""4""
         }
@@ -48,15 +48,49 @@
             ""TotalCapacity"": 10,
             ""RemainingCapacity"": 8,
             ""ConstraintTypeId"": ""NUMBER_OF_APPOINTMENTS"",
-            ""AppointmentDate"": ""2024-08-14"",
+            ""AppointmentDate"": ""2034-01-04"",
             ""WeekDayId"": ""3""
         },
         {
             ""TotalCapacity"": 10,
             ""RemainingCapacity"": 9,
             ""ConstraintTypeId"": ""NUMBER_OF_APPOINTMENTS"",
-            ""AppointmentDate"": ""2024-08-15"",
+            ""AppointmentDate"": ""2034-01-05"",
             ""WeekDayId"": ""4""
         }
+    ],
+    ""Schedule"": [
+        {
+            ""StartDateTime"": ""2034-01-04T07:30:00"",
+            ""EndDateTime"": ""2034-01-04T08:30:00"",
+            ""ScheduleResources"": [
+                {
+                    ""ResourceGroupName"": ""CAPACITY_TEST_11"",
+                    ""ResourceName"": ""CAPACITY_TEST_11""
+                }
+            ]
+        },
+        {
+            ""StartDateTime"": ""2034-01-04T23:30:00"",
+            ""EndDateTime"": ""2034-01-05T00:30:00"",
+            ""ScheduleResources"": [
+                {
+                    ""ResourceGroupName"": ""CAPACITY_TEST_11"",
+                    ""ResourceName"": ""CAPACITY_TEST_11""
+                }
+            ]
+        }
+    ],
+    ""Appointment"": [
+        {
+            ""AppointmentSchedules"": [
+                {}
+            ]
+        },
+        {
+            ""AppointmentSchedules"": [
+                {}
+            ]
+        }
     ]
 }
diff --git a/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test12/config/breakdown.json b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test12/config/breakdown.json
index 6a05eef52..66c3fb05b 100644
--- a/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test12/config/breakdown.json
+++ b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test12/config/breakdown.json
@@ -2,5 +2,7 @@
   ""TimeIntervalUtilization"": [],
   ""DayLevelUtilization"": [],
   ""FacilityLevelUtilization"": [],
-  ""FacilityDayLevelScope"": []
+  ""FacilityDayLevelScope"": [],
+  ""Schedule"": [],
+  ""Appointment"": []
 }
diff --git a/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test12/input/appointment.json b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test12/input/appointment.json
index abe1ab377..0be6f1956 100644
--- a/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test12/input/appointment.json
+++ b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test12/input/appointment.json
@@ -1,13 +1,14 @@
 {
   ""Appointment"": [
     {
-      ""AppointmentId"": ""Appointment2"",
       ""Duration"": ""60"",
-      ""PreferredDateTime"":""2024-08-14T12:00:00"",
+      ""AppointmentStatusId"": ""1000"",
+      ""ArrivalDateTime"": ""2034-01-04T12:00:00"",
+      ""PreferredDateTime"":  ""2034-01-04T12:00:00"",
       ""AppointmentTypeId"": ""DROP_UNLOAD"",
       ""Resources"": [
         {
-          ""GroupName"": ""DOCK_DOOR"",
+          ""GroupName"": ""CAPACITY_TEST_12"",
           ""ResourceName"": ""CAPACITY_TEST_12""
         }
       ]
diff --git a/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test12/output/1.json b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test12/output/1.json
index c00a090e7..514546dd6 100644
--- a/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test12/output/1.json
+++ b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test12/output/1.json
@@ -4,9 +4,15 @@
             ""TotalCapacity"": 10,
             ""RemainingCapacity"": 10,
             ""ResourceUnitId"": ""CAPACITY_TEST_12"",
-            ""AppointmentDate"": ""2024-08-14""
+            ""AppointmentDate"": ""2034-01-04""
         }
     ],
     ""DayLevelUtilization"": [],
-    ""FacilityLevelUtilization"": []
+    ""FacilityLevelUtilization"": [],
+    ""Schedule"": [],
+    ""Appointment"": [
+        {
+            ""AppointmentSchedules"": []
+        }
+    ]
 }
diff --git a/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test13/config/breakdown.json b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test13/config/breakdown.json
index 6a05eef52..66c3fb05b 100644
--- a/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test13/config/breakdown.json
+++ b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test13/config/breakdown.json
@@ -2,5 +2,7 @@
   ""TimeIntervalUtilization"": [],
   ""DayLevelUtilization"": [],
   ""FacilityLevelUtilization"": [],
-  ""FacilityDayLevelScope"": []
+  ""FacilityDayLevelScope"": [],
+  ""Schedule"": [],
+  ""Appointment"": []
 }
diff --git a/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test13/input/appointment.json b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test13/input/appointment.json
index ad742dfe1..c213ceae4 100644
--- a/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test13/input/appointment.json
+++ b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test13/input/appointment.json
@@ -1,13 +1,14 @@
 {
   ""Appointment"": [
     {
-      ""AppointmentId"": ""Appointment2"",
       ""Duration"": ""60"",
-      ""PreferredDateTime"":""2024-08-14T12:00:00"",
+      ""AppointmentStatusId"": ""1000"",
+      ""ArrivalDateTime"": ""2034-01-04T12:00:00"",
+      ""PreferredDateTime"":  ""2034-01-04T12:00:00"",
       ""AppointmentTypeId"": ""LIVE_LOAD"",
       ""Resources"": [
         {
-          ""GroupName"": ""DOCK_DOOR"",
+          ""GroupName"": ""CAPACITY_TEST_13"",
           ""ResourceName"": ""CAPACITY_TEST_13""
         }
       ]
diff --git a/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test13/output/1.json b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test13/output/1.json
index b64f66916..c280c1786 100644
--- a/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test13/output/1.json
+++ b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test13/output/1.json
@@ -16,9 +16,15 @@
             ""MaxPickupLoadCpty"": null,
             ""RemainingPickupLoadCpty"": null,
             ""ResourceUnitId"": ""CAPACITY_TEST_13"",
-            ""AppointmentDate"": ""2024-08-14""
+            ""AppointmentDate"": ""2034-01-04""
         }
     ],
     ""DayLevelUtilization"": [],
-    ""FacilityLevelUtilization"": []
+    ""FacilityLevelUtilization"": [],
+    ""Schedule"": [],
+    ""Appointment"": [
+        {
+            ""AppointmentSchedules"": []
+        }
+    ]
 }
diff --git a/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test2/config/breakdown.json b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test2/config/breakdown.json
index 6a05eef52..66c3fb05b 100644
--- a/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test2/config/breakdown.json
+++ b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test2/config/breakdown.json
@@ -2,5 +2,7 @@
   ""TimeIntervalUtilization"": [],
   ""DayLevelUtilization"": [],
   ""FacilityLevelUtilization"": [],
-  ""FacilityDayLevelScope"": []
+  ""FacilityDayLevelScope"": [],
+  ""Schedule"": [],
+  ""Appointment"": []
 }
diff --git a/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test2/input/1.json b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test2/input/1.json
index 0a6f12568..89c20be0d 100644
--- a/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test2/input/1.json
+++ b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test2/input/1.json
@@ -66,7 +66,7 @@
             ""TotalCapacity"": 10,
             ""RemainingCapacity"": 0,
             ""ConstraintTypeId"": ""NUMBER_OF_APPOINTMENTS"",
-            ""AppointmentDate"": ""2024-08-14"",
+            ""AppointmentDate"": ""2034-01-04"",
             ""WeekDayId"": ""3""
         }
     ]
diff --git a/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test2/input/appointment.json b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test2/input/appointment.json
index 3a2494523..172216fcd 100644
--- a/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test2/input/appointment.json
+++ b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test2/input/appointment.json
@@ -1,13 +1,14 @@
 {
   ""Appointment"": [
     {
-      ""AppointmentId"": ""Appointment2"",
-      ""Duration"": ""60"",
-      ""PreferredDateTime"":""2024-08-14T12:00:00"",
+      ""Duration"": ""120"",
+      ""AppointmentStatusId"": ""1000"",
+      ""ArrivalDateTime"":  ""2034-01-04T12:00:00"",
+      ""PreferredDateTime"":  ""2034-01-04T12:00:00"",
       ""AppointmentTypeId"": ""LIVE_UNLOAD"",
       ""Resources"": [
         {
-          ""GroupName"": ""DOCK_DOOR"",
+          ""GroupName"": ""CAPACITY_TEST_2"",
           ""ResourceName"": ""CAPACITY_TEST_2""
         }
       ]
diff --git a/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test2/output/1.json b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test2/output/1.json
index 27489b2aa..a7971ef5f 100644
--- a/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test2/output/1.json
+++ b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test2/output/1.json
@@ -4,7 +4,7 @@
             ""TotalCapacity"": 10,
             ""RemainingCapacity"": 10,
             ""ResourceUnitId"": ""CAPACITY_TEST_2"",
-            ""AppointmentDate"": ""2024-08-14""
+            ""AppointmentDate"": ""2034-01-04""
         }
     ],
     ""DayLevelUtilization"": [
@@ -12,7 +12,7 @@
             ""TotalCapacity"": 10,
             ""RemainingCapacity"": 10,
             ""ResourceUnitId"": ""CAPACITY_TEST_2"",
-            ""AppointmentDate"": ""2024-08-14"",
+            ""AppointmentDate"": ""2034-01-04"",
             ""ConstraintTypeId"": ""NUMBER_OF_APPOINTMENTS"",
             ""WeekDayId"": ""3""
         }
@@ -21,9 +21,15 @@
         {
             ""TotalCapacity"": 10,
             ""RemainingCapacity"": 0,
-            ""AppointmentDate"": ""2024-08-14"",
+            ""AppointmentDate"": ""2034-01-04"",
             ""ConstraintTypeId"": ""NUMBER_OF_APPOINTMENTS"",
             ""WeekDayId"": ""3""
         }
+    ],
+    ""Schedule"": [],
+    ""Appointment"": [
+        {
+            ""AppointmentSchedules"": []
+        }
     ]
 }
diff --git a/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test3/config/breakdown.json b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test3/config/breakdown.json
index 6a05eef52..66c3fb05b 100644
--- a/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test3/config/breakdown.json
+++ b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test3/config/breakdown.json
@@ -2,5 +2,7 @@
   ""TimeIntervalUtilization"": [],
   ""DayLevelUtilization"": [],
   ""FacilityLevelUtilization"": [],
-  ""FacilityDayLevelScope"": []
+  ""FacilityDayLevelScope"": [],
+  ""Schedule"": [],
+  ""Appointment"": []
 }
diff --git a/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test3/input/appointment.json b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test3/input/appointment.json
index 96911f339..6f09e640b 100644
--- a/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test3/input/appointment.json
+++ b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test3/input/appointment.json
@@ -1,13 +1,14 @@
 {
   ""Appointment"": [
     {
-      ""AppointmentId"": ""Appointment1"",
       ""Duration"": ""120"",
-      ""PreferredDateTime"":""2024-08-14T11:00:00"",
+      ""AppointmentStatusId"": ""1000"",
+      ""ArrivalDateTime"": ""2034-01-04T11:00:00"",
+      ""PreferredDateTime"":  ""2034-01-04T11:00:00"",
       ""AppointmentTypeId"": ""LIVE_LOAD"",
       ""Resources"": [
         {
-          ""GroupName"": ""DOCK_DOOR"",
+          ""GroupName"": ""CAPACITY_TEST_3"",
           ""ResourceName"": ""CAPACITY_TEST_3""
         }
       ]
diff --git a/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test3/output/1.json b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test3/output/1.json
index ed9359c80..6461caf76 100644
--- a/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test3/output/1.json
+++ b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test3/output/1.json
@@ -4,7 +4,7 @@
             ""TotalCapacity"": 10,
             ""RemainingCapacity"": 9,
             ""ResourceUnitId"": ""CAPACITY_TEST_3"",
-            ""AppointmentDate"": ""2024-08-14""
+            ""AppointmentDate"": ""2034-01-04""
         },
         {
             ""TotalCapacity"": 5,
@@ -12,7 +12,7 @@
             ""MaxLiveLoadCpty"": 5,
             ""RemainingLiveLoadCpty"": 4,
             ""ResourceUnitId"": ""CAPACITY_TEST_3"",
-            ""AppointmentDate"": ""2024-08-14""
+            ""AppointmentDate"": ""2034-01-04""
         }
     ],
     ""DayLevelUtilization"": [
@@ -20,7 +20,7 @@
             ""TotalCapacity"": 10,
             ""RemainingCapacity"": 9,
             ""ResourceUnitId"": ""CAPACITY_TEST_3"",
-            ""AppointmentDate"": ""2024-08-14"",
+            ""AppointmentDate"": ""2034-01-04"",
             ""ConstraintTypeId"": ""NUMBER_OF_APPOINTMENTS"",
             ""WeekDayId"": ""3""
         }
@@ -29,9 +29,28 @@
         {
             ""TotalCapacity"": 10,
             ""RemainingCapacity"": 9,
-            ""AppointmentDate"": ""2024-08-14"",
+            ""AppointmentDate"": ""2034-01-04"",
             ""ConstraintTypeId"": ""NUMBER_OF_APPOINTMENTS"",
             ""WeekDayId"": ""3""
         }
+    ],
+    ""Schedule"": [
+        {
+            ""StartDateTime"": ""2034-01-04T11:00:00"",
+            ""EndDateTime"": ""2034-01-04T13:00:00"",
+            ""ScheduleResources"": [
+                {
+                    ""ResourceGroupName"": ""CAPACITY_TEST_3"",
+                    ""ResourceName"": ""CAPACITY_TEST_3""
+                }
+            ]
+        }
+    ],
+    ""Appointment"": [
+        {
+            ""AppointmentSchedules"": [
+                {}
+            ]
+        }
     ]
 }
diff --git a/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test4/config/breakdown.json b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test4/config/breakdown.json
index 6a05eef52..66c3fb05b 100644
--- a/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test4/config/breakdown.json
+++ b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test4/config/breakdown.json
@@ -2,5 +2,7 @@
   ""TimeIntervalUtilization"": [],
   ""DayLevelUtilization"": [],
   ""FacilityLevelUtilization"": [],
-  ""FacilityDayLevelScope"": []
+  ""FacilityDayLevelScope"": [],
+  ""Schedule"": [],
+  ""Appointment"": []
 }
diff --git a/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test4/input/1.json b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test4/input/1.json
index 18db8934d..904f2015f 100644
--- a/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test4/input/1.json
+++ b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test4/input/1.json
@@ -16,13 +16,7 @@
             ""EndTimeHours"": 24,
             ""EndTimeMinutes"": 0,
             ""TimeIntervalLength"": 60,
-            ""Sunday"": false,
-            ""Monday"": false,
-            ""Tuesday"": false,
-            ""Wednesday"": false,
-            ""Thursday"": true,
-            ""Friday"": false,
-            ""Saturday"": false
+            ""Thursday"": true
         }
     ],
     ""ResourceGroup"": [
@@ -86,7 +80,7 @@
         {
             ""TotalCapacity"": 10,
             ""RemainingCapacity"": 7,
-            ""AppointmentDate"": ""2024-08-14"",
+            ""AppointmentDate"": ""2034-01-04"",
             ""ConstraintTypeId"": ""NUMBER_OF_APPOINTMENTS"",
             ""WeekDayId"": ""3"",
             ""ResourceUnitId"": ""CAPACITY_TEST_4""
@@ -97,7 +91,7 @@
             ""TotalCapacity"": 10,
             ""RemainingCapacity"": 3,
             ""ConstraintTypeId"": ""NUMBER_OF_APPOINTMENTS"",
-            ""AppointmentDate"": ""2024-08-15"",
+            ""AppointmentDate"": ""2034-01-05"",
             ""WeekDayId"": ""4""
         }
     ]
diff --git a/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test4/input/appointment.json b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test4/input/appointment.json
index c7772c99d..ac0e0404a 100644
--- a/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test4/input/appointment.json
+++ b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test4/input/appointment.json
@@ -1,13 +1,14 @@
 {
   ""Appointment"": [
     {
-      ""AppointmentId"": ""Appointment1"",
       ""Duration"": ""120"",
-      ""PreferredDateTime"":""2024-08-14T23:00:00"",
+      ""AppointmentStatusId"": ""1000"",
+      ""ArrivalDateTime"": ""2034-01-04T23:00:00"",
+      ""PreferredDateTime"":  ""2034-01-04T23:00:00"",
       ""AppointmentTypeId"": ""DROP_EMPTY"",
       ""Resources"": [
         {
-          ""GroupName"": ""DOCK_DOOR"",
+          ""GroupName"": ""CAPACITY_TEST_4"",
           ""ResourceName"": ""CAPACITY_TEST_4""
         }
       ]
diff --git a/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test4/output/1.json b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test4/output/1.json
index 79e3a369b..ab1fe6521 100644
--- a/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test4/output/1.json
+++ b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test4/output/1.json
@@ -6,7 +6,7 @@
             ""MaxDropEmptyCpty"": 10,
             ""RemainingDropEmptyCpty"": 9,
             ""ResourceUnitId"": ""CAPACITY_TEST_4"",
-            ""AppointmentDate"": ""2024-08-14""
+            ""AppointmentDate"": ""2034-01-04""
         },
         {
             ""TotalCapacity"": 5,
@@ -14,7 +14,7 @@
             ""MaxDropEmptyCpty"": 5,
             ""RemainingDropEmptyCpty"": 4,
             ""ResourceUnitId"": ""CAPACITY_TEST_4"",
-            ""AppointmentDate"": ""2024-08-15""
+            ""AppointmentDate"": ""2034-01-05""
         }
     ],
     ""DayLevelUtilization"": [
@@ -22,7 +22,7 @@
             ""TotalCapacity"": 10,
             ""RemainingCapacity"": 6,
             ""ResourceUnitId"": ""CAPACITY_TEST_4"",
-            ""AppointmentDate"": ""2024-08-14"",
+            ""AppointmentDate"": ""2034-01-04"",
             ""ConstraintTypeId"": ""NUMBER_OF_APPOINTMENTS"",
             ""WeekDayId"": ""3""
         },
@@ -30,7 +30,7 @@
             ""TotalCapacity"": 10,
             ""RemainingCapacity"": 9,
             ""ResourceUnitId"": ""CAPACITY_TEST_4"",
-            ""AppointmentDate"": ""2024-08-15"",
+            ""AppointmentDate"": ""2034-01-05"",
             ""ConstraintTypeId"": ""NUMBER_OF_APPOINTMENTS"",
             ""WeekDayId"": ""4""
         }
@@ -39,16 +39,35 @@
         {
             ""TotalCapacity"": 10,
             ""RemainingCapacity"": 9,
-            ""AppointmentDate"": ""2024-08-14"",
+            ""AppointmentDate"": ""2034-01-04"",
             ""ConstraintTypeId"": ""NUMBER_OF_APPOINTMENTS"",
             ""WeekDayId"": ""3""
         },
         {
             ""TotalCapacity"": 10,
             ""RemainingCapacity"": 2,
-            ""AppointmentDate"": ""2024-08-15"",
+            ""AppointmentDate"": ""2034-01-05"",
             ""ConstraintTypeId"": ""NUMBER_OF_APPOINTMENTS"",
             ""WeekDayId"": ""4""
         }
+    ],
+    ""Schedule"": [
+        {
+            ""StartDateTime"": ""2034-01-04T23:00:00"",
+            ""EndDateTime"": ""2034-01-05T01:00:00"",
+            ""ScheduleResources"": [
+                {
+                    ""ResourceGroupName"": ""CAPACITY_TEST_4"",
+                    ""ResourceName"": ""CAPACITY_TEST_4""
+                }
+            ]
+        }
+    ],
+    ""Appointment"": [
+        {
+            ""AppointmentSchedules"": [
+                {}
+            ]
+        }
     ]
 }
diff --git a/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test5/config/breakdown.json b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test5/config/breakdown.json
index 6a05eef52..66c3fb05b 100644
--- a/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test5/config/breakdown.json
+++ b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test5/config/breakdown.json
@@ -2,5 +2,7 @@
   ""TimeIntervalUtilization"": [],
   ""DayLevelUtilization"": [],
   ""FacilityLevelUtilization"": [],
-  ""FacilityDayLevelScope"": []
+  ""FacilityDayLevelScope"": [],
+  ""Schedule"": [],
+  ""Appointment"": []
 }
diff --git a/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test5/input/1.json b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test5/input/1.json
index d5faba4d2..b5328c783 100644
--- a/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test5/input/1.json
+++ b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test5/input/1.json
@@ -76,7 +76,7 @@
             ""TotalCapacity"": 10,
             ""RemainingCapacity"": 0,
             ""ConstraintTypeId"": ""NUMBER_OF_APPOINTMENTS"",
-            ""AppointmentDate"": ""2024-08-14"",
+            ""AppointmentDate"": ""2034-01-04"",
             ""WeekDayId"": ""3""
         }
     ]
diff --git a/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test5/input/appointment.json b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test5/input/appointment.json
index cd1819a02..a7ffec337 100644
--- a/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test5/input/appointment.json
+++ b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test5/input/appointment.json
@@ -1,13 +1,14 @@
 {
   ""Appointment"": [
     {
-      ""AppointmentId"": ""Appointment1"",
       ""Duration"": ""120"",
-      ""PreferredDateTime"":""2024-08-14T23:00:00"",
+      ""AppointmentStatusId"": ""1000"",
+      ""ArrivalDateTime"": ""2034-01-04T23:00:00"",
+      ""PreferredDateTime"":  ""2034-01-04T23:00:00"",
       ""AppointmentTypeId"": ""LIVE_UNLOAD"",
       ""Resources"": [
         {
-          ""GroupName"": ""DOCK_DOOR"",
+          ""GroupName"": ""CAPACITY_TEST_5"",
           ""ResourceName"": ""CAPACITY_TEST_5""
         }
       ]
diff --git a/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test5/output/1.json b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test5/output/1.json
index 1709ed283..f944c0b10 100644
--- a/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test5/output/1.json
+++ b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test5/output/1.json
@@ -4,7 +4,7 @@
             ""TotalCapacity"": 10,
             ""RemainingCapacity"": 10,
             ""ResourceUnitId"": ""CAPACITY_TEST_5"",
-            ""AppointmentDate"": ""2024-08-14""
+            ""AppointmentDate"": ""2034-01-04""
         }
     ],
     ""DayLevelUtilization"": [
@@ -12,7 +12,7 @@
             ""TotalCapacity"": 10,
             ""RemainingCapacity"": 10,
             ""ResourceUnitId"": ""CAPACITY_TEST_5"",
-            ""AppointmentDate"": ""2024-08-14"",
+            ""AppointmentDate"": ""2034-01-04"",
             ""ConstraintTypeId"": ""NUMBER_OF_APPOINTMENTS"",
             ""WeekDayId"": ""3""
         }
@@ -22,15 +22,21 @@
             ""TotalCapacity"": 10,
             ""RemainingCapacity"": 0,
             ""ConstraintTypeId"": ""NUMBER_OF_APPOINTMENTS"",
-            ""AppointmentDate"": ""2024-08-14"",
+            ""AppointmentDate"": ""2034-01-04"",
             ""WeekDayId"": ""3""
         },
         {
             ""TotalCapacity"": 10,
             ""RemainingCapacity"": 10,
             ""ConstraintTypeId"": ""APPOINTMENT_TYPE"",
-            ""AppointmentDate"": ""2024-08-14"",
+            ""AppointmentDate"": ""2034-01-04"",
             ""WeekDayId"": ""3""
         }
+    ],
+    ""Schedule"": [],
+    ""Appointment"": [
+        {
+            ""AppointmentSchedules"": []
+        }
     ]
 }
diff --git a/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test6/config/breakdown.json b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test6/config/breakdown.json
index 6a05eef52..66c3fb05b 100644
--- a/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test6/config/breakdown.json
+++ b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test6/config/breakdown.json
@@ -2,5 +2,7 @@
   ""TimeIntervalUtilization"": [],
   ""DayLevelUtilization"": [],
   ""FacilityLevelUtilization"": [],
-  ""FacilityDayLevelScope"": []
+  ""FacilityDayLevelScope"": [],
+  ""Schedule"": [],
+  ""Appointment"": []
 }
diff --git a/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test6/input/appointment.json b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test6/input/appointment.json
index d4f0657e9..b2b0e7c68 100644
--- a/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test6/input/appointment.json
+++ b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test6/input/appointment.json
@@ -1,25 +1,27 @@
 {
   ""Appointment"": [
     {
-      ""AppointmentId"": ""Appointment1"",
       ""Duration"": ""60"",
-      ""PreferredDateTime"":""2024-08-14T12:00:00"",
+      ""AppointmentStatusId"": ""1000"",
+      ""ArrivalDateTime"": ""2034-01-04T12:00:00"",
+      ""PreferredDateTime"":  ""2034-01-04T12:00:00"",
       ""AppointmentTypeId"": ""DROP_UNLOAD"",
       ""Resources"": [
         {
-          ""GroupName"": ""DOCK_DOOR"",
+          ""GroupName"": ""CAPACITY_TEST_6"",
           ""ResourceName"": ""CAPACITY_TEST_6""
         }
       ]
     },
     {
-      ""AppointmentId"": ""Appointment2"",
       ""Duration"": ""120"",
-      ""PreferredDateTime"":""2024-08-14T11:00:00"",
+      ""AppointmentStatusId"": ""1000"",
+      ""ArrivalDateTime"": ""2034-01-04T11:00:00"",
+      ""PreferredDateTime"":  ""2034-01-04T11:00:00"",
       ""AppointmentTypeId"": ""DROP_UNLOAD"",
       ""Resources"": [
         {
-          ""GroupName"": ""DOCK_DOOR"",
+          ""GroupName"": ""CAPACITY_TEST_6"",
           ""ResourceName"": ""CAPACITY_TEST_6""
         }
       ]
diff --git a/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test6/output/1.json b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test6/output/1.json
index f842f30a2..f8665e0df 100644
--- a/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test6/output/1.json
+++ b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test6/output/1.json
@@ -6,7 +6,7 @@
             ""MaxDropUnloadCpty"": 99,
             ""RemainingDropUnloadCpty"": 98,
             ""ResourceUnitId"": ""CAPACITY_TEST_6"",
-            ""AppointmentDate"": ""2024-08-14""
+            ""AppointmentDate"": ""2034-01-04""
         },
         {
             ""TotalCapacity"": 1,
@@ -14,7 +14,7 @@
             ""MaxDropUnloadCpty"": 99,
             ""RemainingDropUnloadCpty"": 99,
             ""ResourceUnitId"": ""CAPACITY_TEST_6"",
-            ""AppointmentDate"": ""2024-08-14""
+            ""AppointmentDate"": ""2034-01-04""
         }
     ],
     ""DayLevelUtilization"": [
@@ -22,7 +22,7 @@
             ""TotalCapacity"": 10,
             ""RemainingCapacity"": 9,
             ""ResourceUnitId"": ""CAPACITY_TEST_6"",
-            ""AppointmentDate"": ""2024-08-14"",
+            ""AppointmentDate"": ""2034-01-04"",
             ""ConstraintTypeId"": ""NUMBER_OF_APPOINTMENTS"",
             ""WeekDayId"": ""3""
         }
@@ -31,9 +31,31 @@
         {
             ""TotalCapacity"": 10,
             ""RemainingCapacity"": 9,
-            ""AppointmentDate"": ""2024-08-14"",
+            ""AppointmentDate"": ""2034-01-04"",
             ""ConstraintTypeId"": ""NUMBER_OF_APPOINTMENTS"",
             ""WeekDayId"": ""3""
         }
+    ],
+    ""Schedule"": [
+        {
+            ""StartDateTime"": ""2034-01-04T12:00:00"",
+            ""EndDateTime"": ""2034-01-04T13:00:00"",
+            ""ScheduleResources"": [
+                {
+                    ""ResourceGroupName"": ""CAPACITY_TEST_6"",
+                    ""ResourceName"": ""CAPACITY_TEST_6""
+                }
+            ]
+        }
+    ],
+    ""Appointment"": [
+        {
+            ""AppointmentSchedules"": [
+                {}
+            ]
+        },
+        {
+            ""AppointmentSchedules"": []
+        }
     ]
 }
diff --git a/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test7/config/breakdown.json b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test7/config/breakdown.json
index 6a05eef52..66c3fb05b 100644
--- a/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test7/config/breakdown.json
+++ b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test7/config/breakdown.json
@@ -2,5 +2,7 @@
   ""TimeIntervalUtilization"": [],
   ""DayLevelUtilization"": [],
   ""FacilityLevelUtilization"": [],
-  ""FacilityDayLevelScope"": []
+  ""FacilityDayLevelScope"": [],
+  ""Schedule"": [],
+  ""Appointment"": []
 }
diff --git a/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test7/input/1.json b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test7/input/1.json
index 790319f13..bf1b8d3e3 100644
--- a/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test7/input/1.json
+++ b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test7/input/1.json
@@ -79,7 +79,7 @@
             ""RemainingCapacity"": 0,
             ""ResourceUnitId"": ""CAPACITY_TEST_7"",
             ""ConstraintTypeId"": ""UOM"",
-            ""AppointmentDate"": ""2024-08-14"",
+            ""AppointmentDate"": ""2034-01-04"",
             ""WeekDayId"": ""3""
         }
     ]
diff --git a/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test7/input/appointment.json b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test7/input/appointment.json
index f417a82cd..3e65a3d69 100644
--- a/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test7/input/appointment.json
+++ b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test7/input/appointment.json
@@ -1,13 +1,14 @@
 {
   ""Appointment"": [
     {
-      ""AppointmentId"": ""Appointment1"",
       ""Duration"": ""120"",
-      ""PreferredDateTime"":""2024-08-14T23:00:00"",
+      ""AppointmentStatusId"": ""1000"",
+      ""ArrivalDateTime"": ""2034-01-04T23:00:00"",
+      ""PreferredDateTime"":  ""2034-01-04T23:00:00"",
       ""AppointmentTypeId"": ""LIVE_UNLOAD"",
       ""Resources"": [
         {
-          ""GroupName"": ""DOCK_DOOR"",
+          ""GroupName"": ""CAPACITY_TEST_7"",
           ""ResourceName"": ""CAPACITY_TEST_7""
         }
       ]
diff --git a/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test7/output/1.json b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test7/output/1.json
index 03d5c567f..9fa6f709a 100644
--- a/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test7/output/1.json
+++ b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test7/output/1.json
@@ -4,7 +4,7 @@
             ""TotalCapacity"": 10,
             ""RemainingCapacity"": 10,
             ""ResourceUnitId"": ""CAPACITY_TEST_7"",
-            ""AppointmentDate"": ""2024-08-14""
+            ""AppointmentDate"": ""2034-01-04""
         }
     ],
     ""DayLevelUtilization"": [
@@ -12,7 +12,7 @@
             ""TotalCapacity"": 10,
             ""RemainingCapacity"": 0,
             ""ResourceUnitId"": ""CAPACITY_TEST_7"",
-            ""AppointmentDate"": ""2024-08-14"",
+            ""AppointmentDate"": ""2034-01-04"",
             ""ConstraintTypeId"": ""UOM"",
             ""WeekDayId"": ""3""
         },
@@ -20,7 +20,7 @@
             ""TotalCapacity"": 10,
             ""RemainingCapacity"": 10,
             ""ResourceUnitId"": ""CAPACITY_TEST_7"",
-            ""AppointmentDate"": ""2024-08-14"",
+            ""AppointmentDate"": ""2034-01-04"",
             ""ConstraintTypeId"": ""APPOINTMENT_TYPE"",
             ""WeekDayId"": ""3""
         },
@@ -28,7 +28,7 @@
             ""TotalCapacity"": 10,
             ""RemainingCapacity"": 10,
             ""ResourceUnitId"": ""CAPACITY_TEST_7"",
-            ""AppointmentDate"": ""2024-08-14"",
+            ""AppointmentDate"": ""2034-01-04"",
             ""ConstraintTypeId"": ""NUMBER_OF_APPOINTMENTS"",
             ""WeekDayId"": ""3""
         }
@@ -38,8 +38,14 @@
             ""TotalCapacity"": 10,
             ""RemainingCapacity"": 10,
             ""ConstraintTypeId"": ""NUMBER_OF_APPOINTMENTS"",
-            ""AppointmentDate"": ""2024-08-14"",
+            ""AppointmentDate"": ""2034-01-04"",
             ""WeekDayId"": ""3""
         }
+    ],
+    ""Schedule"": [],
+    ""Appointment"": [
+        {
+            ""AppointmentSchedules"": []
+        }
     ]
 }
diff --git a/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test8/config/breakdown.json b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test8/config/breakdown.json
index 6a05eef52..66c3fb05b 100644
--- a/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test8/config/breakdown.json
+++ b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test8/config/breakdown.json
@@ -2,5 +2,7 @@
   ""TimeIntervalUtilization"": [],
   ""DayLevelUtilization"": [],
   ""FacilityLevelUtilization"": [],
-  ""FacilityDayLevelScope"": []
+  ""FacilityDayLevelScope"": [],
+  ""Schedule"": [],
+  ""Appointment"": []
 }
diff --git a/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test8/input/1.json b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test8/input/1.json
index 1ddc2fe3b..7298e224c 100644
--- a/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test8/input/1.json
+++ b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test8/input/1.json
@@ -79,7 +79,7 @@
             ""RemainingCapacity"": 0,
             ""ResourceUnitId"": ""CAPACITY_TEST_8"",
             ""ConstraintTypeId"": ""UOM"",
-            ""AppointmentDate"": ""2024-08-15"",
+            ""AppointmentDate"": ""2034-01-05"",
             ""WeekDayId"": ""4""
         }
     ],
@@ -88,7 +88,7 @@
             ""TotalCapacity"": 10,
             ""RemainingCapacity"": 0,
             ""ConstraintTypeId"": ""NUMBER_OF_APPOINTMENTS"",
-            ""AppointmentDate"": ""2024-08-15"",
+            ""AppointmentDate"": ""2034-01-05"",
             ""WeekDayId"": ""4""
         }
     ]
diff --git a/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test8/input/appointment.json b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test8/input/appointment.json
index ca7128ca1..f53dca19a 100644
--- a/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test8/input/appointment.json
+++ b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test8/input/appointment.json
@@ -1,13 +1,14 @@
 {
   ""Appointment"": [
     {
-      ""AppointmentId"": ""Appointment1"",
       ""Duration"": ""60"",
-      ""PreferredDateTime"":""2024-08-14T12:00:00"",
+      ""AppointmentStatusId"": ""1000"",
+      ""ArrivalDateTime"": ""2034-01-04T12:00:00"",
+      ""PreferredDateTime"":  ""2034-01-04T12:00:00"",
       ""AppointmentTypeId"": ""PICKUP_EMPTY"",
       ""Resources"": [
         {
-          ""GroupName"": ""DOCK_DOOR"",
+          ""GroupName"": ""CAPACITY_TEST_8"",
           ""ResourceName"": ""CAPACITY_TEST_8""
         }
       ]
diff --git a/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test8/output/1.json b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test8/output/1.json
index c9e85a981..9cc1b8e88 100644
--- a/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test8/output/1.json
+++ b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test8/output/1.json
@@ -6,7 +6,7 @@
             ""MaxPickupEmptyCpty"": 10,
             ""RemainingPickupEmptyCpty"": 9,
             ""ResourceUnitId"": ""CAPACITY_TEST_8"",
-            ""AppointmentDate"": ""2024-08-14""
+            ""AppointmentDate"": ""2034-01-04""
         }
     ],
     ""DayLevelUtilization"": [
@@ -15,14 +15,14 @@
             ""RemainingCapacity"": 0,
             ""ResourceUnitId"": ""CAPACITY_TEST_8"",
             ""ConstraintTypeId"": ""UOM"",
-            ""AppointmentDate"": ""2024-08-15"",
+            ""AppointmentDate"": ""2034-01-05"",
             ""WeekDayId"": ""4""
         },
         {
             ""TotalCapacity"": 10,
             ""RemainingCapacity"": 9,
             ""ResourceUnitId"": ""CAPACITY_TEST_8"",
-            ""AppointmentDate"": ""2024-08-14"",
+            ""AppointmentDate"": ""2034-01-04"",
             ""ConstraintTypeId"": ""NUMBER_OF_APPOINTMENTS"",
             ""WeekDayId"": ""3""
         }
@@ -32,15 +32,34 @@
             ""TotalCapacity"": 10,
             ""RemainingCapacity"": 9,
             ""ConstraintTypeId"": ""NUMBER_OF_APPOINTMENTS"",
-            ""AppointmentDate"": ""2024-08-14"",
+            ""AppointmentDate"": ""2034-01-04"",
             ""WeekDayId"": ""3""
         },
         {
             ""TotalCapacity"": 10,
             ""RemainingCapacity"": 0,
             ""ConstraintTypeId"": ""NUMBER_OF_APPOINTMENTS"",
-            ""AppointmentDate"": ""2024-08-15"",
+            ""AppointmentDate"": ""2034-01-05"",
             ""WeekDayId"": ""4""
         }
+    ],
+    ""Schedule"": [
+        {
+            ""StartDateTime"": ""2034-01-04T12:00:00"",
+            ""EndDateTime"": ""2034-01-04T13:00:00"",
+            ""ScheduleResources"": [
+                {
+                    ""ResourceGroupName"": ""CAPACITY_TEST_8"",
+                    ""ResourceName"": ""CAPACITY_TEST_8""
+                }
+            ]
+        }
+    ],
+    ""Appointment"": [
+        {
+            ""AppointmentSchedules"": [
+                {}
+            ]
+        }
     ]
 }
diff --git a/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test9/config/breakdown.json b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test9/config/breakdown.json
index 6a05eef52..66c3fb05b 100644
--- a/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test9/config/breakdown.json
+++ b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test9/config/breakdown.json
@@ -2,5 +2,7 @@
   ""TimeIntervalUtilization"": [],
   ""DayLevelUtilization"": [],
   ""FacilityLevelUtilization"": [],
-  ""FacilityDayLevelScope"": []
+  ""FacilityDayLevelScope"": [],
+  ""Schedule"": [],
+  ""Appointment"": []
 }
diff --git a/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test9/input/appointment.json b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test9/input/appointment.json
index bc91e2090..686d36966 100644
--- a/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test9/input/appointment.json
+++ b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test9/input/appointment.json
@@ -1,13 +1,14 @@
 {
   ""Appointment"": [
     {
-      ""AppointmentId"": ""Appointment1"",
       ""Duration"": ""600"",
-      ""PreferredDateTime"":""2024-08-14T10:00:00"",
+      ""AppointmentStatusId"": ""1000"",
+      ""ArrivalDateTime"": ""2034-01-04T10:00:00"",
+      ""PreferredDateTime"":  ""2034-01-04T10:00:00"",
       ""AppointmentTypeId"": ""PICKUP_LOAD"",
       ""Resources"": [
         {
-          ""GroupName"": ""DOCK_DOOR"",
+          ""GroupName"": ""CAPACITY_TEST_9"",
           ""ResourceName"": ""CAPACITY_TEST_9""
         }
       ]
diff --git a/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test9/output/1.json b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test9/output/1.json
index f8c8acd24..32815b2ad 100644
--- a/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test9/output/1.json
+++ b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test9/output/1.json
@@ -6,7 +6,7 @@
             ""MaxPickupLoadCpty"": 1,
             ""RemainingPickupLoadCpty"": 0,
             ""ResourceUnitId"": ""CAPACITY_TEST_9"",
-            ""AppointmentDate"": ""2024-08-14""
+            ""AppointmentDate"": ""2034-01-04""
         },
         {
             ""TotalCapacity"": 2,
@@ -14,7 +14,7 @@
             ""MaxPickupLoadCpty"": 2,
             ""RemainingPickupLoadCpty"": 1,
             ""ResourceUnitId"": ""CAPACITY_TEST_9"",
-            ""AppointmentDate"": ""2024-08-14""
+            ""AppointmentDate"": ""2034-01-04""
         },
         {
             ""TotalCapacity"": 2,
@@ -22,7 +22,7 @@
             ""MaxPickupLoadCpty"": 2,
             ""RemainingPickupLoadCpty"": 1,
             ""ResourceUnitId"": ""CAPACITY_TEST_9"",
-            ""AppointmentDate"": ""2024-08-14""
+            ""AppointmentDate"": ""2034-01-04""
         },
         {
             ""TotalCapacity"": 3,
@@ -30,7 +30,7 @@
             ""MaxPickupLoadCpty"": 3,
             ""RemainingPickupLoadCpty"": 2,
             ""ResourceUnitId"": ""CAPACITY_TEST_9"",
-            ""AppointmentDate"": ""2024-08-14""
+            ""AppointmentDate"": ""2034-01-04""
         }
     ],
     ""DayLevelUtilization"": [
@@ -38,7 +38,7 @@
             ""TotalCapacity"": 1,
             ""RemainingCapacity"": 0,
             ""ResourceUnitId"": ""CAPACITY_TEST_9"",
-            ""AppointmentDate"": ""2024-08-14"",
+            ""AppointmentDate"": ""2034-01-04"",
             ""ConstraintTypeId"": ""NUMBER_OF_APPOINTMENTS"",
             ""WeekDayId"": ""3""
         }
@@ -47,9 +47,28 @@
         {
             ""TotalCapacity"": 1,
             ""RemainingCapacity"": 0,
-            ""AppointmentDate"": ""2024-08-14"",
+            ""AppointmentDate"": ""2034-01-04"",
             ""ConstraintTypeId"": ""NUMBER_OF_APPOINTMENTS"",
             ""WeekDayId"": ""3""
         }
+    ],
+    ""Schedule"": [
+        {
+            ""StartDateTime"": ""2034-01-04T10:00:00"",
+            ""EndDateTime"": ""2034-01-04T20:00:00"",
+            ""ScheduleResources"": [
+                {
+                    ""ResourceGroupName"": ""CAPACITY_TEST_9"",
+                    ""ResourceName"": ""CAPACITY_TEST_9""
+                }
+            ]
+        }
+    ],
+    ""Appointment"": [
+        {
+            ""AppointmentSchedules"": [
+                {}
+            ]
+        }
     ]
 }
diff --git a/src/component-test/resources/appointment/appointment/recommendations/recommendationsWithSkipAvailability/AppointmentWithEarliestStartAndEndDateTime.json b/src/component-test/resources/appointment/appointment/recommendations/recommendationsWithSkipAvailability/AppointmentWithEarliestStartAndEndDateTime.json
index 96b7f1187..e618b46cf 100644
--- a/src/component-test/resources/appointment/appointment/recommendations/recommendationsWithSkipAvailability/AppointmentWithEarliestStartAndEndDateTime.json
+++ b/src/component-test/resources/appointment/appointment/recommendations/recommendationsWithSkipAvailability/AppointmentWithEarliestStartAndEndDateTime.json
@@ -1,6 +1,5 @@
 {
   ""AppointmentId"": ""Appointment_aWESAEDT"",
-  ""PreferredDateTime"": ""2024-08-12T20:00:00"",
   ""ContentType"": ""EMPTY"",
   ""SkipAvailabilityCheck"" : false,
   ""SupplierPoAppointment"": false,
diff --git a/src/main/java/com/manh/cp/appointment/appointment/impl/service/AppointmentManagerHelper.java b/src/main/java/com/manh/cp/appointment/appointment/impl/service/AppointmentManagerHelper.java
index b66a2a2af..8798460fb 100644
--- a/src/main/java/com/manh/cp/appointment/appointment/impl/service/AppointmentManagerHelper.java
+++ b/src/main/java/com/manh/cp/appointment/appointment/impl/service/AppointmentManagerHelper.java
@@ -19,6 +19,7 @@ package com.manh.cp.appointment.appointment.impl.service;
 
 import java.time.LocalDateTime;
 import java.util.ArrayList;
+import java.util.Collections;
 import java.util.HashMap;
 import java.util.List;
 import java.util.Map;
@@ -50,10 +51,12 @@ import com.manh.cp.appointment.appointment.api.domain.Appointment;
 import com.manh.cp.appointment.appointment.api.domain.AppointmentBase;
 import com.manh.cp.appointment.appointment.api.domain.AppointmentContents;
 import com.manh.cp.appointment.appointment.api.domain.AppointmentContentsBase;
+import com.manh.cp.appointment.appointment.api.domain.AppointmentSchedulesBase;
 import com.manh.cp.appointment.appointment.api.service.AppointmentMapService;
 import com.manh.cp.appointment.appointment.api.service.AppointmentService;
 import com.manh.cp.appointment.appointment.api.service.FeatureFlagService;
 import com.manh.cp.appointment.appointment.client.Constants.AppointmentEvents;
+import com.manh.cp.appointment.appointment.client.Constants.AppointmentType;
 import com.manh.cp.appointment.appointment.client.Constants.ErrorDefinitionIdBundle;
 import com.manh.cp.appointment.appointment.client.Constants.SourceType;
 import com.manh.cp.appointment.appointment.client.dto.ApplicableAppointmentParametersDTO;
@@ -66,6 +69,7 @@ import com.manh.cp.appointment.appointment.client.dto.AsnBaseDTO;
 import com.manh.cp.appointment.appointment.client.dto.FacilityInformation;
 import com.manh.cp.appointment.appointment.client.dto.PurchaseOrderBaseDTO;
 import com.manh.cp.appointment.appointment.client.dto.PurchaseOrderDTO;
+import com.manh.cp.appointment.appointment.client.dto.ResourceDTO;
 import com.manh.cp.appointment.appointment.client.dto.ScheduleAppointmentRecommendedSlotDTO;
 import com.manh.cp.appointment.appointment.client.dto.ShipmentStopBaseDTO;
 import com.manh.cp.appointment.appointment.client.dto.recommendation.RecommendationDTO;
@@ -88,6 +92,18 @@ import com.manh.cp.appointment.appointment.validations.Rules.EditNotAllowedStatu
 import com.manh.cp.appointment.config.api.service.AppointmentParameterStrategyService;
 import com.manh.cp.appointment.config.client.dto.AppointmentApprovalCriteriaDTO;
 import com.manh.cp.appointment.config.impl.service.ApplicableAppointmentParametersService;
+import com.manh.cp.appointment.core.api.domain.DayLevelUtilization;
+import com.manh.cp.appointment.core.api.domain.FacilityLevelUtilization;
+import com.manh.cp.appointment.core.api.domain.ResourceGroup;
+import com.manh.cp.appointment.core.api.domain.ResourceUnit;
+import com.manh.cp.appointment.core.api.domain.ScheduleBase;
+import com.manh.cp.appointment.core.api.domain.ScheduleResourcesBase;
+import com.manh.cp.appointment.core.api.domain.TimeIntervalUtilization;
+import com.manh.cp.appointment.core.api.service.DayLevelUtilizationService;
+import com.manh.cp.appointment.core.api.service.FacilityLevelUtilizationService;
+import com.manh.cp.appointment.core.api.service.ResourceGroupService;
+import com.manh.cp.appointment.core.api.service.ScheduleMapService;
+import com.manh.cp.appointment.core.api.service.TimeIntervalUtilizationService;
 import com.manh.cp.appointment.core.client.dto.ScheduleDTO;
 import com.manh.cp.appointment.core.dto.CapacityDTO;
 import com.manh.cp.appointment.core.dto.EnhancedAppointmentDTO;
@@ -115,6 +131,7 @@ import com.manh.cp.fw.errorHandler.exception.ErrorHandlerRuntimeException;
 import com.manh.cp.fw.eventhandling.api.ExtensionPoint;
 import com.manh.cp.fw.nextup.api.service.NextUpGenerationService;
 import com.manh.cp.fw.purge.PurgeUtils;
+import com.manh.cp.fw.query.Query;
 import com.manh.cp.fw.sccore.parameter.api.service.ApplicationParameterService;
 import com.manh.cp.fw.utils.JsonUtils;
 import com.manh.cp.organization.location.client.dto.LocationDTO;
@@ -219,9 +236,24 @@ public class AppointmentManagerHelper
     @Autowired
     private ApplicationParameterService applicationParameterService;
 
+    @Autowired
+    private TimeIntervalUtilizationService timeIntervalUtilizationService;
+
+    @Autowired
+    private DayLevelUtilizationService dayLevelUtilizationService;
+
+    @Autowired
+    private FacilityLevelUtilizationService facilityLevelUtilizationService;
+
+    @Autowired
+    private ResourceGroupService resourceGroupService;
+
     @Autowired
     private CapacityManager capacityManager;
 
+    @Autowired
+    private ScheduleMapService scheduleMapService;
+
     private final ObjectMapper objectMapper = new ObjectMapper();
 
     private final String APPOINTMENT_CONTENTS = ""AppointmentContents"";
@@ -850,17 +882,48 @@ public class AppointmentManagerHelper
 
             }
 
-            Document allAppointmentDataDocument = DocumentBuilder.build(enhancedAppointmentDTO);
-            Document savedAppointmentDocument =
-                    appointmentMapService.saveAppointment(context, allAppointmentDataDocument, null);
+            Document appointmentDocument = DocumentBuilder.build(enhancedAppointmentDTO);
+            appointmentDocument =
+                    appointmentMapService.saveAppointment(context, appointmentDocument, null);
 
-            CapacityDTO capacityChecker = new CapacityDTO(enhancedAppointmentDTO);
-            capacityManager.consumeAppointmentCapacity(context, capacityChecker);
+            if (!enhancedAppointmentDTO.isInitialized(AppointmentBase.Fields.APPOINTMENT_ID.getCode())
+                    || StringUtils.isBlank(enhancedAppointmentDTO.getAppointmentId()))
+            {
+                enhancedAppointmentDTO.updateAppointmentId(
+                        (String) appointmentDocument.get(AppointmentBase.Fields.APPOINTMENT_ID.getCode()));
+            }
 
-            logger.debug(""scheduleAppointment - Schedule appointment result : {}"", savedAppointmentDocument);
-            appointmentScheduleRecommendationsDTO.setAppointmentDocument(savedAppointmentDocument);
+            Map<String, List<String>> resourceGroupsToEvaluate =
+                    getResourceGroupsToEvaluate(context, enhancedAppointmentDTO);
+            Map<String, String> approvedResources = new HashMap<>();
 
-            scheduleAppointmentUserExit.postprocess(context, savedAppointmentDocument);
+            for (Map.Entry<String, List<String>> resourceGroup : resourceGroupsToEvaluate.entrySet())
+            {
+                for (String resourceUnit : resourceGroup.getValue())
+                {
+                    CapacityDTO capacityChecker = new CapacityDTO(enhancedAppointmentDTO, resourceUnit);
+                    capacityManager.validateAppointmentCapacity(context, capacityChecker);
+
+                    if (capacityChecker.allCapacityChecksAreValid())
+                    {
+                        approvedResources.put(resourceGroup.getKey(), resourceUnit);
+                        enhancedAppointmentDTO.addAllUtilizations(capacityChecker);
+                        break;
+                    }
+                }
+            }
+
+            if (approvedResources.size() == resourceGroupsToEvaluate.size())
+            {
+                consumeCapacity(context, enhancedAppointmentDTO);
+                Document schedule = createSchedule(context, enhancedAppointmentDTO, approvedResources);
+                createAppointmentSchedules(context, enhancedAppointmentDTO, schedule);
+            }
+
+            logger.debug(""scheduleAppointment - Schedule appointment result : {}"", appointmentDocument);
+            appointmentScheduleRecommendationsDTO.setAppointmentDocument(appointmentDocument);
+
+            scheduleAppointmentUserExit.postprocess(context, appointmentDocument);
 
             eventHelper.processEvent(context, AppointmentFlows.APPOINTMENT_CREATION,
                     enhancedAppointmentDTO, null);
@@ -871,6 +934,162 @@ public class AppointmentManagerHelper
         return appointmentScheduleRecommendationsDTO;
     }
 
+    private Map<String, List<String>> getResourceGroupsToEvaluate(Context context,
+            EnhancedAppointmentDTO enhancedAppointmentDTO)
+    {
+        Map<String, List<String>> resourceUnitsByGroup = new HashMap<>();
+
+        if (CollectionUtils.isEmpty(enhancedAppointmentDTO.getResources()))
+        {
+            List<ResourceGroup> resourceGroups = (List<ResourceGroup>) resourceGroupService
+                    .findAllResourceGroups(context, new Query(null, 0, Integer.MAX_VALUE)).getObjects();
+
+            for (ResourceGroup resourceGroup : resourceGroups)
+            {
+                List<String> resourceUnitsForGroup = new ArrayList<>();
+
+                for (ResourceUnit resourceUnit : resourceGroup.getResourceUnitList())
+                {
+                    resourceUnitsForGroup.add(resourceUnit.getResourceId());
+                }
+
+                resourceUnitsByGroup.put(resourceGroup.getResourceGroupName(), resourceUnitsForGroup);
+            }
+        }
+        else
+        {
+            for (ResourceDTO resourceDTO : enhancedAppointmentDTO.getResources())
+            {
+                if (!resourceUnitsByGroup.containsKey(resourceDTO.getGroupName()))
+                {
+                    resourceUnitsByGroup.put(resourceDTO.getGroupName(), new ArrayList<>());
+                }
+
+                resourceUnitsByGroup.get(resourceDTO.getGroupName()).add(resourceDTO.getResourceName());
+            }
+        }
+
+        return resourceUnitsByGroup;
+    }
+
+    private void consumeCapacity(Context context, EnhancedAppointmentDTO enhancedAppointmentDTO)
+    {
+        for (TimeIntervalUtilization timeIntervalUtilization : enhancedAppointmentDTO.getTimeIntervalUtilizations())
+        {
+            timeIntervalUtilization.setRemainingCapacity(timeIntervalUtilization.getRemainingCapacity() - 1);
+
+            switch (AppointmentType.valueOf(enhancedAppointmentDTO.getAppointmentTypeId()))
+            {
+                case LIVE_UNLOAD:
+                    if (timeIntervalUtilization.getRemainingLiveUnloadCpty() != null)
+                    {
+                        timeIntervalUtilization
+                                .setRemainingLiveUnloadCpty(
+                                        timeIntervalUtilization.getRemainingLiveUnloadCpty() - 1);
+                    }
+                    break;
+                case LIVE_LOAD:
+                    if (timeIntervalUtilization.getRemainingLiveLoadCpty() != null)
+                    {
+                        timeIntervalUtilization
+                                .setRemainingLiveLoadCpty(
+                                        timeIntervalUtilization.getRemainingLiveLoadCpty() - 1);
+                    }
+                    break;
+                case PICKUP_LOAD:
+                    if (timeIntervalUtilization.getRemainingPickupLoadCpty() != null)
+                    {
+                        timeIntervalUtilization
+                                .setRemainingPickupLoadCpty(
+                                        timeIntervalUtilization.getRemainingPickupLoadCpty() - 1);
+                    }
+                    break;
+                case PICKUP_EMPTY:
+                    if (timeIntervalUtilization.getRemainingPickupEmptyCpty() != null)
+                    {
+                        timeIntervalUtilization
+                                .setRemainingPickupEmptyCpty(
+                                        timeIntervalUtilization.getRemainingPickupEmptyCpty() - 1);
+                    }
+                    break;
+                case DROP_EMPTY:
+                    if (timeIntervalUtilization.getRemainingDropEmptyCpty() != null)
+                    {
+                        timeIntervalUtilization
+                                .setRemainingDropEmptyCpty(
+                                        timeIntervalUtilization.getRemainingDropEmptyCpty() - 1);
+                    }
+                    break;
+                case DROP_UNLOAD:
+                    if (timeIntervalUtilization.getRemainingDropUnloadCpty() != null)
+                    {
+                        timeIntervalUtilization
+                                .setRemainingDropUnloadCpty(
+                                        timeIntervalUtilization.getRemainingDropUnloadCpty() - 1);
+                    }
+                    break;
+            }
+
+            timeIntervalUtilizationService.save(context, timeIntervalUtilization, null, true);
+        }
+
+        for (DayLevelUtilization dayLevelUtilization : enhancedAppointmentDTO.getDayLevelUtilizations())
+        {
+            dayLevelUtilization.setRemainingCapacity(dayLevelUtilization.getRemainingCapacity() - 1);
+            dayLevelUtilizationService.save(context, dayLevelUtilization, null, true);
+        }
+
+        for (FacilityLevelUtilization facilityLevelUtilization : enhancedAppointmentDTO.getFacilityLevelUtilizations())
+        {
+            facilityLevelUtilization.setRemainingCapacity(facilityLevelUtilization.getRemainingCapacity() - 1);
+            facilityLevelUtilizationService.save(context, facilityLevelUtilization, null, true);
+        }
+    }
+
+    private Document createSchedule(Context context, EnhancedAppointmentDTO enhancedAppointmentDTO,
+            Map<String, String> approvedResources)
+    {
+        Document newSchedule = new Document();
+        newSchedule.put(ScheduleBase.Fields.START_DATE_TIME.getCode(), enhancedAppointmentDTO.getPreferredDateTime());
+        newSchedule.put(ScheduleBase.Fields.END_DATE_TIME.getCode(),
+                enhancedAppointmentDTO.getPreferredDateTime().plusMinutes(enhancedAppointmentDTO.getDuration()));
+
+        List<Map<String, Object>> scheduledResources = new ArrayList<>();
+
+        for (Map.Entry<String, String> resourceGroupUnit : approvedResources.entrySet())
+        {
+            Map<String, Object> resourceScheduleInformation = new HashMap<>();
+            resourceScheduleInformation.put(ScheduleResourcesBase.Fields.RESOURCE_GROUP_NAME.getCode(),
+                    resourceGroupUnit.getKey());
+            resourceScheduleInformation.put(ScheduleResourcesBase.Fields.RESOURCE_NAME.getCode(),
+                    resourceGroupUnit.getValue());
+
+            scheduledResources.add(resourceScheduleInformation);
+        }
+
+        newSchedule.put(ScheduleBase.Fields.APT_SCHEDULE_RESOURCES.getCode(), scheduledResources);
+
+        return scheduleMapService.createSchedule(context, newSchedule, null);
+    }
+
+    private void createAppointmentSchedules(Context context, EnhancedAppointmentDTO enhancedAppointmentDTO,
+            Document schedule)
+    {
+        Document updatedAppointment = new Document();
+        updatedAppointment.put(AppointmentBase.Fields.APPOINTMENT_ID.getCode(),
+                enhancedAppointmentDTO.getAppointmentId());
+        updatedAppointment.put(AppointmentBase.Fields.PK.getCode(), enhancedAppointmentDTO.getPk());
+
+        Map<String, Object> appointmentSchedule = new HashMap<>();
+        String scheduleId = (String) schedule.get(ScheduleBase.Fields.SCHEDULE_ID.getCode());
+        appointmentSchedule.put(AppointmentSchedulesBase.Fields.SCHEDULE.getCode(), scheduleId);
+
+        updatedAppointment.put(AppointmentBase.Fields.APT_APPOINTMENT_SCHEDULES.getCode(),
+                Collections.singletonList(appointmentSchedule));
+
+        appointmentMapService.saveAppointment(context, updatedAppointment, null);
+    }
+
     /**
      * Schedule an appointment with best fit.
      *
diff --git a/src/main/java/com/manh/cp/appointment/appointment/impl/service/CapacityManager.java b/src/main/java/com/manh/cp/appointment/appointment/impl/service/CapacityManager.java
index 6c2233399..375de030a 100644
--- a/src/main/java/com/manh/cp/appointment/appointment/impl/service/CapacityManager.java
+++ b/src/main/java/com/manh/cp/appointment/appointment/impl/service/CapacityManager.java
@@ -93,101 +93,15 @@ public class CapacityManager
 
     private final String ALL_DAYS_OF_WEEK = ""All"";
 
-    @Transactional(propagation = Propagation.REQUIRES_NEW)
-    public void consumeAppointmentCapacity(Context context, CapacityDTO capacityDTO)
+    @Transactional(propagation = Propagation.REQUIRED)
+    public void validateAppointmentCapacity(Context context, CapacityDTO capacityDTO)
     {
-        if (CollectionUtils.isEmpty(capacityDTO.getResources()))
-        {
-            logger.error(""-- No resources assigned to appointment [{}], so skipping capacity check"",
-                    capacityDTO.getAppointmentId());
-            return;
-        }
-
-        String resourceUnitId = capacityDTO.getResources().get(0).getResourceName();
+        String resourceUnitId = capacityDTO.getResourceId();
         ResourceUnit resourceUnit = resourceUnitService.findByResourceId(context, resourceUnitId);
 
         if (resourceUnit != null)
         {
             validateCapacities(context, resourceUnit, capacityDTO);
-
-            if (capacityDTO.allCapacityChecksAreValid())
-            {
-                for (TimeIntervalUtilization timeIntervalUtilization : capacityDTO.getTimeIntervalUtilizations())
-                {
-                    timeIntervalUtilization.setRemainingCapacity(timeIntervalUtilization.getRemainingCapacity() - 1);
-
-                    switch (capacityDTO.getAppointmentTypeId())
-                    {
-                        case LIVE_UNLOAD:
-                            if (timeIntervalUtilization.getRemainingLiveUnloadCpty() != null)
-                            {
-                                timeIntervalUtilization
-                                        .setRemainingLiveUnloadCpty(
-                                                timeIntervalUtilization.getRemainingLiveUnloadCpty() - 1);
-                            }
-                            break;
-                        case LIVE_LOAD:
-                            if (timeIntervalUtilization.getRemainingLiveLoadCpty() != null)
-                            {
-                                timeIntervalUtilization
-                                        .setRemainingLiveLoadCpty(
-                                                timeIntervalUtilization.getRemainingLiveLoadCpty() - 1);
-                            }
-                            break;
-                        case PICKUP_LOAD:
-                            if (timeIntervalUtilization.getRemainingPickupLoadCpty() != null)
-                            {
-                                timeIntervalUtilization
-                                        .setRemainingPickupLoadCpty(
-                                                timeIntervalUtilization.getRemainingPickupLoadCpty() - 1);
-                            }
-                            break;
-                        case PICKUP_EMPTY:
-                            if (timeIntervalUtilization.getRemainingPickupEmptyCpty() != null)
-                            {
-                                timeIntervalUtilization
-                                        .setRemainingPickupEmptyCpty(
-                                                timeIntervalUtilization.getRemainingPickupEmptyCpty() - 1);
-                            }
-                            break;
-                        case DROP_EMPTY:
-                            if (timeIntervalUtilization.getRemainingDropEmptyCpty() != null)
-                            {
-                                timeIntervalUtilization
-                                        .setRemainingDropEmptyCpty(
-                                                timeIntervalUtilization.getRemainingDropEmptyCpty() - 1);
-                            }
-                            break;
-                        case DROP_UNLOAD:
-                            if (timeIntervalUtilization.getRemainingDropUnloadCpty() != null)
-                            {
-                                timeIntervalUtilization
-                                        .setRemainingDropUnloadCpty(
-                                                timeIntervalUtilization.getRemainingDropUnloadCpty() - 1);
-                            }
-                            break;
-                    }
-
-                    timeIntervalUtilizationService.save(context, timeIntervalUtilization, null, true);
-                }
-
-                for (DayLevelUtilization dayLevelUtilization : capacityDTO.getDayLevelUtilizations())
-                {
-                    dayLevelUtilization.setRemainingCapacity(dayLevelUtilization.getRemainingCapacity() - 1);
-                    dayLevelUtilizationService.save(context, dayLevelUtilization, null, true);
-                }
-
-                for (FacilityLevelUtilization facilityLevelUtilization : capacityDTO.getFacilityLevelUtilizations())
-                {
-                    facilityLevelUtilization.setRemainingCapacity(facilityLevelUtilization.getRemainingCapacity() - 1);
-                    facilityLevelUtilizationService.save(context, facilityLevelUtilization, null, true);
-                }
-            }
-            else
-            {
-                logger.error(""-- Capacity check for appointment [{}] at time [{}] is not valid"",
-                        capacityDTO.getAppointmentId(), capacityDTO.getAppointmentDateTime());
-            }
         }
         else
         {
@@ -251,7 +165,8 @@ public class CapacityManager
                     }
 
                     TimeIntervalUtilization timeIntervalUtilization =
-                            timeIntervalUtilizationService.findByTimeSlotId(context, timeSlot.getTimeSlotId());
+                            timeIntervalUtilizationService.findByTimeSlotAndResourceUnit(context,
+                                    timeSlot.getTimeSlotId(), resourceUnit.getResourceId());
 
                     if (timeIntervalUtilization == null)
                     {
@@ -281,9 +196,10 @@ public class CapacityManager
                     else
                     {
                         logger.debug(
-                                ""-- Capacity for time interval scope [{}] is already 0 at appointment start time [{}], ""
+                                ""-- Capacity for time interval scope [{}] is already 0 at appointment start time [{}] and appointment type [{}], ""
                                         + ""so checking next time interval capacity"",
-                                timeIntervalUtilization.getTimeIntervalUtilizationId(), appointmentStartTime);
+                                timeIntervalUtilization.getTimeIntervalUtilizationId(),
+                                capacityDTO.getAppointmentTypeId().name(), appointmentStartTime);
 
                         capacityDTO.resetCapacityCheck();
                         return;
diff --git a/src/main/java/com/manh/cp/appointment/core/api/service/TimeIntervalUtilizationService.java b/src/main/java/com/manh/cp/appointment/core/api/service/TimeIntervalUtilizationService.java
index e10775b94..c8dbbb39c 100644
--- a/src/main/java/com/manh/cp/appointment/core/api/service/TimeIntervalUtilizationService.java
+++ b/src/main/java/com/manh/cp/appointment/core/api/service/TimeIntervalUtilizationService.java
@@ -22,5 +22,5 @@ import com.manh.cp.fw.common.Context;
 
 public interface TimeIntervalUtilizationService extends TimeIntervalUtilizationServiceBase
 {
-    TimeIntervalUtilization findByTimeSlotId(Context context, String timeSlotId);
+    TimeIntervalUtilization findByTimeSlotAndResourceUnit(Context context, String timeSlotId, String resourceUnitId);
 }
diff --git a/src/main/java/com/manh/cp/appointment/core/dto/CapacityDTO.java b/src/main/java/com/manh/cp/appointment/core/dto/CapacityDTO.java
index 4816e4f5c..3efa9d8b8 100644
--- a/src/main/java/com/manh/cp/appointment/core/dto/CapacityDTO.java
+++ b/src/main/java/com/manh/cp/appointment/core/dto/CapacityDTO.java
@@ -21,18 +21,16 @@ import java.time.Duration;
 import java.time.LocalDateTime;
 import java.time.LocalTime;
 import java.util.HashSet;
-import java.util.List;
 import java.util.Set;
 
 import com.manh.cp.appointment.appointment.client.Constants.AppointmentType;
-import com.manh.cp.appointment.appointment.client.dto.ResourceDTO;
 import com.manh.cp.appointment.core.api.domain.DayLevelUtilization;
 import com.manh.cp.appointment.core.api.domain.FacilityLevelUtilization;
 import com.manh.cp.appointment.core.api.domain.TimeIntervalUtilization;
 
 public class CapacityDTO
 {
-    private final List<ResourceDTO> resources;
+    private final String resourceId;
 
     private final String appointmentId;
 
@@ -52,9 +50,9 @@ public class CapacityDTO
 
     private Set<FacilityLevelUtilization> facilityLevelUtilizations = new HashSet<>();
 
-    public CapacityDTO(EnhancedAppointmentDTO enhancedAppointmentDTO)
+    public CapacityDTO(EnhancedAppointmentDTO enhancedAppointmentDTO, String resourceId)
     {
-        resources = enhancedAppointmentDTO.getResources();
+        this.resourceId = resourceId;
         appointmentId = enhancedAppointmentDTO.getAppointmentId();
         appointmentDateTime = enhancedAppointmentDTO.getPreferredDateTime();
         appointmentDuration = enhancedAppointmentDTO.getDuration();
@@ -97,9 +95,9 @@ public class CapacityDTO
         return totalAppointmentDurationAccountedFor;
     }
 
-    public List<ResourceDTO> getResources()
+    public String getResourceId()
     {
-        return resources;
+        return resourceId;
     }
 
     public String getAppointmentId()
diff --git a/src/main/java/com/manh/cp/appointment/core/dto/EnhancedAppointmentDTO.java b/src/main/java/com/manh/cp/appointment/core/dto/EnhancedAppointmentDTO.java
index 8a0d62da2..1e5f3a0e6 100644
--- a/src/main/java/com/manh/cp/appointment/core/dto/EnhancedAppointmentDTO.java
+++ b/src/main/java/com/manh/cp/appointment/core/dto/EnhancedAppointmentDTO.java
@@ -17,13 +17,73 @@
  */
 package com.manh.cp.appointment.core.dto;
 
+import java.time.LocalDateTime;
+import java.util.HashSet;
+import java.util.Set;
+
 import org.apache.commons.lang3.builder.ToStringBuilder;
 
 import com.manh.cp.appointment.appointment.client.dto.AppointmentDTO;
+import com.manh.cp.appointment.core.api.domain.DayLevelUtilization;
+import com.manh.cp.appointment.core.api.domain.FacilityLevelUtilization;
+import com.manh.cp.appointment.core.api.domain.TimeIntervalUtilization;
 
 public class EnhancedAppointmentDTO extends AppointmentDTO
 {
-    // Keeping this class here so we can add variables as needed to the new appointment DTO
+    private LocalDateTime approvedAppointmentTime = null;
+
+    private Set<TimeIntervalUtilization> timeIntervalUtilizations = new HashSet<>();
+
+    private Set<DayLevelUtilization> dayLevelUtilizations = new HashSet<>();
+
+    private Set<FacilityLevelUtilization> facilityLevelUtilizations = new HashSet<>();
+
+    public LocalDateTime getApprovedAppointmentTime()
+    {
+        return approvedAppointmentTime;
+    }
+
+    public void setApprovedAppointmentTime(LocalDateTime approvedAppointmentTime)
+    {
+        this.approvedAppointmentTime = approvedAppointmentTime;
+    }
+
+    public Set<TimeIntervalUtilization> getTimeIntervalUtilizations()
+    {
+        return timeIntervalUtilizations;
+    }
+
+    public void setTimeIntervalUtilizations(Set<TimeIntervalUtilization> timeIntervalUtilizations)
+    {
+        this.timeIntervalUtilizations = timeIntervalUtilizations;
+    }
+
+    public Set<DayLevelUtilization> getDayLevelUtilizations()
+    {
+        return dayLevelUtilizations;
+    }
+
+    public void setDayLevelUtilizations(Set<DayLevelUtilization> dayLevelUtilizations)
+    {
+        this.dayLevelUtilizations = dayLevelUtilizations;
+    }
+
+    public Set<FacilityLevelUtilization> getFacilityLevelUtilizations()
+    {
+        return facilityLevelUtilizations;
+    }
+
+    public void setFacilityLevelUtilizations(Set<FacilityLevelUtilization> facilityLevelUtilizations)
+    {
+        this.facilityLevelUtilizations = facilityLevelUtilizations;
+    }
+
+    public void addAllUtilizations(CapacityDTO capacityDTO)
+    {
+        timeIntervalUtilizations.addAll(capacityDTO.getTimeIntervalUtilizations());
+        dayLevelUtilizations.addAll(capacityDTO.getDayLevelUtilizations());
+        facilityLevelUtilizations.addAll(capacityDTO.getFacilityLevelUtilizations());
+    }
 
     @Override
     public String toString()
diff --git a/src/main/java/com/manh/cp/appointment/core/impl/service/TimeIntervalUtilizationServiceImpl.java b/src/main/java/com/manh/cp/appointment/core/impl/service/TimeIntervalUtilizationServiceImpl.java
index 8325df187..08e4eaf53 100644
--- a/src/main/java/com/manh/cp/appointment/core/impl/service/TimeIntervalUtilizationServiceImpl.java
+++ b/src/main/java/com/manh/cp/appointment/core/impl/service/TimeIntervalUtilizationServiceImpl.java
@@ -33,7 +33,8 @@ public class TimeIntervalUtilizationServiceImpl extends TimeIntervalUtilizationS
 {
     private final Logger logger = CPLoggerFactory.getLogger(TimeIntervalUtilizationServiceImpl.class);
 
-    public TimeIntervalUtilization findByTimeSlotId(Context context, String timeSlotId)
+    public TimeIntervalUtilization findByTimeSlotAndResourceUnit(Context context, String timeSlotId,
+            String resourceUnitId)
     {
         logger.trace("">> findByTimeSlotId()"");
 
@@ -43,7 +44,8 @@ public class TimeIntervalUtilizationServiceImpl extends TimeIntervalUtilizationS
         JPQLQuery query = createQueryObject(context);
 
         TimeIntervalUtilization timeIntervalUtilization = query.from(qTimeIntervalUtilization)
-                .where(qTimeIntervalUtilization.timeSlotId.eq(timeSlotId))
+                .where(qTimeIntervalUtilization.timeSlotId.eq(timeSlotId)
+                        .and(qTimeIntervalUtilization.resourceUnitId.eq(resourceUnitId)))
                 .singleResult(qTimeIntervalUtilization);
 
         logger.trace(""<< findByTimeSlotId()"");
","Do I also need to create a record in appointmentSchedules here?
when we define capacity, if no capacity is defined for `LIVE_UNLOAD` , what is our default for total capacity and remaining capacity? 
did we handle use case where time slots are defined for 30 mins but appointment requested is for 60 min or 90 min? or this use case is still pending to be handled ?
The time interval capacity must have a capacity defined, but it doesn’t need a LIVE\_UNLOAD capacity defined. Therefore, we will always have some remaining capacity that we can validate against. I’m assuming that if there isn’t a LIVE\_UNLOAD capacity defined, the only limit on those appointment types is the remaining capacity, aka, there is no specific limit for that appointment type.
That scenario has been accounted for an several test cases already exist for it
should we read the appointment id from savedAppointmentDocument instead as its after save and will almost guarantee appointment id being there
rename to resourcesWithCapacity
If the appointment has skipAvailability check set to false, it might not have capacity. I think approvedResources makes more sense with that field \(which has yet to be implemented in this flow\)
The field was there anyway, but I’ll combine `savedAppointmentDocument` and `allAppointmentDataDocument` since they should already be the same object and there’s no need to have them both"
8a493a8f89f9c9d108922bd83af39f776ee6c76b,"diff --git a/gradle.properties b/gradle.properties
index 319096b1c..5092163a0 100644
--- a/gradle.properties
+++ b/gradle.properties
@@ -1 +1 @@
-dbChecksum=121d5164d9283e5edb68508ef6794e62
+dbChecksum=158dbf4434a8060b2244b7a11aa8c4e9
diff --git a/src/component-test/java/com/manh/cp/appointment/appointment/AppointmentCarrierVendorParameterCriteriaTest.java b/src/component-test/java/com/manh/cp/appointment/appointment/AppointmentCarrierVendorParameterCriteriaTest.java
index bd081bbf1..7830cd4cc 100644
--- a/src/component-test/java/com/manh/cp/appointment/appointment/AppointmentCarrierVendorParameterCriteriaTest.java
+++ b/src/component-test/java/com/manh/cp/appointment/appointment/AppointmentCarrierVendorParameterCriteriaTest.java
@@ -22,6 +22,7 @@ import java.time.LocalDateTime;
 import java.util.ArrayList;
 import java.util.List;
 import java.util.Map;
+import java.util.Objects;
 
 import org.junit.After;
 import org.junit.Assert;
@@ -36,6 +37,7 @@ import org.springframework.transaction.annotation.Transactional;
 import com.manh.cp.appointment.AbstractComponentTest;
 import com.manh.cp.appointment.appointment.api.domain.Appointment;
 import com.manh.cp.appointment.appointment.api.service.AppointmentService;
+import com.manh.cp.appointment.appointment.constants.FeatureFlagConstants;
 import com.manh.cp.appointment.appointment.constants.FeatureIdentifier;
 import com.manh.cp.appointment.config.api.domain.AppointmentParameterCriteria;
 import com.manh.cp.appointment.config.api.service.AppointmentParameterCriteriaService;
@@ -46,8 +48,17 @@ import com.manh.cp.config.standard.config.api.domain.ConfigRuleGroupXref;
 import com.manh.cp.config.standard.config.api.service.ConfigRuleGroupXrefService;
 import com.manh.cp.fw.common.Context;
 import com.manh.cp.fw.common.Document;
+import com.manh.cp.fw.core.exception.ManhRuntimeException;
 import com.manh.cp.fw.core.rest.RestApiResponse;
 import com.manh.cp.fw.dmtest.JsonUtil;
+import com.manh.cp.fw.errorHandler.MessageLevel;
+import com.manh.cp.fw.errorHandler.api.domain.AttributeErrorOverrideBase;
+import com.manh.cp.fw.errorHandler.api.domain.ErrorDefinition;
+import com.manh.cp.fw.errorHandler.api.domain.ErrorDefinitionBase;
+import com.manh.cp.fw.errorHandler.api.service.ErrorDefinitionService;
+import com.manh.cp.fw.errorHandler.rest.AttributeErrorOverrideController;
+import com.manh.cp.fw.errorHandler.rest.ErrorHandlerController;
+import com.manh.cp.fw.featureflags.test.AssumeFlagEnabled;
 import com.manh.cp.fw.query.Query;
 import com.manh.cp.rules.rules.api.domain.Rule;
 import com.manh.cp.rules.rules.api.domain.RuleAction;
@@ -86,6 +97,15 @@ public class AppointmentCarrierVendorParameterCriteriaTest extends AbstractCompo
     @Autowired
     ConfigRuleGroupXrefService configRuleGroupXrefService;
 
+    @Autowired
+    AttributeErrorOverrideController attributeErrorOverrideController;
+
+    @Autowired
+    ErrorHandlerController errorHandlerController;
+
+    @Autowired
+    ErrorDefinitionService errorDefinitionService;
+
     @Autowired
     private TestUtil testUtil;
 
@@ -147,6 +167,11 @@ public class AppointmentCarrierVendorParameterCriteriaTest extends AbstractCompo
                         .getFeatureId(),
                 true);
 
+        context.setTransactionAttribute(""component-test"",
+                FeatureIdentifier.FeatureFlags24_4.ERROR_OVERRIDE_VENDOR_AND_CARRIER
+                        .getFeatureId(),
+                true);
+
     }
 
     /**
@@ -403,6 +428,189 @@ public class AppointmentCarrierVendorParameterCriteriaTest extends AbstractCompo
                 Boolean.FALSE.toString());
     }
 
+    /**
+     * This test case will verify if error message level is set to Warning, and it is overridden in
+     * attributeErrorOverride for source type vendor error message will be treated as Error.
+     */
+    @Test
+    @AssumeFlagEnabled(FeatureFlagConstants.ERROR_OVERRIDE_VENDOR_AND_CARRIER)
+    public void testVendorApptCreationErrorForPastWithReturnRecommendationTrue()
+    {
+        changeDefaultErrorLevelToWarning(""APT::213"", MessageLevel.NON_DISPLAY.getId());
+
+        String timeIntervalDefinitionPath =
+                testDirectory + ""/TimeIntervalDefinition0-24.json"";
+        String initialResourceGroupPath1 =
+                testDirectory + ""/DockGroup.json"";
+        String initialResourceGroupPath2 =
+                testDirectory + ""/CarrierGroup.json"";
+        String initialResourceGroupPath3 =
+                testDirectory + ""/ProductClassGroup.json"";
+        testUtil.createGeneralConfigurationV2(context, timeIntervalDefinitionPath, initialResourceGroupPath1);
+        testUtil.createGeneralConfigurationV2(context, null, initialResourceGroupPath2);
+        testUtil.createGeneralConfigurationV2(context, null, initialResourceGroupPath3);
+
+        setApplicationParameterService(
+                AppointmentApplicationParameters.RETURN_RECOMMENDATION_IF_SLOT_NOT_FOUND.getParameterId(),
+                Boolean.TRUE.toString());
+        LocalDateTime preferredAppointmentTime =
+                testUtil.getPreviousSunday(LocalDateTime.now()).atTime(9, 0);
+
+        String appointmentPath1 =
+                testDirectory + ""/VendorAppointment1.json"";
+
+        String appointmentId1 = ""vendorApptTest_1"";
+
+        ErrorDefinition errorDefinition = errorDefinitionService.findByErrorDefinitionId(context, ""APT::213"");
+        Assert.assertEquals(MessageLevel.NON_DISPLAY.getId(), errorDefinition.getDefaultErrorLevelId());
+
+        ResponseEntity<RestApiResponse<Document>> scheduleResponse = null;
+
+        try
+        {
+            scheduleResponse = testUtil.scheduleCarrierAppointment(context,
+                    appointmentPath1, appointmentId1, preferredAppointmentTime.toString());
+            Assert.fail(""System will throw an error for appointment occurs in past"");
+        }
+        catch (ManhRuntimeException ex)
+        {
+            Assert.assertEquals(""APT::213"", ex.getMessages().get(0).getCode());
+            Assert.assertEquals(MessageLevel.ERROR.getId(), ex.getMessages().get(0).getType().name());
+            Assert.assertEquals(""Appointment Occurs in Past"",
+                    ex.getMessages().get(0).getDescription());
+        }
+        changeDefaultErrorLevelToWarning(""APT::213"", MessageLevel.FATAL.getId());
+
+        setApplicationParameterService(
+                AppointmentApplicationParameters.RETURN_RECOMMENDATION_IF_SLOT_NOT_FOUND.getParameterId(),
+                Boolean.FALSE.toString());
+    }
+
+    /**
+     * This test case will verify if error message level is set to Warning, and it is overridden in
+     * attributeErrorOverride for source type vendor error message will be treated as Error.
+     */
+    @Test
+    @AssumeFlagEnabled(FeatureFlagConstants.ERROR_OVERRIDE_VENDOR_AND_CARRIER)
+    public void testVendorApptCreationErrorForPastWithReturnRecommendationFalse()
+    {
+        changeDefaultErrorLevelToWarning(""APT::213"", MessageLevel.NON_DISPLAY.getId());
+
+        String timeIntervalDefinitionPath =
+                testDirectory + ""/TimeIntervalDefinition0-24.json"";
+        String initialResourceGroupPath1 =
+                testDirectory + ""/DockGroup.json"";
+        String initialResourceGroupPath2 =
+                testDirectory + ""/CarrierGroup.json"";
+        String initialResourceGroupPath3 =
+                testDirectory + ""/ProductClassGroup.json"";
+        testUtil.createGeneralConfigurationV2(context, timeIntervalDefinitionPath, initialResourceGroupPath1);
+        testUtil.createGeneralConfigurationV2(context, null, initialResourceGroupPath2);
+        testUtil.createGeneralConfigurationV2(context, null, initialResourceGroupPath3);
+
+        setApplicationParameterService(
+                AppointmentApplicationParameters.RETURN_RECOMMENDATION_IF_SLOT_NOT_FOUND.getParameterId(),
+                Boolean.FALSE.toString());
+        LocalDateTime preferredAppointmentTime =
+                testUtil.getPreviousSunday(LocalDateTime.now()).atTime(9, 0);
+
+        String appointmentPath1 =
+                testDirectory + ""/VendorAppointment1.json"";
+
+        String appointmentId1 = ""vendorApptTest_2"";
+
+        ErrorDefinition errorDefinition = errorDefinitionService.findByErrorDefinitionId(context, ""APT::213"");
+        Assert.assertEquals(MessageLevel.NON_DISPLAY.getId(), errorDefinition.getDefaultErrorLevelId());
+
+        ResponseEntity<RestApiResponse<Document>> scheduleResponse = null;
+
+        try
+        {
+            scheduleResponse = testUtil.scheduleCarrierAppointment(context,
+                    appointmentPath1, appointmentId1, preferredAppointmentTime.toString());
+            Assert.fail(""System will throw an error for appointment occurs in past"");
+        }
+        catch (ManhRuntimeException ex)
+        {
+            Assert.assertEquals(""APT::213"", ex.getMessages().get(0).getCode());
+            Assert.assertEquals(MessageLevel.ERROR.getId(), ex.getMessages().get(0).getType().name());
+            Assert.assertEquals(""Appointment Occurs in Past"",
+                    ex.getMessages().get(0).getDescription());
+        }
+        changeDefaultErrorLevelToWarning(""APT::213"", MessageLevel.FATAL.getId());
+
+    }
+
+    /**
+     * This test case will verify if appointment create by shipped and edited by vendor attributeErrorOverride for
+     * source type vendor error message will be treated as Error.
+     */
+    @Test
+    @AssumeFlagEnabled(FeatureFlagConstants.ERROR_OVERRIDE_VENDOR_AND_CARRIER)
+    public void testVendorApptEditErrorForPast()
+    {
+        changeDefaultErrorLevelToWarning(""APT::213"", MessageLevel.NON_DISPLAY.getId());
+
+        String timeIntervalDefinitionPath =
+                testDirectory + ""/TimeIntervalDefinition0-24.json"";
+        String initialResourceGroupPath1 =
+                testDirectory + ""/DockGroup.json"";
+        String initialResourceGroupPath2 =
+                testDirectory + ""/CarrierGroup.json"";
+        String initialResourceGroupPath3 =
+                testDirectory + ""/ProductClassGroup.json"";
+        testUtil.createGeneralConfigurationV2(context, timeIntervalDefinitionPath, initialResourceGroupPath1);
+        testUtil.createGeneralConfigurationV2(context, null, initialResourceGroupPath2);
+        testUtil.createGeneralConfigurationV2(context, null, initialResourceGroupPath3);
+
+        setApplicationParameterService(
+                AppointmentApplicationParameters.RETURN_RECOMMENDATION_IF_SLOT_NOT_FOUND.getParameterId(),
+                Boolean.FALSE.toString());
+        LocalDateTime preferredAppointmentTime =
+                testUtil.getPreviousSunday(LocalDateTime.now()).atTime(9, 0);
+
+        String appointmentPath1 =
+                testDirectory + ""/VendorAppointment1.json"";
+
+        String appointmentId1 = ""vendorApptTest_3"";
+
+        ErrorDefinition errorDefinition = errorDefinitionService.findByErrorDefinitionId(context, ""APT::213"");
+        Assert.assertEquals(MessageLevel.NON_DISPLAY.getId(), errorDefinition.getDefaultErrorLevelId());
+
+        ResponseEntity<RestApiResponse<Document>> scheduleResponse = null;
+
+        scheduleResponse = testUtil.scheduleAppointment(context,
+                appointmentPath1, appointmentId1, preferredAppointmentTime.toString());
+
+        Assert.assertTrue(Objects.nonNull(scheduleResponse.getBody().getData()));
+        Assert.assertTrue(scheduleResponse.getBody().isSuccess());
+
+        try
+        {
+            scheduleResponse = testUtil.editCarrierAppointment(context,
+                    appointmentPath1, appointmentId1, preferredAppointmentTime.toString(), null);
+            Assert.fail(""System will throw an error for appointment occurs in past"");
+        }
+        catch (ManhRuntimeException ex)
+        {
+            Assert.assertEquals(""APT::213"", ex.getMessages().get(0).getCode());
+            Assert.assertEquals(MessageLevel.ERROR.getId(), ex.getMessages().get(0).getType().name());
+            Assert.assertEquals(""Appointment Occurs in Past"",
+                    ex.getMessages().get(0).getDescription());
+        }
+        changeDefaultErrorLevelToWarning(""APT::213"", MessageLevel.FATAL.getId());
+
+    }
+
+    private void changeDefaultErrorLevelToWarning(String errorDefinitionId, String errorLevel)
+    {
+        Document document = new Document();
+        document.put(ErrorDefinitionBase.Fields.ERROR_DEFINITION_ID.getCode(), errorDefinitionId);
+        document.put(ErrorDefinitionBase.Fields.DEFAULT_ERROR_LEVEL_ID.getCode(), errorLevel);
+        document.put(AttributeErrorOverrideBase.Fields.ERROR_LEVEL_ID.getCode(), errorLevel);
+        errorHandlerController.saveErrorMessage(context, document, null, null);
+    }
+
     private Document fetchAppointmentParameterStrategy()
     {
 
diff --git a/src/component-test/resources/application-component-test.yml b/src/component-test/resources/application-component-test.yml
index 09a9dce7d..603c83e32 100644
--- a/src/component-test/resources/application-component-test.yml
+++ b/src/component-test/resources/application-component-test.yml
@@ -26,3 +26,5 @@ calendarId:
 calendar:
   windowId:
     prefix: CW
+
+errorHandler.errorOverride.contextAttributes: AppointmentSource
diff --git a/src/component-test/resources/seedData/attributeErrorOverride.json b/src/component-test/resources/seedData/attributeErrorOverride.json
new file mode 100644
index 000000000..daa2b9d6e
--- /dev/null
+++ b/src/component-test/resources/seedData/attributeErrorOverride.json
@@ -0,0 +1,12 @@
+{
+  ""ProfileId"": ""base"",
+  ""Data"": [
+    {
+      ""ErrorDefinitionId"": ""APT::213"",
+      ""ContextAttributeId"": ""AppointmentSource"",
+      ""AttributeValue"": ""VENDOR"",
+      ""ErrorLevelId"": ""ERROR"",
+      ""ErrorText"": ""Appointment Occurs in Past""
+    }
+  ]
+}
diff --git a/src/main/java/com/manh/cp/appointment/appointment/constants/AppointmentConstants.java b/src/main/java/com/manh/cp/appointment/appointment/constants/AppointmentConstants.java
index 9c5baf9f9..050500105 100644
--- a/src/main/java/com/manh/cp/appointment/appointment/constants/AppointmentConstants.java
+++ b/src/main/java/com/manh/cp/appointment/appointment/constants/AppointmentConstants.java
@@ -284,4 +284,8 @@ public class AppointmentConstants
 
     public static final String DATA = ""Data"";
 
+    public static final String APPOINTMENT_SOURCE = ""AppointmentSource"";
+
+    public static final String SC_TRANSACTION_NAME_SPACE = ""ScTransaction"";
+
 }
diff --git a/src/main/java/com/manh/cp/appointment/appointment/constants/FeatureFlagConstants.java b/src/main/java/com/manh/cp/appointment/appointment/constants/FeatureFlagConstants.java
index 04c85e212..9e0baccc0 100644
--- a/src/main/java/com/manh/cp/appointment/appointment/constants/FeatureFlagConstants.java
+++ b/src/main/java/com/manh/cp/appointment/appointment/constants/FeatureFlagConstants.java
@@ -26,4 +26,6 @@ public class FeatureFlagConstants
     }
 
     public static final String AVOID_RECOMMENDING_PAST_DATE_TIMESLOTS = ""SUP-520690#2024-08"";
+
+    public static final String ERROR_OVERRIDE_VENDOR_AND_CARRIER = ""SUP-495304#2024-08"";
 }
diff --git a/src/main/java/com/manh/cp/appointment/appointment/constants/FeatureIdentifier.java b/src/main/java/com/manh/cp/appointment/appointment/constants/FeatureIdentifier.java
index 60e2eb9f9..4ab0ccd10 100644
--- a/src/main/java/com/manh/cp/appointment/appointment/constants/FeatureIdentifier.java
+++ b/src/main/java/com/manh/cp/appointment/appointment/constants/FeatureIdentifier.java
@@ -100,7 +100,8 @@ public interface FeatureIdentifier
 
     enum FeatureFlags24_4 implements FeatureIdentifier
     {
-        DISPLAY_APPOINTMENT_CONTENT_IN_APPOINTMENTS_UI(""SUP-504432#2024-08"");
+        DISPLAY_APPOINTMENT_CONTENT_IN_APPOINTMENTS_UI(""SUP-504432#2024-08""),
+        ERROR_OVERRIDE_VENDOR_AND_CARRIER(""SUP-495304#2024-08"");
 
         private final String featureId;
 
diff --git a/src/main/java/com/manh/cp/appointment/appointment/impl/service/AppointmentManagerHelper.java b/src/main/java/com/manh/cp/appointment/appointment/impl/service/AppointmentManagerHelper.java
index 8dc75bfc4..95201037d 100644
--- a/src/main/java/com/manh/cp/appointment/appointment/impl/service/AppointmentManagerHelper.java
+++ b/src/main/java/com/manh/cp/appointment/appointment/impl/service/AppointmentManagerHelper.java
@@ -1207,6 +1207,13 @@ public class AppointmentManagerHelper
                 .getParameterValue(AppointmentApplicationParameters.RETURN_RECOMMENDATION_IF_SLOT_NOT_FOUND);
 
         AppointmentDTO appointmentDTO = getAppointmentDTO(document);
+
+        if (featureFlagService.isOn(FeatureIdentifier.FeatureFlags24_4.ERROR_OVERRIDE_VENDOR_AND_CARRIER) &&
+                appointmentDTO.isInitialized(SOURCE_TYPE) && StringUtils.isNotBlank(appointmentDTO.getSourceType()))
+        {
+            context.setAdditionalAttribute(SC_TRANSACTION_NAME_SPACE, APPOINTMENT_SOURCE,
+                    appointmentDTO.getSourceType());
+        }
         String contentType = (String) document.get(CONTENT_TYPE);
         appointmentDTO = scheduleCarrierAppointmentUserExit.preprocess(context, appointmentDTO);
 
@@ -1524,6 +1531,13 @@ public class AppointmentManagerHelper
                 .getParameterValue(AppointmentApplicationParameters.RETURN_RECOMMENDATION_IF_SLOT_NOT_FOUND);
 
         AppointmentDTO appointmentDTO = getAppointmentDTO(inputDocument);
+
+        if (featureFlagService.isOn(FeatureIdentifier.FeatureFlags24_4.ERROR_OVERRIDE_VENDOR_AND_CARRIER) &&
+                appointmentDTO.isInitialized(SOURCE_TYPE) && StringUtils.isNotBlank(appointmentDTO.getSourceType()))
+        {
+            context.setAdditionalAttribute(SC_TRANSACTION_NAME_SPACE, APPOINTMENT_SOURCE,
+                    appointmentDTO.getSourceType());
+        }
         appointmentDTO = editCarrierAppointmentUserExit.preprocess(context, appointmentDTO);
         Appointment existingAppointment =
                 appointmentService.findByAppointmentId(context, appointmentDTO.getAppointmentId());
diff --git a/src/main/resources/component-cp.properties b/src/main/resources/component-cp.properties
index 8e9c6c309..bc05051b7 100644
--- a/src/main/resources/component-cp.properties
+++ b/src/main/resources/component-cp.properties
@@ -48,3 +48,6 @@ spring.jpa.open-in-view=false
 # Support for Max Active Release ID
 MAX_SUPPORTED_ACTIVE_RELEASE_ID=2024-06
 server.tomcat.reject-illegal-header=false
+
+# Error Message Override
+errorHandler.errorOverride.contextAttributes=AppointmentSource
diff --git a/src/main/resources/seedData/contextAttributeDefinition__appointment.json b/src/main/resources/seedData/contextAttributeDefinition__appointment.json
new file mode 100644
index 000000000..87f63534a
--- /dev/null
+++ b/src/main/resources/seedData/contextAttributeDefinition__appointment.json
@@ -0,0 +1,11 @@
+{
+  ""ProfileId"": ""systemAugmentable"",
+  ""Data"": [
+    {
+      ""ContextAttributeDefinitionId"": ""AppointmentSource"",
+      ""AttributeName"": ""AppointmentSource"",
+      ""AttributeNameSpace"": ""ScTransaction"",
+      ""AttributeTypeId"": ""ADDITIONAL""
+    }
+  ]
+}
diff --git a/version.txt b/version.txt
index d5a159609..8b0beab16 100644
--- a/version.txt
+++ b/version.txt
@@ -1 +1 @@
-20.10.0
+20.11.0
","can we add Assert.fail\(\) here?
No FF mock. Use AssumeFF annotation
ensure this is unique across all TC
add a message in “fail”
reset this to false after TC is done.

Add a TC where application param is set to false.
can this be added through test seed?
can this be done through test seed to avoid this additional code?
any where else in hierarchy overrides this in base? as this is the lowest don’t see much a concern. Please do check once.
please do add initialization check for source type
This can not be done through seed data because this can create issue with other test case."
c8ece09049aab49a3563e0270356ff252cab07ec,"diff --git a/gradle.properties b/gradle.properties
index c1cfa6731..63e41475e 100644
--- a/gradle.properties
+++ b/gradle.properties
@@ -1 +1 @@
-dbChecksum=ac7f3b26c811a47aa69ef709965c6ab2
+dbChecksum=5cf61ada06975e25d78b471e00b5184e
diff --git a/src/component-test/java/com/manh/cp/appointment/ParameterizedTestBase.java b/src/component-test/java/com/manh/cp/appointment/ParameterizedTestBase.java
deleted file mode 100644
index 4891eba96..000000000
--- a/src/component-test/java/com/manh/cp/appointment/ParameterizedTestBase.java
+++ /dev/null
@@ -1,45 +0,0 @@
-/*
- * Copyright &#169; 2024 Manhattan Associates, Inc. All Rights Reserved.
- *
- * Confidential, Proprietary and Trade Secrets Notice
- *
- * Use of this software is governed by a license agreement. This software
- * contains confidential, proprietary and trade secret information of
- * Manhattan Associates, Inc. and is protected under United States and
- * international copyright and other intellectual property laws. Use, disclosure,
- * reproduction, modification, distribution, or storage in a retrieval system in
- * any form or by any means is prohibited without the prior express written
- * permission of Manhattan Associates, Inc.
- *
- * Manhattan Associates, Inc.
- * 2300 Windy Ridge Parkway, 10th Floor
- * Atlanta, GA 30339 USA
- */
-package com.manh.cp.appointment;
-
-import org.junit.ClassRule;
-import org.junit.Rule;
-import org.junit.experimental.categories.Category;
-import org.junit.runner.RunWith;
-import org.junit.runners.Parameterized;
-import org.springframework.boot.test.context.SpringBootTest;
-import org.springframework.context.annotation.ComponentScan;
-import org.springframework.test.context.ActiveProfiles;
-import org.springframework.test.context.junit4.rules.SpringClassRule;
-import org.springframework.test.context.junit4.rules.SpringMethodRule;
-
-import com.manh.cp.test.category.ComponentTests;
-
-@Category(ComponentTests.class)
-@RunWith(Parameterized.class)
-@ComponentScan(lazyInit = true)
-@SpringBootTest(classes = AppointmentApp.class, webEnvironment = SpringBootTest.WebEnvironment.DEFINED_PORT)
-@ActiveProfiles(""component-test"")
-public abstract class ParameterizedTestBase extends AbstractComponentTest
-{
-    @ClassRule
-    public static final SpringClassRule SPRING_CLASS_RULE = new SpringClassRule();
-
-    @Rule
-    public final SpringMethodRule springMethodRule = new SpringMethodRule();
-}
diff --git a/src/component-test/java/com/manh/cp/appointment/appointment/AppointmentTimeSlotTest.java b/src/component-test/java/com/manh/cp/appointment/appointment/AppointmentTimeSlotTest.java
index 3716bd242..461e6bd19 100644
--- a/src/component-test/java/com/manh/cp/appointment/appointment/AppointmentTimeSlotTest.java
+++ b/src/component-test/java/com/manh/cp/appointment/appointment/AppointmentTimeSlotTest.java
@@ -98,7 +98,7 @@ public class AppointmentTimeSlotTest extends AbstractComponentTest
                 ""01"", null, null, ""1"");
 
         setApplicationParameterService(
-                AppointmentApplicationParameters.APT_TIME_SLOT_POPULATION.getParameterId(),
+                AppointmentApplicationParameters.APT_REDESIGN_ENABLED.getParameterId(),
                 Boolean.TRUE.toString());
     }
 
@@ -110,7 +110,7 @@ public class AppointmentTimeSlotTest extends AbstractComponentTest
         setAppointmentParameterMinAppointmentDuration(60L);
 
         setApplicationParameterService(
-                AppointmentApplicationParameters.APT_TIME_SLOT_POPULATION.getParameterId(),
+                AppointmentApplicationParameters.APT_REDESIGN_ENABLED.getParameterId(),
                 Boolean.FALSE.toString());
     }
 
@@ -200,14 +200,14 @@ public class AppointmentTimeSlotTest extends AbstractComponentTest
                 ""appointment/appointment/appointmentTimeSlot/testPopulationOfAppointmentTimeSlotWithExistingPopulatedTimeSlots/TimeIntervalDefinition.json"";
 
         Assert.assertEquals(0,
-                timeSlotService.findTimeSlotsAssociatedWithTimeIntervalDefinition(context,
+                timeSlotService.findByTimeIntervalDefinitionId(context,
                         ""TimeIntervalDefinition_tPOATWEPTS"").size());
 
         Document timeIntervalDefinitionDocument = JsonUtil.readDocument(timeIntervalDefinitionPath);
         timeIntervalDefinitionMapService.saveTimeIntervalDefinition(context, timeIntervalDefinitionDocument, null);
 
         Assert.assertNotEquals(0,
-                timeSlotService.findTimeSlotsAssociatedWithTimeIntervalDefinition(context,
+                timeSlotService.findByTimeIntervalDefinitionId(context,
                         ""TimeIntervalDefinition_tPOATWEPTS"").size());
     }
 
diff --git a/src/component-test/java/com/manh/cp/appointment/appointment/DaylightSavings/AppointmentDaylightChangeParameterizedTest.java b/src/component-test/java/com/manh/cp/appointment/appointment/DaylightSavings/AppointmentDaylightChangeParameterizedTest.java
index 92a3ad5d8..d167e6090 100644
--- a/src/component-test/java/com/manh/cp/appointment/appointment/DaylightSavings/AppointmentDaylightChangeParameterizedTest.java
+++ b/src/component-test/java/com/manh/cp/appointment/appointment/DaylightSavings/AppointmentDaylightChangeParameterizedTest.java
@@ -38,7 +38,6 @@ import org.springframework.http.HttpStatus;
 import org.springframework.transaction.annotation.Propagation;
 import org.springframework.transaction.annotation.Transactional;
 
-import com.manh.cp.appointment.ParameterizedTestBase;
 import com.manh.cp.appointment.appointment.DataRemover;
 import com.manh.cp.appointment.appointment.TestUtil;
 import com.manh.cp.appointment.appointment.api.service.AppointmentMapService;
@@ -47,6 +46,7 @@ import com.manh.cp.appointment.appointment.client.dto.calendar.CalendarResponseD
 import com.manh.cp.appointment.appointment.constants.FeatureIdentifier;
 import com.manh.cp.appointment.appointment.impl.service.AppointmentManager;
 import com.manh.cp.appointment.appointment.mocks.MockAppointmentUtil;
+import com.manh.cp.appointment.common.ParameterizedTestBase;
 import com.manh.cp.appointment.core.api.service.ResourceGroupService;
 import com.manh.cp.fw.common.Context;
 import com.manh.cp.fw.common.Document;
diff --git a/src/component-test/java/com/manh/cp/appointment/appointment/DaylightSavings/AppointmentWithMultipleResourceGroupParameterizedTest.java b/src/component-test/java/com/manh/cp/appointment/appointment/DaylightSavings/AppointmentWithMultipleResourceGroupParameterizedTest.java
index 0cf019bf1..d35f2dd7a 100644
--- a/src/component-test/java/com/manh/cp/appointment/appointment/DaylightSavings/AppointmentWithMultipleResourceGroupParameterizedTest.java
+++ b/src/component-test/java/com/manh/cp/appointment/appointment/DaylightSavings/AppointmentWithMultipleResourceGroupParameterizedTest.java
@@ -38,7 +38,6 @@ import org.springframework.http.HttpStatus;
 import org.springframework.transaction.annotation.Propagation;
 import org.springframework.transaction.annotation.Transactional;
 
-import com.manh.cp.appointment.ParameterizedTestBase;
 import com.manh.cp.appointment.appointment.DataRemover;
 import com.manh.cp.appointment.appointment.TestUtil;
 import com.manh.cp.appointment.appointment.api.service.AppointmentMapService;
@@ -47,6 +46,7 @@ import com.manh.cp.appointment.appointment.client.dto.calendar.CalendarResponseD
 import com.manh.cp.appointment.appointment.constants.FeatureIdentifier;
 import com.manh.cp.appointment.appointment.impl.service.AppointmentManager;
 import com.manh.cp.appointment.appointment.mocks.MockAppointmentUtil;
+import com.manh.cp.appointment.common.ParameterizedTestBase;
 import com.manh.cp.appointment.core.api.service.ResourceGroupService;
 import com.manh.cp.fw.common.Context;
 import com.manh.cp.fw.common.Document;
diff --git a/src/component-test/java/com/manh/cp/appointment/common/ParameterizedTestBase.java b/src/component-test/java/com/manh/cp/appointment/common/ParameterizedTestBase.java
new file mode 100644
index 000000000..53839bdbb
--- /dev/null
+++ b/src/component-test/java/com/manh/cp/appointment/common/ParameterizedTestBase.java
@@ -0,0 +1,402 @@
+/*
+ * Copyright &#169; 2021 Manhattan Associates, Inc. All Rights Reserved.
+ *
+ * Confidential, Proprietary and Trade Secrets Notice
+ *
+ * Use of this software is governed by a license agreement. This software
+ * contains confidential, proprietary and trade secret information of
+ * Manhattan Associates, Inc. and is protected under United States and
+ * international copyright and other intellectual property laws. Use, disclosure,
+ * reproduction, modification, distribution, or storage in a retrieval system in
+ * any form or by any means is prohibited without the prior express written
+ * permission of Manhattan Associates, Inc.
+ *
+ * Manhattan Associates, Inc.
+ * 2300 Windy Ridge Parkway, 10th Floor
+ * Atlanta, GA 30339 USA
+ */
+package com.manh.cp.appointment.common;
+
+import java.util.Arrays;
+import java.util.List;
+import java.util.Map;
+
+import com.fasterxml.jackson.core.JsonProcessingException;
+import com.fasterxml.jackson.databind.ObjectMapper;
+import org.json.JSONException;
+import org.junit.ClassRule;
+import org.junit.Rule;
+import org.junit.experimental.categories.Category;
+import org.junit.runner.RunWith;
+import org.junit.runners.Parameterized;
+import org.skyscreamer.jsonassert.JSONAssert;
+import org.skyscreamer.jsonassert.JSONCompareMode;
+import org.springframework.beans.factory.annotation.Autowired;
+import org.springframework.boot.test.context.SpringBootTest;
+import org.springframework.context.annotation.ComponentScan;
+import org.springframework.test.context.ActiveProfiles;
+import org.springframework.test.context.junit4.rules.SpringClassRule;
+import org.springframework.test.context.junit4.rules.SpringMethodRule;
+
+import com.manh.cp.appointment.AbstractComponentTest;
+import com.manh.cp.appointment.AppointmentApp;
+import com.manh.cp.appointment.appointment.api.domain.Appointment;
+import com.manh.cp.appointment.appointment.rest.AppointmentController;
+import com.manh.cp.appointment.core.api.domain.DayLevelUtilization;
+import com.manh.cp.appointment.core.api.domain.FacilityDayLevelScope;
+import com.manh.cp.appointment.core.api.domain.FacilityLevelUtilization;
+import com.manh.cp.appointment.core.api.domain.ResourceGroup;
+import com.manh.cp.appointment.core.api.domain.TimeIntervalDefinition;
+import com.manh.cp.appointment.core.api.domain.TimeIntervalUtilization;
+import com.manh.cp.appointment.core.rest.DayLevelUtilizationController;
+import com.manh.cp.appointment.core.rest.FacilityDayLevelScopeController;
+import com.manh.cp.appointment.core.rest.FacilityLevelUtilizationController;
+import com.manh.cp.appointment.core.rest.ResourceGroupController;
+import com.manh.cp.appointment.core.rest.TimeIntervalDefinitionController;
+import com.manh.cp.appointment.core.rest.TimeIntervalUtilizationController;
+import com.manh.cp.config.JacksonObjectMapperConfig;
+import com.manh.cp.fw.common.Context;
+import com.manh.cp.fw.common.Document;
+import com.manh.cp.fw.core.logging.CPLoggerFactory;
+import com.manh.cp.fw.core.logging.Logger;
+import com.manh.cp.fw.dmtest.JsonUtil;
+import com.manh.cp.fw.query.Query;
+import com.manh.cp.test.category.ComponentTests;
+
+@Category(ComponentTests.class)
+@RunWith(Parameterized.class)
+@ComponentScan(lazyInit = true)
+@SpringBootTest(classes = AppointmentApp.class, webEnvironment = SpringBootTest.WebEnvironment.DEFINED_PORT)
+@ActiveProfiles(""component-test"")
+public abstract class ParameterizedTestBase extends AbstractComponentTest
+{
+    private static final Logger logger = CPLoggerFactory.getLogger(ParameterizedTestBase.class);
+
+    protected static ObjectMapper objectMapper = JacksonObjectMapperConfig.objectMapperBuilder().build();
+
+    public static String FEATURE_FLAGS = ""FeatureFlags"";
+
+    public static String EXTENSION_POINTS = ""ExtensionPoints"";
+
+    @ClassRule
+    public static final SpringClassRule SPRING_CLASS_RULE = new SpringClassRule();
+
+    @Rule
+    public final SpringMethodRule springMethodRule = new SpringMethodRule();
+
+    @Autowired
+    private ResourceGroupController resourceGroupController;
+
+    @Autowired
+    private AppointmentController appointmentController;
+
+    @Autowired
+    private TimeIntervalUtilizationController timeIntervalUtilizationController;
+
+    @Autowired
+    private DayLevelUtilizationController dayLevelUtilizationController;
+
+    @Autowired
+    private FacilityLevelUtilizationController facilityLevelUtilizationController;
+
+    @Autowired
+    private TimeIntervalDefinitionController timeIntervalDefinitionController;
+
+    @Autowired
+    private FacilityDayLevelScopeController facilityDayLevelScopeController;
+
+    public Context context;
+
+    public String testName;
+
+    public String directory;
+
+    public enum Entities
+    {
+        RESOURCE_GROUP(ResourceGroup.ENTITY_NAME),
+        APPOINTMENT(Appointment.ENTITY_NAME),
+        TIME_INTERVAL_UTILIZATION(TimeIntervalUtilization.ENTITY_NAME),
+        DAY_LEVEL_UTILIZATION(DayLevelUtilization.ENTITY_NAME),
+        FACILITY_LEVEL_UTILIZATION(FacilityLevelUtilization.ENTITY_NAME),
+        TIME_INTERVAL_DEFINITION(TimeIntervalDefinition.ENTITY_NAME),
+        FACILITY_DAY_LEVEL_SCOPE(FacilityDayLevelScope.ENTITY_NAME),
+        ;
+
+        private final String name;
+
+        Entities(String name)
+        {
+            this.name = name;
+        }
+
+        public String getName()
+        {
+            return this.name;
+        }
+
+        public static Entities searchByName(String name)
+        {
+            return Arrays.stream(Entities.values()).filter(entities -> entities.getName().equalsIgnoreCase(name))
+                    .findAny().orElse(null);
+        }
+
+    }
+
+    public Document getFile(String inputFile)
+    {
+        try
+        {
+            logger.debug(""-- Loading file: {}"", inputFile);
+            return JsonUtil.readDocument(inputFile);
+        }
+        catch (Exception e)
+        {
+            logger.error(""-- Loading the following file failed! : {}"", inputFile);
+            return null;
+        }
+    }
+
+    public void importEntities(Document input)
+    {
+        for (String key : input.getMap().keySet())
+        {
+            List<Map<String, Object>> list = (List<Map<String, Object>>) input.get(key);
+            Entities entityType = Entities.searchByName(key);
+
+            switch (entityType)
+            {
+                case RESOURCE_GROUP:
+                {
+                    list.forEach(
+                            map -> resourceGroupController.createResourceGroup(context, new Document(map), null, null));
+                    break;
+                }
+                case APPOINTMENT:
+                {
+                    list.forEach(map -> appointmentController.createAppointment(context, new Document(map), null, null,
+                            null));
+                    break;
+                }
+                case TIME_INTERVAL_UTILIZATION:
+                {
+                    list.forEach(map -> timeIntervalUtilizationController.createTimeIntervalUtilization(context,
+                            new Document(map), null, null, null));
+                    break;
+                }
+                case DAY_LEVEL_UTILIZATION:
+                {
+                    list.forEach(map -> dayLevelUtilizationController.createDayLevelUtilization(context,
+                            new Document(map), null, null, null));
+                    break;
+                }
+                case FACILITY_LEVEL_UTILIZATION:
+                {
+                    list.forEach(map -> facilityLevelUtilizationController.createFacilityLevelUtilization(context,
+                            new Document(map), null, null, null));
+                    break;
+                }
+                case TIME_INTERVAL_DEFINITION:
+                {
+                    list.forEach(map -> timeIntervalDefinitionController.saveTimeIntervalDefinition(context,
+                            new Document(map), null, null));
+                    break;
+                }
+                case FACILITY_DAY_LEVEL_SCOPE:
+                {
+                    list.forEach(map -> facilityDayLevelScopeController.saveFacilityDayLevelScope(context,
+                            new Document(map), null, null));
+                    break;
+                }
+            }
+        }
+    }
+
+    public void validateEntityOutput(int fileNumber)
+    {
+        Document output = getFile(directory + ""output/"" + fileNumber + "".json"");
+
+        for (String key : output.getMap().keySet())
+        {
+            List<Map<String, Object>> list = (List<Map<String, Object>>) output.get(key);
+            Entities entityType = Entities.searchByName(key);
+
+            switch (entityType)
+            {
+                case RESOURCE_GROUP:
+                {
+                    List<Document> documents = resourceGroupController
+                            .listResourceGroups(context, new Query(null, 0, Integer.MAX_VALUE), null, null, null, null)
+                            .getBody().getData();
+                    assertPojoEquals(list, documents);
+                    break;
+                }
+                case APPOINTMENT:
+                {
+                    List<Document> documents = appointmentController
+                            .listAppointments(context, new Query(null, 0, Integer.MAX_VALUE), null, null, null, null,
+                                    null)
+                            .getBody().getData();
+                    assertPojoEquals(list, documents);
+                    break;
+                }
+                case TIME_INTERVAL_UTILIZATION:
+                {
+                    List<Document> documents = timeIntervalUtilizationController
+                            .listTimeIntervalUtilizations(context, new Query(null, 0, Integer.MAX_VALUE), null, null,
+                                    null, null, null)
+                            .getBody().getData();
+                    assertPojoEquals(list, documents);
+                    break;
+                }
+                case DAY_LEVEL_UTILIZATION:
+                {
+                    List<Document> documents = dayLevelUtilizationController
+                            .listDayLevelUtilizations(context, new Query(null, 0, Integer.MAX_VALUE), null, null, null,
+                                    null, null)
+                            .getBody().getData();
+                    assertPojoEquals(list, documents);
+                    break;
+                }
+                case FACILITY_LEVEL_UTILIZATION:
+                {
+                    List<Document> documents = facilityLevelUtilizationController
+                            .listFacilityLevelUtilizations(context, new Query(null, 0, Integer.MAX_VALUE), null, null,
+                                    null,
+                                    null, null)
+                            .getBody().getData();
+                    assertPojoEquals(list, documents);
+                    break;
+                }
+                case TIME_INTERVAL_DEFINITION:
+                {
+                    List<Document> documents = timeIntervalDefinitionController
+                            .listTimeIntervalDefinitions(context, new Query(null, 0, Integer.MAX_VALUE), null, null,
+                                    null, null)
+                            .getBody().getData();
+                    assertPojoEquals(list, documents);
+                    break;
+                }
+                case FACILITY_DAY_LEVEL_SCOPE:
+                {
+                    List<Document> documents = facilityDayLevelScopeController
+                            .listFacilityDayLevelScopes(context, new Query(null, 0, Integer.MAX_VALUE), null, null,
+                                    null, null)
+                            .getBody().getData();
+                    assertPojoEquals(list, documents);
+                    break;
+                }
+            }
+        }
+    }
+
+    public void deleteEntities(Document document)
+    {
+        for (String key : document.getMap().keySet())
+        {
+            List<Map<String, Object>> list = (List<Map<String, Object>>) document.get(key);
+            Entities entityType = Entities.searchByName(key);
+
+            switch (entityType)
+            {
+                case RESOURCE_GROUP:
+                {
+                    List<Document> documents = resourceGroupController
+                            .listResourceGroups(context, new Query(null, 0, Integer.MAX_VALUE), null, null,
+                                    null, null)
+                            .getBody().getData();
+                    documents.forEach(map -> resourceGroupController
+                            .deleteResourceGroupByBusinessKey(context, map));
+                    break;
+                }
+                case APPOINTMENT:
+                {
+                    list.forEach(
+                            map -> appointmentController.deleteAppointmentByBusinessKey(context, new Document(map)));
+                    break;
+                }
+                case TIME_INTERVAL_UTILIZATION:
+                {
+                    List<Document> documents = timeIntervalUtilizationController
+                            .listTimeIntervalUtilizations(context, new Query(null, 0, Integer.MAX_VALUE), null, null,
+                                    null, null, null)
+                            .getBody().getData();
+                    documents.forEach(map -> timeIntervalUtilizationController
+                            .deleteTimeIntervalUtilizationByBusinessKey(context, map));
+                    break;
+                }
+                case DAY_LEVEL_UTILIZATION:
+                {
+                    List<Document> documents = dayLevelUtilizationController
+                            .listDayLevelUtilizations(context, new Query(null, 0, Integer.MAX_VALUE), null, null,
+                                    null, null, null)
+                            .getBody().getData();
+                    documents.forEach(map -> dayLevelUtilizationController
+                            .deleteDayLevelUtilizationByBusinessKey(context, map));
+                    break;
+                }
+                case FACILITY_LEVEL_UTILIZATION:
+                {
+                    List<Document> documents = facilityLevelUtilizationController
+                            .listFacilityLevelUtilizations(context, new Query(null, 0, Integer.MAX_VALUE), null, null,
+                                    null, null, null)
+                            .getBody().getData();
+                    documents.forEach(map -> facilityLevelUtilizationController
+                            .deleteFacilityLevelUtilizationByBusinessKey(context, map));
+                    break;
+                }
+                case TIME_INTERVAL_DEFINITION:
+                {
+                    list.forEach(
+                            map -> timeIntervalDefinitionController.deleteTimeIntervalDefinitionByBusinessKey(context,
+                                    new Document(map)));
+                    break;
+                }
+                case FACILITY_DAY_LEVEL_SCOPE:
+                {
+                    List<Document> documents = facilityDayLevelScopeController
+                            .listFacilityDayLevelScopes(context, new Query(null, 0, Integer.MAX_VALUE), null, null,
+                                    null, null)
+                            .getBody().getData();
+                    documents.forEach(map -> facilityDayLevelScopeController
+                            .deleteFacilityDayLevelScopeByBusinessKey(context, map));
+                    break;
+                }
+            }
+        }
+    }
+
+    public void assertPojoEquals(List<Map<String, Object>> expectedMap, List<Document> actualDocument)
+    {
+        String expected = prettyPrint(expectedMap);
+        String actual = prettyPrint(actualDocument);
+
+        logger.debug(""expected json\n{}"", expected);
+        logger.debug(""actual json\n{}"", actual);
+
+        try
+        {
+            JSONAssert.assertEquals(expected, actual, JSONCompareMode.LENIENT);
+        }
+        catch (JSONException e)
+        {
+            throw new RuntimeException(e);
+        }
+    }
+
+    private String prettyPrint(Object object)
+    {
+        if (object == null)
+        {
+            return null;
+        }
+
+        try
+        {
+            return objectMapper.writerWithDefaultPrettyPrinter().writeValueAsString(object);
+        }
+        catch (JsonProcessingException e)
+        {
+            return object.toString();
+        }
+    }
+}
diff --git a/src/component-test/java/com/manh/cp/appointment/parameterizedTests/CapacityParameterizedTests.java b/src/component-test/java/com/manh/cp/appointment/parameterizedTests/CapacityParameterizedTests.java
new file mode 100644
index 000000000..9e59eaf12
--- /dev/null
+++ b/src/component-test/java/com/manh/cp/appointment/parameterizedTests/CapacityParameterizedTests.java
@@ -0,0 +1,168 @@
+/*
+ * Copyright &#169; 2020 Manhattan Associates, Inc. All Rights Reserved.
+ *
+ * Confidential, Proprietary and Trade Secrets Notice
+ *
+ * Use of this software is governed by a license agreement. This software
+ * contains confidential, proprietary and trade secret information of
+ * Manhattan Associates, Inc. and is protected under United States and
+ * international copyright and other intellectual property laws. Use, disclosure,
+ * reproduction, modification, distribution, or storage in a retrieval system in
+ * any form or by any means is prohibited without the prior express written
+ * permission of Manhattan Associates, Inc.
+ *
+ * Manhattan Associates, Inc.
+ * 2300 Windy Ridge Parkway, 10th Floor
+ * Atlanta, GA 30339 USA
+ */
+package com.manh.cp.appointment.parameterizedTests;
+
+import java.util.Arrays;
+import java.util.Collection;
+import java.util.List;
+import java.util.Map;
+
+import org.apache.commons.lang3.time.StopWatch;
+import org.junit.After;
+import org.junit.Before;
+import org.junit.Test;
+import org.junit.runners.Parameterized;
+import org.springframework.beans.factory.annotation.Autowired;
+
+import com.manh.cp.appointment.appointment.AppointmentApplicationParameters;
+import com.manh.cp.appointment.appointment.impl.service.CapacityManager;
+import com.manh.cp.appointment.common.ParameterizedTestBase;
+import com.manh.cp.appointment.core.dto.CapacityDTO;
+import com.manh.cp.appointment.core.dto.EnhancedAppointmentDTO;
+import com.manh.cp.fw.common.Context;
+import com.manh.cp.fw.common.Document;
+import com.manh.cp.fw.core.logging.CPLoggerFactory;
+import com.manh.cp.fw.core.logging.Logger;
+import com.manh.cp.fw.dmtest.JsonUtil;
+
+public class CapacityParameterizedTests extends ParameterizedTestBase
+{
+    private static List tests = Arrays.asList(new Object[][] {
+            { ""test 1"", ""appointment/appointment/parameterizedTests/capacityTests/test1/"" },
+            { ""test 2"", ""appointment/appointment/parameterizedTests/capacityTests/test2/"" },
+            { ""test 3"", ""appointment/appointment/parameterizedTests/capacityTests/test3/"" },
+            { ""test 4"", ""appointment/appointment/parameterizedTests/capacityTests/test4/"" },
+            { ""test 5"", ""appointment/appointment/parameterizedTests/capacityTests/test5/"" },
+            { ""test 6"", ""appointment/appointment/parameterizedTests/capacityTests/test6/"" },
+            { ""test 7"", ""appointment/appointment/parameterizedTests/capacityTests/test7/"" },
+            { ""test 8"", ""appointment/appointment/parameterizedTests/capacityTests/test8/"" },
+            { ""test 9"", ""appointment/appointment/parameterizedTests/capacityTests/test9/"" },
+            { ""test 10"", ""appointment/appointment/parameterizedTests/capacityTests/test10/"" },
+            { ""test 11"", ""appointment/appointment/parameterizedTests/capacityTests/test11/"" },
+            { ""test 12"", ""appointment/appointment/parameterizedTests/capacityTests/test12/"" },
+            { ""test 13"", ""appointment/appointment/parameterizedTests/capacityTests/test13/"" },
+    });
+
+    ///////////////////////////////////////////////////////////////////////////////////////////////////////////////////
+
+    private static final Logger logger = CPLoggerFactory.getLogger(CapacityParameterizedTests.class);
+
+    public CapacityParameterizedTests(String testName, String directory)
+    {
+        this.testName = testName;
+        this.directory = directory;
+    }
+
+    @Parameterized.Parameters(name = ""Appointment Parameterized Tests : {0}"")
+    public static Collection<Object[]> data()
+    {
+        return tests;
+    }
+
+    @Autowired
+    private CapacityManager capacityManager;
+
+    @Before
+    public void setup()
+    {
+        Document facility = JsonUtil.readDocument(directory + ""/config/facilityId.json"");
+        String facilityId = (String) facility.get(""FacilityId"");
+
+        context = Context.renewContext(null, ""system"", ""1"", null, null,
+                facilityId, null, null, ""1"");
+
+        // testUtil.clearTables(context);
+
+        // set FF
+        String ffFileName = directory + ""/config/disable_ff.json"";
+        if (JsonUtil.fileResourceExists(ffFileName))
+        {
+            Document featureFlagDocument = JsonUtil.readDocument(ffFileName);
+            String ff = (String) featureFlagDocument.get(FEATURE_FLAGS);
+            context.setAdditionalAttribute(""component-test"", FEATURE_FLAGS, ff);
+        }
+
+        // set configured extension points
+        String extensionPointsFileName = directory + ""/config/enable_extensionPoints.json"";
+        if (JsonUtil.fileResourceExists(extensionPointsFileName))
+        {
+            Document extensionPointDocument = JsonUtil.readDocument(extensionPointsFileName);
+            String extensionPoints = (String) extensionPointDocument.get(EXTENSION_POINTS);
+            context.setAdditionalAttribute(""component-test"", EXTENSION_POINTS, extensionPoints);
+        }
+
+        setApplicationParameterService(
+                AppointmentApplicationParameters.APT_REDESIGN_ENABLED.getParameterId(),
+                Boolean.TRUE.toString());
+    }
+
+    @After
+    public void breakdown()
+    {
+        context.removeAdditionalAttribute(""component-test"", FEATURE_FLAGS);
+
+        context.removeAdditionalAttribute(""component-test"", EXTENSION_POINTS);
+
+        // set FF
+        String fileName = directory + ""/config/breakdown.json"";
+        if (JsonUtil.fileResourceExists(fileName))
+        {
+            Document breakdownDocument = JsonUtil.readDocument(directory + ""/config/breakdown.json"");
+            deleteEntities(breakdownDocument);
+        }
+
+        setApplicationParameterService(
+                AppointmentApplicationParameters.APT_REDESIGN_ENABLED.getParameterId(),
+                Boolean.FALSE.toString());
+    }
+
+    @Test
+    public void test()
+    {
+        logger.debug("">> [{}]"", testName);
+
+        StopWatch stopWatch = StopWatch.createStarted();
+
+        try
+        {
+            int fileNumber = 1;
+            Document input = getFile(directory + ""input/"" + fileNumber + "".json"");
+
+            importEntities(input);
+
+            Document appointmentDocument = getFile(directory + ""input/appointment.json"");
+            List<Map<String, Object>> list =
+                    (List<Map<String, Object>>) appointmentDocument.get(Entities.APPOINTMENT.getName());
+
+            for (Map<String, Object> appointment : list)
+            {
+                EnhancedAppointmentDTO enhancedAppointmentDTO =
+                        objectMapper.convertValue(appointment, EnhancedAppointmentDTO.class);
+
+                CapacityDTO capacityChecker = new CapacityDTO(enhancedAppointmentDTO);
+                capacityManager.consumeAppointmentCapacity(context, capacityChecker);
+            }
+
+            validateEntityOutput(fileNumber);
+        }
+        finally
+        {
+            logger.debug(""<< [{}] completed in [{}] seconds"", testName, (new Double(stopWatch.getTime())) / 1000);
+        }
+    }
+}
diff --git a/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test1/config/breakdown.json b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test1/config/breakdown.json
new file mode 100644
index 000000000..6a05eef52
--- /dev/null
+++ b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test1/config/breakdown.json
@@ -0,0 +1,6 @@
+{
+  ""TimeIntervalUtilization"": [],
+  ""DayLevelUtilization"": [],
+  ""FacilityLevelUtilization"": [],
+  ""FacilityDayLevelScope"": []
+}
diff --git a/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test1/config/disable_ff.json b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test1/config/disable_ff.json
new file mode 100644
index 000000000..db578d94d
--- /dev/null
+++ b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test1/config/disable_ff.json
@@ -0,0 +1,3 @@
+{
+  ""FeatureFlags"": ""Dummy FF Goes Here""
+}
diff --git a/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test1/config/facilityId.json b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test1/config/facilityId.json
new file mode 100644
index 000000000..83165797f
--- /dev/null
+++ b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test1/config/facilityId.json
@@ -0,0 +1,3 @@
+{
+    ""FacilityId"": ""01""
+}
diff --git a/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test1/description.txt b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test1/description.txt
new file mode 100644
index 000000000..57be894e1
--- /dev/null
+++ b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test1/description.txt
@@ -0,0 +1 @@
+Standard Test. The capacity should all be there and all 3 requirements should pass.
diff --git a/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test1/input/1.json b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test1/input/1.json
new file mode 100644
index 000000000..063a479c1
--- /dev/null
+++ b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test1/input/1.json
@@ -0,0 +1,65 @@
+{
+    ""TimeIntervalDefinition"": [
+        {
+            ""TimeIntervalDefinitionId"": ""Wednesday0_24"",
+            ""StartTimeHours"": 0,
+            ""StartTimeMinutes"": 0,
+            ""EndTimeHours"": 24,
+            ""EndTimeMinutes"": 0,
+            ""TimeIntervalLength"": 60,
+            ""Wednesday"": true
+        }
+    ],
+    ""ResourceGroup"": [
+        {
+            ""ResourceGroupName"": ""CAPACITY_TEST_1"",
+            ""ResourceUnit"": [
+                {
+                    ""ResourceId"": ""CAPACITY_TEST_1"",
+                    ""TimeIntervalScope"" : [
+                        {
+                            ""EffectiveDateTime"": ""1980-01-01T00:00:00"",
+                            ""ExpirationDateTime"": ""2035-01-01T00:00:00"",
+                            ""TimeIntervalCapacity"": [
+                                {
+                                    ""TimeIntervalDefinition"": ""Wednesday0_24"",
+                                    ""MaxAppointments"": 10,
+                                    ""MaxLiveUnloadAppointments"": 10
+                                }
+                            ]
+                        }
+                    ],
+                    ""DayLevelScope"": [
+                        {
+                            ""EffectiveDateTime"": ""1980-01-01T00:00:00"",
+                            ""ExpirationDateTime"": ""2035-01-01T00:00:00"",
+                            ""Exception"": false,
+                            ""DayLevelCapacity"": [
+                                {
+                                    ""DaysOfWeekId"": ""All"",
+                                    ""CapacityConstraintTypeId"": ""NUMBER_OF_APPOINTMENTS"",
+                                    ""Capacity"": 10,
+                                    ""CapacityConstraintAttribute"": null
+                                }
+                            ]
+                        }
+                    ]
+                }
+            ]
+        }
+    ],
+    ""FacilityDayLevelScope"": [
+        {
+            ""EffectiveDateTime"": ""1980-01-01T00:00:00"",
+            ""ExpirationDateTime"": ""2035-01-01T00:00:00"",
+            ""Exception"": false,
+            ""FacilityDayLevelCapacity"": [
+                {
+                    ""CapacityConstraintTypeId"": ""NUMBER_OF_APPOINTMENTS"",
+                    ""Capacity"": 10,
+                    ""DaysOfWeekId"": ""All""
+                }
+            ]
+        }
+    ]
+}
diff --git a/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test1/input/appointment.json b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test1/input/appointment.json
new file mode 100644
index 000000000..09f2897e5
--- /dev/null
+++ b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test1/input/appointment.json
@@ -0,0 +1,16 @@
+{
+  ""Appointment"": [
+    {
+      ""AppointmentId"": ""Appointment1"",
+      ""Duration"": ""60"",
+      ""PreferredDateTime"":""2024-08-14T12:00:00"",
+      ""AppointmentTypeId"": ""LIVE_UNLOAD"",
+      ""Resources"": [
+        {
+          ""GroupName"": ""DOCK_DOOR"",
+          ""ResourceName"": ""CAPACITY_TEST_1""
+        }
+      ]
+    }
+  ]
+}
diff --git a/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test1/output/1.json b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test1/output/1.json
new file mode 100644
index 000000000..173cb41ba
--- /dev/null
+++ b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test1/output/1.json
@@ -0,0 +1,31 @@
+{
+    ""TimeIntervalUtilization"": [
+        {
+            ""TotalCapacity"": 10,
+            ""RemainingCapacity"": 9,
+            ""MaxLiveUnloadCpty"": 10,
+            ""RemainingLiveUnloadCpty"": 9,
+            ""ResourceUnitId"": ""CAPACITY_TEST_1"",
+            ""AppointmentDate"": ""2024-08-14""
+        }
+    ],
+    ""DayLevelUtilization"": [
+        {
+            ""TotalCapacity"": 10,
+            ""RemainingCapacity"": 9,
+            ""ResourceUnitId"": ""CAPACITY_TEST_1"",
+            ""AppointmentDate"": ""2024-08-14"",
+            ""ConstraintTypeId"": ""NUMBER_OF_APPOINTMENTS"",
+            ""WeekDayId"": ""3""
+        }
+    ],
+    ""FacilityLevelUtilization"": [
+        {
+            ""TotalCapacity"": 10,
+            ""RemainingCapacity"": 9,
+            ""AppointmentDate"": ""2024-08-14"",
+            ""ConstraintTypeId"": ""NUMBER_OF_APPOINTMENTS"",
+            ""WeekDayId"": ""3""
+        }
+    ]
+}
diff --git a/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test10/config/breakdown.json b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test10/config/breakdown.json
new file mode 100644
index 000000000..6a05eef52
--- /dev/null
+++ b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test10/config/breakdown.json
@@ -0,0 +1,6 @@
+{
+  ""TimeIntervalUtilization"": [],
+  ""DayLevelUtilization"": [],
+  ""FacilityLevelUtilization"": [],
+  ""FacilityDayLevelScope"": []
+}
diff --git a/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test10/config/facilityId.json b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test10/config/facilityId.json
new file mode 100644
index 000000000..83165797f
--- /dev/null
+++ b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test10/config/facilityId.json
@@ -0,0 +1,3 @@
+{
+    ""FacilityId"": ""01""
+}
diff --git a/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test10/description.txt b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test10/description.txt
new file mode 100644
index 000000000..4f5c3a967
--- /dev/null
+++ b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test10/description.txt
@@ -0,0 +1 @@
+All three appointments should be rejected because they require time slots that do not exist. No capacity should be consumed
diff --git a/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test10/input/1.json b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test10/input/1.json
new file mode 100644
index 000000000..81e756459
--- /dev/null
+++ b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test10/input/1.json
@@ -0,0 +1,77 @@
+{
+    ""TimeIntervalDefinition"": [
+        {
+            ""TimeIntervalDefinitionId"": ""Wednesday0_6"",
+            ""StartTimeHours"": 0,
+            ""StartTimeMinutes"": 0,
+            ""EndTimeHours"": 6,
+            ""EndTimeMinutes"": 0,
+            ""TimeIntervalLength"": 60,
+            ""Wednesday"": true
+        },
+        {
+            ""TimeIntervalDefinitionId"": ""Wednesday8_12"",
+            ""StartTimeHours"": 8,
+            ""StartTimeMinutes"": 0,
+            ""EndTimeHours"": 12,
+            ""EndTimeMinutes"": 0,
+            ""TimeIntervalLength"": 60,
+            ""Wednesday"": true
+        }
+    ],
+    ""ResourceGroup"": [
+        {
+            ""ResourceGroupName"": ""CAPACITY_TEST_10"",
+            ""ResourceUnit"": [
+                {
+                    ""ResourceId"": ""CAPACITY_TEST_10"",
+                    ""TimeIntervalScope"" : [
+                        {
+                            ""EffectiveDateTime"": ""1980-01-01T00:00:00"",
+                            ""ExpirationDateTime"": ""2035-01-01T00:00:00"",
+                            ""TimeIntervalCapacity"": [
+                                {
+                                    ""TimeIntervalDefinition"": ""Wednesday0_6"",
+                                    ""MaxAppointments"": 4
+                                },
+                                {
+                                    ""TimeIntervalDefinition"": ""Wednesday8_12"",
+                                    ""MaxAppointments"": 8
+                                }
+                            ]
+                        }
+                    ],
+                    ""DayLevelScope"": [
+                        {
+                            ""EffectiveDateTime"": ""1980-01-01T00:00:00"",
+                            ""ExpirationDateTime"": ""2035-01-01T00:00:00"",
+                            ""Exception"": false,
+                            ""DayLevelCapacity"": [
+                                {
+                                    ""DaysOfWeekId"": ""All"",
+                                    ""CapacityConstraintTypeId"": ""NUMBER_OF_APPOINTMENTS"",
+                                    ""Capacity"": 10,
+                                    ""CapacityConstraintAttribute"": null
+                                }
+                            ]
+                        }
+                    ]
+                }
+            ]
+        }
+    ],
+    ""FacilityDayLevelScope"": [
+        {
+            ""EffectiveDateTime"": ""1980-01-01T00:00:00"",
+            ""ExpirationDateTime"": ""2035-01-01T00:00:00"",
+            ""Exception"": false,
+            ""FacilityDayLevelCapacity"": [
+                {
+                    ""CapacityConstraintTypeId"": ""NUMBER_OF_APPOINTMENTS"",
+                    ""Capacity"": 10,
+                    ""DaysOfWeekId"": ""All""
+                }
+            ]
+        }
+    ]
+}
diff --git a/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test10/input/appointment.json b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test10/input/appointment.json
new file mode 100644
index 000000000..256e3e504
--- /dev/null
+++ b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test10/input/appointment.json
@@ -0,0 +1,40 @@
+{
+  ""Appointment"": [
+    {
+      ""AppointmentId"": ""Appointment1"",
+      ""Duration"": ""180"",
+      ""PreferredDateTime"":""2024-08-14T06:00:00"",
+      ""AppointmentTypeId"": ""LIVE_LOAD"",
+      ""Resources"": [
+        {
+          ""GroupName"": ""DOCK_DOOR"",
+          ""ResourceName"": ""CAPACITY_TEST_10""
+        }
+      ]
+    },
+    {
+      ""AppointmentId"": ""Appointment2"",
+      ""Duration"": ""120"",
+      ""PreferredDateTime"":""2024-08-14T05:00:00"",
+      ""AppointmentTypeId"": ""PICKUP_LOAD"",
+      ""Resources"": [
+        {
+          ""GroupName"": ""DOCK_DOOR"",
+          ""ResourceName"": ""CAPACITY_TEST_10""
+        }
+      ]
+    },
+    {
+      ""AppointmentId"": ""Appointment3"",
+      ""Duration"": ""120"",
+      ""PreferredDateTime"":""2024-08-14T07:00:00"",
+      ""AppointmentTypeId"": ""PICKUP_EMPTY"",
+      ""Resources"": [
+        {
+          ""GroupName"": ""DOCK_DOOR"",
+          ""ResourceName"": ""CAPACITY_TEST_10""
+        }
+      ]
+    }
+  ]
+}
diff --git a/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test10/output/1.json b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test10/output/1.json
new file mode 100644
index 000000000..66b2397b3
--- /dev/null
+++ b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test10/output/1.json
@@ -0,0 +1,29 @@
+{
+    ""TimeIntervalUtilization"": [
+        {
+            ""TotalCapacity"": 4,
+            ""RemainingCapacity"": 4,
+            ""ResourceUnitId"": ""CAPACITY_TEST_10"",
+            ""AppointmentDate"": ""2024-08-14""
+        }
+    ],
+    ""DayLevelUtilization"": [
+        {
+            ""TotalCapacity"": 10,
+            ""RemainingCapacity"": 10,
+            ""ResourceUnitId"": ""CAPACITY_TEST_10"",
+            ""AppointmentDate"": ""2024-08-14"",
+            ""ConstraintTypeId"": ""NUMBER_OF_APPOINTMENTS"",
+            ""WeekDayId"": ""3""
+        }
+    ],
+    ""FacilityLevelUtilization"": [
+        {
+            ""TotalCapacity"": 10,
+            ""RemainingCapacity"": 10,
+            ""ConstraintTypeId"": ""NUMBER_OF_APPOINTMENTS"",
+            ""AppointmentDate"": ""2024-08-14"",
+            ""WeekDayId"": ""3""
+        }
+    ]
+}
diff --git a/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test11/config/breakdown.json b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test11/config/breakdown.json
new file mode 100644
index 000000000..6a05eef52
--- /dev/null
+++ b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test11/config/breakdown.json
@@ -0,0 +1,6 @@
+{
+  ""TimeIntervalUtilization"": [],
+  ""DayLevelUtilization"": [],
+  ""FacilityLevelUtilization"": [],
+  ""FacilityDayLevelScope"": []
+}
diff --git a/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test11/config/facilityId.json b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test11/config/facilityId.json
new file mode 100644
index 000000000..83165797f
--- /dev/null
+++ b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test11/config/facilityId.json
@@ -0,0 +1,3 @@
+{
+    ""FacilityId"": ""01""
+}
diff --git a/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test11/description.txt b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test11/description.txt
new file mode 100644
index 000000000..8093585ae
--- /dev/null
+++ b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test11/description.txt
@@ -0,0 +1,9 @@
+This scenario is weird.
+
+Appointment1 uses time 7:30-8:30 needs the time slots 7-8 and 8-9, so two time interval capacities will be used
+
+Appointment2 uses time 23:30-00:30 needs the time slots 23-24 and 0-1, so two time interval capacities will be used across
+two different day and facility capacities
+
+Two capacities will be removed from 2024-08-14 because two appointments are made for that day, but only Appointment2 goes
+over into 2024-08-15, so only one capacity will be used on that day.
diff --git a/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test11/input/1.json b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test11/input/1.json
new file mode 100644
index 000000000..11c8ae986
--- /dev/null
+++ b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test11/input/1.json
@@ -0,0 +1,65 @@
+{
+    ""TimeIntervalDefinition"": [
+        {
+            ""TimeIntervalDefinitionId"": ""Wednesday_Thursday0_24"",
+            ""StartTimeHours"": 0,
+            ""StartTimeMinutes"": 0,
+            ""EndTimeHours"": 24,
+            ""EndTimeMinutes"": 0,
+            ""TimeIntervalLength"": 60,
+            ""Wednesday"": true,
+            ""Thursday"": true
+        }
+    ],
+    ""ResourceGroup"": [
+        {
+            ""ResourceGroupName"": ""CAPACITY_TEST_11"",
+            ""ResourceUnit"": [
+                {
+                    ""ResourceId"": ""CAPACITY_TEST_11"",
+                    ""TimeIntervalScope"" : [
+                        {
+                            ""EffectiveDateTime"": ""1980-01-01T00:00:00"",
+                            ""ExpirationDateTime"": ""2035-01-01T00:00:00"",
+                            ""TimeIntervalCapacity"": [
+                                {
+                                    ""TimeIntervalDefinition"": ""Wednesday_Thursday0_24"",
+                                    ""MaxAppointments"": 10
+                                }
+                            ]
+                        }
+                    ],
+                    ""DayLevelScope"": [
+                        {
+                            ""EffectiveDateTime"": ""1980-01-01T00:00:00"",
+                            ""ExpirationDateTime"": ""2035-01-01T00:00:00"",
+                            ""Exception"": false,
+                            ""DayLevelCapacity"": [
+                                {
+                                    ""DaysOfWeekId"": ""All"",
+                                    ""CapacityConstraintTypeId"": ""NUMBER_OF_APPOINTMENTS"",
+                                    ""Capacity"": 10,
+                                    ""CapacityConstraintAttribute"": null
+                                }
+                            ]
+                        }
+                    ]
+                }
+            ]
+        }
+    ],
+    ""FacilityDayLevelScope"": [
+        {
+            ""EffectiveDateTime"": ""1980-01-01T00:00:00"",
+            ""ExpirationDateTime"": ""2035-01-01T00:00:00"",
+            ""Exception"": false,
+            ""FacilityDayLevelCapacity"": [
+                {
+                    ""CapacityConstraintTypeId"": ""NUMBER_OF_APPOINTMENTS"",
+                    ""Capacity"": 10,
+                    ""DaysOfWeekId"": ""All""
+                }
+            ]
+        }
+    ]
+}
diff --git a/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test11/input/appointment.json b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test11/input/appointment.json
new file mode 100644
index 000000000..305136a2b
--- /dev/null
+++ b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test11/input/appointment.json
@@ -0,0 +1,28 @@
+{
+  ""Appointment"": [
+    {
+      ""AppointmentId"": ""Appointment1"",
+      ""Duration"": ""60"",
+      ""PreferredDateTime"":""2024-08-14T07:30:00"",
+      ""AppointmentTypeId"": ""LIVE_UNLOAD"",
+      ""Resources"": [
+        {
+          ""GroupName"": ""DOCK_DOOR"",
+          ""ResourceName"": ""CAPACITY_TEST_11""
+        }
+      ]
+    },
+    {
+      ""AppointmentId"": ""Appointment2"",
+      ""Duration"": ""60"",
+      ""PreferredDateTime"":""2024-08-14T23:30:00"",
+      ""AppointmentTypeId"": ""DROP_EMPTY"",
+      ""Resources"": [
+        {
+          ""GroupName"": ""DOCK_DOOR"",
+          ""ResourceName"": ""CAPACITY_TEST_11""
+        }
+      ]
+    }
+  ]
+}
diff --git a/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test11/output/1.json b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test11/output/1.json
new file mode 100644
index 000000000..0d3877667
--- /dev/null
+++ b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test11/output/1.json
@@ -0,0 +1,62 @@
+{
+    ""TimeIntervalUtilization"": [
+        {
+            ""TotalCapacity"": 10,
+            ""RemainingCapacity"": 9,
+            ""ResourceUnitId"": ""CAPACITY_TEST_11"",
+            ""AppointmentDate"": ""2024-08-14""
+        },
+        {
+            ""TotalCapacity"": 10,
+            ""RemainingCapacity"": 9,
+            ""ResourceUnitId"": ""CAPACITY_TEST_11"",
+            ""AppointmentDate"": ""2024-08-14""
+        },
+        {
+            ""TotalCapacity"": 10,
+            ""RemainingCapacity"": 9,
+            ""ResourceUnitId"": ""CAPACITY_TEST_11"",
+            ""AppointmentDate"": ""2024-08-14""
+        },
+        {
+            ""TotalCapacity"": 10,
+            ""RemainingCapacity"": 9,
+            ""ResourceUnitId"": ""CAPACITY_TEST_11"",
+            ""AppointmentDate"": ""2024-08-15""
+        }
+    ],
+    ""DayLevelUtilization"": [
+        {
+            ""TotalCapacity"": 10,
+            ""RemainingCapacity"": 8,
+            ""ResourceUnitId"": ""CAPACITY_TEST_11"",
+            ""AppointmentDate"": ""2024-08-14"",
+            ""ConstraintTypeId"": ""NUMBER_OF_APPOINTMENTS"",
+            ""WeekDayId"": ""3""
+        },
+        {
+            ""TotalCapacity"": 10,
+            ""RemainingCapacity"": 9,
+            ""ResourceUnitId"": ""CAPACITY_TEST_11"",
+            ""AppointmentDate"": ""2024-08-15"",
+            ""ConstraintTypeId"": ""NUMBER_OF_APPOINTMENTS"",
+            ""WeekDayId"": ""4""
+        }
+    ],
+    ""FacilityLevelUtilization"": [
+        {
+            ""TotalCapacity"": 10,
+            ""RemainingCapacity"": 8,
+            ""ConstraintTypeId"": ""NUMBER_OF_APPOINTMENTS"",
+            ""AppointmentDate"": ""2024-08-14"",
+            ""WeekDayId"": ""3""
+        },
+        {
+            ""TotalCapacity"": 10,
+            ""RemainingCapacity"": 9,
+            ""ConstraintTypeId"": ""NUMBER_OF_APPOINTMENTS"",
+            ""AppointmentDate"": ""2024-08-15"",
+            ""WeekDayId"": ""4""
+        }
+    ]
+}
diff --git a/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test12/config/breakdown.json b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test12/config/breakdown.json
new file mode 100644
index 000000000..6a05eef52
--- /dev/null
+++ b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test12/config/breakdown.json
@@ -0,0 +1,6 @@
+{
+  ""TimeIntervalUtilization"": [],
+  ""DayLevelUtilization"": [],
+  ""FacilityLevelUtilization"": [],
+  ""FacilityDayLevelScope"": []
+}
diff --git a/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test12/config/facilityId.json b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test12/config/facilityId.json
new file mode 100644
index 000000000..83165797f
--- /dev/null
+++ b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test12/config/facilityId.json
@@ -0,0 +1,3 @@
+{
+    ""FacilityId"": ""01""
+}
diff --git a/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test12/description.txt b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test12/description.txt
new file mode 100644
index 000000000..0d3771d01
--- /dev/null
+++ b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test12/description.txt
@@ -0,0 +1 @@
+The resource unit has no day level capacities assigned, so it should reject the appointment and no capacities should be consumed
diff --git a/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test12/input/1.json b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test12/input/1.json
new file mode 100644
index 000000000..c8ef553f4
--- /dev/null
+++ b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test12/input/1.json
@@ -0,0 +1,57 @@
+{
+    ""TimeIntervalDefinition"": [
+        {
+            ""TimeIntervalDefinitionId"": ""Wednesday0_24"",
+            ""StartTimeHours"": 0,
+            ""StartTimeMinutes"": 0,
+            ""EndTimeHours"": 24,
+            ""EndTimeMinutes"": 0,
+            ""TimeIntervalLength"": 60,
+            ""Wednesday"": true
+        }
+    ],
+    ""ResourceGroup"": [
+        {
+            ""ResourceGroupName"": ""CAPACITY_TEST_12"",
+            ""ResourceUnit"": [
+                {
+                    ""ResourceId"": ""CAPACITY_TEST_12"",
+                    ""TimeIntervalScope"" : [
+                        {
+                            ""EffectiveDateTime"": ""1980-01-01T00:00:00"",
+                            ""ExpirationDateTime"": ""2035-01-01T00:00:00"",
+                            ""TimeIntervalCapacity"": [
+                                {
+                                    ""TimeIntervalDefinition"": ""Wednesday0_24"",
+                                    ""MaxAppointments"": 10
+                                }
+                            ]
+                        }
+                    ],
+                    ""DayLevelScope"": [
+                        {
+                            ""EffectiveDateTime"": ""1980-01-01T00:00:00"",
+                            ""ExpirationDateTime"": ""2035-01-01T00:00:00"",
+                            ""Exception"": false,
+                            ""DayLevelCapacity"": []
+                        }
+                    ]
+                }
+            ]
+        }
+    ],
+    ""FacilityDayLevelScope"": [
+        {
+            ""EffectiveDateTime"": ""1980-01-01T00:00:00"",
+            ""ExpirationDateTime"": ""2035-01-01T00:00:00"",
+            ""Exception"": false,
+            ""FacilityDayLevelCapacity"": [
+                {
+                    ""CapacityConstraintTypeId"": ""NUMBER_OF_APPOINTMENTS"",
+                    ""Capacity"": 10,
+                    ""DaysOfWeekId"": ""All""
+                }
+            ]
+        }
+    ]
+}
diff --git a/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test12/input/appointment.json b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test12/input/appointment.json
new file mode 100644
index 000000000..abe1ab377
--- /dev/null
+++ b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test12/input/appointment.json
@@ -0,0 +1,16 @@
+{
+  ""Appointment"": [
+    {
+      ""AppointmentId"": ""Appointment2"",
+      ""Duration"": ""60"",
+      ""PreferredDateTime"":""2024-08-14T12:00:00"",
+      ""AppointmentTypeId"": ""DROP_UNLOAD"",
+      ""Resources"": [
+        {
+          ""GroupName"": ""DOCK_DOOR"",
+          ""ResourceName"": ""CAPACITY_TEST_12""
+        }
+      ]
+    }
+  ]
+}
diff --git a/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test12/output/1.json b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test12/output/1.json
new file mode 100644
index 000000000..c00a090e7
--- /dev/null
+++ b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test12/output/1.json
@@ -0,0 +1,12 @@
+{
+    ""TimeIntervalUtilization"": [
+        {
+            ""TotalCapacity"": 10,
+            ""RemainingCapacity"": 10,
+            ""ResourceUnitId"": ""CAPACITY_TEST_12"",
+            ""AppointmentDate"": ""2024-08-14""
+        }
+    ],
+    ""DayLevelUtilization"": [],
+    ""FacilityLevelUtilization"": []
+}
diff --git a/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test13/config/breakdown.json b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test13/config/breakdown.json
new file mode 100644
index 000000000..6a05eef52
--- /dev/null
+++ b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test13/config/breakdown.json
@@ -0,0 +1,6 @@
+{
+  ""TimeIntervalUtilization"": [],
+  ""DayLevelUtilization"": [],
+  ""FacilityLevelUtilization"": [],
+  ""FacilityDayLevelScope"": []
+}
diff --git a/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test13/config/facilityId.json b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test13/config/facilityId.json
new file mode 100644
index 000000000..83165797f
--- /dev/null
+++ b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test13/config/facilityId.json
@@ -0,0 +1,3 @@
+{
+    ""FacilityId"": ""01""
+}
diff --git a/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test13/description.txt b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test13/description.txt
new file mode 100644
index 000000000..749e20c7c
--- /dev/null
+++ b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test13/description.txt
@@ -0,0 +1 @@
+The time interval capacity has general capacity, but no LIVE_LOAD capacity, so the appointment should be rejected
diff --git a/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test13/input/1.json b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test13/input/1.json
new file mode 100644
index 000000000..7d46f61c0
--- /dev/null
+++ b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test13/input/1.json
@@ -0,0 +1,65 @@
+{
+    ""TimeIntervalDefinition"": [
+        {
+            ""TimeIntervalDefinitionId"": ""Wednesday0_24"",
+            ""StartTimeHours"": 0,
+            ""StartTimeMinutes"": 0,
+            ""EndTimeHours"": 24,
+            ""EndTimeMinutes"": 0,
+            ""TimeIntervalLength"": 60,
+            ""Wednesday"": true
+        }
+    ],
+    ""ResourceGroup"": [
+        {
+            ""ResourceGroupName"": ""CAPACITY_TEST_13"",
+            ""ResourceUnit"": [
+                {
+                    ""ResourceId"": ""CAPACITY_TEST_13"",
+                    ""TimeIntervalScope"" : [
+                        {
+                            ""EffectiveDateTime"": ""1980-01-01T00:00:00"",
+                            ""ExpirationDateTime"": ""2035-01-01T00:00:00"",
+                            ""TimeIntervalCapacity"": [
+                                {
+                                    ""TimeIntervalDefinition"": ""Wednesday0_24"",
+                                    ""MaxAppointments"": 10,
+                                    ""MaxLiveLoadAppointments"": 0
+                                }
+                            ]
+                        }
+                    ],
+                    ""DayLevelScope"": [
+                        {
+                            ""EffectiveDateTime"": ""1980-01-01T00:00:00"",
+                            ""ExpirationDateTime"": ""2035-01-01T00:00:00"",
+                            ""Exception"": false,
+                            ""DayLevelCapacity"": [
+                                {
+                                    ""DaysOfWeekId"": ""All"",
+                                    ""CapacityConstraintTypeId"": ""NUMBER_OF_APPOINTMENTS"",
+                                    ""Capacity"": 10,
+                                    ""CapacityConstraintAttribute"": null
+                                }
+                            ]
+                        }
+                    ]
+                }
+            ]
+        }
+    ],
+    ""FacilityDayLevelScope"": [
+        {
+            ""EffectiveDateTime"": ""1980-01-01T00:00:00"",
+            ""ExpirationDateTime"": ""2035-01-01T00:00:00"",
+            ""Exception"": false,
+            ""FacilityDayLevelCapacity"": [
+                {
+                    ""CapacityConstraintTypeId"": ""NUMBER_OF_APPOINTMENTS"",
+                    ""Capacity"": 10,
+                    ""DaysOfWeekId"": ""All""
+                }
+            ]
+        }
+    ]
+}
diff --git a/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test13/input/appointment.json b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test13/input/appointment.json
new file mode 100644
index 000000000..ad742dfe1
--- /dev/null
+++ b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test13/input/appointment.json
@@ -0,0 +1,16 @@
+{
+  ""Appointment"": [
+    {
+      ""AppointmentId"": ""Appointment2"",
+      ""Duration"": ""60"",
+      ""PreferredDateTime"":""2024-08-14T12:00:00"",
+      ""AppointmentTypeId"": ""LIVE_LOAD"",
+      ""Resources"": [
+        {
+          ""GroupName"": ""DOCK_DOOR"",
+          ""ResourceName"": ""CAPACITY_TEST_13""
+        }
+      ]
+    }
+  ]
+}
diff --git a/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test13/output/1.json b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test13/output/1.json
new file mode 100644
index 000000000..b64f66916
--- /dev/null
+++ b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test13/output/1.json
@@ -0,0 +1,24 @@
+{
+    ""TimeIntervalUtilization"": [
+        {
+            ""TotalCapacity"": 10,
+            ""RemainingCapacity"": 10,
+            ""MaxLiveLoadCpty"": 0,
+            ""RemainingLiveLoadCpty"": 0,
+            ""MaxLiveUnloadCpty"": null,
+            ""RemainingLiveUnloadCpty"": null,
+            ""MaxDropEmptyCpty"": null,
+            ""RemainingDropEmptyCpty"": null,
+            ""MaxDropUnloadCpty"": null,
+            ""RemainingDropUnloadCpty"": null,
+            ""MaxPickupEmptyCpty"": null,
+            ""RemainingPickupEmptyCpty"": null,
+            ""MaxPickupLoadCpty"": null,
+            ""RemainingPickupLoadCpty"": null,
+            ""ResourceUnitId"": ""CAPACITY_TEST_13"",
+            ""AppointmentDate"": ""2024-08-14""
+        }
+    ],
+    ""DayLevelUtilization"": [],
+    ""FacilityLevelUtilization"": []
+}
diff --git a/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test2/config/breakdown.json b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test2/config/breakdown.json
new file mode 100644
index 000000000..6a05eef52
--- /dev/null
+++ b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test2/config/breakdown.json
@@ -0,0 +1,6 @@
+{
+  ""TimeIntervalUtilization"": [],
+  ""DayLevelUtilization"": [],
+  ""FacilityLevelUtilization"": [],
+  ""FacilityDayLevelScope"": []
+}
diff --git a/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test2/config/facilityId.json b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test2/config/facilityId.json
new file mode 100644
index 000000000..83165797f
--- /dev/null
+++ b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test2/config/facilityId.json
@@ -0,0 +1,3 @@
+{
+    ""FacilityId"": ""01""
+}
diff --git a/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test2/description.txt b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test2/description.txt
new file mode 100644
index 000000000..4099c011d
--- /dev/null
+++ b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test2/description.txt
@@ -0,0 +1 @@
+The apt facility level scope utilization has a capacity of 0, so the request should fail and no capacity should be consumed
diff --git a/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test2/input/1.json b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test2/input/1.json
new file mode 100644
index 000000000..0a6f12568
--- /dev/null
+++ b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test2/input/1.json
@@ -0,0 +1,73 @@
+{
+    ""TimeIntervalDefinition"": [
+        {
+            ""TimeIntervalDefinitionId"": ""Wednesday0_24"",
+            ""StartTimeHours"": 0,
+            ""StartTimeMinutes"": 0,
+            ""EndTimeHours"": 24,
+            ""EndTimeMinutes"": 0,
+            ""TimeIntervalLength"": 60,
+            ""Wednesday"": true
+        }
+    ],
+    ""ResourceGroup"": [
+        {
+            ""ResourceGroupName"": ""CAPACITY_TEST_2"",
+            ""ResourceUnit"": [
+                {
+                    ""ResourceId"": ""CAPACITY_TEST_2"",
+                    ""TimeIntervalScope"" : [
+                        {
+                            ""EffectiveDateTime"": ""1980-01-01T00:00:00"",
+                            ""ExpirationDateTime"": ""2035-01-01T00:00:00"",
+                            ""TimeIntervalCapacity"": [
+                                {
+                                    ""TimeIntervalDefinition"": ""Wednesday0_24"",
+                                    ""MaxAppointments"": 10
+                                }
+                            ]
+                        }
+                    ],
+                    ""DayLevelScope"": [
+                        {
+                            ""EffectiveDateTime"": ""1980-01-01T00:00:00"",
+                            ""ExpirationDateTime"": ""2035-01-01T00:00:00"",
+                            ""Exception"": false,
+                            ""DayLevelCapacity"": [
+                                {
+                                    ""DaysOfWeekId"": ""All"",
+                                    ""CapacityConstraintTypeId"": ""NUMBER_OF_APPOINTMENTS"",
+                                    ""Capacity"": 10,
+                                    ""CapacityConstraintAttribute"": null
+                                }
+                            ]
+                        }
+                    ]
+                }
+            ]
+        }
+    ],
+    ""FacilityDayLevelScope"": [
+        {
+            ""EffectiveDateTime"": ""1980-01-01T00:00:00"",
+            ""ExpirationDateTime"": ""2035-01-01T00:00:00"",
+            ""Exception"": false,
+            ""FacilityDayLevelCapacity"": [
+                {
+                    ""CapacityConstraintTypeId"": ""NUMBER_OF_APPOINTMENTS"",
+                    ""Capacity"": 10,
+                    ""DaysOfWeekId"": ""All""
+                }
+            ]
+        }
+    ],
+    ""FacilityLevelUtilization"": [
+        {
+            ""TotalCapacity"": 10,
+            ""RemainingCapacity"": 0,
+            ""ConstraintTypeId"": ""NUMBER_OF_APPOINTMENTS"",
+            ""AppointmentDate"": ""2024-08-14"",
+            ""WeekDayId"": ""3""
+        }
+    ]
+}
diff --git a/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test2/input/appointment.json b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test2/input/appointment.json
new file mode 100644
index 000000000..3a2494523
--- /dev/null
+++ b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test2/input/appointment.json
@@ -0,0 +1,16 @@
+{
+  ""Appointment"": [
+    {
+      ""AppointmentId"": ""Appointment2"",
+      ""Duration"": ""60"",
+      ""PreferredDateTime"":""2024-08-14T12:00:00"",
+      ""AppointmentTypeId"": ""LIVE_UNLOAD"",
+      ""Resources"": [
+        {
+          ""GroupName"": ""DOCK_DOOR"",
+          ""ResourceName"": ""CAPACITY_TEST_2""
+        }
+      ]
+    }
+  ]
+}
diff --git a/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test2/output/1.json b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test2/output/1.json
new file mode 100644
index 000000000..27489b2aa
--- /dev/null
+++ b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test2/output/1.json
@@ -0,0 +1,29 @@
+{
+    ""TimeIntervalUtilization"": [
+        {
+            ""TotalCapacity"": 10,
+            ""RemainingCapacity"": 10,
+            ""ResourceUnitId"": ""CAPACITY_TEST_2"",
+            ""AppointmentDate"": ""2024-08-14""
+        }
+    ],
+    ""DayLevelUtilization"": [
+        {
+            ""TotalCapacity"": 10,
+            ""RemainingCapacity"": 10,
+            ""ResourceUnitId"": ""CAPACITY_TEST_2"",
+            ""AppointmentDate"": ""2024-08-14"",
+            ""ConstraintTypeId"": ""NUMBER_OF_APPOINTMENTS"",
+            ""WeekDayId"": ""3""
+        }
+    ],
+    ""FacilityLevelUtilization"": [
+        {
+            ""TotalCapacity"": 10,
+            ""RemainingCapacity"": 0,
+            ""AppointmentDate"": ""2024-08-14"",
+            ""ConstraintTypeId"": ""NUMBER_OF_APPOINTMENTS"",
+            ""WeekDayId"": ""3""
+        }
+    ]
+}
diff --git a/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test3/config/breakdown.json b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test3/config/breakdown.json
new file mode 100644
index 000000000..6a05eef52
--- /dev/null
+++ b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test3/config/breakdown.json
@@ -0,0 +1,6 @@
+{
+  ""TimeIntervalUtilization"": [],
+  ""DayLevelUtilization"": [],
+  ""FacilityLevelUtilization"": [],
+  ""FacilityDayLevelScope"": []
+}
diff --git a/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test3/config/facilityId.json b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test3/config/facilityId.json
new file mode 100644
index 000000000..83165797f
--- /dev/null
+++ b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test3/config/facilityId.json
@@ -0,0 +1,3 @@
+{
+    ""FacilityId"": ""01""
+}
diff --git a/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test3/description.txt b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test3/description.txt
new file mode 100644
index 000000000..aa0eede89
--- /dev/null
+++ b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test3/description.txt
@@ -0,0 +1,3 @@
+The capacity should evaluate for the last time slot in time interval definition Wednesday0_12 from 11-12, then check
+the next time interval definition Wednesday12_24 for capacity from 12-13. Since both are available, the capacity should
+be consumed
diff --git a/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test3/input/1.json b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test3/input/1.json
new file mode 100644
index 000000000..08f8f8eda
--- /dev/null
+++ b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test3/input/1.json
@@ -0,0 +1,79 @@
+{
+    ""TimeIntervalDefinition"": [
+        {
+            ""TimeIntervalDefinitionId"": ""Wednesday0_12"",
+            ""StartTimeHours"": 0,
+            ""StartTimeMinutes"": 0,
+            ""EndTimeHours"": 12,
+            ""EndTimeMinutes"": 0,
+            ""TimeIntervalLength"": 60,
+            ""Wednesday"": true
+        },
+        {
+            ""TimeIntervalDefinitionId"": ""Wednesday12_24"",
+            ""StartTimeHours"": 12,
+            ""StartTimeMinutes"": 0,
+            ""EndTimeHours"": 24,
+            ""EndTimeMinutes"": 0,
+            ""TimeIntervalLength"": 60,
+            ""Wednesday"": true
+        }
+    ],
+    ""ResourceGroup"": [
+        {
+            ""ResourceGroupName"": ""CAPACITY_TEST_3"",
+            ""ResourceUnit"": [
+                {
+                    ""ResourceId"": ""CAPACITY_TEST_3"",
+                    ""TimeIntervalScope"" : [
+                        {
+                            ""EffectiveDateTime"": ""1980-01-01T00:00:00"",
+                            ""ExpirationDateTime"": ""2035-01-01T00:00:00"",
+                            ""TimeIntervalCapacity"": [
+                                {
+                                    ""TimeIntervalDefinition"": ""Wednesday0_12"",
+                                    ""MaxAppointments"": 10,
+                                    ""MaxLiveLoadAppointments"": 10
+                                },
+                                {
+                                    ""TimeIntervalDefinition"": ""Wednesday12_24"",
+                                    ""MaxAppointments"": 5,
+                                    ""MaxLiveLoadAppointments"": 5
+                                }
+                            ]
+                        }
+                    ],
+                    ""DayLevelScope"": [
+                        {
+                            ""EffectiveDateTime"": ""1980-01-01T00:00:00"",
+                            ""ExpirationDateTime"": ""2035-01-01T00:00:00"",
+                            ""Exception"": false,
+                            ""DayLevelCapacity"": [
+                                {
+                                    ""DaysOfWeekId"": ""All"",
+                                    ""CapacityConstraintTypeId"": ""NUMBER_OF_APPOINTMENTS"",
+                                    ""Capacity"": 10,
+                                    ""CapacityConstraintAttribute"": null
+                                }
+                            ]
+                        }
+                    ]
+                }
+            ]
+        }
+    ],
+    ""FacilityDayLevelScope"": [
+        {
+            ""EffectiveDateTime"": ""1980-01-01T00:00:00"",
+            ""ExpirationDateTime"": ""2035-01-01T00:00:00"",
+            ""Exception"": false,
+            ""FacilityDayLevelCapacity"": [
+                {
+                    ""CapacityConstraintTypeId"": ""NUMBER_OF_APPOINTMENTS"",
+                    ""Capacity"": 10,
+                    ""DaysOfWeekId"": ""All""
+                }
+            ]
+        }
+    ]
+}
diff --git a/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test3/input/appointment.json b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test3/input/appointment.json
new file mode 100644
index 000000000..96911f339
--- /dev/null
+++ b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test3/input/appointment.json
@@ -0,0 +1,16 @@
+{
+  ""Appointment"": [
+    {
+      ""AppointmentId"": ""Appointment1"",
+      ""Duration"": ""120"",
+      ""PreferredDateTime"":""2024-08-14T11:00:00"",
+      ""AppointmentTypeId"": ""LIVE_LOAD"",
+      ""Resources"": [
+        {
+          ""GroupName"": ""DOCK_DOOR"",
+          ""ResourceName"": ""CAPACITY_TEST_3""
+        }
+      ]
+    }
+  ]
+}
diff --git a/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test3/output/1.json b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test3/output/1.json
new file mode 100644
index 000000000..ed9359c80
--- /dev/null
+++ b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test3/output/1.json
@@ -0,0 +1,37 @@
+{
+    ""TimeIntervalUtilization"": [
+        {
+            ""TotalCapacity"": 10,
+            ""RemainingCapacity"": 9,
+            ""ResourceUnitId"": ""CAPACITY_TEST_3"",
+            ""AppointmentDate"": ""2024-08-14""
+        },
+        {
+            ""TotalCapacity"": 5,
+            ""RemainingCapacity"": 4,
+            ""MaxLiveLoadCpty"": 5,
+            ""RemainingLiveLoadCpty"": 4,
+            ""ResourceUnitId"": ""CAPACITY_TEST_3"",
+            ""AppointmentDate"": ""2024-08-14""
+        }
+    ],
+    ""DayLevelUtilization"": [
+        {
+            ""TotalCapacity"": 10,
+            ""RemainingCapacity"": 9,
+            ""ResourceUnitId"": ""CAPACITY_TEST_3"",
+            ""AppointmentDate"": ""2024-08-14"",
+            ""ConstraintTypeId"": ""NUMBER_OF_APPOINTMENTS"",
+            ""WeekDayId"": ""3""
+        }
+    ],
+    ""FacilityLevelUtilization"": [
+        {
+            ""TotalCapacity"": 10,
+            ""RemainingCapacity"": 9,
+            ""AppointmentDate"": ""2024-08-14"",
+            ""ConstraintTypeId"": ""NUMBER_OF_APPOINTMENTS"",
+            ""WeekDayId"": ""3""
+        }
+    ]
+}
diff --git a/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test4/config/breakdown.json b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test4/config/breakdown.json
new file mode 100644
index 000000000..6a05eef52
--- /dev/null
+++ b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test4/config/breakdown.json
@@ -0,0 +1,6 @@
+{
+  ""TimeIntervalUtilization"": [],
+  ""DayLevelUtilization"": [],
+  ""FacilityLevelUtilization"": [],
+  ""FacilityDayLevelScope"": []
+}
diff --git a/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test4/config/facilityId.json b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test4/config/facilityId.json
new file mode 100644
index 000000000..83165797f
--- /dev/null
+++ b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test4/config/facilityId.json
@@ -0,0 +1,3 @@
+{
+    ""FacilityId"": ""01""
+}
diff --git a/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test4/description.txt b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test4/description.txt
new file mode 100644
index 000000000..cfee56772
--- /dev/null
+++ b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test4/description.txt
@@ -0,0 +1,3 @@
+The capacity should evaluate for the last time slot in time interval definition Wednesday0_24 from 23-24, then check
+the next time interval definition Thursday0_24 for capacity from 0-1. Since both are available, the capacity should
+be consumed.
diff --git a/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test4/input/1.json b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test4/input/1.json
new file mode 100644
index 000000000..18db8934d
--- /dev/null
+++ b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test4/input/1.json
@@ -0,0 +1,104 @@
+{
+    ""TimeIntervalDefinition"": [
+        {
+            ""TimeIntervalDefinitionId"": ""Wednesday0_24"",
+            ""StartTimeHours"": 0,
+            ""StartTimeMinutes"": 0,
+            ""EndTimeHours"": 24,
+            ""EndTimeMinutes"": 0,
+            ""TimeIntervalLength"": 60,
+            ""Wednesday"": true
+        },
+        {
+            ""TimeIntervalDefinitionId"": ""Thursday0_24"",
+            ""StartTimeHours"": 0,
+            ""StartTimeMinutes"": 0,
+            ""EndTimeHours"": 24,
+            ""EndTimeMinutes"": 0,
+            ""TimeIntervalLength"": 60,
+            ""Sunday"": false,
+            ""Monday"": false,
+            ""Tuesday"": false,
+            ""Wednesday"": false,
+            ""Thursday"": true,
+            ""Friday"": false,
+            ""Saturday"": false
+        }
+    ],
+    ""ResourceGroup"": [
+        {
+            ""ResourceGroupName"": ""CAPACITY_TEST_4"",
+            ""ResourceUnit"": [
+                {
+                    ""ResourceId"": ""CAPACITY_TEST_4"",
+                    ""TimeIntervalScope"" : [
+                        {
+                            ""EffectiveDateTime"": ""1980-01-01T00:00:00"",
+                            ""ExpirationDateTime"": ""2035-01-01T00:00:00"",
+                            ""TimeIntervalCapacity"": [
+                                {
+                                    ""TimeIntervalDefinition"": ""Wednesday0_24"",
+                                    ""MaxAppointments"": 10,
+                                    ""MaxDropEmptyAppointments"": 10
+                                },
+                                {
+                                    ""TimeIntervalDefinition"": ""Thursday0_24"",
+                                    ""MaxAppointments"": 5,
+                                    ""MaxDropEmptyAppointments"": 5
+                                }
+                            ]
+                        }
+                    ],
+                    ""DayLevelScope"": [
+                        {
+                            ""EffectiveDateTime"": ""1980-01-01T00:00:00"",
+                            ""ExpirationDateTime"": ""2035-01-01T00:00:00"",
+                            ""Exception"": false,
+                            ""DayLevelCapacity"": [
+                                {
+                                    ""DaysOfWeekId"": ""All"",
+                                    ""CapacityConstraintTypeId"": ""NUMBER_OF_APPOINTMENTS"",
+                                    ""Capacity"": 10,
+                                    ""CapacityConstraintAttribute"": null
+                                }
+                            ]
+                        }
+                    ]
+                }
+            ]
+        }
+    ],
+    ""FacilityDayLevelScope"": [
+        {
+            ""EffectiveDateTime"": ""1980-01-01T00:00:00"",
+            ""ExpirationDateTime"": ""2035-01-01T00:00:00"",
+            ""Exception"": false,
+            ""FacilityDayLevelCapacity"": [
+                {
+                    ""CapacityConstraintTypeId"": ""NUMBER_OF_APPOINTMENTS"",
+                    ""Capacity"": 10,
+                    ""DaysOfWeekId"": ""All""
+                }
+            ]
+        }
+    ],
+    ""DayLevelUtilization"": [
+        {
+            ""TotalCapacity"": 10,
+            ""RemainingCapacity"": 7,
+            ""AppointmentDate"": ""2024-08-14"",
+            ""ConstraintTypeId"": ""NUMBER_OF_APPOINTMENTS"",
+            ""WeekDayId"": ""3"",
+            ""ResourceUnitId"": ""CAPACITY_TEST_4""
+        }
+    ],
+    ""FacilityLevelUtilization"": [
+        {
+            ""TotalCapacity"": 10,
+            ""RemainingCapacity"": 3,
+            ""ConstraintTypeId"": ""NUMBER_OF_APPOINTMENTS"",
+            ""AppointmentDate"": ""2024-08-15"",
+            ""WeekDayId"": ""4""
+        }
+    ]
+}
diff --git a/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test4/input/appointment.json b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test4/input/appointment.json
new file mode 100644
index 000000000..c7772c99d
--- /dev/null
+++ b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test4/input/appointment.json
@@ -0,0 +1,16 @@
+{
+  ""Appointment"": [
+    {
+      ""AppointmentId"": ""Appointment1"",
+      ""Duration"": ""120"",
+      ""PreferredDateTime"":""2024-08-14T23:00:00"",
+      ""AppointmentTypeId"": ""DROP_EMPTY"",
+      ""Resources"": [
+        {
+          ""GroupName"": ""DOCK_DOOR"",
+          ""ResourceName"": ""CAPACITY_TEST_4""
+        }
+      ]
+    }
+  ]
+}
diff --git a/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test4/output/1.json b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test4/output/1.json
new file mode 100644
index 000000000..79e3a369b
--- /dev/null
+++ b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test4/output/1.json
@@ -0,0 +1,54 @@
+{
+    ""TimeIntervalUtilization"": [
+        {
+            ""TotalCapacity"": 10,
+            ""RemainingCapacity"": 9,
+            ""MaxDropEmptyCpty"": 10,
+            ""RemainingDropEmptyCpty"": 9,
+            ""ResourceUnitId"": ""CAPACITY_TEST_4"",
+            ""AppointmentDate"": ""2024-08-14""
+        },
+        {
+            ""TotalCapacity"": 5,
+            ""RemainingCapacity"": 4,
+            ""MaxDropEmptyCpty"": 5,
+            ""RemainingDropEmptyCpty"": 4,
+            ""ResourceUnitId"": ""CAPACITY_TEST_4"",
+            ""AppointmentDate"": ""2024-08-15""
+        }
+    ],
+    ""DayLevelUtilization"": [
+        {
+            ""TotalCapacity"": 10,
+            ""RemainingCapacity"": 6,
+            ""ResourceUnitId"": ""CAPACITY_TEST_4"",
+            ""AppointmentDate"": ""2024-08-14"",
+            ""ConstraintTypeId"": ""NUMBER_OF_APPOINTMENTS"",
+            ""WeekDayId"": ""3""
+        },
+        {
+            ""TotalCapacity"": 10,
+            ""RemainingCapacity"": 9,
+            ""ResourceUnitId"": ""CAPACITY_TEST_4"",
+            ""AppointmentDate"": ""2024-08-15"",
+            ""ConstraintTypeId"": ""NUMBER_OF_APPOINTMENTS"",
+            ""WeekDayId"": ""4""
+        }
+    ],
+    ""FacilityLevelUtilization"": [
+        {
+            ""TotalCapacity"": 10,
+            ""RemainingCapacity"": 9,
+            ""AppointmentDate"": ""2024-08-14"",
+            ""ConstraintTypeId"": ""NUMBER_OF_APPOINTMENTS"",
+            ""WeekDayId"": ""3""
+        },
+        {
+            ""TotalCapacity"": 10,
+            ""RemainingCapacity"": 2,
+            ""AppointmentDate"": ""2024-08-15"",
+            ""ConstraintTypeId"": ""NUMBER_OF_APPOINTMENTS"",
+            ""WeekDayId"": ""4""
+        }
+    ]
+}
diff --git a/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test5/config/breakdown.json b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test5/config/breakdown.json
new file mode 100644
index 000000000..6a05eef52
--- /dev/null
+++ b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test5/config/breakdown.json
@@ -0,0 +1,6 @@
+{
+  ""TimeIntervalUtilization"": [],
+  ""DayLevelUtilization"": [],
+  ""FacilityLevelUtilization"": [],
+  ""FacilityDayLevelScope"": []
+}
diff --git a/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test5/config/facilityId.json b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test5/config/facilityId.json
new file mode 100644
index 000000000..83165797f
--- /dev/null
+++ b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test5/config/facilityId.json
@@ -0,0 +1,3 @@
+{
+    ""FacilityId"": ""01""
+}
diff --git a/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test5/description.txt b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test5/description.txt
new file mode 100644
index 000000000..87975d8d5
--- /dev/null
+++ b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test5/description.txt
@@ -0,0 +1,2 @@
+One facility day level utilization already has a capacity of 0, so even though the other two have available capacity,
+it should fail the capacity check
diff --git a/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test5/input/1.json b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test5/input/1.json
new file mode 100644
index 000000000..d5faba4d2
--- /dev/null
+++ b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test5/input/1.json
@@ -0,0 +1,83 @@
+{
+    ""TimeIntervalDefinition"": [
+        {
+            ""TimeIntervalDefinitionId"": ""Wednesday0_24"",
+            ""StartTimeHours"": 0,
+            ""StartTimeMinutes"": 0,
+            ""EndTimeHours"": 24,
+            ""EndTimeMinutes"": 0,
+            ""TimeIntervalLength"": 60,
+            ""Wednesday"": true
+        }
+    ],
+    ""ResourceGroup"": [
+        {
+            ""ResourceGroupName"": ""CAPACITY_TEST_5"",
+            ""ResourceUnit"": [
+                {
+                    ""ResourceId"": ""CAPACITY_TEST_5"",
+                    ""TimeIntervalScope"" : [
+                        {
+                            ""EffectiveDateTime"": ""1980-01-01T00:00:00"",
+                            ""ExpirationDateTime"": ""2035-01-01T00:00:00"",
+                            ""TimeIntervalCapacity"": [
+                                {
+                                    ""TimeIntervalDefinition"": ""Wednesday0_24"",
+                                    ""MaxAppointments"": 10
+                                }
+                            ]
+                        }
+                    ],
+                    ""DayLevelScope"": [
+                        {
+                            ""EffectiveDateTime"": ""1980-01-01T00:00:00"",
+                            ""ExpirationDateTime"": ""2035-01-01T00:00:00"",
+                            ""Exception"": false,
+                            ""DayLevelCapacity"": [
+                                {
+                                    ""DaysOfWeekId"": ""All"",
+                                    ""CapacityConstraintTypeId"": ""NUMBER_OF_APPOINTMENTS"",
+                                    ""Capacity"": 10,
+                                    ""CapacityConstraintAttribute"": null
+                                }
+                            ]
+                        }
+                    ]
+                }
+            ]
+        }
+    ],
+    ""FacilityDayLevelScope"": [
+        {
+            ""EffectiveDateTime"": ""1980-01-01T00:00:00"",
+            ""ExpirationDateTime"": ""2035-01-01T00:00:00"",
+            ""Exception"": false,
+            ""FacilityDayLevelCapacity"": [
+                {
+                    ""CapacityConstraintTypeId"": ""NUMBER_OF_APPOINTMENTS"",
+                    ""Capacity"": 10,
+                    ""DaysOfWeekId"": ""Wednesday""
+                },
+                {
+                    ""CapacityConstraintTypeId"": ""APPOINTMENT_TYPE"",
+                    ""Capacity"": 10,
+                    ""DaysOfWeekId"": ""Wednesday""
+                },
+                {
+                    ""CapacityConstraintTypeId"": ""UOM"",
+                    ""Capacity"": 10,
+                    ""DaysOfWeekId"": ""Wednesday""
+                }
+            ]
+        }
+    ],
+    ""FacilityLevelUtilization"": [
+        {
+            ""TotalCapacity"": 10,
+            ""RemainingCapacity"": 0,
+            ""ConstraintTypeId"": ""NUMBER_OF_APPOINTMENTS"",
+            ""AppointmentDate"": ""2024-08-14"",
+            ""WeekDayId"": ""3""
+        }
+    ]
+}
diff --git a/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test5/input/appointment.json b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test5/input/appointment.json
new file mode 100644
index 000000000..cd1819a02
--- /dev/null
+++ b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test5/input/appointment.json
@@ -0,0 +1,16 @@
+{
+  ""Appointment"": [
+    {
+      ""AppointmentId"": ""Appointment1"",
+      ""Duration"": ""120"",
+      ""PreferredDateTime"":""2024-08-14T23:00:00"",
+      ""AppointmentTypeId"": ""LIVE_UNLOAD"",
+      ""Resources"": [
+        {
+          ""GroupName"": ""DOCK_DOOR"",
+          ""ResourceName"": ""CAPACITY_TEST_5""
+        }
+      ]
+    }
+  ]
+}
diff --git a/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test5/output/1.json b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test5/output/1.json
new file mode 100644
index 000000000..1709ed283
--- /dev/null
+++ b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test5/output/1.json
@@ -0,0 +1,36 @@
+{
+    ""TimeIntervalUtilization"": [
+        {
+            ""TotalCapacity"": 10,
+            ""RemainingCapacity"": 10,
+            ""ResourceUnitId"": ""CAPACITY_TEST_5"",
+            ""AppointmentDate"": ""2024-08-14""
+        }
+    ],
+    ""DayLevelUtilization"": [
+        {
+            ""TotalCapacity"": 10,
+            ""RemainingCapacity"": 10,
+            ""ResourceUnitId"": ""CAPACITY_TEST_5"",
+            ""AppointmentDate"": ""2024-08-14"",
+            ""ConstraintTypeId"": ""NUMBER_OF_APPOINTMENTS"",
+            ""WeekDayId"": ""3""
+        }
+    ],
+    ""FacilityLevelUtilization"": [
+        {
+            ""TotalCapacity"": 10,
+            ""RemainingCapacity"": 0,
+            ""ConstraintTypeId"": ""NUMBER_OF_APPOINTMENTS"",
+            ""AppointmentDate"": ""2024-08-14"",
+            ""WeekDayId"": ""3""
+        },
+        {
+            ""TotalCapacity"": 10,
+            ""RemainingCapacity"": 10,
+            ""ConstraintTypeId"": ""APPOINTMENT_TYPE"",
+            ""AppointmentDate"": ""2024-08-14"",
+            ""WeekDayId"": ""3""
+        }
+    ]
+}
diff --git a/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test6/config/breakdown.json b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test6/config/breakdown.json
new file mode 100644
index 000000000..6a05eef52
--- /dev/null
+++ b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test6/config/breakdown.json
@@ -0,0 +1,6 @@
+{
+  ""TimeIntervalUtilization"": [],
+  ""DayLevelUtilization"": [],
+  ""FacilityLevelUtilization"": [],
+  ""FacilityDayLevelScope"": []
+}
diff --git a/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test6/config/facilityId.json b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test6/config/facilityId.json
new file mode 100644
index 000000000..83165797f
--- /dev/null
+++ b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test6/config/facilityId.json
@@ -0,0 +1,3 @@
+{
+    ""FacilityId"": ""01""
+}
diff --git a/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test6/description.txt b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test6/description.txt
new file mode 100644
index 000000000..fe4ef6bdd
--- /dev/null
+++ b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test6/description.txt
@@ -0,0 +1,5 @@
+This test submits two appointments for the same time and the first appointment should reduce the remaining time slot
+capacity to 0, and the second appointment should be rejected.
+
+Appointment1: 12-13 - Capacity from 12-13 should be consumed and reduced to 0
+Appointment2: 11-13 - Appointment needs 2 time slots and capacity for 12-13 should already be 0, so it is rejected
diff --git a/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test6/input/1.json b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test6/input/1.json
new file mode 100644
index 000000000..386e07207
--- /dev/null
+++ b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test6/input/1.json
@@ -0,0 +1,65 @@
+{
+    ""TimeIntervalDefinition"": [
+        {
+            ""TimeIntervalDefinitionId"": ""Wednesday0_24"",
+            ""StartTimeHours"": 0,
+            ""StartTimeMinutes"": 0,
+            ""EndTimeHours"": 24,
+            ""EndTimeMinutes"": 0,
+            ""TimeIntervalLength"": 60,
+            ""Wednesday"": true
+        }
+    ],
+    ""ResourceGroup"": [
+        {
+            ""ResourceGroupName"": ""CAPACITY_TEST_6"",
+            ""ResourceUnit"": [
+                {
+                    ""ResourceId"": ""CAPACITY_TEST_6"",
+                    ""TimeIntervalScope"" : [
+                        {
+                            ""EffectiveDateTime"": ""1980-01-01T00:00:00"",
+                            ""ExpirationDateTime"": ""2035-01-01T00:00:00"",
+                            ""TimeIntervalCapacity"": [
+                                {
+                                    ""TimeIntervalDefinition"": ""Wednesday0_24"",
+                                    ""MaxAppointments"": 1,
+                                    ""MaxDropUnloadAppointments"": 99
+                                }
+                            ]
+                        }
+                    ],
+                    ""DayLevelScope"": [
+                        {
+                            ""EffectiveDateTime"": ""1980-01-01T00:00:00"",
+                            ""ExpirationDateTime"": ""2035-01-01T00:00:00"",
+                            ""Exception"": false,
+                            ""DayLevelCapacity"": [
+                                {
+                                    ""DaysOfWeekId"": ""All"",
+                                    ""CapacityConstraintTypeId"": ""NUMBER_OF_APPOINTMENTS"",
+                                    ""Capacity"": 10,
+                                    ""CapacityConstraintAttribute"": null
+                                }
+                            ]
+                        }
+                    ]
+                }
+            ]
+        }
+    ],
+    ""FacilityDayLevelScope"": [
+        {
+            ""EffectiveDateTime"": ""1980-01-01T00:00:00"",
+            ""ExpirationDateTime"": ""2035-01-01T00:00:00"",
+            ""Exception"": false,
+            ""FacilityDayLevelCapacity"": [
+                {
+                    ""CapacityConstraintTypeId"": ""NUMBER_OF_APPOINTMENTS"",
+                    ""Capacity"": 10,
+                    ""DaysOfWeekId"": ""All""
+                }
+            ]
+        }
+    ]
+}
diff --git a/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test6/input/appointment.json b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test6/input/appointment.json
new file mode 100644
index 000000000..d4f0657e9
--- /dev/null
+++ b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test6/input/appointment.json
@@ -0,0 +1,28 @@
+{
+  ""Appointment"": [
+    {
+      ""AppointmentId"": ""Appointment1"",
+      ""Duration"": ""60"",
+      ""PreferredDateTime"":""2024-08-14T12:00:00"",
+      ""AppointmentTypeId"": ""DROP_UNLOAD"",
+      ""Resources"": [
+        {
+          ""GroupName"": ""DOCK_DOOR"",
+          ""ResourceName"": ""CAPACITY_TEST_6""
+        }
+      ]
+    },
+    {
+      ""AppointmentId"": ""Appointment2"",
+      ""Duration"": ""120"",
+      ""PreferredDateTime"":""2024-08-14T11:00:00"",
+      ""AppointmentTypeId"": ""DROP_UNLOAD"",
+      ""Resources"": [
+        {
+          ""GroupName"": ""DOCK_DOOR"",
+          ""ResourceName"": ""CAPACITY_TEST_6""
+        }
+      ]
+    }
+  ]
+}
diff --git a/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test6/output/1.json b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test6/output/1.json
new file mode 100644
index 000000000..f842f30a2
--- /dev/null
+++ b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test6/output/1.json
@@ -0,0 +1,39 @@
+{
+    ""TimeIntervalUtilization"": [
+        {
+            ""TotalCapacity"": 1,
+            ""RemainingCapacity"": 0,
+            ""MaxDropUnloadCpty"": 99,
+            ""RemainingDropUnloadCpty"": 98,
+            ""ResourceUnitId"": ""CAPACITY_TEST_6"",
+            ""AppointmentDate"": ""2024-08-14""
+        },
+        {
+            ""TotalCapacity"": 1,
+            ""RemainingCapacity"": 1,
+            ""MaxDropUnloadCpty"": 99,
+            ""RemainingDropUnloadCpty"": 99,
+            ""ResourceUnitId"": ""CAPACITY_TEST_6"",
+            ""AppointmentDate"": ""2024-08-14""
+        }
+    ],
+    ""DayLevelUtilization"": [
+        {
+            ""TotalCapacity"": 10,
+            ""RemainingCapacity"": 9,
+            ""ResourceUnitId"": ""CAPACITY_TEST_6"",
+            ""AppointmentDate"": ""2024-08-14"",
+            ""ConstraintTypeId"": ""NUMBER_OF_APPOINTMENTS"",
+            ""WeekDayId"": ""3""
+        }
+    ],
+    ""FacilityLevelUtilization"": [
+        {
+            ""TotalCapacity"": 10,
+            ""RemainingCapacity"": 9,
+            ""AppointmentDate"": ""2024-08-14"",
+            ""ConstraintTypeId"": ""NUMBER_OF_APPOINTMENTS"",
+            ""WeekDayId"": ""3""
+        }
+    ]
+}
diff --git a/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test7/config/breakdown.json b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test7/config/breakdown.json
new file mode 100644
index 000000000..6a05eef52
--- /dev/null
+++ b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test7/config/breakdown.json
@@ -0,0 +1,6 @@
+{
+  ""TimeIntervalUtilization"": [],
+  ""DayLevelUtilization"": [],
+  ""FacilityLevelUtilization"": [],
+  ""FacilityDayLevelScope"": []
+}
diff --git a/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test7/config/facilityId.json b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test7/config/facilityId.json
new file mode 100644
index 000000000..83165797f
--- /dev/null
+++ b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test7/config/facilityId.json
@@ -0,0 +1,3 @@
+{
+    ""FacilityId"": ""01""
+}
diff --git a/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test7/description.txt b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test7/description.txt
new file mode 100644
index 000000000..613664adc
--- /dev/null
+++ b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test7/description.txt
@@ -0,0 +1,2 @@
+One day level utilization already has a capacity of 0, so even though the other two have available capacity,
+it should fail the capacity check
diff --git a/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test7/input/1.json b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test7/input/1.json
new file mode 100644
index 000000000..790319f13
--- /dev/null
+++ b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test7/input/1.json
@@ -0,0 +1,86 @@
+{
+    ""TimeIntervalDefinition"": [
+        {
+            ""TimeIntervalDefinitionId"": ""Wednesday0_24"",
+            ""StartTimeHours"": 0,
+            ""StartTimeMinutes"": 0,
+            ""EndTimeHours"": 24,
+            ""EndTimeMinutes"": 0,
+            ""TimeIntervalLength"": 60,
+            ""Wednesday"": true
+        }
+    ],
+    ""ResourceGroup"": [
+        {
+            ""ResourceGroupName"": ""CAPACITY_TEST_7"",
+            ""ResourceUnit"": [
+                {
+                    ""ResourceId"": ""CAPACITY_TEST_7"",
+                    ""TimeIntervalScope"" : [
+                        {
+                            ""EffectiveDateTime"": ""1980-01-01T00:00:00"",
+                            ""ExpirationDateTime"": ""2035-01-01T00:00:00"",
+                            ""TimeIntervalCapacity"": [
+                                {
+                                    ""TimeIntervalDefinition"": ""Wednesday0_24"",
+                                    ""MaxAppointments"": 10
+                                }
+                            ]
+                        }
+                    ],
+                    ""DayLevelScope"": [
+                        {
+                            ""EffectiveDateTime"": ""1980-01-01T00:00:00"",
+                            ""ExpirationDateTime"": ""2035-01-01T00:00:00"",
+                            ""Exception"": false,
+                            ""DayLevelCapacity"": [
+                                {
+                                    ""DaysOfWeekId"": ""Wednesday"",
+                                    ""CapacityConstraintTypeId"": ""NUMBER_OF_APPOINTMENTS"",
+                                    ""Capacity"": 10,
+                                    ""CapacityConstraintAttribute"": null
+                                },
+                                {
+                                    ""DaysOfWeekId"": ""All"",
+                                    ""CapacityConstraintTypeId"": ""APPOINTMENT_TYPE"",
+                                    ""Capacity"": 10,
+                                    ""CapacityConstraintAttribute"": null
+                                },
+                                {
+                                    ""DaysOfWeekId"": ""Wednesday"",
+                                    ""CapacityConstraintTypeId"": ""UOM"",
+                                    ""Capacity"": 10,
+                                    ""CapacityConstraintAttribute"": null
+                                }
+                            ]
+                        }
+                    ]
+                }
+            ]
+        }
+    ],
+    ""FacilityDayLevelScope"": [
+        {
+            ""EffectiveDateTime"": ""1980-01-01T00:00:00"",
+            ""ExpirationDateTime"": ""2035-01-01T00:00:00"",
+            ""Exception"": false,
+            ""FacilityDayLevelCapacity"": [
+                {
+                    ""CapacityConstraintTypeId"": ""NUMBER_OF_APPOINTMENTS"",
+                    ""Capacity"": 10,
+                    ""DaysOfWeekId"": ""Wednesday""
+                }
+            ]
+        }
+    ],
+    ""DayLevelUtilization"": [
+        {
+            ""TotalCapacity"": 10,
+            ""RemainingCapacity"": 0,
+            ""ResourceUnitId"": ""CAPACITY_TEST_7"",
+            ""ConstraintTypeId"": ""UOM"",
+            ""AppointmentDate"": ""2024-08-14"",
+            ""WeekDayId"": ""3""
+        }
+    ]
+}
diff --git a/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test7/input/appointment.json b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test7/input/appointment.json
new file mode 100644
index 000000000..f417a82cd
--- /dev/null
+++ b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test7/input/appointment.json
@@ -0,0 +1,16 @@
+{
+  ""Appointment"": [
+    {
+      ""AppointmentId"": ""Appointment1"",
+      ""Duration"": ""120"",
+      ""PreferredDateTime"":""2024-08-14T23:00:00"",
+      ""AppointmentTypeId"": ""LIVE_UNLOAD"",
+      ""Resources"": [
+        {
+          ""GroupName"": ""DOCK_DOOR"",
+          ""ResourceName"": ""CAPACITY_TEST_7""
+        }
+      ]
+    }
+  ]
+}
diff --git a/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test7/output/1.json b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test7/output/1.json
new file mode 100644
index 000000000..03d5c567f
--- /dev/null
+++ b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test7/output/1.json
@@ -0,0 +1,45 @@
+{
+    ""TimeIntervalUtilization"": [
+        {
+            ""TotalCapacity"": 10,
+            ""RemainingCapacity"": 10,
+            ""ResourceUnitId"": ""CAPACITY_TEST_7"",
+            ""AppointmentDate"": ""2024-08-14""
+        }
+    ],
+    ""DayLevelUtilization"": [
+        {
+            ""TotalCapacity"": 10,
+            ""RemainingCapacity"": 0,
+            ""ResourceUnitId"": ""CAPACITY_TEST_7"",
+            ""AppointmentDate"": ""2024-08-14"",
+            ""ConstraintTypeId"": ""UOM"",
+            ""WeekDayId"": ""3""
+        },
+        {
+            ""TotalCapacity"": 10,
+            ""RemainingCapacity"": 10,
+            ""ResourceUnitId"": ""CAPACITY_TEST_7"",
+            ""AppointmentDate"": ""2024-08-14"",
+            ""ConstraintTypeId"": ""APPOINTMENT_TYPE"",
+            ""WeekDayId"": ""3""
+        },
+        {
+            ""TotalCapacity"": 10,
+            ""RemainingCapacity"": 10,
+            ""ResourceUnitId"": ""CAPACITY_TEST_7"",
+            ""AppointmentDate"": ""2024-08-14"",
+            ""ConstraintTypeId"": ""NUMBER_OF_APPOINTMENTS"",
+            ""WeekDayId"": ""3""
+        }
+    ],
+    ""FacilityLevelUtilization"": [
+        {
+            ""TotalCapacity"": 10,
+            ""RemainingCapacity"": 10,
+            ""ConstraintTypeId"": ""NUMBER_OF_APPOINTMENTS"",
+            ""AppointmentDate"": ""2024-08-14"",
+            ""WeekDayId"": ""3""
+        }
+    ]
+}
diff --git a/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test8/config/breakdown.json b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test8/config/breakdown.json
new file mode 100644
index 000000000..6a05eef52
--- /dev/null
+++ b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test8/config/breakdown.json
@@ -0,0 +1,6 @@
+{
+  ""TimeIntervalUtilization"": [],
+  ""DayLevelUtilization"": [],
+  ""FacilityLevelUtilization"": [],
+  ""FacilityDayLevelScope"": []
+}
diff --git a/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test8/config/facilityId.json b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test8/config/facilityId.json
new file mode 100644
index 000000000..83165797f
--- /dev/null
+++ b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test8/config/facilityId.json
@@ -0,0 +1,3 @@
+{
+    ""FacilityId"": ""01""
+}
diff --git a/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test8/description.txt b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test8/description.txt
new file mode 100644
index 000000000..45b427315
--- /dev/null
+++ b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test8/description.txt
@@ -0,0 +1,2 @@
+There are day and facility level capacities with a remaining capacity of 0, but they are for thursday and should be ignored.
+The appointment should consume capacity because Wednesday has all the available capacity
diff --git a/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test8/input/1.json b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test8/input/1.json
new file mode 100644
index 000000000..1ddc2fe3b
--- /dev/null
+++ b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test8/input/1.json
@@ -0,0 +1,95 @@
+{
+    ""TimeIntervalDefinition"": [
+        {
+            ""TimeIntervalDefinitionId"": ""Wednesday0_24"",
+            ""StartTimeHours"": 0,
+            ""StartTimeMinutes"": 0,
+            ""EndTimeHours"": 24,
+            ""EndTimeMinutes"": 0,
+            ""TimeIntervalLength"": 60,
+            ""Wednesday"": true
+        }
+    ],
+    ""ResourceGroup"": [
+        {
+            ""ResourceGroupName"": ""CAPACITY_TEST_8"",
+            ""ResourceUnit"": [
+                {
+                    ""ResourceId"": ""CAPACITY_TEST_8"",
+                    ""TimeIntervalScope"" : [
+                        {
+                            ""EffectiveDateTime"": ""1980-01-01T00:00:00"",
+                            ""ExpirationDateTime"": ""2035-01-01T00:00:00"",
+                            ""TimeIntervalCapacity"": [
+                                {
+                                    ""TimeIntervalDefinition"": ""Wednesday0_24"",
+                                    ""MaxAppointments"": 10,
+                                    ""MaxPickupEmptyAppointments"": 10
+                                }
+                            ]
+                        }
+                    ],
+                    ""DayLevelScope"": [
+                        {
+                            ""EffectiveDateTime"": ""1980-01-01T00:00:00"",
+                            ""ExpirationDateTime"": ""2035-01-01T00:00:00"",
+                            ""Exception"": false,
+                            ""DayLevelCapacity"": [
+                                {
+                                    ""DaysOfWeekId"": ""Wednesday"",
+                                    ""CapacityConstraintTypeId"": ""NUMBER_OF_APPOINTMENTS"",
+                                    ""Capacity"": 10,
+                                    ""CapacityConstraintAttribute"": null
+                                },
+                                {
+                                    ""DaysOfWeekId"": ""Thursday"",
+                                    ""CapacityConstraintTypeId"": ""APPOINTMENT_TYPE"",
+                                    ""Capacity"": 0,
+                                    ""CapacityConstraintAttribute"": null
+                                }
+                            ]
+                        }
+                    ]
+                }
+            ]
+        }
+    ],
+    ""FacilityDayLevelScope"": [
+        {
+            ""EffectiveDateTime"": ""1980-01-01T00:00:00"",
+            ""ExpirationDateTime"": ""2035-01-01T00:00:00"",
+            ""Exception"": false,
+            ""FacilityDayLevelCapacity"": [
+                {
+                    ""CapacityConstraintTypeId"": ""NUMBER_OF_APPOINTMENTS"",
+                    ""Capacity"": 10,
+                    ""DaysOfWeekId"": ""Wednesday""
+                },
+                {
+                    ""CapacityConstraintTypeId"": ""NUMBER_OF_APPOINTMENTS"",
+                    ""Capacity"": 0,
+                    ""DaysOfWeekId"": ""Thursday""
+                }
+            ]
+        }
+    ],
+    ""DayLevelUtilization"": [
+        {
+            ""TotalCapacity"": 10,
+            ""RemainingCapacity"": 0,
+            ""ResourceUnitId"": ""CAPACITY_TEST_8"",
+            ""ConstraintTypeId"": ""UOM"",
+            ""AppointmentDate"": ""2024-08-15"",
+            ""WeekDayId"": ""4""
+        }
+    ],
+    ""FacilityLevelUtilization"": [
+        {
+            ""TotalCapacity"": 10,
+            ""RemainingCapacity"": 0,
+            ""ConstraintTypeId"": ""NUMBER_OF_APPOINTMENTS"",
+            ""AppointmentDate"": ""2024-08-15"",
+            ""WeekDayId"": ""4""
+        }
+    ]
+}
diff --git a/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test8/input/appointment.json b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test8/input/appointment.json
new file mode 100644
index 000000000..ca7128ca1
--- /dev/null
+++ b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test8/input/appointment.json
@@ -0,0 +1,16 @@
+{
+  ""Appointment"": [
+    {
+      ""AppointmentId"": ""Appointment1"",
+      ""Duration"": ""60"",
+      ""PreferredDateTime"":""2024-08-14T12:00:00"",
+      ""AppointmentTypeId"": ""PICKUP_EMPTY"",
+      ""Resources"": [
+        {
+          ""GroupName"": ""DOCK_DOOR"",
+          ""ResourceName"": ""CAPACITY_TEST_8""
+        }
+      ]
+    }
+  ]
+}
diff --git a/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test8/output/1.json b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test8/output/1.json
new file mode 100644
index 000000000..c9e85a981
--- /dev/null
+++ b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test8/output/1.json
@@ -0,0 +1,46 @@
+{
+    ""TimeIntervalUtilization"": [
+        {
+            ""TotalCapacity"": 10,
+            ""RemainingCapacity"": 9,
+            ""MaxPickupEmptyCpty"": 10,
+            ""RemainingPickupEmptyCpty"": 9,
+            ""ResourceUnitId"": ""CAPACITY_TEST_8"",
+            ""AppointmentDate"": ""2024-08-14""
+        }
+    ],
+    ""DayLevelUtilization"": [
+        {
+            ""TotalCapacity"": 10,
+            ""RemainingCapacity"": 0,
+            ""ResourceUnitId"": ""CAPACITY_TEST_8"",
+            ""ConstraintTypeId"": ""UOM"",
+            ""AppointmentDate"": ""2024-08-15"",
+            ""WeekDayId"": ""4""
+        },
+        {
+            ""TotalCapacity"": 10,
+            ""RemainingCapacity"": 9,
+            ""ResourceUnitId"": ""CAPACITY_TEST_8"",
+            ""AppointmentDate"": ""2024-08-14"",
+            ""ConstraintTypeId"": ""NUMBER_OF_APPOINTMENTS"",
+            ""WeekDayId"": ""3""
+        }
+    ],
+    ""FacilityLevelUtilization"": [
+        {
+            ""TotalCapacity"": 10,
+            ""RemainingCapacity"": 9,
+            ""ConstraintTypeId"": ""NUMBER_OF_APPOINTMENTS"",
+            ""AppointmentDate"": ""2024-08-14"",
+            ""WeekDayId"": ""3""
+        },
+        {
+            ""TotalCapacity"": 10,
+            ""RemainingCapacity"": 0,
+            ""ConstraintTypeId"": ""NUMBER_OF_APPOINTMENTS"",
+            ""AppointmentDate"": ""2024-08-15"",
+            ""WeekDayId"": ""4""
+        }
+    ]
+}
diff --git a/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test9/config/breakdown.json b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test9/config/breakdown.json
new file mode 100644
index 000000000..6a05eef52
--- /dev/null
+++ b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test9/config/breakdown.json
@@ -0,0 +1,6 @@
+{
+  ""TimeIntervalUtilization"": [],
+  ""DayLevelUtilization"": [],
+  ""FacilityLevelUtilization"": [],
+  ""FacilityDayLevelScope"": []
+}
diff --git a/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test9/config/facilityId.json b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test9/config/facilityId.json
new file mode 100644
index 000000000..83165797f
--- /dev/null
+++ b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test9/config/facilityId.json
@@ -0,0 +1,3 @@
+{
+    ""FacilityId"": ""01""
+}
diff --git a/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test9/description.txt b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test9/description.txt
new file mode 100644
index 000000000..fbae17953
--- /dev/null
+++ b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test9/description.txt
@@ -0,0 +1,2 @@
+The time interval capacity from 0-6 has a max capacity of 0, but it falls before the appointment time, so it should be ignored.
+The appointment is from 10-20 and spans 3 time intervals, but all 3 have capacity and should be consumed properly.
diff --git a/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test9/input/1.json b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test9/input/1.json
new file mode 100644
index 000000000..f5ab518d7
--- /dev/null
+++ b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test9/input/1.json
@@ -0,0 +1,107 @@
+{
+    ""TimeIntervalDefinition"": [
+        {
+            ""TimeIntervalDefinitionId"": ""Wednesday0_6"",
+            ""StartTimeHours"": 0,
+            ""StartTimeMinutes"": 0,
+            ""EndTimeHours"": 6,
+            ""EndTimeMinutes"": 0,
+            ""TimeIntervalLength"": 180,
+            ""Wednesday"": true
+        },
+        {
+            ""TimeIntervalDefinitionId"": ""Wednesday6_12"",
+            ""StartTimeHours"": 6,
+            ""StartTimeMinutes"": 0,
+            ""EndTimeHours"": 12,
+            ""EndTimeMinutes"": 0,
+            ""TimeIntervalLength"": 180,
+            ""Wednesday"": true
+        },
+        {
+            ""TimeIntervalDefinitionId"": ""Wednesday12_18"",
+            ""StartTimeHours"": 12,
+            ""StartTimeMinutes"": 0,
+            ""EndTimeHours"": 18,
+            ""EndTimeMinutes"": 0,
+            ""TimeIntervalLength"": 180,
+            ""Wednesday"": true
+        },
+        {
+            ""TimeIntervalDefinitionId"": ""Wednesday18_24"",
+            ""StartTimeHours"": 18,
+            ""StartTimeMinutes"": 0,
+            ""EndTimeHours"": 24,
+            ""EndTimeMinutes"": 0,
+            ""TimeIntervalLength"": 180,
+            ""Wednesday"": true
+        }
+    ],
+    ""ResourceGroup"": [
+        {
+            ""ResourceGroupName"": ""CAPACITY_TEST_9"",
+            ""ResourceUnit"": [
+                {
+                    ""ResourceId"": ""CAPACITY_TEST_9"",
+                    ""TimeIntervalScope"" : [
+                        {
+                            ""EffectiveDateTime"": ""1980-01-01T00:00:00"",
+                            ""ExpirationDateTime"": ""2035-01-01T00:00:00"",
+                            ""TimeIntervalCapacity"": [
+                                {
+                                    ""TimeIntervalDefinition"": ""Wednesday0_6"",
+                                    ""MaxAppointments"": 0,
+                                    ""MaxPickupLoadAppointments"": 0
+                                },
+                                {
+                                    ""TimeIntervalDefinition"": ""Wednesday6_12"",
+                                    ""MaxAppointments"": 1,
+                                    ""MaxPickupLoadAppointments"": 1
+                                },
+                                {
+                                    ""TimeIntervalDefinition"": ""Wednesday12_18"",
+                                    ""MaxAppointments"": 2,
+                                    ""MaxPickupLoadAppointments"": 2
+                                },
+                                {
+                                    ""TimeIntervalDefinition"": ""Wednesday18_24"",
+                                    ""MaxAppointments"": 3,
+                                    ""MaxPickupLoadAppointments"": 3
+                                }
+                            ]
+                        }
+                    ],
+                    ""DayLevelScope"": [
+                        {
+                            ""EffectiveDateTime"": ""1980-01-01T00:00:00"",
+                            ""ExpirationDateTime"": ""2035-01-01T00:00:00"",
+                            ""Exception"": false,
+                            ""DayLevelCapacity"": [
+                                {
+                                    ""DaysOfWeekId"": ""All"",
+                                    ""CapacityConstraintTypeId"": ""NUMBER_OF_APPOINTMENTS"",
+                                    ""Capacity"": 1,
+                                    ""CapacityConstraintAttribute"": null
+                                }
+                            ]
+                        }
+                    ]
+                }
+            ]
+        }
+    ],
+    ""FacilityDayLevelScope"": [
+        {
+            ""EffectiveDateTime"": ""1980-01-01T00:00:00"",
+            ""ExpirationDateTime"": ""2035-01-01T00:00:00"",
+            ""Exception"": false,
+            ""FacilityDayLevelCapacity"": [
+                {
+                    ""CapacityConstraintTypeId"": ""NUMBER_OF_APPOINTMENTS"",
+                    ""Capacity"": 1,
+                    ""DaysOfWeekId"": ""All""
+                }
+            ]
+        }
+    ]
+}
diff --git a/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test9/input/appointment.json b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test9/input/appointment.json
new file mode 100644
index 000000000..bc91e2090
--- /dev/null
+++ b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test9/input/appointment.json
@@ -0,0 +1,16 @@
+{
+  ""Appointment"": [
+    {
+      ""AppointmentId"": ""Appointment1"",
+      ""Duration"": ""600"",
+      ""PreferredDateTime"":""2024-08-14T10:00:00"",
+      ""AppointmentTypeId"": ""PICKUP_LOAD"",
+      ""Resources"": [
+        {
+          ""GroupName"": ""DOCK_DOOR"",
+          ""ResourceName"": ""CAPACITY_TEST_9""
+        }
+      ]
+    }
+  ]
+}
diff --git a/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test9/output/1.json b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test9/output/1.json
new file mode 100644
index 000000000..f8c8acd24
--- /dev/null
+++ b/src/component-test/resources/appointment/appointment/parameterizedTests/capacityTests/test9/output/1.json
@@ -0,0 +1,55 @@
+{
+    ""TimeIntervalUtilization"": [
+        {
+            ""TotalCapacity"": 1,
+            ""RemainingCapacity"": 0,
+            ""MaxPickupLoadCpty"": 1,
+            ""RemainingPickupLoadCpty"": 0,
+            ""ResourceUnitId"": ""CAPACITY_TEST_9"",
+            ""AppointmentDate"": ""2024-08-14""
+        },
+        {
+            ""TotalCapacity"": 2,
+            ""RemainingCapacity"": 1,
+            ""MaxPickupLoadCpty"": 2,
+            ""RemainingPickupLoadCpty"": 1,
+            ""ResourceUnitId"": ""CAPACITY_TEST_9"",
+            ""AppointmentDate"": ""2024-08-14""
+        },
+        {
+            ""TotalCapacity"": 2,
+            ""RemainingCapacity"": 1,
+            ""MaxPickupLoadCpty"": 2,
+            ""RemainingPickupLoadCpty"": 1,
+            ""ResourceUnitId"": ""CAPACITY_TEST_9"",
+            ""AppointmentDate"": ""2024-08-14""
+        },
+        {
+            ""TotalCapacity"": 3,
+            ""RemainingCapacity"": 2,
+            ""MaxPickupLoadCpty"": 3,
+            ""RemainingPickupLoadCpty"": 2,
+            ""ResourceUnitId"": ""CAPACITY_TEST_9"",
+            ""AppointmentDate"": ""2024-08-14""
+        }
+    ],
+    ""DayLevelUtilization"": [
+        {
+            ""TotalCapacity"": 1,
+            ""RemainingCapacity"": 0,
+            ""ResourceUnitId"": ""CAPACITY_TEST_9"",
+            ""AppointmentDate"": ""2024-08-14"",
+            ""ConstraintTypeId"": ""NUMBER_OF_APPOINTMENTS"",
+            ""WeekDayId"": ""3""
+        }
+    ],
+    ""FacilityLevelUtilization"": [
+        {
+            ""TotalCapacity"": 1,
+            ""RemainingCapacity"": 0,
+            ""AppointmentDate"": ""2024-08-14"",
+            ""ConstraintTypeId"": ""NUMBER_OF_APPOINTMENTS"",
+            ""WeekDayId"": ""3""
+        }
+    ]
+}
diff --git a/src/main/java/com/manh/cp/appointment/appointment/AppointmentApplicationParameters.java b/src/main/java/com/manh/cp/appointment/appointment/AppointmentApplicationParameters.java
index 6eb5b1d58..d40f76c5f 100644
--- a/src/main/java/com/manh/cp/appointment/appointment/AppointmentApplicationParameters.java
+++ b/src/main/java/com/manh/cp/appointment/appointment/AppointmentApplicationParameters.java
@@ -41,7 +41,7 @@ public class AppointmentApplicationParameters
             new ApplicationParameterSpec<>(""appointment.recommendTimeSlot.slotNotFound.enabled"",
                     Boolean.class);
 
-    public static final ApplicationParameterSpec<Boolean> APT_TIME_SLOT_POPULATION =
-            new ApplicationParameterSpec<>(""appointment.timeSlot.population.enabled"", false,
+    public static final ApplicationParameterSpec<Boolean> APT_REDESIGN_ENABLED =
+            new ApplicationParameterSpec<>(""appointment.redesign.enabled"", false,
                     Boolean.class);
 }
diff --git a/src/main/java/com/manh/cp/appointment/appointment/event/TimeIntervalDefinitionEventService.java b/src/main/java/com/manh/cp/appointment/appointment/event/TimeIntervalDefinitionEventService.java
index dbbbc770d..a8733b78a 100644
--- a/src/main/java/com/manh/cp/appointment/appointment/event/TimeIntervalDefinitionEventService.java
+++ b/src/main/java/com/manh/cp/appointment/appointment/event/TimeIntervalDefinitionEventService.java
@@ -66,7 +66,7 @@ public class TimeIntervalDefinitionEventService
         logger.trace("">> processTimeIntervalDefinition()"");
 
         if (Boolean.TRUE.equals(applicationParameterService
-                .getParameterValue(AppointmentApplicationParameters.APT_TIME_SLOT_POPULATION)))
+                .getParameterValue(AppointmentApplicationParameters.APT_REDESIGN_ENABLED)))
         {
             Document timeIntervalDefinitionDocument = new Document();
             Map<String, Object> timeIntervalDefinitionDocumentMap = timeIntervalDefinitionDocument.getMap();
diff --git a/src/main/java/com/manh/cp/appointment/appointment/impl/service/AppointmentManager.java b/src/main/java/com/manh/cp/appointment/appointment/impl/service/AppointmentManager.java
index 4f39b0c5f..76f0f358c 100644
--- a/src/main/java/com/manh/cp/appointment/appointment/impl/service/AppointmentManager.java
+++ b/src/main/java/com/manh/cp/appointment/appointment/impl/service/AppointmentManager.java
@@ -245,7 +245,7 @@ public class AppointmentManager
     public Document scheduleAppointment(Context context, Document document, Template template)
     {
         if (Boolean.TRUE.equals(applicationParameterService
-                .getParameterValue(AppointmentApplicationParameters.APT_TIME_SLOT_POPULATION)))
+                .getParameterValue(AppointmentApplicationParameters.APT_REDESIGN_ENABLED)))
         {
             AppointmentScheduleRecommendationsDTO scheduledAppointment =
                     appointmentManagerHelper.scheduleAppointmentWithNewConfig(context, document, template);
diff --git a/src/main/java/com/manh/cp/appointment/appointment/impl/service/AppointmentManagerHelper.java b/src/main/java/com/manh/cp/appointment/appointment/impl/service/AppointmentManagerHelper.java
index a6f24a3c4..b66a2a2af 100644
--- a/src/main/java/com/manh/cp/appointment/appointment/impl/service/AppointmentManagerHelper.java
+++ b/src/main/java/com/manh/cp/appointment/appointment/impl/service/AppointmentManagerHelper.java
@@ -89,6 +89,7 @@ import com.manh.cp.appointment.config.api.service.AppointmentParameterStrategySe
 import com.manh.cp.appointment.config.client.dto.AppointmentApprovalCriteriaDTO;
 import com.manh.cp.appointment.config.impl.service.ApplicableAppointmentParametersService;
 import com.manh.cp.appointment.core.client.dto.ScheduleDTO;
+import com.manh.cp.appointment.core.dto.CapacityDTO;
 import com.manh.cp.appointment.core.dto.EnhancedAppointmentDTO;
 import com.manh.cp.appointment.core.dto.RecommendationLine;
 import com.manh.cp.appointment.core.dto.RecommendationsObject;
@@ -218,6 +219,9 @@ public class AppointmentManagerHelper
     @Autowired
     private ApplicationParameterService applicationParameterService;
 
+    @Autowired
+    private CapacityManager capacityManager;
+
     private final ObjectMapper objectMapper = new ObjectMapper();
 
     private final String APPOINTMENT_CONTENTS = ""AppointmentContents"";
@@ -270,7 +274,7 @@ public class AppointmentManagerHelper
                 document.remove(""CreatedSourceType"");
 
                 if (Boolean.TRUE.equals(applicationParameterService
-                        .getParameterValue(AppointmentApplicationParameters.APT_TIME_SLOT_POPULATION)))
+                        .getParameterValue(AppointmentApplicationParameters.APT_REDESIGN_ENABLED)))
                 {
                     AppointmentScheduleRecommendationsDTO appointmentScheduleRecommendationsDTO =
                             scheduleAppointmentWithNewConfig(context, document, null);
@@ -775,8 +779,7 @@ public class AppointmentManagerHelper
     {
         logger.trace("">> scheduleAppointmentWithNewConfig()"");
 
-        // TODO: Figure out how to enable this
-        // document = scheduleAppointmentUserExit.preprocess(context, document);
+        document = scheduleAppointmentUserExit.preprocess(context, document);
 
         EnhancedAppointmentDTO enhancedAppointmentDTO = getEnhancedAppointmentDTO(document);
 
@@ -807,8 +810,6 @@ public class AppointmentManagerHelper
         if (errorHandlerService.getMessages(context) == null
                 && validationHelper.validate(context, enhancedAppointmentDTO, AppointmentFlows.APPOINTMENT_CREATION))
         {
-            populateAppointmentId(context, enhancedAppointmentDTO);
-
             labelsHelper.inheritAppointmentContents(context, enhancedAppointmentDTO);
 
             errorHandlerService.checkValidationResults(context);
@@ -853,6 +854,9 @@ public class AppointmentManagerHelper
             Document savedAppointmentDocument =
                     appointmentMapService.saveAppointment(context, allAppointmentDataDocument, null);
 
+            CapacityDTO capacityChecker = new CapacityDTO(enhancedAppointmentDTO);
+            capacityManager.consumeAppointmentCapacity(context, capacityChecker);
+
             logger.debug(""scheduleAppointment - Schedule appointment result : {}"", savedAppointmentDocument);
             appointmentScheduleRecommendationsDTO.setAppointmentDocument(savedAppointmentDocument);
 
@@ -1415,7 +1419,7 @@ public class AppointmentManagerHelper
                         context, document, appointmentDTO);
 
                 if (Boolean.TRUE.equals(applicationParameterService
-                        .getParameterValue(AppointmentApplicationParameters.APT_TIME_SLOT_POPULATION)))
+                        .getParameterValue(AppointmentApplicationParameters.APT_REDESIGN_ENABLED)))
                 {
                     appointmentScheduleRecommendationsDTO = scheduleAppointmentWithNewConfig(context, document, null);
                 }
@@ -1908,7 +1912,7 @@ public class AppointmentManagerHelper
         AppointmentScheduleRecommendationsDTO response;
 
         if (Boolean.TRUE.equals(applicationParameterService
-                .getParameterValue(AppointmentApplicationParameters.APT_TIME_SLOT_POPULATION)))
+                .getParameterValue(AppointmentApplicationParameters.APT_REDESIGN_ENABLED)))
         {
             response = scheduleAppointmentWithNewConfig(context, document, null);
         }
diff --git a/src/main/java/com/manh/cp/appointment/appointment/impl/service/CapacityManager.java b/src/main/java/com/manh/cp/appointment/appointment/impl/service/CapacityManager.java
new file mode 100644
index 000000000..6c2233399
--- /dev/null
+++ b/src/main/java/com/manh/cp/appointment/appointment/impl/service/CapacityManager.java
@@ -0,0 +1,667 @@
+/*
+ * Copyright &#169; 2024 Manhattan Associates, Inc. All Rights Reserved.
+ *
+ * Confidential, Proprietary and Trade Secrets Notice
+ *
+ * Use of this software is governed by a license agreement. This software
+ * contains confidential, proprietary and trade secret information of
+ * Manhattan Associates, Inc. and is protected under United States and
+ * international copyright and other intellectual property laws. Use, disclosure,
+ * reproduction, modification, distribution, or storage in a retrieval system in
+ * any form or by any means is prohibited without the prior express written
+ * permission of Manhattan Associates, Inc.
+ *
+ * Manhattan Associates, Inc.
+ * 2300 Windy Ridge Parkway, 10th Floor
+ * Atlanta, GA 30339 USA
+ */
+package com.manh.cp.appointment.appointment.impl.service;
+
+import java.time.DayOfWeek;
+import java.time.LocalDateTime;
+import java.time.LocalTime;
+import java.util.ArrayList;
+import java.util.Comparator;
+import java.util.List;
+import java.util.UUID;
+import java.util.stream.Collectors;
+
+import org.springframework.beans.factory.annotation.Autowired;
+import org.springframework.stereotype.Component;
+import org.springframework.transaction.annotation.Propagation;
+import org.springframework.transaction.annotation.Transactional;
+import org.springframework.util.CollectionUtils;
+
+import com.manh.cp.appointment.appointment.client.Constants.AppointmentType;
+import com.manh.cp.appointment.core.api.domain.DayLevelCapacity;
+import com.manh.cp.appointment.core.api.domain.DayLevelScope;
+import com.manh.cp.appointment.core.api.domain.DayLevelUtilization;
+import com.manh.cp.appointment.core.api.domain.DayLevelUtilizationBase;
+import com.manh.cp.appointment.core.api.domain.FacilityDayLevelCapacity;
+import com.manh.cp.appointment.core.api.domain.FacilityDayLevelScope;
+import com.manh.cp.appointment.core.api.domain.FacilityLevelUtilization;
+import com.manh.cp.appointment.core.api.domain.FacilityLevelUtilizationBase;
+import com.manh.cp.appointment.core.api.domain.ResourceUnit;
+import com.manh.cp.appointment.core.api.domain.TimeIntervalCapacity;
+import com.manh.cp.appointment.core.api.domain.TimeIntervalDefinition;
+import com.manh.cp.appointment.core.api.domain.TimeIntervalScope;
+import com.manh.cp.appointment.core.api.domain.TimeIntervalUtilization;
+import com.manh.cp.appointment.core.api.domain.TimeIntervalUtilizationBase;
+import com.manh.cp.appointment.core.api.domain.TimeSlot;
+import com.manh.cp.appointment.core.api.service.DayLevelUtilizationService;
+import com.manh.cp.appointment.core.api.service.FacilityDayLevelScopeService;
+import com.manh.cp.appointment.core.api.service.FacilityLevelUtilizationService;
+import com.manh.cp.appointment.core.api.service.ResourceUnitService;
+import com.manh.cp.appointment.core.api.service.TimeIntervalUtilizationService;
+import com.manh.cp.appointment.core.api.service.TimeSlotService;
+import com.manh.cp.appointment.core.dto.CapacityDTO;
+import com.manh.cp.appointment.core.dto.SingleDayTimeIntervalDefinition;
+import com.manh.cp.appointment.core.impl.domain.entity.DayLevelUtilizationEntity;
+import com.manh.cp.appointment.core.impl.domain.entity.FacilityLevelUtilizationEntity;
+import com.manh.cp.appointment.core.impl.domain.entity.TimeIntervalUtilizationEntity;
+import com.manh.cp.fw.common.Context;
+import com.manh.cp.fw.core.logging.CPLoggerFactory;
+import com.manh.cp.fw.core.logging.Logger;
+import com.manh.cp.fw.entity.support.factory.EntityFactory;
+import com.manh.cp.fw.entity.support.helper.SecurityKeyHelper;
+
+@Component
+public class CapacityManager
+{
+    private static final Logger logger = CPLoggerFactory.getLogger(CapacityManager.class);
+
+    @Autowired
+    private TimeSlotService timeSlotService;
+
+    @Autowired
+    private TimeIntervalUtilizationService timeIntervalUtilizationService;
+
+    @Autowired
+    private DayLevelUtilizationService dayLevelUtilizationService;
+
+    @Autowired
+    private FacilityLevelUtilizationService facilityLevelUtilizationService;
+
+    @Autowired
+    private SecurityKeyHelper securityKeyHelper;
+
+    @Autowired
+    private ResourceUnitService resourceUnitService;
+
+    @Autowired
+    private FacilityDayLevelScopeService facilityDayLevelScopeService;
+
+    private final String ALL_DAYS_OF_WEEK = ""All"";
+
+    @Transactional(propagation = Propagation.REQUIRES_NEW)
+    public void consumeAppointmentCapacity(Context context, CapacityDTO capacityDTO)
+    {
+        if (CollectionUtils.isEmpty(capacityDTO.getResources()))
+        {
+            logger.error(""-- No resources assigned to appointment [{}], so skipping capacity check"",
+                    capacityDTO.getAppointmentId());
+            return;
+        }
+
+        String resourceUnitId = capacityDTO.getResources().get(0).getResourceName();
+        ResourceUnit resourceUnit = resourceUnitService.findByResourceId(context, resourceUnitId);
+
+        if (resourceUnit != null)
+        {
+            validateCapacities(context, resourceUnit, capacityDTO);
+
+            if (capacityDTO.allCapacityChecksAreValid())
+            {
+                for (TimeIntervalUtilization timeIntervalUtilization : capacityDTO.getTimeIntervalUtilizations())
+                {
+                    timeIntervalUtilization.setRemainingCapacity(timeIntervalUtilization.getRemainingCapacity() - 1);
+
+                    switch (capacityDTO.getAppointmentTypeId())
+                    {
+                        case LIVE_UNLOAD:
+                            if (timeIntervalUtilization.getRemainingLiveUnloadCpty() != null)
+                            {
+                                timeIntervalUtilization
+                                        .setRemainingLiveUnloadCpty(
+                                                timeIntervalUtilization.getRemainingLiveUnloadCpty() - 1);
+                            }
+                            break;
+                        case LIVE_LOAD:
+                            if (timeIntervalUtilization.getRemainingLiveLoadCpty() != null)
+                            {
+                                timeIntervalUtilization
+                                        .setRemainingLiveLoadCpty(
+                                                timeIntervalUtilization.getRemainingLiveLoadCpty() - 1);
+                            }
+                            break;
+                        case PICKUP_LOAD:
+                            if (timeIntervalUtilization.getRemainingPickupLoadCpty() != null)
+                            {
+                                timeIntervalUtilization
+                                        .setRemainingPickupLoadCpty(
+                                                timeIntervalUtilization.getRemainingPickupLoadCpty() - 1);
+                            }
+                            break;
+                        case PICKUP_EMPTY:
+                            if (timeIntervalUtilization.getRemainingPickupEmptyCpty() != null)
+                            {
+                                timeIntervalUtilization
+                                        .setRemainingPickupEmptyCpty(
+                                                timeIntervalUtilization.getRemainingPickupEmptyCpty() - 1);
+                            }
+                            break;
+                        case DROP_EMPTY:
+                            if (timeIntervalUtilization.getRemainingDropEmptyCpty() != null)
+                            {
+                                timeIntervalUtilization
+                                        .setRemainingDropEmptyCpty(
+                                                timeIntervalUtilization.getRemainingDropEmptyCpty() - 1);
+                            }
+                            break;
+                        case DROP_UNLOAD:
+                            if (timeIntervalUtilization.getRemainingDropUnloadCpty() != null)
+                            {
+                                timeIntervalUtilization
+                                        .setRemainingDropUnloadCpty(
+                                                timeIntervalUtilization.getRemainingDropUnloadCpty() - 1);
+                            }
+                            break;
+                    }
+
+                    timeIntervalUtilizationService.save(context, timeIntervalUtilization, null, true);
+                }
+
+                for (DayLevelUtilization dayLevelUtilization : capacityDTO.getDayLevelUtilizations())
+                {
+                    dayLevelUtilization.setRemainingCapacity(dayLevelUtilization.getRemainingCapacity() - 1);
+                    dayLevelUtilizationService.save(context, dayLevelUtilization, null, true);
+                }
+
+                for (FacilityLevelUtilization facilityLevelUtilization : capacityDTO.getFacilityLevelUtilizations())
+                {
+                    facilityLevelUtilization.setRemainingCapacity(facilityLevelUtilization.getRemainingCapacity() - 1);
+                    facilityLevelUtilizationService.save(context, facilityLevelUtilization, null, true);
+                }
+            }
+            else
+            {
+                logger.error(""-- Capacity check for appointment [{}] at time [{}] is not valid"",
+                        capacityDTO.getAppointmentId(), capacityDTO.getAppointmentDateTime());
+            }
+        }
+        else
+        {
+            logger.error(""-- An appointment has been created with an invalid resource unit. "" +
+                    ""Please investigate appointment [{}] and resource unit [{}]"",
+                    capacityDTO.getAppointmentId(), resourceUnitId);
+        }
+    }
+
+    private void validateCapacities(Context context, ResourceUnit resourceUnit,
+            CapacityDTO capacityDTO)
+    {
+        LocalDateTime appointmentStartTime = capacityDTO.getAppointmentDateTime();
+        Long appointmentDuration = capacityDTO.getAppointmentDuration();
+
+        logger.debug(
+                ""-- Checking for capacity availability for appointment [{}] at start time [{}] with duration [{}] and resource unit [{}]"",
+                capacityDTO.getAppointmentId(), appointmentStartTime, appointmentDuration,
+                resourceUnit.getResourceId());
+
+        TimeIntervalScope timeIntervalScope = resourceUnit.getTimeIntervalScopeList().stream()
+                .filter(scope -> !scope.getEffectiveDateTime()
+                        .isAfter(appointmentStartTime)
+                        && scope.getExpirationDateTime().isAfter(appointmentStartTime))
+                .findFirst().orElse(null);
+
+        if (timeIntervalScope != null)
+        {
+            capacityDTO.resetCapacityCheck();
+
+            List<SingleDayTimeIntervalDefinition> applicableCapacities =
+                    getSingleDayTimeIntervalDefinitions(timeIntervalScope, appointmentStartTime, appointmentDuration);
+
+            for (SingleDayTimeIntervalDefinition singleDayTimeIntervalDefinition : applicableCapacities)
+            {
+                TimeIntervalDefinition timeIntervalDefinition =
+                        singleDayTimeIntervalDefinition.getTimeIntervalCapacity().getTimeIntervalDefinitionEntity();
+                String timeIntervalDefinitionId = timeIntervalDefinition.getTimeIntervalDefinitionId();
+
+                List<TimeSlot> timeSlots =
+                        timeSlotService.findByTimeIntervalDefinitionId(context, timeIntervalDefinitionId);
+
+                if (CollectionUtils.isEmpty(timeSlots))
+                {
+                    logger.error(""-- No time slot was found for start time [{}] and "" +
+                            ""time interval definition [{}], so skipping utilization consumption"",
+                            appointmentStartTime, timeIntervalDefinitionId);
+                    continue;
+                }
+
+                while (capacityDTO.getTotalAppointmentDurationAccountedFor() < appointmentDuration)
+                {
+                    TimeSlot timeSlot = getMatchingTimeSlot(timeSlots, capacityDTO.getTimeSlotAvailabilityCheck());
+
+                    if (timeSlot == null)
+                    {
+                        logger.debug(
+                                ""-- Applicable time slot for time [{}] isn't found, so checking next time interval capacity"",
+                                capacityDTO.getTimeSlotAvailabilityCheck());
+                        break;
+                    }
+
+                    TimeIntervalUtilization timeIntervalUtilization =
+                            timeIntervalUtilizationService.findByTimeSlotId(context, timeSlot.getTimeSlotId());
+
+                    if (timeIntervalUtilization == null)
+                    {
+                        timeIntervalUtilization = createAptTimeIntervalScopeUtil(context,
+                                singleDayTimeIntervalDefinition, timeSlot, capacityDTO, resourceUnit);
+                    }
+
+                    if (timeIntervalUtilizationHasCapacity(timeIntervalUtilization,
+                            capacityDTO.getAppointmentTypeId()))
+                    {
+                        if ((checkDayAndFacilityLevelCapacity(context, resourceUnit, capacityDTO)))
+                        {
+                            capacityDTO.getTimeIntervalUtilizations().add(timeIntervalUtilization);
+                            capacityDTO.incrementTimeSlotCheck(timeSlot.getEndTime());
+                        }
+                        else
+                        {
+                            capacityDTO.resetCapacityCheck();
+                            return;
+                        }
+
+                        if (capacityDTO.getTotalAppointmentDurationAccountedFor() >= appointmentDuration)
+                        {
+                            return;
+                        }
+                    }
+                    else
+                    {
+                        logger.debug(
+                                ""-- Capacity for time interval scope [{}] is already 0 at appointment start time [{}], ""
+                                        + ""so checking next time interval capacity"",
+                                timeIntervalUtilization.getTimeIntervalUtilizationId(), appointmentStartTime);
+
+                        capacityDTO.resetCapacityCheck();
+                        return;
+                    }
+                }
+            }
+        }
+        else
+        {
+            logger.error(""-- No time interval scope was found for resource unit [{}], "" +
+                    ""so skipping utilization consumption"",
+                    resourceUnit.getResourceId());
+        }
+    }
+
+    private boolean checkDayAndFacilityLevelCapacity(Context context, ResourceUnit resourceUnit,
+            CapacityDTO capacityDTO)
+    {
+        if (isDayCapacityAlreadyValid(capacityDTO, capacityDTO.getTimeSlotAvailabilityCheck()))
+        {
+            return true;
+        }
+
+        boolean dayLevelCapacityIsValid = false;
+        DayLevelScope dayLevelScope = resourceUnit.getDayLevelScopeList().stream()
+                .filter(scope -> !scope.getEffectiveDateTime()
+                        .isAfter(capacityDTO.getTimeSlotAvailabilityCheck())
+                        && scope.getExpirationDateTime().isAfter(capacityDTO.getTimeSlotAvailabilityCheck()))
+                .findFirst().orElse(null);
+
+        if (dayLevelScope != null)
+        {
+            String appointmentDayOfWeek = capacityDTO.getTimeSlotAvailabilityCheck().getDayOfWeek().name();
+
+            List<DayLevelCapacity> dayLevelCapacities = dayLevelScope.getDayLevelCapacityList().stream()
+                    .filter(capacity -> capacity.getDaysOfWeekId().equals(ALL_DAYS_OF_WEEK)
+                            || capacity.getDaysOfWeekId().toUpperCase().equals(appointmentDayOfWeek))
+                    .sorted(Comparator.comparing(DayLevelCapacity::getCapacityConstraintTypeId))
+                    .collect(Collectors.toList());
+
+            for (DayLevelCapacity dayLevelCapacity : dayLevelCapacities)
+            {
+                DayLevelUtilization dayLevelUtilization =
+                        dayLevelUtilizationService.findByAppointmentDateConstraintTypeAndResourceUnit(context,
+                                capacityDTO.getTimeSlotAvailabilityCheck(),
+                                dayLevelCapacity.getCapacityConstraintTypeId(), resourceUnit.getResourceId());
+
+                if (dayLevelUtilization == null)
+                {
+                    dayLevelUtilization =
+                            createAptDayLevelScopeUtilization(context, dayLevelCapacity, capacityDTO, resourceUnit);
+                }
+
+                if (dayLevelUtilization.getRemainingCapacity() > 0
+                        && checkAndConsumeFacilityLevelCapacity(context, capacityDTO.getTimeSlotAvailabilityCheck(),
+                                capacityDTO))
+                {
+                    dayLevelCapacityIsValid = true;
+                    capacityDTO.getDayLevelUtilizations().add(dayLevelUtilization);
+                }
+                else
+                {
+                    logger.debug(""-- Capacity for day level scope [{}] is already 0,"" +
+                            "" so checking for the next available time slot"",
+                            dayLevelUtilization.getDayLevelUtilizationId());
+
+                    dayLevelCapacityIsValid = false;
+                    break;
+                }
+            }
+        }
+        else
+        {
+            logger.error(""-- No day level scope was found for resource unit [{}] and effective datetime [{}], "" +
+                    ""so skipping utilization consumption"",
+                    resourceUnit.getResourceId(), capacityDTO.getTimeSlotAvailabilityCheck());
+        }
+
+        return dayLevelCapacityIsValid;
+    }
+
+    private boolean checkAndConsumeFacilityLevelCapacity(Context context, LocalDateTime appointmentDateTime,
+            CapacityDTO capacityDTO)
+    {
+        if (isFacilityCapacityAlreadyValid(capacityDTO, capacityDTO.getTimeSlotAvailabilityCheck()))
+        {
+            return true;
+        }
+
+        boolean facilityLevelCapacityIsValid = false;
+        FacilityDayLevelScope facilityDayLevelScope =
+                facilityDayLevelScopeService.getByEffectiveDate(context, appointmentDateTime);
+
+        if (facilityDayLevelScope != null)
+        {
+            String appointmentDayOfWeek = capacityDTO.getTimeSlotAvailabilityCheck().getDayOfWeek().name();
+
+            List<FacilityDayLevelCapacity> facilityLevelCapacities =
+                    facilityDayLevelScope.getFacilityDayLevelCapacityList().stream()
+                            .filter(capacity -> capacity.getDaysOfWeekId().equals(ALL_DAYS_OF_WEEK)
+                                    || capacity.getDaysOfWeekId().toUpperCase().equals(appointmentDayOfWeek))
+                            .sorted(Comparator.comparing(FacilityDayLevelCapacity::getCapacityConstraintTypeId))
+                            .collect(Collectors.toList());
+
+            for (FacilityDayLevelCapacity facilityDayLevelCapacity : facilityLevelCapacities)
+            {
+                FacilityLevelUtilization facilityLevelUtilization =
+                        facilityLevelUtilizationService.findByAppointmentDateAndConstraintType(context,
+                                appointmentDateTime,
+                                facilityDayLevelCapacity.getCapacityConstraintTypeId());
+
+                if (facilityLevelUtilization == null)
+                {
+                    facilityLevelUtilization =
+                            createAptFacLevelScopeUtilization(context, facilityDayLevelCapacity, appointmentDateTime);
+                }
+
+                if (facilityLevelUtilization.getRemainingCapacity() > 0)
+                {
+                    facilityLevelCapacityIsValid = true;
+                    capacityDTO.getFacilityLevelUtilizations().add(facilityLevelUtilization);
+                }
+                else
+                {
+                    logger.debug(""-- Capacity for facility level scope [{}] is already 0,"" +
+                            "" so checking for the next available time slot"",
+                            facilityLevelUtilization.getFacilityLevelUtilizationId());
+
+                    facilityLevelCapacityIsValid = false;
+                    break;
+                }
+            }
+        }
+        else
+        {
+            logger.error(""-- No facility level scope was found for effective datetime [{}], "" +
+                    ""so skipping utilization consumption"", appointmentDateTime);
+        }
+
+        return facilityLevelCapacityIsValid;
+    }
+
+    private TimeSlot getMatchingTimeSlot(List<TimeSlot> timeSlots, LocalDateTime comparatorTime)
+    {
+        String dayOfWeek = String.valueOf(comparatorTime.getDayOfWeek().getValue());
+
+        return timeSlots.stream().filter(slot -> {
+            LocalDateTime slotStartTime =
+                    LocalDateTime.of(comparatorTime.toLocalDate(), LocalTime.parse(slot.getStartTime()));
+            LocalDateTime slotEndTime =
+                    LocalDateTime.of(comparatorTime.toLocalDate(), LocalTime.parse(slot.getEndTime()));
+
+            if (slotEndTime.toLocalTime().equals(LocalTime.MIDNIGHT))
+            {
+                slotEndTime = slotEndTime.plusDays(1);
+            }
+
+            return (dayOfWeek.equals(slot.getDayOfWeekId())
+                    && !slotStartTime.isAfter(comparatorTime)
+                    && slotEndTime.isAfter(comparatorTime));
+
+        }).findFirst()
+                .orElse(null);
+    }
+
+    private List<SingleDayTimeIntervalDefinition> getSingleDayTimeIntervalDefinitions(
+            TimeIntervalScope timeIntervalScope, LocalDateTime appointmentStartTime,
+            long appointmentDuration)
+    {
+        List<SingleDayTimeIntervalDefinition> singleDayTimeIntervalDefinitions = new ArrayList<>();
+        DayOfWeek startDayOfWeek = appointmentStartTime.getDayOfWeek();
+        DayOfWeek endDayOfWeek = appointmentStartTime.plusMinutes(appointmentDuration).getDayOfWeek();
+
+        for (TimeIntervalCapacity timeIntervalCapacity : timeIntervalScope.getTimeIntervalCapacityList())
+        {
+            TimeIntervalDefinition timeIntervalDefinition = timeIntervalCapacity.getTimeIntervalDefinitionEntity();
+
+            if (AppointmentUtil.isDayEnabled(startDayOfWeek, timeIntervalDefinition)
+                    || AppointmentUtil.isDayEnabled(endDayOfWeek, timeIntervalDefinition))
+            {
+                singleDayTimeIntervalDefinitions
+                        .addAll(convertTimeIntervalDefinitionToSingleDayEntries(timeIntervalCapacity));
+            }
+        }
+
+        singleDayTimeIntervalDefinitions
+                .sort((singleDayTid, otherSingleDayTid) -> singleDayTid.orderByAppointmentTime(otherSingleDayTid,
+                        appointmentStartTime));
+
+        return singleDayTimeIntervalDefinitions;
+    }
+
+    private List<SingleDayTimeIntervalDefinition> convertTimeIntervalDefinitionToSingleDayEntries(
+            TimeIntervalCapacity timeIntervalCapacity)
+    {
+        List<SingleDayTimeIntervalDefinition> singleDayTimeIntervalDefinitions = new ArrayList<>();
+
+        if (timeIntervalCapacity == null || timeIntervalCapacity.getTimeIntervalDefinitionEntity() == null)
+        {
+            return singleDayTimeIntervalDefinitions;
+        }
+
+        TimeIntervalDefinition timeIntervalDefinition = timeIntervalCapacity.getTimeIntervalDefinitionEntity();
+
+        if (timeIntervalDefinition.getSunday())
+        {
+            singleDayTimeIntervalDefinitions
+                    .add(new SingleDayTimeIntervalDefinition(timeIntervalCapacity, DayOfWeek.SUNDAY));
+        }
+        if (timeIntervalDefinition.getMonday())
+        {
+            singleDayTimeIntervalDefinitions
+                    .add(new SingleDayTimeIntervalDefinition(timeIntervalCapacity, DayOfWeek.MONDAY));
+        }
+        if (timeIntervalDefinition.getTuesday())
+        {
+            singleDayTimeIntervalDefinitions
+                    .add(new SingleDayTimeIntervalDefinition(timeIntervalCapacity, DayOfWeek.TUESDAY));
+        }
+        if (timeIntervalDefinition.getWednesday())
+        {
+            singleDayTimeIntervalDefinitions
+                    .add(new SingleDayTimeIntervalDefinition(timeIntervalCapacity, DayOfWeek.WEDNESDAY));
+        }
+        if (timeIntervalDefinition.getThursday())
+        {
+            singleDayTimeIntervalDefinitions
+                    .add(new SingleDayTimeIntervalDefinition(timeIntervalCapacity, DayOfWeek.THURSDAY));
+        }
+        if (timeIntervalDefinition.getFriday())
+        {
+            singleDayTimeIntervalDefinitions
+                    .add(new SingleDayTimeIntervalDefinition(timeIntervalCapacity, DayOfWeek.FRIDAY));
+        }
+        if (timeIntervalDefinition.getSaturday())
+        {
+            singleDayTimeIntervalDefinitions
+                    .add(new SingleDayTimeIntervalDefinition(timeIntervalCapacity, DayOfWeek.SATURDAY));
+        }
+
+        return singleDayTimeIntervalDefinitions;
+    }
+
+    private boolean isDayCapacityAlreadyValid(CapacityDTO capacityDTO, LocalDateTime appointmentDateTime)
+    {
+        for (DayLevelUtilization dayLevelUtilization : capacityDTO.getDayLevelUtilizations())
+        {
+            if (dayLevelUtilization.getAppointmentDate().equals(appointmentDateTime.toLocalDate()))
+            {
+                return true;
+            }
+        }
+
+        return false;
+    }
+
+    private boolean isFacilityCapacityAlreadyValid(CapacityDTO capacityDTO, LocalDateTime appointmentDateTime)
+    {
+        for (FacilityLevelUtilization facilityLevelUtilization : capacityDTO.getFacilityLevelUtilizations())
+        {
+            if (facilityLevelUtilization.getAppointmentDate().equals(appointmentDateTime.toLocalDate()))
+            {
+                return true;
+            }
+        }
+
+        return false;
+    }
+
+    private boolean timeIntervalUtilizationHasCapacity(TimeIntervalUtilization timeIntervalUtilization,
+            AppointmentType appointmentType)
+    {
+        Integer appointmentTypeCapacity = null;
+
+        switch (appointmentType)
+        {
+            case LIVE_UNLOAD:
+                appointmentTypeCapacity = timeIntervalUtilization.getRemainingLiveUnloadCpty();
+                break;
+            case LIVE_LOAD:
+                appointmentTypeCapacity = timeIntervalUtilization.getRemainingLiveLoadCpty();
+                break;
+            case PICKUP_LOAD:
+                appointmentTypeCapacity = timeIntervalUtilization.getRemainingPickupLoadCpty();
+                break;
+            case PICKUP_EMPTY:
+                appointmentTypeCapacity = timeIntervalUtilization.getRemainingPickupEmptyCpty();
+                break;
+            case DROP_EMPTY:
+                appointmentTypeCapacity = timeIntervalUtilization.getRemainingDropEmptyCpty();
+                break;
+            case DROP_UNLOAD:
+                appointmentTypeCapacity = timeIntervalUtilization.getRemainingDropUnloadCpty();
+                break;
+        }
+
+        return timeIntervalUtilization.getRemainingCapacity() > 0
+                && (appointmentTypeCapacity == null || appointmentTypeCapacity > 0);
+    }
+
+    private TimeIntervalUtilization createAptTimeIntervalScopeUtil(Context context,
+            SingleDayTimeIntervalDefinition singleDayTimeIntervalDefinition,
+            TimeSlot timeSlot, CapacityDTO capacityDTO, ResourceUnit resourceUnit)
+    {
+        TimeIntervalCapacity timeIntervalCapacity = singleDayTimeIntervalDefinition.getTimeIntervalCapacity();
+
+        TimeIntervalUtilizationBase.Key key =
+                new TimeIntervalUtilizationBase.Key(UUID.randomUUID().toString());
+        securityKeyHelper.validateAndSetSecurityKey(context, TimeIntervalUtilization.ENTITY_NAME, null,
+                null);
+        TimeIntervalUtilization timeIntervalUtilization =
+                EntityFactory.getFactory().newEntity(TimeIntervalUtilizationEntity.class, key);
+
+        timeIntervalUtilization.setTimeSlotId(timeSlot.getTimeSlotId());
+        timeIntervalUtilization.setResourceUnitId(resourceUnit.getResourceId());
+        timeIntervalUtilization.setAppointmentDate(capacityDTO.getTimeSlotAvailabilityCheck().toLocalDate());
+
+        timeIntervalUtilization.setTotalCapacity((long) timeIntervalCapacity.getMaxAppointments());
+        timeIntervalUtilization.setRemainingCapacity(timeIntervalUtilization.getTotalCapacity());
+
+        timeIntervalUtilization.setMaxDropEmptyCpty(timeIntervalCapacity.getMaxDropEmptyAppointments());
+        timeIntervalUtilization.setRemainingDropEmptyCpty(timeIntervalUtilization.getMaxDropEmptyCpty());
+
+        timeIntervalUtilization.setMaxDropUnloadCpty(timeIntervalCapacity.getMaxDropUnloadAppointments());
+        timeIntervalUtilization.setRemainingDropUnloadCpty(timeIntervalUtilization.getMaxDropUnloadCpty());
+
+        timeIntervalUtilization.setMaxLiveLoadCpty(timeIntervalCapacity.getMaxLiveLoadAppointments());
+        timeIntervalUtilization.setRemainingLiveLoadCpty(timeIntervalUtilization.getMaxLiveLoadCpty());
+
+        timeIntervalUtilization.setMaxLiveUnloadCpty(timeIntervalCapacity.getMaxLiveUnloadAppointments());
+        timeIntervalUtilization.setRemainingLiveUnloadCpty(timeIntervalUtilization.getMaxLiveUnloadCpty());
+
+        timeIntervalUtilization.setMaxPickupEmptyCpty(timeIntervalCapacity.getMaxPickupEmptyAppointments());
+        timeIntervalUtilization.setRemainingPickupEmptyCpty(timeIntervalUtilization.getMaxPickupEmptyCpty());
+
+        timeIntervalUtilization.setMaxPickupLoadCpty(timeIntervalCapacity.getMaxPickupLoadAppointments());
+        timeIntervalUtilization.setRemainingPickupLoadCpty(timeIntervalUtilization.getMaxPickupLoadCpty());
+
+        return timeIntervalUtilizationService.save(context, timeIntervalUtilization, null, true);
+    }
+
+    public DayLevelUtilization createAptDayLevelScopeUtilization(Context context, DayLevelCapacity dayLevelCapacity,
+            CapacityDTO capacityDTO, ResourceUnit resourceUnit)
+    {
+        DayLevelUtilization.Key key =
+                new DayLevelUtilizationBase.Key(UUID.randomUUID().toString());
+        securityKeyHelper.validateAndSetSecurityKey(context, DayLevelUtilization.ENTITY_NAME, null,
+                null);
+        DayLevelUtilization dayLevelUtilization =
+                EntityFactory.getFactory().newEntity(DayLevelUtilizationEntity.class, key);
+
+        dayLevelUtilization.setTotalCapacity(dayLevelCapacity.getCapacity());
+        dayLevelUtilization.setRemainingCapacity(dayLevelUtilization.getTotalCapacity());
+        dayLevelUtilization.setResourceUnitId(resourceUnit.getResourceId());
+        dayLevelUtilization.setWeekDayId(
+                String.valueOf(capacityDTO.getTimeSlotAvailabilityCheck().getDayOfWeek().getValue()));
+        dayLevelUtilization.setAppointmentDate(capacityDTO.getTimeSlotAvailabilityCheck().toLocalDate());
+        dayLevelUtilization.setConstraintTypeId(dayLevelCapacity.getCapacityConstraintTypeId());
+
+        return dayLevelUtilizationService.save(context, dayLevelUtilization, null, true);
+    }
+
+    public FacilityLevelUtilization createAptFacLevelScopeUtilization(Context context,
+            FacilityDayLevelCapacity facilityDayLevelCapacity, LocalDateTime appointmentDateTime)
+    {
+        FacilityLevelUtilization.Key key =
+                new FacilityLevelUtilizationBase.Key(UUID.randomUUID().toString());
+        securityKeyHelper.validateAndSetSecurityKey(context, FacilityLevelUtilization.ENTITY_NAME, null,
+                null);
+        FacilityLevelUtilization facilityLevelUtilization =
+                EntityFactory.getFactory().newEntity(FacilityLevelUtilizationEntity.class, key);
+
+        facilityLevelUtilization.setTotalCapacity(facilityDayLevelCapacity.getCapacity());
+        facilityLevelUtilization.setRemainingCapacity(facilityLevelUtilization.getTotalCapacity());
+        facilityLevelUtilization.setWeekDayId(String.valueOf(appointmentDateTime.getDayOfWeek().getValue()));
+        facilityLevelUtilization.setAppointmentDate(appointmentDateTime.toLocalDate());
+        facilityLevelUtilization.setConstraintTypeId(facilityDayLevelCapacity.getCapacityConstraintTypeId());
+
+        return facilityLevelUtilizationService.save(context, facilityLevelUtilization, null, true);
+    }
+}
diff --git a/src/main/java/com/manh/cp/appointment/appointment/impl/service/MessageProcessor.java b/src/main/java/com/manh/cp/appointment/appointment/impl/service/MessageProcessor.java
index 13d4a6baa..2a1593a9f 100644
--- a/src/main/java/com/manh/cp/appointment/appointment/impl/service/MessageProcessor.java
+++ b/src/main/java/com/manh/cp/appointment/appointment/impl/service/MessageProcessor.java
@@ -19,6 +19,7 @@ package com.manh.cp.appointment.appointment.impl.service;
 
 import java.text.MessageFormat;
 import java.time.DayOfWeek;
+import java.time.LocalTime;
 import java.util.Arrays;
 import java.util.List;
 import java.util.Map;
@@ -78,6 +79,8 @@ public class MessageProcessor
 
     private final TimeIntervalDefinitionService timeIntervalDefinitionService;
 
+    private final String INVALID_MIDNIGHT_FORMAT = ""24:00"";
+
     public MessageProcessor(AppointmentManager appointmentManager,
             AppointmentContentUpdateService appointmentContentUpdateService, AppointmentService appointmentService,
             FeatureFlagService featureFlagService, AppointmentTemplateServiceImpl appointmentTemplateServiceImpl,
@@ -231,7 +234,7 @@ public class MessageProcessor
                 timeIntervalDefinitionService.findByTimeIntervalDefinitionId(context, timeIntervalDefinitionId);
 
         if (timeIntervalDefinition != null
-                && timeSlotService.findTimeSlotsAssociatedWithTimeIntervalDefinition(context, timeIntervalDefinitionId)
+                && timeSlotService.findByTimeIntervalDefinitionId(context, timeIntervalDefinitionId)
                         .size() == 0)
         {
             List<DayOfWeek> activeDaysList = Arrays.stream(DayOfWeek.values())
@@ -261,6 +264,11 @@ public class MessageProcessor
                             String.format(""%02d:%02d"", endingSlotTimingInMinutes / 60,
                                     endingSlotTimingInMinutes % 60);
 
+                    if (formattedEndingTime.equals(INVALID_MIDNIGHT_FORMAT))
+                    {
+                        formattedEndingTime = LocalTime.MIDNIGHT.toString();
+                    }
+
                     Document timeSlotDocument = new Document();
                     Map<String, Object> appointmentTimeSlotDocumentMap = timeSlotDocument.getMap();
                     appointmentTimeSlotDocumentMap.put(TimeSlot.Fields.TIME_SLOT_ID.getCode(),
diff --git a/src/main/java/com/manh/cp/appointment/core/api/service/DayLevelUtilizationService.java b/src/main/java/com/manh/cp/appointment/core/api/service/DayLevelUtilizationService.java
new file mode 100644
index 000000000..eac9ff5da
--- /dev/null
+++ b/src/main/java/com/manh/cp/appointment/core/api/service/DayLevelUtilizationService.java
@@ -0,0 +1,30 @@
+/*
+ * Copyright &#169; 2015 Manhattan Associates, Inc. All Rights Reserved.
+ *
+ * Confidential, Proprietary and Trade Secrets Notice
+ *
+ * Use of this software is governed by a license agreement. This software
+ * contains confidential, proprietary and trade secret information of
+ * Manhattan Associates, Inc. and is protected under United States and
+ * international copyright and other intellectual property laws. Use, disclosure,
+ * reproduction, modification, distribution, or storage in a retrieval system in
+ * any form or by any means is prohibited without the prior express written
+ * permission of Manhattan Associates, Inc.
+ *
+ * Manhattan Associates, Inc.
+ * 2300 Windy Ridge Parkway, 10th Floor
+ * Atlanta, GA 30339 USA
+ */
+package com.manh.cp.appointment.core.api.service;
+
+import java.time.LocalDateTime;
+
+import com.manh.cp.appointment.core.api.domain.DayLevelUtilization;
+import com.manh.cp.fw.common.Context;
+
+public interface DayLevelUtilizationService extends DayLevelUtilizationServiceBase
+{
+    DayLevelUtilization findByAppointmentDateConstraintTypeAndResourceUnit(Context context,
+            LocalDateTime appointmentDate,
+            String constraintType, String resourceUnit);
+}
diff --git a/src/main/java/com/manh/cp/appointment/core/api/service/FacilityDayLevelScopeService.java b/src/main/java/com/manh/cp/appointment/core/api/service/FacilityDayLevelScopeService.java
index 524bd89f6..cfdf5fa45 100644
--- a/src/main/java/com/manh/cp/appointment/core/api/service/FacilityDayLevelScopeService.java
+++ b/src/main/java/com/manh/cp/appointment/core/api/service/FacilityDayLevelScopeService.java
@@ -17,6 +17,7 @@
  */
 package com.manh.cp.appointment.core.api.service;
 
+import java.time.LocalDateTime;
 import java.util.List;
 
 import com.manh.cp.appointment.core.api.domain.FacilityDayLevelScope;
@@ -25,4 +26,6 @@ import com.manh.cp.fw.common.Context;
 public interface FacilityDayLevelScopeService extends FacilityDayLevelScopeServiceBase
 {
     List<FacilityDayLevelScope> getAllFacilityDayLevelScopeList(Context context);
+
+    FacilityDayLevelScope getByEffectiveDate(Context context, LocalDateTime effectiveDateTime);
 }
diff --git a/src/main/java/com/manh/cp/appointment/core/api/service/FacilityLevelUtilizationService.java b/src/main/java/com/manh/cp/appointment/core/api/service/FacilityLevelUtilizationService.java
new file mode 100644
index 000000000..aca4c49f0
--- /dev/null
+++ b/src/main/java/com/manh/cp/appointment/core/api/service/FacilityLevelUtilizationService.java
@@ -0,0 +1,29 @@
+/*
+ * Copyright &#169; 2015 Manhattan Associates, Inc. All Rights Reserved.
+ *
+ * Confidential, Proprietary and Trade Secrets Notice
+ *
+ * Use of this software is governed by a license agreement. This software
+ * contains confidential, proprietary and trade secret information of
+ * Manhattan Associates, Inc. and is protected under United States and
+ * international copyright and other intellectual property laws. Use, disclosure,
+ * reproduction, modification, distribution, or storage in a retrieval system in
+ * any form or by any means is prohibited without the prior express written
+ * permission of Manhattan Associates, Inc.
+ *
+ * Manhattan Associates, Inc.
+ * 2300 Windy Ridge Parkway, 10th Floor
+ * Atlanta, GA 30339 USA
+ */
+package com.manh.cp.appointment.core.api.service;
+
+import java.time.LocalDateTime;
+
+import com.manh.cp.appointment.core.api.domain.FacilityLevelUtilization;
+import com.manh.cp.fw.common.Context;
+
+public interface FacilityLevelUtilizationService extends FacilityLevelUtilizationServiceBase
+{
+    FacilityLevelUtilization findByAppointmentDateAndConstraintType(Context context, LocalDateTime appointmentDate,
+            String constraintType);
+}
diff --git a/src/main/java/com/manh/cp/appointment/core/api/service/TimeIntervalUtilizationService.java b/src/main/java/com/manh/cp/appointment/core/api/service/TimeIntervalUtilizationService.java
new file mode 100644
index 000000000..e10775b94
--- /dev/null
+++ b/src/main/java/com/manh/cp/appointment/core/api/service/TimeIntervalUtilizationService.java
@@ -0,0 +1,26 @@
+/*
+ * Copyright &#169; 2015 Manhattan Associates, Inc. All Rights Reserved.
+ *
+ * Confidential, Proprietary and Trade Secrets Notice
+ *
+ * Use of this software is governed by a license agreement. This software
+ * contains confidential, proprietary and trade secret information of
+ * Manhattan Associates, Inc. and is protected under United States and
+ * international copyright and other intellectual property laws. Use, disclosure,
+ * reproduction, modification, distribution, or storage in a retrieval system in
+ * any form or by any means is prohibited without the prior express written
+ * permission of Manhattan Associates, Inc.
+ *
+ * Manhattan Associates, Inc.
+ * 2300 Windy Ridge Parkway, 10th Floor
+ * Atlanta, GA 30339 USA
+ */
+package com.manh.cp.appointment.core.api.service;
+
+import com.manh.cp.appointment.core.api.domain.TimeIntervalUtilization;
+import com.manh.cp.fw.common.Context;
+
+public interface TimeIntervalUtilizationService extends TimeIntervalUtilizationServiceBase
+{
+    TimeIntervalUtilization findByTimeSlotId(Context context, String timeSlotId);
+}
diff --git a/src/main/java/com/manh/cp/appointment/core/api/service/TimeSlotService.java b/src/main/java/com/manh/cp/appointment/core/api/service/TimeSlotService.java
index 2974a5e5c..654a4fdb4 100644
--- a/src/main/java/com/manh/cp/appointment/core/api/service/TimeSlotService.java
+++ b/src/main/java/com/manh/cp/appointment/core/api/service/TimeSlotService.java
@@ -26,6 +26,5 @@ import com.manh.cp.fw.common.Context;
 @Generated(value = ""Generated once by EntityFramework"")
 public interface TimeSlotService extends TimeSlotServiceBase
 {
-    List<TimeSlot> findTimeSlotsAssociatedWithTimeIntervalDefinition(Context context,
-            String timeIntervalDefinitionId);
+    List<TimeSlot> findByTimeIntervalDefinitionId(Context context, String timeIntervalDefinitionId);
 }
diff --git a/src/main/java/com/manh/cp/appointment/core/dto/CapacityDTO.java b/src/main/java/com/manh/cp/appointment/core/dto/CapacityDTO.java
new file mode 100644
index 000000000..4816e4f5c
--- /dev/null
+++ b/src/main/java/com/manh/cp/appointment/core/dto/CapacityDTO.java
@@ -0,0 +1,146 @@
+/*
+ * Copyright &#169; 2024 Manhattan Associates, Inc. All Rights Reserved.
+ *
+ * Confidential, Proprietary and Trade Secrets Notice
+ *
+ * Use of this software is governed by a license agreement. This software
+ * contains confidential, proprietary and trade secret information of
+ * Manhattan Associates, Inc. and is protected under United States and
+ * international copyright and other intellectual property laws. Use, disclosure,
+ * reproduction, modification, distribution, or storage in a retrieval system in
+ * any form or by any means is prohibited without the prior express written
+ * permission of Manhattan Associates, Inc.
+ *
+ * Manhattan Associates, Inc.
+ * 2300 Windy Ridge Parkway, 10th Floor
+ * Atlanta, GA 30339 USA
+ */
+package com.manh.cp.appointment.core.dto;
+
+import java.time.Duration;
+import java.time.LocalDateTime;
+import java.time.LocalTime;
+import java.util.HashSet;
+import java.util.List;
+import java.util.Set;
+
+import com.manh.cp.appointment.appointment.client.Constants.AppointmentType;
+import com.manh.cp.appointment.appointment.client.dto.ResourceDTO;
+import com.manh.cp.appointment.core.api.domain.DayLevelUtilization;
+import com.manh.cp.appointment.core.api.domain.FacilityLevelUtilization;
+import com.manh.cp.appointment.core.api.domain.TimeIntervalUtilization;
+
+public class CapacityDTO
+{
+    private final List<ResourceDTO> resources;
+
+    private final String appointmentId;
+
+    private final AppointmentType appointmentTypeId;
+
+    private final LocalDateTime appointmentDateTime;
+
+    private final Long appointmentDuration;
+
+    private LocalDateTime timeSlotAvailabilityCheck;
+
+    private Long totalAppointmentDurationAccountedFor;
+
+    private Set<TimeIntervalUtilization> timeIntervalUtilizations = new HashSet<>();
+
+    private Set<DayLevelUtilization> dayLevelUtilizations = new HashSet<>();
+
+    private Set<FacilityLevelUtilization> facilityLevelUtilizations = new HashSet<>();
+
+    public CapacityDTO(EnhancedAppointmentDTO enhancedAppointmentDTO)
+    {
+        resources = enhancedAppointmentDTO.getResources();
+        appointmentId = enhancedAppointmentDTO.getAppointmentId();
+        appointmentDateTime = enhancedAppointmentDTO.getPreferredDateTime();
+        appointmentDuration = enhancedAppointmentDTO.getDuration();
+        appointmentTypeId = AppointmentType.valueOf(enhancedAppointmentDTO.getAppointmentTypeId());
+    }
+
+    public void resetCapacityCheck()
+    {
+        totalAppointmentDurationAccountedFor = 0L;
+        timeSlotAvailabilityCheck = appointmentDateTime;
+        timeIntervalUtilizations.clear();
+        dayLevelUtilizations.clear();
+        facilityLevelUtilizations.clear();
+    }
+
+    public void incrementTimeSlotCheck(String timeSlotEndTime)
+    {
+        LocalDateTime convertedTimeSlotEndTime =
+                LocalDateTime.of(timeSlotAvailabilityCheck.toLocalDate(), LocalTime.parse(timeSlotEndTime));
+
+        if (convertedTimeSlotEndTime.toLocalTime().equals(LocalTime.MIDNIGHT))
+        {
+            convertedTimeSlotEndTime = convertedTimeSlotEndTime.plusDays(1);
+        }
+
+        long creditedAppointmentDuration =
+                Duration.between(timeSlotAvailabilityCheck, convertedTimeSlotEndTime).toMinutes();
+
+        totalAppointmentDurationAccountedFor += creditedAppointmentDuration;
+        timeSlotAvailabilityCheck = timeSlotAvailabilityCheck.plusMinutes(creditedAppointmentDuration);
+    }
+
+    public LocalDateTime getTimeSlotAvailabilityCheck()
+    {
+        return timeSlotAvailabilityCheck;
+    }
+
+    public Long getTotalAppointmentDurationAccountedFor()
+    {
+        return totalAppointmentDurationAccountedFor;
+    }
+
+    public List<ResourceDTO> getResources()
+    {
+        return resources;
+    }
+
+    public String getAppointmentId()
+    {
+        return appointmentId;
+    }
+
+    public LocalDateTime getAppointmentDateTime()
+    {
+        return appointmentDateTime;
+    }
+
+    public Long getAppointmentDuration()
+    {
+        return appointmentDuration;
+    }
+
+    public Set<TimeIntervalUtilization> getTimeIntervalUtilizations()
+    {
+        return timeIntervalUtilizations;
+    }
+
+    public Set<DayLevelUtilization> getDayLevelUtilizations()
+    {
+        return dayLevelUtilizations;
+    }
+
+    public Set<FacilityLevelUtilization> getFacilityLevelUtilizations()
+    {
+        return facilityLevelUtilizations;
+    }
+
+    public AppointmentType getAppointmentTypeId()
+    {
+        return appointmentTypeId;
+    }
+
+    public boolean allCapacityChecksAreValid()
+    {
+        return !timeIntervalUtilizations.isEmpty() && !dayLevelUtilizations.isEmpty()
+                && !facilityLevelUtilizations.isEmpty()
+                && totalAppointmentDurationAccountedFor >= appointmentDuration;
+    }
+}
diff --git a/src/main/java/com/manh/cp/appointment/core/dto/SingleDayTimeIntervalDefinition.java b/src/main/java/com/manh/cp/appointment/core/dto/SingleDayTimeIntervalDefinition.java
new file mode 100644
index 000000000..5b0b9453c
--- /dev/null
+++ b/src/main/java/com/manh/cp/appointment/core/dto/SingleDayTimeIntervalDefinition.java
@@ -0,0 +1,128 @@
+/*
+ * Copyright &#169; 2024 Manhattan Associates, Inc. All Rights Reserved.
+ *
+ * Confidential, Proprietary and Trade Secrets Notice
+ *
+ * Use of this software is governed by a license agreement. This software
+ * contains confidential, proprietary and trade secret information of
+ * Manhattan Associates, Inc. and is protected under United States and
+ * international copyright and other intellectual property laws. Use, disclosure,
+ * reproduction, modification, distribution, or storage in a retrieval system in
+ * any form or by any means is prohibited without the prior express written
+ * permission of Manhattan Associates, Inc.
+ *
+ * Manhattan Associates, Inc.
+ * 2300 Windy Ridge Parkway, 10th Floor
+ * Atlanta, GA 30339 USA
+ */
+package com.manh.cp.appointment.core.dto;
+
+import java.time.DayOfWeek;
+import java.time.LocalDateTime;
+import java.time.LocalTime;
+
+import com.manh.cp.appointment.core.api.domain.TimeIntervalCapacity;
+import com.manh.cp.appointment.core.api.domain.TimeIntervalDefinition;
+
+public class SingleDayTimeIntervalDefinition
+{
+    private TimeIntervalCapacity timeIntervalCapacity;
+
+    private DayOfWeek dayOfWeek;
+
+    public TimeIntervalCapacity getTimeIntervalCapacity()
+    {
+        return timeIntervalCapacity;
+    }
+
+    public DayOfWeek getDayOfWeek()
+    {
+        return dayOfWeek;
+    }
+
+    public SingleDayTimeIntervalDefinition(TimeIntervalCapacity timeIntervalCapacity, DayOfWeek dayOfWeek)
+    {
+        this.timeIntervalCapacity = timeIntervalCapacity;
+        this.dayOfWeek = dayOfWeek;
+    }
+
+    // Due to how time interval definitions can end at hour 24 and that isn't a valid time, this helper method exists
+    // to simplify getting the ""proper"" end time
+    private LocalTime getEndTime()
+    {
+        TimeIntervalDefinition timeIntervalDefinition = timeIntervalCapacity.getTimeIntervalDefinitionEntity();
+
+        return timeIntervalDefinition.getEndTimeHours() == 24 && timeIntervalDefinition.getEndTimeMinutes() == 0
+                ? LocalTime.of(23, 59, 59)
+                : LocalTime.of(timeIntervalDefinition.getEndTimeHours(), timeIntervalDefinition.getEndTimeMinutes());
+    }
+
+    /**
+     * This will order the time interval definitions by relevance to the given appointment day. If your appointment day
+     * is on Monday, then Sunday is not relevant and should be at the end of the list. If your appointment day is
+     * Saturday, then time interval definitions applicable to Saturdays to be at the front, then Sundays, then Mondays
+     * and so on.
+     * -----------------------------------------------------------------------------------------------------------------
+     * ex 1. Appointment Starts on TUESDAY at 12-13. TID1 is for WEDNESDAY at 8, TID2 is for MONDAY at 14
+     *
+     * Because WEDNESDAY is only 1 day ahead of TUESDAY and MONDAY is 6 days ahead of MONDAY, TID1 should be earlier in
+     * the list than TID2
+     * -----------------------------------------------------------------------------------------------------------------
+     * ex 2. Appointment Starts on SUNDAY at 14-18. TID1 is for SUNDAY at 12-18, TID2 is for SUNDAY at 18-24
+     *
+     * Both objects are applicable on Sundays, but TID1 ends before the other one and is within the appointment start
+     * time, so it belongs earlier in the list than TID2
+     * -----------------------------------------------------------------------------------------------------------------
+     * ex 3. Appointment Starts on SUNDAY at 20-24. TID1 is for SUNDAY at 12-18, TID2 is for SUNDAY at 18-24
+     *
+     * Both objects are applicable on Sundays, but TID1 ends before the appointment time, so it is really only effective
+     * a week later. It belongs at the end of the list
+     * -----------------------------------------------------------------------------------------------------------------
+     *
+     * @param otherSingleDayTimeIntervalDefinition
+     * @param appointmentStartDateTime
+     * @return
+     */
+    public int orderByAppointmentTime(SingleDayTimeIntervalDefinition otherSingleDayTimeIntervalDefinition,
+            LocalDateTime appointmentStartDateTime)
+    {
+        int myDayOfWeekValue = dayOfWeek.getValue();
+        int otherTimeSlotDayOfWeekValue = otherSingleDayTimeIntervalDefinition.getDayOfWeek().getValue();
+        int appointmentStartDayId = appointmentStartDateTime.getDayOfWeek().getValue();
+
+        if (myDayOfWeekValue < appointmentStartDayId)
+        {
+            myDayOfWeekValue += 7;
+        }
+        if (otherTimeSlotDayOfWeekValue < appointmentStartDayId)
+        {
+            otherTimeSlotDayOfWeekValue += 7;
+        }
+
+        if (myDayOfWeekValue < otherTimeSlotDayOfWeekValue)
+        {
+            return -1;
+        }
+        else if (myDayOfWeekValue > otherTimeSlotDayOfWeekValue)
+        {
+            return 1;
+        }
+        else
+        {
+            LocalDateTime myEndTime = LocalDateTime.of(appointmentStartDateTime.toLocalDate(), getEndTime());
+            LocalDateTime otherEndTime = LocalDateTime.of(appointmentStartDateTime.toLocalDate(),
+                    otherSingleDayTimeIntervalDefinition.getEndTime());
+
+            if (myEndTime.isBefore(appointmentStartDateTime))
+            {
+                myEndTime = myEndTime.plusWeeks(1);
+            }
+            if (otherEndTime.isBefore(appointmentStartDateTime))
+            {
+                otherEndTime = otherEndTime.plusWeeks(1);
+            }
+
+            return myEndTime.compareTo(otherEndTime);
+        }
+    }
+}
diff --git a/src/main/java/com/manh/cp/appointment/core/impl/service/DayLevelUtilizationServiceImpl.java b/src/main/java/com/manh/cp/appointment/core/impl/service/DayLevelUtilizationServiceImpl.java
new file mode 100644
index 000000000..74e105827
--- /dev/null
+++ b/src/main/java/com/manh/cp/appointment/core/impl/service/DayLevelUtilizationServiceImpl.java
@@ -0,0 +1,59 @@
+/*
+ * Copyright &#169; 2015 Manhattan Associates, Inc. All Rights Reserved.
+ *
+ * Confidential, Proprietary and Trade Secrets Notice
+ *
+ * Use of this software is governed by a license agreement. This software
+ * contains confidential, proprietary and trade secret information of
+ * Manhattan Associates, Inc. and is protected under United States and
+ * international copyright and other intellectual property laws. Use, disclosure,
+ * reproduction, modification, distribution, or storage in a retrieval system in
+ * any form or by any means is prohibited without the prior express written
+ * permission of Manhattan Associates, Inc.
+ *
+ * Manhattan Associates, Inc.
+ * 2300 Windy Ridge Parkway, 10th Floor
+ * Atlanta, GA 30339 USA
+ */
+package com.manh.cp.appointment.core.impl.service;
+
+import java.time.LocalDateTime;
+
+import com.mysema.query.jpa.JPQLQuery;
+import org.springframework.stereotype.Component;
+
+import com.manh.cp.appointment.core.api.domain.DayLevelUtilization;
+import com.manh.cp.appointment.core.api.service.DayLevelUtilizationService;
+import com.manh.cp.appointment.core.impl.domain.entity.QDayLevelUtilizationEntity;
+import com.manh.cp.fw.common.Context;
+import com.manh.cp.fw.core.logging.CPLoggerFactory;
+import com.manh.cp.fw.core.logging.Logger;
+
+@Component
+public class DayLevelUtilizationServiceImpl extends DayLevelUtilizationServiceImplBase
+        implements DayLevelUtilizationService
+{
+    private final Logger logger = CPLoggerFactory.getLogger(DayLevelUtilizationServiceImpl.class);
+
+    public DayLevelUtilization findByAppointmentDateConstraintTypeAndResourceUnit(Context context,
+            LocalDateTime appointmentDate,
+            String constraintType, String resourceUnit)
+    {
+        logger.trace("">> findByAppointmentDateConstraintTypeAndResourceUnit()"");
+
+        QDayLevelUtilizationEntity qDayLevelUtilization =
+                QDayLevelUtilizationEntity.dayLevelUtilizationEntity;
+
+        JPQLQuery query = createQueryObject(context);
+
+        DayLevelUtilization dayLevelUtilization = query.from(qDayLevelUtilization)
+                .where(qDayLevelUtilization.appointmentDate.eq(appointmentDate.toLocalDate())
+                        .and(qDayLevelUtilization.constraintTypeId.eq(constraintType)
+                                .and(qDayLevelUtilization.resourceUnitId.eq(resourceUnit))))
+                .singleResult(qDayLevelUtilization);
+
+        logger.trace(""<< findByAppointmentDateConstraintTypeAndResourceUnit()"");
+
+        return dayLevelUtilization;
+    }
+}
diff --git a/src/main/java/com/manh/cp/appointment/core/impl/service/FacilityDayLevelScopeServiceImpl.java b/src/main/java/com/manh/cp/appointment/core/impl/service/FacilityDayLevelScopeServiceImpl.java
index bd5a17fff..9508f8dac 100644
--- a/src/main/java/com/manh/cp/appointment/core/impl/service/FacilityDayLevelScopeServiceImpl.java
+++ b/src/main/java/com/manh/cp/appointment/core/impl/service/FacilityDayLevelScopeServiceImpl.java
@@ -17,6 +17,7 @@
  */
 package com.manh.cp.appointment.core.impl.service;
 
+import java.time.LocalDateTime;
 import java.util.List;
 
 import javax.annotation.Generated;
@@ -76,6 +77,26 @@ public class FacilityDayLevelScopeServiceImpl extends FacilityDayLevelScopeServi
         return facilityDayLevelScopes;
     }
 
+    public FacilityDayLevelScope getByEffectiveDate(Context context, LocalDateTime effectiveDateTime)
+    {
+        logger.trace("">> FacilityDayLevelScopeServiceImpl::getByEffectiveDate"");
+
+        QFacilityDayLevelScopeEntity qFacilityDayLevelScopeEntity =
+                QFacilityDayLevelScopeEntity.facilityDayLevelScopeEntity;
+
+        JPQLQuery query = createQueryObject(context);
+        setFacilityDayLevelScopeQueryHelper(query);
+
+        FacilityDayLevelScopeEntity facilityDayLevelScope = query.from(qFacilityDayLevelScopeEntity)
+                .where(qFacilityDayLevelScopeEntity.effectiveDateTime.loe(effectiveDateTime)
+                        .and(qFacilityDayLevelScopeEntity.expirationDateTime.gt(effectiveDateTime)))
+                .singleResult(qFacilityDayLevelScopeEntity);
+
+        logger.trace(""<< FacilityDayLevelScopeServiceImpl::getByEffectiveDate"");
+
+        return facilityDayLevelScope;
+    }
+
     private void setFacilityDayLevelScopeQueryHelper(JPQLQuery query)
     {
         ((ManhJPAQuery) query).setQueryHelper(new FacilityDayLevelScopeQueryHelper());
diff --git a/src/main/java/com/manh/cp/appointment/core/impl/service/FacilityLevelUtilizationServiceImpl.java b/src/main/java/com/manh/cp/appointment/core/impl/service/FacilityLevelUtilizationServiceImpl.java
new file mode 100644
index 000000000..b18e4c37a
--- /dev/null
+++ b/src/main/java/com/manh/cp/appointment/core/impl/service/FacilityLevelUtilizationServiceImpl.java
@@ -0,0 +1,58 @@
+/*
+ * Copyright &#169; 2015 Manhattan Associates, Inc. All Rights Reserved.
+ *
+ * Confidential, Proprietary and Trade Secrets Notice
+ *
+ * Use of this software is governed by a license agreement. This software
+ * contains confidential, proprietary and trade secret information of
+ * Manhattan Associates, Inc. and is protected under United States and
+ * international copyright and other intellectual property laws. Use, disclosure,
+ * reproduction, modification, distribution, or storage in a retrieval system in
+ * any form or by any means is prohibited without the prior express written
+ * permission of Manhattan Associates, Inc.
+ *
+ * Manhattan Associates, Inc.
+ * 2300 Windy Ridge Parkway, 10th Floor
+ * Atlanta, GA 30339 USA
+ */
+package com.manh.cp.appointment.core.impl.service;
+
+import java.time.LocalDateTime;
+
+import com.mysema.query.jpa.JPQLQuery;
+import org.springframework.stereotype.Component;
+
+import com.manh.cp.appointment.core.api.domain.FacilityLevelUtilization;
+import com.manh.cp.appointment.core.api.service.FacilityLevelUtilizationService;
+import com.manh.cp.appointment.core.impl.domain.entity.QFacilityLevelUtilizationEntity;
+import com.manh.cp.fw.common.Context;
+import com.manh.cp.fw.core.logging.CPLoggerFactory;
+import com.manh.cp.fw.core.logging.Logger;
+
+@Component
+public class FacilityLevelUtilizationServiceImpl extends FacilityLevelUtilizationServiceImplBase
+        implements FacilityLevelUtilizationService
+{
+    private final Logger logger = CPLoggerFactory.getLogger(FacilityLevelUtilizationServiceImpl.class);
+
+    public FacilityLevelUtilization findByAppointmentDateAndConstraintType(Context context,
+            LocalDateTime appointmentDate,
+            String constraintType)
+    {
+        logger.trace("">> findByAppointmentDateAndConstraintType()"");
+
+        QFacilityLevelUtilizationEntity qFacilityLevelUtilization =
+                QFacilityLevelUtilizationEntity.facilityLevelUtilizationEntity;
+
+        JPQLQuery query = createQueryObject(context);
+
+        FacilityLevelUtilization facilityLevelUtilization = query.from(qFacilityLevelUtilization)
+                .where(qFacilityLevelUtilization.appointmentDate.eq(appointmentDate.toLocalDate())
+                        .and(qFacilityLevelUtilization.constraintTypeId.eq(constraintType)))
+                .singleResult(qFacilityLevelUtilization);
+
+        logger.trace(""<< findByAppointmentDateAndConstraintType()"");
+
+        return facilityLevelUtilization;
+    }
+}
diff --git a/src/main/java/com/manh/cp/appointment/core/impl/service/TimeIntervalUtilizationServiceImpl.java b/src/main/java/com/manh/cp/appointment/core/impl/service/TimeIntervalUtilizationServiceImpl.java
new file mode 100644
index 000000000..8325df187
--- /dev/null
+++ b/src/main/java/com/manh/cp/appointment/core/impl/service/TimeIntervalUtilizationServiceImpl.java
@@ -0,0 +1,53 @@
+/*
+ * Copyright &#169; 2015 Manhattan Associates, Inc. All Rights Reserved.
+ *
+ * Confidential, Proprietary and Trade Secrets Notice
+ *
+ * Use of this software is governed by a license agreement. This software
+ * contains confidential, proprietary and trade secret information of
+ * Manhattan Associates, Inc. and is protected under United States and
+ * international copyright and other intellectual property laws. Use, disclosure,
+ * reproduction, modification, distribution, or storage in a retrieval system in
+ * any form or by any means is prohibited without the prior express written
+ * permission of Manhattan Associates, Inc.
+ *
+ * Manhattan Associates, Inc.
+ * 2300 Windy Ridge Parkway, 10th Floor
+ * Atlanta, GA 30339 USA
+ */
+package com.manh.cp.appointment.core.impl.service;
+
+import com.mysema.query.jpa.JPQLQuery;
+import org.springframework.stereotype.Component;
+
+import com.manh.cp.appointment.core.api.domain.TimeIntervalUtilization;
+import com.manh.cp.appointment.core.api.service.TimeIntervalUtilizationService;
+import com.manh.cp.appointment.core.impl.domain.entity.QTimeIntervalUtilizationEntity;
+import com.manh.cp.fw.common.Context;
+import com.manh.cp.fw.core.logging.CPLoggerFactory;
+import com.manh.cp.fw.core.logging.Logger;
+
+@Component
+public class TimeIntervalUtilizationServiceImpl extends TimeIntervalUtilizationServiceImplBase
+        implements TimeIntervalUtilizationService
+{
+    private final Logger logger = CPLoggerFactory.getLogger(TimeIntervalUtilizationServiceImpl.class);
+
+    public TimeIntervalUtilization findByTimeSlotId(Context context, String timeSlotId)
+    {
+        logger.trace("">> findByTimeSlotId()"");
+
+        QTimeIntervalUtilizationEntity qTimeIntervalUtilization =
+                QTimeIntervalUtilizationEntity.timeIntervalUtilizationEntity;
+
+        JPQLQuery query = createQueryObject(context);
+
+        TimeIntervalUtilization timeIntervalUtilization = query.from(qTimeIntervalUtilization)
+                .where(qTimeIntervalUtilization.timeSlotId.eq(timeSlotId))
+                .singleResult(qTimeIntervalUtilization);
+
+        logger.trace(""<< findByTimeSlotId()"");
+
+        return timeIntervalUtilization;
+    }
+}
diff --git a/src/main/java/com/manh/cp/appointment/core/impl/service/TimeSlotServiceImpl.java b/src/main/java/com/manh/cp/appointment/core/impl/service/TimeSlotServiceImpl.java
index 4e557737b..1311807dc 100644
--- a/src/main/java/com/manh/cp/appointment/core/impl/service/TimeSlotServiceImpl.java
+++ b/src/main/java/com/manh/cp/appointment/core/impl/service/TimeSlotServiceImpl.java
@@ -25,12 +25,10 @@ import org.springframework.stereotype.Component;
 import com.manh.cp.appointment.core.api.domain.TimeSlot;
 import com.manh.cp.appointment.core.api.service.TimeSlotService;
 import com.manh.cp.appointment.core.impl.domain.entity.QTimeSlotEntity;
-import com.manh.cp.appointment.core.impl.domain.queryhelper.TimeSlotQueryHelper;
 import com.manh.cp.fw.codegen.annotation.Generated;
 import com.manh.cp.fw.common.Context;
 import com.manh.cp.fw.core.logging.CPLoggerFactory;
 import com.manh.cp.fw.core.logging.Logger;
-import com.manh.cp.fw.query.ManhJPAQuery;
 
 @Component
 @Generated(value = ""Generated once by EntityFramework"")
@@ -40,22 +38,20 @@ public class TimeSlotServiceImpl extends TimeSlotServiceImplBase
     private final Logger logger = CPLoggerFactory.getLogger(TimeSlotServiceImpl.class);
 
     @Override
-    public List<TimeSlot> findTimeSlotsAssociatedWithTimeIntervalDefinition(Context context,
-            String timeIntervalDefinitionId)
+    public List<TimeSlot> findByTimeIntervalDefinitionId(Context context, String timeIntervalDefinitionId)
     {
-        logger.trace("">> findTimeSlotsAssociatedWithTimeIntervalDefinition()"");
+        logger.trace("">> findByTimeIntervalDefinitionId()"");
 
         QTimeSlotEntity qTimeSlotEntity = QTimeSlotEntity.timeSlotEntity;
 
         JPQLQuery timeSlotQuery = createQueryObject(context);
-        ((ManhJPAQuery) timeSlotQuery).setQueryHelper(new TimeSlotQueryHelper());
 
         List<TimeSlot> timeSlotList =
                 (List<TimeSlot>) (List<?>) timeSlotQuery.from(qTimeSlotEntity)
                         .where(qTimeSlotEntity.timeIntervalDefinitionId.eq(timeIntervalDefinitionId))
                         .list(qTimeSlotEntity);
 
-        logger.trace(""<< findTimeSlotsAssociatedWithTimeIntervalDefinition()"");
+        logger.trace(""<< findByTimeIntervalDefinitionId()"");
 
         return timeSlotList;
     }
diff --git a/src/main/resources/applicationParameter/applicationParameter_apt.json b/src/main/resources/applicationParameter/applicationParameter_apt.json
index 3cf9bcc01..ccc1abaa7 100644
--- a/src/main/resources/applicationParameter/applicationParameter_apt.json
+++ b/src/main/resources/applicationParameter/applicationParameter_apt.json
@@ -23,7 +23,7 @@
     {
       ""DefaultValue"": ""false"",
       ""Description"": ""Populate time slots if parameter is enabled"",
-      ""ApplicationParameterId"": ""appointment.timeSlot.population.enabled""
+      ""ApplicationParameterId"": ""appointment.redesign.enabled""
     }
   ]
 }
diff --git a/src/main/resources/metaData/AppointmentEntities.xml b/src/main/resources/metaData/AppointmentEntities.xml
index 00c20ad0b..513d606ad 100644
--- a/src/main/resources/metaData/AppointmentEntities.xml
+++ b/src/main/resources/metaData/AppointmentEntities.xml
@@ -412,6 +412,81 @@
             </indexes>
         </entity>
 
+        <entity name=""timeIntervalUtilization"" serviceLevelEntity=""true"" securityScope=""facility"" type=""transaction""
+                generateBusinessKeyValues=""true"" description="""" purgeEnabled=""true"">
+            <property name=""timeIntervalUtilizationId"" type=""id"" nullable=""false"" description=""The id of the time interval scope utilization""/>
+            <property name=""resourceUnitId"" type=""id"" nullable=""false"" description=""The resource unit of the time interval scope utilization""/>
+            <property name=""timeSlotId"" type=""id"" nullable=""false"" description=""The time slot of the time interval scope utilization""/>
+            <property name=""appointmentDate"" type=""date"" nullable=""false"" description=""The appointment date of the time interval scope utilization""/>
+            <property name=""totalCapacity"" type=""integer"" nullable=""false"" description=""The total capacity of the time interval scope utilization""/>
+            <property name=""remainingCapacity"" type=""integer"" nullable=""false"" description=""The remaining capacity of the time interval scope utilization""/>
+            <property name=""maxLiveLoadCpty"" type=""shortInteger"" nullable=""true"" description=""Maximum number of Live load Appointments""/>
+            <property name=""remainingLiveLoadCpty"" type=""shortInteger"" nullable=""true"" description=""Maximum number of Live load Appointments""/>
+            <property name=""maxLiveUnloadCpty"" type=""shortInteger"" nullable=""true"" description=""Maximum number of Live Unload Appointments""/>
+            <property name=""remainingLiveUnloadCpty"" type=""shortInteger"" nullable=""true"" description=""Maximum number of Live Unload Appointments""/>
+            <property name=""maxPickupLoadCpty"" type=""shortInteger"" nullable=""true"" description=""Maximum number of Pickup load Appointments""/>
+            <property name=""remainingPickupLoadCpty"" type=""shortInteger"" nullable=""true"" description=""Maximum number of Pickup load Appointments""/>
+            <property name=""maxPickupEmptyCpty"" type=""shortInteger"" nullable=""true"" description=""Maximum number of Pickup empty Appointments""/>
+            <property name=""remainingPickupEmptyCpty"" type=""shortInteger"" nullable=""true"" description=""Maximum number of Pickup empty Appointments""/>
+            <property name=""maxDropUnloadCpty"" type=""shortInteger"" nullable=""true"" description=""Maximum number of Drop Unload Appointments""/>
+            <property name=""remainingDropUnloadCpty"" type=""shortInteger"" nullable=""true"" description=""Maximum number of Drop Unload Appointments""/>
+            <property name=""maxDropEmptyCpty"" type=""shortInteger"" nullable=""true"" description=""Maximum number of Drop Empty Appointments""/>
+            <property name=""remainingDropEmptyCpty"" type=""shortInteger"" nullable=""true"" description=""Maximum number of Drop Empty Appointments""/>
+            <businessKeys>
+                <businessKey>
+                    <property name=""timeIntervalUtilizationId"" />
+                </businessKey>
+            </businessKeys>
+            <indexes>
+                <index name=""a_t_i_s_u_purge_date"">
+                    <property name=""purgeDate""/>
+                </index>
+            </indexes>
+        </entity>
+
+        <entity name=""dayLevelUtilization"" serviceLevelEntity=""true"" securityScope=""facility"" type=""transaction""
+                generateBusinessKeyValues=""true"" description="""" purgeEnabled=""true"">
+            <property name=""dayLevelUtilizationId"" type=""id"" nullable=""false"" description=""BK of the entity""/>
+            <property name=""resourceUnitId"" type=""id"" nullable=""false"" description=""Resource unit of the day level utilization""/>
+            <property name=""weekDayId"" type=""id"" nullable=""false"" description=""Day of the week of the appointment date""/>
+            <property name=""appointmentDate"" type=""date"" nullable=""false"" description=""Appointment Date of the day level utilization""/>
+            <property name=""totalCapacity"" type=""integer"" nullable=""false"" description=""Total Capacity of the day level utilization""/>
+            <property name=""remainingCapacity"" type=""integer"" nullable=""false"" description=""Remaining Capacity of the day level utilization""/>
+            <property name=""constraintTypeId"" type=""id"" nullable=""true"" description=""Constraint type of the day level scope""/>
+            <property name=""constraintAttributeId"" type=""id"" nullable=""true"" description=""Constraint attribute of the day level scope""/>
+            <businessKeys>
+                <businessKey>
+                    <property name=""dayLevelUtilizationId"" />
+                </businessKey>
+            </businessKeys>
+            <indexes>
+                <index name=""a_d_l_s_u_purge_date"">
+                    <property name=""purgeDate""/>
+                </index>
+            </indexes>
+        </entity>
+
+        <entity name=""facilityLevelUtilization"" serviceLevelEntity=""true"" securityScope=""facility"" type=""transaction""
+                generateBusinessKeyValues=""true"" description="""" purgeEnabled=""true"">
+            <property name=""facilityLevelUtilizationId"" type=""id"" nullable=""false"" description=""BK of the entity""/>
+            <property name=""weekDayId"" type=""id"" nullable=""false"" description=""Day of the week of the appointment date""/>
+            <property name=""appointmentDate"" type=""date"" nullable=""false"" description=""Appointment date of the facility level utilization""/>
+            <property name=""totalCapacity"" type=""integer"" nullable=""false"" description=""Total capacity of the facility level utilization""/>
+            <property name=""remainingCapacity"" type=""integer"" nullable=""false"" description=""Remaining capacity of the facility level utilization""/>
+            <property name=""constraintTypeId"" type=""id"" nullable=""true"" description=""Constraint type of the facility level scope""/>
+            <property name=""constraintAttributeId"" type=""id"" nullable=""true"" description=""Constraint type of the facility level scope""/>
+            <businessKeys>
+                <businessKey>
+                    <property name=""facilityLevelUtilizationId"" />
+                </businessKey>
+            </businessKeys>
+            <indexes>
+                <index name=""a_f_l_s_u_purge_date"">
+                    <property name=""purgeDate""/>
+                </index>
+            </indexes>
+        </entity>
+
         <entity name=""scheduleResources"" serviceLevelEntity=""false"" securityScope=""facility"" type=""transaction""
                 description=""Resources which will be used during a given schedule."">
             <property name=""schedule"" type=""pkReference"" description=""Id of the schedule""/>
diff --git a/src/test/java/com/manh/cp/appointment/appointment/SingleDayTimeIntervalDefinitionSortTest.java b/src/test/java/com/manh/cp/appointment/appointment/SingleDayTimeIntervalDefinitionSortTest.java
new file mode 100644
index 000000000..0e500bc7c
--- /dev/null
+++ b/src/test/java/com/manh/cp/appointment/appointment/SingleDayTimeIntervalDefinitionSortTest.java
@@ -0,0 +1,106 @@
+/*
+ * Copyright &#169; 2022 Manhattan Associates, Inc. All Rights Reserved.
+ *
+ * Confidential, Proprietary and Trade Secrets Notice
+ *
+ * Use of this software is governed by a license agreement. This software
+ * contains confidential, proprietary and trade secret information of
+ * Manhattan Associates, Inc. and is protected under United States and
+ * international copyright and other intellectual property laws. Use, disclosure,
+ * reproduction, modification, distribution, or storage in a retrieval system in
+ * any form or by any means is prohibited without the prior express written
+ * permission of Manhattan Associates, Inc.
+ *
+ * Manhattan Associates, Inc.
+ * 2300 Windy Ridge Parkway, 10th Floor
+ * Atlanta, GA 30339 USA
+ */
+package com.manh.cp.appointment.appointment;
+
+import java.time.DayOfWeek;
+import java.time.LocalDateTime;
+import java.util.Arrays;
+import java.util.Collection;
+
+import org.junit.Assert;
+import org.junit.Test;
+import org.junit.runner.RunWith;
+import org.junit.runners.Parameterized;
+import org.mockito.Mockito;
+
+import com.manh.cp.appointment.core.api.domain.TimeIntervalCapacity;
+import com.manh.cp.appointment.core.api.domain.TimeIntervalDefinition;
+import com.manh.cp.appointment.core.dto.SingleDayTimeIntervalDefinition;
+
+import static org.mockito.Mockito.when;
+
+@RunWith(Parameterized.class)
+public class SingleDayTimeIntervalDefinitionSortTest
+{
+    @Parameterized.Parameter
+    public SingleDayTimeIntervalDefinition singleDayTimeIntervalDefinition;
+
+    @Parameterized.Parameter(1)
+    public SingleDayTimeIntervalDefinition otherSingleDayTimeIntervalDefinition;
+
+    @Parameterized.Parameter(2)
+    public String appointmentDateTime;
+
+    @Parameterized.Parameter(3)
+    public int comparatorValue;
+
+    @Parameterized.Parameters(name = ""#{index}: {0}"")
+    public static Collection<Object[]> data()
+    {
+        return Arrays.asList(
+                new Object[] { getSingleDayObject(DayOfWeek.MONDAY, 12), getSingleDayObject(DayOfWeek.WEDNESDAY, 12),
+                        ""2024-08-14T12:00:00"", 1 },
+                new Object[] { getSingleDayObject(DayOfWeek.THURSDAY, 12), getSingleDayObject(DayOfWeek.SATURDAY, 12),
+                        ""2024-08-14T12:00:00"", -1 },
+                new Object[] { getSingleDayObject(DayOfWeek.WEDNESDAY, 24), getSingleDayObject(DayOfWeek.SUNDAY, 12),
+                        ""2024-08-14T12:00:00"", -1 },
+                new Object[] { getSingleDayObject(DayOfWeek.WEDNESDAY, 8), getSingleDayObject(DayOfWeek.WEDNESDAY, 16),
+                        ""2024-08-14T12:00:00"", 1 },
+                new Object[] { getSingleDayObject(DayOfWeek.MONDAY, 12), getSingleDayObject(DayOfWeek.MONDAY, 12),
+                        ""2024-08-14T12:00:00"", 0 },
+                new Object[] { getSingleDayObject(DayOfWeek.WEDNESDAY, 8), getSingleDayObject(DayOfWeek.WEDNESDAY, 2),
+                        ""2024-08-14T12:00:00"", 1 },
+                new Object[] { getSingleDayObject(DayOfWeek.SUNDAY, 12), getSingleDayObject(DayOfWeek.MONDAY, 12),
+                        ""2024-08-14T12:00:00"", -1 });
+    }
+
+    @Test
+    public void testLocalDateTimeSorting()
+    {
+        if (comparatorValue == 0)
+        {
+            Assert.assertEquals(comparatorValue, singleDayTimeIntervalDefinition
+                    .orderByAppointmentTime(otherSingleDayTimeIntervalDefinition,
+                            LocalDateTime.parse(appointmentDateTime)));
+        }
+        else if (comparatorValue == 1)
+        {
+            Assert.assertTrue(comparatorValue <= singleDayTimeIntervalDefinition
+                    .orderByAppointmentTime(otherSingleDayTimeIntervalDefinition,
+                            LocalDateTime.parse(appointmentDateTime)));
+        }
+        else if (comparatorValue == -1)
+        {
+            Assert.assertTrue(comparatorValue >= singleDayTimeIntervalDefinition
+                    .orderByAppointmentTime(otherSingleDayTimeIntervalDefinition,
+                            LocalDateTime.parse(appointmentDateTime)));
+        }
+    }
+
+    public static SingleDayTimeIntervalDefinition getSingleDayObject(DayOfWeek day, int endHour)
+    {
+        TimeIntervalDefinition mockedTimeIntervalDefinition = Mockito.mock(TimeIntervalDefinition.class);
+        when(mockedTimeIntervalDefinition.getEndTimeHours()).thenReturn(endHour);
+        when(mockedTimeIntervalDefinition.getEndTimeMinutes()).thenReturn(0);
+
+        TimeIntervalCapacity timeIntervalCapacity = Mockito.mock(TimeIntervalCapacity.class);
+        when(timeIntervalCapacity.getTimeIntervalDefinitionEntity()).thenReturn(mockedTimeIntervalDefinition);
+
+        return new SingleDayTimeIntervalDefinition(timeIntervalCapacity, day);
+    }
+}
diff --git a/src/test/java/com/manh/cp/appointment/appointment/impl/service/CarrierAppointmentScheduleTest.java b/src/test/java/com/manh/cp/appointment/appointment/impl/service/CarrierAppointmentScheduleTest.java
index 93a091adb..0c0666802 100644
--- a/src/test/java/com/manh/cp/appointment/appointment/impl/service/CarrierAppointmentScheduleTest.java
+++ b/src/test/java/com/manh/cp/appointment/appointment/impl/service/CarrierAppointmentScheduleTest.java
@@ -103,7 +103,7 @@ public class CarrierAppointmentScheduleTest extends BaseUnitTest
                 Mockito.any());
         Mockito.doReturn(true).when(featureFlagService).isOn(Mockito.any());
         Mockito.doReturn(true).when(applicationParameterService)
-                .getParameterValue(AppointmentApplicationParameters.APT_TIME_SLOT_POPULATION);
+                .getParameterValue(AppointmentApplicationParameters.APT_REDESIGN_ENABLED);
         Mockito.doReturn(false).when(applicationParameterService)
                 .getParameterValue(AppointmentApplicationParameters.RETURN_RECOMMENDATION_IF_SLOT_NOT_FOUND);
         Mockito.when(scheduleCarrierAppointmentUserExit.preprocess(Mockito.any(), Mockito.any())).thenCallRealMethod();
@@ -137,7 +137,7 @@ public class CarrierAppointmentScheduleTest extends BaseUnitTest
                 .recommendTimeSlots(Mockito.any(), Mockito.any());
         Mockito.doReturn(true).when(featureFlagService).isOn(Mockito.any());
         Mockito.doReturn(true).when(applicationParameterService)
-                .getParameterValue(AppointmentApplicationParameters.APT_TIME_SLOT_POPULATION);
+                .getParameterValue(AppointmentApplicationParameters.APT_REDESIGN_ENABLED);
         Mockito.doReturn(false).when(applicationParameterService)
                 .getParameterValue(AppointmentApplicationParameters.RETURN_RECOMMENDATION_IF_SLOT_NOT_FOUND);
         Mockito.when(scheduleCarrierAppointmentUserExit.preprocess(Mockito.any(), Mockito.any())).thenCallRealMethod();
diff --git a/version.txt b/version.txt
index 8b0beab16..2b9cabc07 100644
--- a/version.txt
+++ b/version.txt
@@ -1 +1 @@
-20.11.0
+20.12.0
","we can remove “apt” and “scope” from name of entities. “TimeIntervalUtilisation” Similarly for other entities. 

Table name `APT_TIME_INTERVAL_UTILIZATION`
add column and table desc
to check - Do we need to populate appointment ID? in old fwk it was required, in new it may not be.
To check - If we can make parent shipment creation via queue."
d44fe09aad42bdaee71ec01ad46ea9373838cc79,"diff --git a/src/component-test/java/com/manh/cp/appointment/appointment/CarrierAppointmentTest.java b/src/component-test/java/com/manh/cp/appointment/appointment/CarrierAppointmentTest.java
index 58d518e64..8e2ae4e17 100644
--- a/src/component-test/java/com/manh/cp/appointment/appointment/CarrierAppointmentTest.java
+++ b/src/component-test/java/com/manh/cp/appointment/appointment/CarrierAppointmentTest.java
@@ -45,6 +45,7 @@ import com.manh.cp.appointment.appointment.client.Constants.ErrorDefinitionIdBun
 import com.manh.cp.appointment.appointment.constants.FeatureIdentifier;
 import com.manh.cp.appointment.appointment.impl.service.AppointmentManager;
 import com.manh.cp.appointment.appointment.impl.service.AppointmentManagerHelper;
+import com.manh.cp.appointment.appointment.impl.service.AppointmentSaveHelper;
 import com.manh.cp.appointment.appointment.mocks.MockAppointmentUtil;
 import com.manh.cp.appointment.appointment.mocks.MockFeatureFlagService;
 import com.manh.cp.appointment.appointment.rest.AppointmentController;
@@ -145,6 +146,9 @@ public class CarrierAppointmentTest extends AbstractComponentTest
     @Autowired
     private ApplicationParameterService applicationParameterService;
 
+    @Autowired
+    private AppointmentSaveHelper appointmentSaveHelper;
+
     private final String testDirectory = ""/appointment/appointment/carrierAppointment"";
 
     @Before
@@ -662,4 +666,58 @@ public class CarrierAppointmentTest extends AbstractComponentTest
                 Boolean.FALSE.toString());
     }
 
+    @Test
+    @Transactional
+    public void testCarrierScheduleAppointmentWithBulkPurchaseOrders()
+    {
+        String timeIntervalDefinitionPath =
+                testDirectory + ""/TimeIntervalDefinition0-24.json"";
+
+        String initialResourceGroupPath1 =
+                testDirectory + ""/DockGroup.json"";
+
+        String initialResourceGroupPath2 =
+                testDirectory + ""/CarrierGroup.json"";
+
+        String initialResourceGroupPath3 =
+                testDirectory + ""/ProductClassGroup.json"";
+
+        testUtil.createGeneralConfigurationV2(context, timeIntervalDefinitionPath, initialResourceGroupPath1);
+        testUtil.createGeneralConfigurationV2(context, null, initialResourceGroupPath2);
+        testUtil.createGeneralConfigurationV2(context, null, initialResourceGroupPath3);
+
+        LocalDateTime preferredAppointmentTime =
+                testUtil.getNextDayOfWeek(LocalDateTime.now().plusDays(1), DayOfWeek.TUESDAY)
+                        .toLocalDate().atTime(9, 0);
+
+        // appointment input has skipAvailability = false
+        String appointmentPath1 =
+                testDirectory + ""/Appointment3.json"";
+        String appointmentId1 = ""carrierAppt1Test5"";
+
+        applicationParameterService = mock(ApplicationParameterService.class);
+
+        // Activating the Application Parameter
+        when(applicationParameterService.getParameterValue(
+                AppointmentApplicationParameters.APPOINTMENT_APPOINTMENTCONTENT_SAVEWITHOUTLOAD))
+                        .thenReturn(true);
+        ReflectionTestUtils.setField(appointmentSaveHelper, ""applicationParameterService"",
+                applicationParameterService);
+
+        // Schedule Carrier appointment1
+        ResponseEntity<RestApiResponse<Document>> scheduleResponse = testUtil.scheduleAppointment(context,
+                appointmentPath1, appointmentId1, preferredAppointmentTime.toString());
+        Appointment scheduledAppointment = appointmentService.findByAppointmentId(context, appointmentId1);
+        Assert.assertNotNull(scheduledAppointment);
+        Assert.assertEquals(preferredAppointmentTime, scheduledAppointment.getPreferredDateTime());
+
+        // Resetting tha flag
+        when(applicationParameterService.getParameterValue(
+                AppointmentApplicationParameters.APPOINTMENT_APPOINTMENTCONTENT_SAVEWITHOUTLOAD))
+                        .thenReturn(false);
+        ReflectionTestUtils.setField(appointmentSaveHelper, ""applicationParameterService"",
+                applicationParameterService);
+
+    }
+
 }
diff --git a/src/component-test/java/com/manh/cp/appointment/appointment/RecommendationTests.java b/src/component-test/java/com/manh/cp/appointment/appointment/RecommendationTests.java
index f778a7932..4e0cfc3c0 100644
--- a/src/component-test/java/com/manh/cp/appointment/appointment/RecommendationTests.java
+++ b/src/component-test/java/com/manh/cp/appointment/appointment/RecommendationTests.java
@@ -1805,7 +1805,15 @@ public class RecommendationTests extends AbstractComponentTest
                 ""/appointment/appointment/recommendations/recommendationsWithSkipAvailability/DockGroup.json"";
         testUtil.createGeneralConfigurationV2(context, timeIntervalDefinitionPath, initialResourceGroupPath);
 
-        LocalDateTime preferredAppointmentTime = LocalDateTime.now().plusHours(1);
+        LocalDateTime localDateTime = LocalDateTime.now();
+
+        // Convert the local date-time to UTC
+        ZonedDateTime utcDateTime =
+                localDateTime.atZone(ZoneId.systemDefault()).withZoneSameInstant(ZoneId.of(""UTC""));
+
+        // Get the LocalDateTime in UTC
+        LocalDateTime preferredAppointmentTime = utcDateTime.toLocalDateTime().plusHours(1);
+
         // appointment input has skipAvailability = false
         String appointmentPath1 =
                 ""/appointment/appointment/recommendations/recommendationsWithSkipAvailability/AppointmentWithEarliestStartAndEndDateTime.json"";
@@ -1817,7 +1825,8 @@ public class RecommendationTests extends AbstractComponentTest
         Assert.assertEquals(10, recommendationsOutputDTO.getRecommendations().size());
         recommendationsOutputDTO.getRecommendations().forEach(
                 recommendationDTO -> Assert
-                        .assertTrue(recommendationDTO.getRecommendationDateTime().isAfter(LocalDateTime.now())));
+                        .assertTrue(
+                                recommendationDTO.getRecommendationDateTime().isAfter(utcDateTime.toLocalDateTime())));
 
         // Test with FF is OFF (SUP-520690#2024-08) Todo: Remove below code while removing FF's
         context.setTransactionAttribute(""component-test"",
diff --git a/src/component-test/resources/appointment/appointment/carrierAppointment/Appointment3.json b/src/component-test/resources/appointment/appointment/carrierAppointment/Appointment3.json
new file mode 100644
index 000000000..e0b20d10a
--- /dev/null
+++ b/src/component-test/resources/appointment/appointment/carrierAppointment/Appointment3.json
@@ -0,0 +1,4410 @@
+{
+  ""AppointmentObjectTypeId"": ""PurchaseOrders"",
+  ""ModeId"": null,
+  ""EquipmentTypeId"": null,
+  ""AppointmentTypeId"": ""DROP_UNLOAD"",
+  ""PreferredDateTime"": ""2024-08-24T10:00"",
+  ""Duration"": 30,
+  ""PurchaseOrder"": [
+    {
+      ""PurchaseOrderId"": ""P1"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 2
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P2"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 10
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P3"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 10
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P4"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 20
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P5"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 10
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P6"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 2
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P7"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 10
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P8"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 10
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P9"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 20
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P10"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 10
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P11"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 2
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P12"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 10
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P13"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 10
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P14"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 20
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P15"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 10
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P16"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 2
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P17"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 10
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P18"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 10
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P19"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 20
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P20"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 10
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P21"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 2
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P22"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 10
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P23"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 10
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P24"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 20
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P25"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 10
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P26"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 2
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P27"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 10
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P28"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 10
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P29"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 20
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P30"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 10
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P31"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 2
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P32"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 10
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P33"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 10
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P34"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 20
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P35"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 10
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P36"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 2
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P37"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 10
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P38"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 10
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P39"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 20
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P40"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 10
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P41"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 2
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P42"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 10
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P43"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 10
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P44"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 20
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P45"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 10
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P46"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 2
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P47"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 10
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P48"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 10
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P49"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 20
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P50"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 10
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P51"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 2
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P52"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 10
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P53"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 10
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P54"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 20
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P55"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 10
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P56"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 2
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P57"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 10
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P58"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 10
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P59"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 20
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P60"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 10
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P61"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 2
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P62"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 10
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P63"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 10
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P64"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 20
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P65"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 10
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P66"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 2
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P67"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 10
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P68"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 10
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P69"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 20
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P70"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 10
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P71"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 2
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P72"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 10
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P73"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 10
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P74"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 20
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P75"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 10
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P76"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 2
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P77"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 10
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P78"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 10
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P79"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 20
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P80"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 10
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P81"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 2
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P82"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 10
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P83"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 10
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P84"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 20
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P85"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 10
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P86"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 2
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P87"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 10
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P88"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 10
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P89"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 20
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P90"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 10
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P91"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 2
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P92"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 10
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P93"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 10
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P94"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 20
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P95"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 10
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P96"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 10
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P97"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 10
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P98"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 10
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P99"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 10
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P100"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 10
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P101"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 2
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P102"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 10
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P103"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 10
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P104"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 20
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P105"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 10
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P106"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 2
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P107"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 10
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P108"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 10
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P109"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 20
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P110"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 10
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P111"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 2
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P112"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 10
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P113"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 10
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P114"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 20
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P115"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 10
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P116"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 2
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P117"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 10
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P118"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 10
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P119"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 20
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P120"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 10
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P121"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 2
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P122"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 10
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P123"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 10
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P124"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 20
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P125"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 10
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P126"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 2
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P127"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 10
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P128"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 10
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P129"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 20
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P130"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 10
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P131"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 2
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P132"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 10
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P133"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 10
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P134"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 20
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P135"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 10
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P136"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 2
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P137"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 10
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P138"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 10
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P139"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 20
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P140"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 10
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P141"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 2
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P142"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 10
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P143"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 10
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P144"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 20
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P145"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 10
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P146"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 2
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P147"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 10
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P148"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 10
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P149"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 20
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P150"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 10
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P151"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 2
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P152"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 10
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P153"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 10
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P154"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 20
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P155"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 10
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P156"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 2
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P157"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 10
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P158"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 10
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P159"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 20
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P160"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 10
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P161"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 2
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P162"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 10
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P163"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 10
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P164"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 20
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P165"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 10
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P166"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 2
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P167"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 10
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P168"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 10
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P169"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 20
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P170"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 10
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P171"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 2
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P172"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 10
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P173"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 10
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P174"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 20
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P175"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 10
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P176"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 2
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P177"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 10
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P178"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 10
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P179"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 20
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P180"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 10
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P181"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 2
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P182"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 10
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P183"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 10
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P184"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 20
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P185"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 10
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P186"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 2
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P187"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 10
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P188"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 10
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P189"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 20
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P190"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 10
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P191"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 2
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P192"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 10
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P193"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 10
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P194"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 20
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P195"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 10
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P196"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 10
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P197"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 10
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P198"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 10
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P199"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 10
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P200"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 10
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P201"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 2
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P202"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 10
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P203"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 10
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P204"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 20
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P205"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 10
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P206"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 2
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P207"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 10
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P208"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 10
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P209"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 20
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P210"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 10
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P211"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 2
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P212"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 10
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P213"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 10
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P214"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 20
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P215"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 10
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P216"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 2
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P217"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 10
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P218"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 10
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P219"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 20
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P220"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 10
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P221"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 2
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P222"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 10
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P223"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 10
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P224"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 20
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P225"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 10
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P226"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 2
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P227"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 10
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P228"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 10
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P229"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 20
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P230"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 10
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P231"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 2
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P232"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 10
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P233"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 10
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P234"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 20
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P235"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 10
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P236"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 2
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P237"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 10
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P238"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 10
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P239"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 20
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P240"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 10
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P241"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 2
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P242"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 10
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P243"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 10
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P244"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 20
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P245"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 10
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P246"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 2
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P247"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 10
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P248"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 10
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P249"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 20
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P250"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 10
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P251"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 2
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P252"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 10
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P253"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 10
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P254"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 20
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P255"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 10
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P256"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 2
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P257"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 10
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P258"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 10
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P259"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 20
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P260"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 10
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P261"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 2
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P262"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 10
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P263"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 10
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P264"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 20
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P265"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 10
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P266"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 2
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P267"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 10
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P268"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 10
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P269"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 20
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P270"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 10
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P271"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 2
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P272"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 10
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P273"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 10
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P274"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 20
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P275"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 10
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P276"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 2
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P277"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 10
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P278"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 10
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P279"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 20
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P280"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 10
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P281"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 2
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P282"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 10
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P283"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 10
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P284"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 20
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P285"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 10
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P286"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 2
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P287"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 10
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P288"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 10
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P289"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 20
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P290"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 10
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P291"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 2
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P292"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 10
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P293"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 10
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P294"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 20
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P295"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 10
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P296"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 10
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P297"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 10
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P298"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 10
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P299"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 10
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P300"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 10
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P301"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 2
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P302"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 10
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P303"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 10
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P304"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 20
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P305"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 10
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P306"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 2
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P307"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 10
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P308"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 10
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P309"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 20
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P310"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 10
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P311"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 2
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P312"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 10
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P313"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 10
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P314"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 20
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P315"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 10
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P316"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 2
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P317"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 10
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P318"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 10
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P319"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 20
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P320"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 10
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P321"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 2
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P322"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 10
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P323"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 10
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P324"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 20
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P325"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 10
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P326"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 2
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P327"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 10
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P328"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 10
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P329"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 20
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P330"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 10
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P331"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 2
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P332"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 10
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P333"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 10
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P334"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 20
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P335"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 10
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P336"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 2
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P337"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 10
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P338"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 10
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P339"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 20
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P340"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 10
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P341"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 2
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P342"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 10
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P343"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 10
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P344"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 20
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P345"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 10
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P346"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 2
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P347"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 10
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P348"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 10
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P349"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 20
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P350"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 10
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P351"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 2
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P352"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 10
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P353"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 10
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P354"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 20
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P355"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 10
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P356"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 2
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P357"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 10
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P358"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 10
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P359"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 20
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P360"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 10
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P361"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 2
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P362"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 10
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P363"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 10
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P364"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 20
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P365"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 10
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P366"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 2
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P367"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 10
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P368"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 10
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P369"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 20
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P370"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 10
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P371"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 2
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P372"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 10
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P373"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 10
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P374"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 20
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P375"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 10
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P376"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 2
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P377"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 10
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P378"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 10
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P379"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 20
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P380"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 10
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P381"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 2
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P382"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 10
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P383"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 10
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P384"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 20
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P385"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 10
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P386"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 2
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P387"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 10
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P388"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 10
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P389"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 20
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P390"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 10
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P391"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 2
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P392"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 10
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P393"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 10
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P394"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 20
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P395"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 10
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P396"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 10
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P397"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 10
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P398"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 10
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P399"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 10
+        }
+      ]
+    },
+    {
+      ""PurchaseOrderId"": ""P400"",
+      ""DestinationFacilityId"": ""01"",
+      ""PurchaseOrderDetails"": [
+        {
+          ""Conveyable"": false,
+          ""Uom"": ""lpn"",
+          ""Quantity"": 10
+        }
+      ]
+    }
+  ]
+}
diff --git a/src/main/java/com/manh/cp/appointment/appointment/AppointmentApplicationParameters.java b/src/main/java/com/manh/cp/appointment/appointment/AppointmentApplicationParameters.java
index 4c26e8fbe..1c67431a2 100644
--- a/src/main/java/com/manh/cp/appointment/appointment/AppointmentApplicationParameters.java
+++ b/src/main/java/com/manh/cp/appointment/appointment/AppointmentApplicationParameters.java
@@ -24,6 +24,7 @@ import com.manh.cp.fw.sccore.parameter.api.service.ApplicationParameterSpec;
 @Component
 public class AppointmentApplicationParameters
 {
+
     private AppointmentApplicationParameters()
     {
     }
@@ -40,4 +41,8 @@ public class AppointmentApplicationParameters
     public static final ApplicationParameterSpec<Boolean> RETURN_RECOMMENDATION_IF_SLOT_NOT_FOUND =
             new ApplicationParameterSpec<>(""appointment.recommendTimeSlot.slotNotFound.enabled"",
                     Boolean.class);
+
+    public static final ApplicationParameterSpec<Boolean> APPOINTMENT_APPOINTMENTCONTENT_SAVEWITHOUTLOAD =
+            new ApplicationParameterSpec<>(""appointment.appointmentContent.saveWithoutLoad"", false,
+                    Boolean.class);
 }
diff --git a/src/main/java/com/manh/cp/appointment/appointment/api/service/PurchaseOrderMapService.java b/src/main/java/com/manh/cp/appointment/appointment/api/service/PurchaseOrderMapService.java
new file mode 100644
index 000000000..d1d7e76f0
--- /dev/null
+++ b/src/main/java/com/manh/cp/appointment/appointment/api/service/PurchaseOrderMapService.java
@@ -0,0 +1,30 @@
+/*
+ * Copyright &#169; 2015 Manhattan Associates, Inc. All Rights Reserved.
+ *
+ * Confidential, Proprietary and Trade Secrets Notice
+ *
+ * Use of this software is governed by a license agreement. This software
+ * contains confidential, proprietary and trade secret information of
+ * Manhattan Associates, Inc. and is protected under United States and
+ * international copyright and other intellectual property laws. Use, disclosure,
+ * reproduction, modification, distribution, or storage in a retrieval system in
+ * any form or by any means is prohibited without the prior express written
+ * permission of Manhattan Associates, Inc.
+ *
+ * Manhattan Associates, Inc.
+ * 2300 Windy Ridge Parkway, 10th Floor
+ * Atlanta, GA 30339 USA
+ */
+package com.manh.cp.appointment.appointment.api.service;
+
+import java.util.List;
+
+import com.manh.cp.appointment.appointment.client.dto.PurchaseOrderDTO;
+import com.manh.cp.fw.codegen.annotation.Generated;
+import com.manh.cp.fw.common.Context;
+
+@Generated(value = ""Generated once by EntityFramework"")
+public interface PurchaseOrderMapService extends PurchaseOrderMapServiceBase
+{
+    public void deleteBulkPurchaseOrdersAndDetails(Context context, List<PurchaseOrderDTO> purchaseOrderList);
+}
diff --git a/src/main/java/com/manh/cp/appointment/appointment/constants/AppointmentConstants.java b/src/main/java/com/manh/cp/appointment/appointment/constants/AppointmentConstants.java
index a5feb3e16..9c5baf9f9 100644
--- a/src/main/java/com/manh/cp/appointment/appointment/constants/AppointmentConstants.java
+++ b/src/main/java/com/manh/cp/appointment/appointment/constants/AppointmentConstants.java
@@ -280,4 +280,8 @@ public class AppointmentConstants
 
     public static final String NOT_ON_BOARDED = ""Not-On-Boarded"";
 
+    public static final String APPOINTMENT_CONTENT_SAVE_WITHOUT_LOAD = ""SavePurchaseOrderWithoutLoad"";
+
+    public static final String DATA = ""Data"";
+
 }
diff --git a/src/main/java/com/manh/cp/appointment/appointment/impl/service/AppointmentSaveHelper.java b/src/main/java/com/manh/cp/appointment/appointment/impl/service/AppointmentSaveHelper.java
index 345d264ae..d495e30a7 100644
--- a/src/main/java/com/manh/cp/appointment/appointment/impl/service/AppointmentSaveHelper.java
+++ b/src/main/java/com/manh/cp/appointment/appointment/impl/service/AppointmentSaveHelper.java
@@ -35,10 +35,35 @@ import org.apache.commons.lang3.StringUtils;
 import org.springframework.beans.factory.annotation.Autowired;
 import org.springframework.stereotype.Component;
 
-import com.manh.cp.appointment.appointment.api.domain.*;
-import com.manh.cp.appointment.appointment.api.service.*;
+import com.manh.cp.appointment.appointment.api.domain.Appointment;
+import com.manh.cp.appointment.appointment.api.domain.AppointmentBase;
+import com.manh.cp.appointment.appointment.api.domain.AppointmentContents;
+import com.manh.cp.appointment.appointment.api.domain.AppointmentContentsBase;
+import com.manh.cp.appointment.appointment.api.domain.AppointmentSchedules;
+import com.manh.cp.appointment.appointment.api.domain.Asn;
+import com.manh.cp.appointment.appointment.api.domain.AsnDetails;
+import com.manh.cp.appointment.appointment.api.domain.PlannedDockDoors;
+import com.manh.cp.appointment.appointment.api.domain.PurchaseOrder;
+import com.manh.cp.appointment.appointment.api.domain.PurchaseOrderBase;
+import com.manh.cp.appointment.appointment.api.domain.PurchaseOrderDetails;
+import com.manh.cp.appointment.appointment.api.domain.ShipmentStop;
+import com.manh.cp.appointment.appointment.api.domain.ShipmentStopDetails;
+import com.manh.cp.appointment.appointment.api.domain.UserLoadInformation;
+import com.manh.cp.appointment.appointment.api.service.AppointmentMapService;
+import com.manh.cp.appointment.appointment.api.service.AsnMapService;
+import com.manh.cp.appointment.appointment.api.service.AsnService;
+import com.manh.cp.appointment.appointment.api.service.FeatureFlagService;
+import com.manh.cp.appointment.appointment.api.service.PurchaseOrderMapService;
+import com.manh.cp.appointment.appointment.api.service.PurchaseOrderService;
+import com.manh.cp.appointment.appointment.api.service.ShipmentStopMapService;
+import com.manh.cp.appointment.appointment.api.service.ShipmentStopService;
 import com.manh.cp.appointment.appointment.client.Constants.ErrorDefinitionIdBundle;
-import com.manh.cp.appointment.appointment.client.dto.*;
+import com.manh.cp.appointment.appointment.client.dto.AppointmentDTO;
+import com.manh.cp.appointment.appointment.client.dto.AppointmentSchedulesDTO;
+import com.manh.cp.appointment.appointment.client.dto.AsnDTO;
+import com.manh.cp.appointment.appointment.client.dto.PurchaseOrderBaseDTO;
+import com.manh.cp.appointment.appointment.client.dto.PurchaseOrderDTO;
+import com.manh.cp.appointment.appointment.client.dto.ShipmentStopDTO;
 import com.manh.cp.appointment.appointment.constants.AppointmentConstants;
 import com.manh.cp.appointment.appointment.constants.AppointmentStatus;
 import com.manh.cp.appointment.appointment.constants.ContentType;
@@ -53,8 +78,13 @@ import com.manh.cp.fw.common.DocumentBuilder;
 import com.manh.cp.fw.core.logging.CPLoggerFactory;
 import com.manh.cp.fw.core.logging.Logger;
 import com.manh.cp.fw.errorHandler.ErrorHandlerService;
+import com.manh.cp.fw.sccore.parameter.api.service.ApplicationParameterService;
 
+import static com.manh.cp.appointment.appointment.AppointmentApplicationParameters.APPOINTMENT_APPOINTMENTCONTENT_SAVEWITHOUTLOAD;
+import static com.manh.cp.appointment.appointment.constants.AppointmentConstants.APPOINTMENT_CONTENT_SAVE_WITHOUT_LOAD;
+import static com.manh.cp.appointment.appointment.constants.AppointmentConstants.APPOINTMENT_NAMESPACE;
 import static com.manh.cp.appointment.appointment.constants.AppointmentConstants.CARRIER;
+import static com.manh.cp.appointment.appointment.constants.AppointmentConstants.DATA;
 import static com.manh.cp.appointment.appointment.constants.AppointmentConstants.RECOMMENDATION;
 import static com.manh.cp.appointment.appointment.constants.AppointmentConstants.VENDOR;
 
@@ -98,12 +128,26 @@ public class AppointmentSaveHelper
     @Autowired
     private AppointmentParameterStrategyService appointmentParameterStrategyService;
 
+    @Autowired
+    private ApplicationParameterService applicationParameterService;
+
     Document saveAppointment(Context context, AppointmentDTO appointmentDTO, ScheduleDTO scheduleDTO)
     {
         logger.trace("">> saveAppointment()"");
 
         List<AsnDTO> asnList = saveASNs(context, appointmentDTO);
-        List<PurchaseOrderDTO> purchaseOrders = savePurchaseOrders(context, appointmentDTO);
+        boolean savePurchaseOrderWithLoadEnabled =
+                applicationParameterService.getParameterValue(APPOINTMENT_APPOINTMENTCONTENT_SAVEWITHOUTLOAD);
+
+        List<PurchaseOrderDTO> purchaseOrders = null;
+        if (!savePurchaseOrderWithLoadEnabled)
+        {
+            purchaseOrders = savePurchaseOrders(context, appointmentDTO);
+        }
+        else
+        {
+            purchaseOrders = savePurchaseOrdersWithBulkDelete(context, appointmentDTO);
+        }
         List<ShipmentStopDTO> shipments = saveShipmentStops(context, appointmentDTO);
 
         populateAppointmentScheduleDTO(appointmentDTO, scheduleDTO);
@@ -415,6 +459,51 @@ public class AppointmentSaveHelper
         return createdShipmentStops;
     }
 
+    /**
+     * Performs bulk insertion and deletion of purchase order. Rather than doing an update.
+     *
+     * @param context
+     * @param appointmentDTO
+     * @return
+     */
+    private List<PurchaseOrderDTO> savePurchaseOrdersWithBulkDelete(Context context, AppointmentDTO appointmentDTO)
+    {
+        logger.trace("">> savePurchaseOrdersV2()"");
+        List<PurchaseOrderDTO> purchaseOrders = appointmentDTO.getPurchaseOrder();
+
+        if (CollectionUtils.isEmpty(purchaseOrders))
+        {
+            return Collections.EMPTY_LIST;
+        }
+        List<Map<String, Object>> documentListForInsertion = new ArrayList<>();
+        for (PurchaseOrderDTO purchaseOrder : purchaseOrders)
+        {
+            Document documentToSave = DocumentBuilder.build(purchaseOrder);
+            if (purchaseOrder.isInitialized(AppointmentConstants.PURCHASE_ORDER_DETAILS) &&
+                    CollectionUtils.isEmpty(purchaseOrder.getPurchaseOrderDetailsList()))
+            {
+                documentToSave.remove(AppointmentConstants.PURCHASE_ORDER_DETAILS);
+            }
+            documentListForInsertion.add(documentToSave.getMap());
+        }
+        purchaseOrderMapService.deleteBulkPurchaseOrdersAndDetails(context, purchaseOrders);
+
+        context.setTransactionAttribute(APPOINTMENT_NAMESPACE, APPOINTMENT_CONTENT_SAVE_WITHOUT_LOAD, Boolean.TRUE);
+        Document bulkDocument = new Document();
+        bulkDocument.put(DATA, documentListForInsertion);
+        Document purchaseOrderDocument =
+                purchaseOrderMapService.saveBulkPurchaseOrders(context, bulkDocument);
+
+        int totalCount = (int) purchaseOrderDocument
+                .get(com.manh.cp.fw.entity.domain.api.DomainObject.AggregateResponseFields.TOTAL_COUNT.getCode());
+        int successCount = (int) purchaseOrderDocument
+                .get(com.manh.cp.fw.entity.domain.api.DomainObject.AggregateResponseFields.SUCCESS_COUNT.getCode());
+        logger.debug(""-- savePurchaseOrdersV2 Total POs count = {} , Saved POs count  = {} "", totalCount,
+                successCount);
+        logger.trace(""<< savePurchaseOrdersV2()"");
+        return Collections.emptyList();
+    }
+
     private List<PurchaseOrderDTO> savePurchaseOrders(Context context, AppointmentDTO appointmentDTO)
     {
         logger.trace("">> savePurchaseOrders()"");
@@ -469,7 +558,7 @@ public class AppointmentSaveHelper
                 })
                 .collect(Collectors.toList());
 
-        logger.debug(""-- createdPurchaseOrders = {} "", createdPurchaseOrders);
+        logger.debug(""-- savePurchaseOrders = {} "", createdPurchaseOrders);
         logger.trace(""<< savePurchaseOrders()"");
         return createdPurchaseOrders;
     }
@@ -582,7 +671,6 @@ public class AppointmentSaveHelper
         }
         if (appointmentDTO.getContentType() != null &&
                 appointmentDTO.getContentType().equals(ContentType.SHIPMENT.getId()))
-
         {
             if (appointmentDTO.isInitialized(""WindowEndDateTime"") &&
                     appointmentDTO.getWindowEndDateTime() != null &&
diff --git a/src/main/java/com/manh/cp/appointment/appointment/impl/service/PurchaseOrderMapServiceImpl.java b/src/main/java/com/manh/cp/appointment/appointment/impl/service/PurchaseOrderMapServiceImpl.java
new file mode 100644
index 000000000..f3a8ce3f4
--- /dev/null
+++ b/src/main/java/com/manh/cp/appointment/appointment/impl/service/PurchaseOrderMapServiceImpl.java
@@ -0,0 +1,180 @@
+/*
+ * Copyright &#169; 2024 Manhattan Associates, Inc. All Rights Reserved.
+ *
+ * Confidential, Proprietary and Trade Secrets Notice
+ *
+ * Use of this software is governed by a license agreement. This software
+ * contains confidential, proprietary and trade secret information of
+ * Manhattan Associates, Inc. and is protected under United States and
+ * international copyright and other intellectual property laws. Use, disclosure,
+ * reproduction, modification, distribution, or storage in a retrieval system in
+ * any form or by any means is prohibited without the prior express written
+ * permission of Manhattan Associates, Inc.
+ *
+ * Manhattan Associates, Inc.
+ * 2300 Windy Ridge Parkway, 10th Floor
+ * Atlanta, GA 30339 USA
+ */
+package com.manh.cp.appointment.appointment.impl.service;
+
+import java.text.MessageFormat;
+import java.util.List;
+import java.util.function.BiConsumer;
+import java.util.stream.Collectors;
+
+import com.google.common.collect.Lists;
+import com.mysema.query.jpa.JPQLQuery;
+import com.mysema.query.jpa.impl.JPADeleteClause;
+import org.springframework.beans.factory.annotation.Autowired;
+import org.springframework.stereotype.Component;
+import org.springframework.transaction.annotation.Propagation;
+import org.springframework.transaction.annotation.Transactional;
+
+import com.manh.cp.appointment.appointment.api.domain.PurchaseOrder;
+import com.manh.cp.appointment.appointment.api.service.PurchaseOrderMapService;
+import com.manh.cp.appointment.appointment.client.dto.PurchaseOrderDTO;
+import com.manh.cp.appointment.appointment.impl.domain.entity.PurchaseOrderEntity;
+import com.manh.cp.appointment.appointment.impl.domain.entity.QPurchaseOrderDetailsEntity;
+import com.manh.cp.appointment.appointment.impl.domain.entity.QPurchaseOrderEntity;
+import com.manh.cp.fw.common.Context;
+import com.manh.cp.fw.common.Document;
+import com.manh.cp.fw.core.exception.ExceptionReason;
+import com.manh.cp.fw.core.logging.CPLoggerFactory;
+import com.manh.cp.fw.core.logging.Logger;
+import com.manh.cp.fw.entity.domain.entity.DomainEntity;
+import com.manh.cp.fw.entity.domain.entity.EntityContext;
+import com.manh.cp.fw.entity.domain.metadata.Metadata;
+import com.manh.cp.fw.entity.support.ManhRuntimeExceptionUtil;
+import com.manh.cp.fw.entity.support.factory.EntityFactory;
+import com.manh.cp.fw.entity.support.factory.ManhEntityManagerProvider;
+
+import static com.manh.cp.appointment.appointment.constants.AppointmentConstants.APPOINTMENT_CONTENT_SAVE_WITHOUT_LOAD;
+import static com.manh.cp.appointment.appointment.constants.AppointmentConstants.APPOINTMENT_NAMESPACE;
+
+@Component
+public class PurchaseOrderMapServiceImpl extends PurchaseOrderMapServiceImplBase implements PurchaseOrderMapService
+{
+
+    private static final Logger logger = CPLoggerFactory.getLogger(PurchaseOrderMapServiceImpl.class);
+
+    public static final int PARTITION_SIZE = 250;
+
+    public static final String EQUALS = ""="";
+
+    public static final String SPACE = "" "";
+
+    @Autowired
+    private ManhEntityManagerProvider manhEntityManagerProvider;
+
+    @Override
+    protected PurchaseOrderEntity getSaveablePurchaseOrderEntity(Context context, Document document)
+    {
+
+        Boolean saveWithoutLoad =
+                context.getTransactionAttribute(APPOINTMENT_NAMESPACE, APPOINTMENT_CONTENT_SAVE_WITHOUT_LOAD);
+        if (saveWithoutLoad != null && saveWithoutLoad)
+        {
+            return getSaveablePurchaseOrderEntityWithoutLoad(context, document);
+        }
+        else
+        {
+            return super.getSaveablePurchaseOrderEntity(context, document);
+        }
+    }
+
+    protected PurchaseOrderEntity getSaveablePurchaseOrderEntityWithoutLoad(Context context, Document document)
+    {
+        logger.trace("">> getSaveablePurchaseOrderEntityWithoutLoad()"");
+        logger.debug(MessageFormat.format(
+                ""-- getSaveablePurchaseOrderEntityWithoutLoad() create/ update of PurchaseOrder Entity having data: {0} for user {1}, Organization {2} with relevant Org {3}, relevant node id {4} and relevant business unit {5}"",
+                document, context.getUser(), context.getOrganization(), context.getRelevantOrganizationId(),
+                context.getRelevantNodeId(), context.getRelevantBusinessUnitId()));
+
+        securityKeyHelper.validateAndSetSecurityKey(context, ""PurchaseOrder"", null, null);
+        PurchaseOrder.Key key = constructKey(document);
+        PurchaseOrderEntity purchaseOrderEntity = EntityFactory.getFactory().newEntity(PurchaseOrderEntity.class, key);
+        EntityContext entityContext = new EntityContext(context, purchaseOrderEntity, document.getMap());
+        DomainEntity.merge(entityContext);
+        if (entityContext.getValidationResult().hasErrors())
+        {
+            StringBuilder message = new StringBuilder();
+            purchaseOrderEntity.getUniqueKeys().stream().forEach((uniqueKeySet) -> {
+                uniqueKeySet.stream().forEach((uniqueKey) -> {
+                    message.append(uniqueKey).append(EQUALS).append(document.get(uniqueKey)).append(SPACE);
+                });
+            });
+            throw ManhRuntimeExceptionUtil.getManhValidationException(ExceptionReason.BAD_DATA, null,
+                    entityContext.getValidationResult().getMessages(),
+                    MessageFormat.format(
+                            ""-- getSaveablePurchaseOrderEntityWithoutLoad() Entity Validation Error Occurred for {0}"",
+                            message),
+                    null, true);
+        }
+        logger.trace(() -> ""<< getSaveablePurchaseOrderEntityWithoutLoad()"");
+        return purchaseOrderEntity;
+    }
+
+    @Transactional(propagation = Propagation.REQUIRED)
+    public void deleteBulkPurchaseOrdersAndDetails(Context context, List<PurchaseOrderDTO> purchaseOrderList)
+    {
+        logger.debug(""--deleteBulkPurchaseOrdersAndDetails invoked "");
+        if (purchaseOrderList == null)
+        {
+            return;
+        }
+        // Partition the list into chunks of 250 and apply the deletion logic
+        Lists.partition(purchaseOrderList, PARTITION_SIZE)
+                .forEach(purchaseOrders -> applyDeletion(context, purchaseOrders, this::executeDeletion));
+        manhEntityManagerProvider.getEntityManager().flush();
+    }
+
+    private void applyDeletion(Context context, List<PurchaseOrderDTO> purchaseOrders,
+            BiConsumer<Context, List<String>> deletionBiConsumer)
+    {
+        List<String> purchaseOrderIds = purchaseOrders.stream()
+                .map(PurchaseOrderDTO::getPurchaseOrderId)
+                .collect(Collectors.toList());
+        deletionBiConsumer.accept(context, purchaseOrderIds);
+    }
+
+    private void executeDeletion(Context context, List<String> purchaseOrderIds)
+    {
+        QPurchaseOrderEntity qPurchaseOrderEntity = QPurchaseOrderEntity.purchaseOrderEntity;
+        QPurchaseOrderDetailsEntity qPurchaseOrderDetailsEntity =
+                QPurchaseOrderDetailsEntity.purchaseOrderDetailsEntity;
+
+        // Create the subquery to find the purchase order entities
+        JPQLQuery query = purchaseOrderService.createQueryObject(context);
+        query.from(qPurchaseOrderEntity)
+                .where(qPurchaseOrderEntity.purchaseOrderId.in(purchaseOrderIds));
+
+        // Delete from PurchaseOrderDetailsEntity
+        long deletedDetailsRows = new JPADeleteClause(manhEntityManagerProvider.getEntityManager(),
+                qPurchaseOrderDetailsEntity)
+                        .where(qPurchaseOrderDetailsEntity.purchaseOrderId.pk.in(query.list(qPurchaseOrderEntity.pk)))
+                        .execute();
+
+        // Log the number of deleted rows for PurchaseOrderDetailsEntity
+        logger.debug(""--executeDeletion(), Number of Purchase Orders Details deleted: "" + deletedDetailsRows);
+
+        // Delete from PurchaseOrderEntity
+        long deletedOrdersRows = new JPADeleteClause(manhEntityManagerProvider.getEntityManager(), qPurchaseOrderEntity)
+                .where(qPurchaseOrderEntity.purchaseOrderId.in(purchaseOrderIds))
+                .execute();
+
+        // Log the number of deleted rows for PurchaseOrderEntity
+        logger.debug(""--executeDeletion(), Number of Purchase Orders deleted: "" + deletedOrdersRows);
+    }
+
+    private PurchaseOrder.Key constructKey(Document document)
+    {
+        Metadata metadata = DomainEntity.getMetadata(PurchaseOrder.ENTITY_NAME);
+        DomainEntity.modifyOrGenerateKeyFieldIfNeeded(document.getMap(), metadata,
+                PurchaseOrder.Key.Fields.PURCHASE_ORDER_ID.getCode());
+
+        return new PurchaseOrder.Key(
+                (String) objectMapper.convertValue(document.get(PurchaseOrder.Key.Fields.PURCHASE_ORDER_ID.getCode()),
+                        String.class));
+    }
+
+}
diff --git a/src/main/resources/applicationParameter/applicationParameter_apt.json b/src/main/resources/applicationParameter/applicationParameter_apt.json
index 6bc128874..a340a6a8e 100644
--- a/src/main/resources/applicationParameter/applicationParameter_apt.json
+++ b/src/main/resources/applicationParameter/applicationParameter_apt.json
@@ -19,6 +19,11 @@
       ""DefaultValue"": ""false"",
       ""Description"": ""Return Recommended Time Slot if Preferred Slot is not found"",
       ""ApplicationParameterId"": ""appointment.recommendTimeSlot.slotNotFound.enabled""
+    },
+    {
+      ""DefaultValue"": ""false"",
+      ""Description"": ""Flag to control the SaveOptimization of Appointment with Bulk Content without load."",
+      ""ApplicationParameterId"": ""appointment.appointmentContent.saveWithoutLoad""
     }
   ]
 }
","pls avoid the \* imports
can we have a more specific name for the app param?
2024?
The flush can also be forced by 

`manhEntityManagerProvider.getEntityManager().flush()`
we need to keep the original method accessible while overriding. One way is to set context transactional attribute from the flow logic and if absent revert to the super class method.
with this sort of delete the generated method is still fetching by BK and then deleting one by one, so we’ll pay the price of pre-query flush multiple times. Explore JPADelete with In clause
log doesnt match match name
wont this method be called lots of times. suggest changing to debug level.
avoid \* import
appointment.appointmentContent.saveWithoutLoad /SaveOptimisation to keep it generic for all appointment contents"
4ea394f68edacf25c6b41658737b12cfefda78a1,"diff --git a/src/main/java/com/manh/cp/appointment/core/impl/service/ResourceAvailabilityServiceImpl.java b/src/main/java/com/manh/cp/appointment/core/impl/service/ResourceAvailabilityServiceImpl.java
index 09c5502ba..185108477 100644
--- a/src/main/java/com/manh/cp/appointment/core/impl/service/ResourceAvailabilityServiceImpl.java
+++ b/src/main/java/com/manh/cp/appointment/core/impl/service/ResourceAvailabilityServiceImpl.java
@@ -1171,10 +1171,14 @@ public class ResourceAvailabilityServiceImpl<T extends AppointmentInputDTO> impl
             }
         }
         // Ensure windowStartDateTime is not in the past relative to the current timestamp
-        if (featureFlagService.isOn(FeatureIdentifier.FeatureFlags24_3.AVOID_RECOMMENDING_PAST_DATE_TIMESLOTS)
-                && windowStartDateTime.isBefore(LocalDateTime.now(ZoneOffset.UTC)))
+        if (featureFlagService.isOn(FeatureIdentifier.FeatureFlags24_3.AVOID_RECOMMENDING_PAST_DATE_TIMESLOTS))
         {
-            windowStartDateTime = LocalDateTime.now(ZoneOffset.UTC);
+            // Convert current LocalDateTime to UTC TimeZone
+            LocalDateTime currentLocalDateTime = ZonedDateTime.now(ZoneOffset.UTC).toLocalDateTime();
+            if (windowStartDateTime.isBefore(currentLocalDateTime))
+            {
+                windowStartDateTime = currentLocalDateTime;
+            }
         }
 
         if (appointmentInputDTO.getWindowStartDateTime() != null &&
",
aab97ad907a4f75829db8a0c13c1100dbbb2cfde,"diff --git a/build.gradle b/build.gradle
index 8b39d38de..71e710c22 100644
--- a/build.gradle
+++ b/build.gradle
@@ -224,6 +224,12 @@ tasks.register(""runCodeGenerator"", JavaExec) {
     args '-gtd'
     args 'true'
 
+    args '-gh'
+    args 'false'
+
+    args '-gtcc'
+    args 'true'
+
     args '-iev'
     args 'true'
 
","What is the use case of `args '-gtcc'`? Except dcinventory, no other components having this entry.
for now I have added all which were used in SB1 version. For other components also , you may need to check in SB1 branch if it was used and missed in SB2
We need to add gtcc as well. It was missed for other components during the SB2 move. I will be rolling out an adoption for that in a bit. gh/gfb is a lot more critical. "
8f0a90296125be546416d56ccc90faa7eeaa4e20,"diff --git a/src/component-test/java/com/manh/cp/appointment/appointment/RecommendationTests.java b/src/component-test/java/com/manh/cp/appointment/appointment/RecommendationTests.java
index 6cf9031bf..f778a7932 100644
--- a/src/component-test/java/com/manh/cp/appointment/appointment/RecommendationTests.java
+++ b/src/component-test/java/com/manh/cp/appointment/appointment/RecommendationTests.java
@@ -54,6 +54,7 @@ import com.manh.cp.appointment.appointment.client.Constants.ErrorDefinitionIdBun
 import com.manh.cp.appointment.appointment.client.dto.recommendation.RecommendationDTO;
 import com.manh.cp.appointment.appointment.client.dto.recommendation.RecommendationsOutputDTO;
 import com.manh.cp.appointment.appointment.constants.CapacityConstraintLevel;
+import com.manh.cp.appointment.appointment.constants.FeatureFlagConstants;
 import com.manh.cp.appointment.appointment.constants.FeatureIdentifier;
 import com.manh.cp.appointment.appointment.impl.service.AppointmentManager;
 import com.manh.cp.appointment.appointment.impl.service.AppointmentManagerHelper;
@@ -79,6 +80,7 @@ import com.manh.cp.fw.errorHandler.ErrorHandlerService;
 import com.manh.cp.fw.errorHandler.api.service.ErrorDefinitionService;
 import com.manh.cp.fw.errorHandler.exception.ErrorHandlerRuntimeException;
 import com.manh.cp.fw.featureflags.Features;
+import com.manh.cp.fw.featureflags.test.AssumeFlagEnabled;
 import com.manh.cp.fw.query.Query;
 import com.manh.cp.fw.scoring.config.api.service.PreferenceMapService;
 import com.manh.cp.schedule.calendar.api.service.CalendarDefinitionMapService;
@@ -202,6 +204,9 @@ public class RecommendationTests extends AbstractComponentTest
         context.setTransactionAttribute(""component-test"",
                 FeatureIdentifier.FeatureFlags99_9.CONSIDER_DAY_LIGHT_SAVING_CHANGE.getFeatureId(),
                 true);
+        context.setTransactionAttribute(""component-test"",
+                FeatureIdentifier.FeatureFlags24_3.AVOID_RECOMMENDING_PAST_DATE_TIMESLOTS.getFeatureId(),
+                true);
     }
 
     @After
@@ -1775,4 +1780,55 @@ public class RecommendationTests extends AbstractComponentTest
             Assert.fail(""Exception "" + e);
         }
     }
+
+    /**
+     * Test case to validate that the system recommends time slots based on the EarliestStartDateTime, even if they are
+     * in the past.
+     */
+    @Test
+    @Transactional
+    @AssumeFlagEnabled(FeatureFlagConstants.AVOID_RECOMMENDING_PAST_DATE_TIMESLOTS)
+    public void testRecommendationForPastSlots()
+    {
+        AppointmentParameters appointmentParameters =
+                appointmentParametersService.findAllAppointmentParameterss(context,
+                        new Query("""", 0, 1)).getObjects().stream().findFirst().get();
+        appointmentParameters.setNumberOfRecommendations(10);
+        appointmentParameters.setAppointmentWindowSpan(72L);
+        appointmentParametersService.save(context, appointmentParameters);
+        appointmentParametersService.findAllAppointmentParameterss(context,
+                new Query("""", 0, 1)).getObjects().stream().findFirst().get();
+
+        String timeIntervalDefinitionPath =
+                ""/appointment/appointment/recommendations/recommendationsWithSkipAvailability/TimeIntervalDefinition8-15.json"";
+        String initialResourceGroupPath =
+                ""/appointment/appointment/recommendations/recommendationsWithSkipAvailability/DockGroup.json"";
+        testUtil.createGeneralConfigurationV2(context, timeIntervalDefinitionPath, initialResourceGroupPath);
+
+        LocalDateTime preferredAppointmentTime = LocalDateTime.now().plusHours(1);
+        // appointment input has skipAvailability = false
+        String appointmentPath1 =
+                ""/appointment/appointment/recommendations/recommendationsWithSkipAvailability/AppointmentWithEarliestStartAndEndDateTime.json"";
+
+        // Test with FF is ON (SUP-520690#2024-08)
+        RecommendationsOutputDTO recommendationsOutputDTO =
+                getRecommendations(appointmentPath1, preferredAppointmentTime);
+
+        Assert.assertEquals(10, recommendationsOutputDTO.getRecommendations().size());
+        recommendationsOutputDTO.getRecommendations().forEach(
+                recommendationDTO -> Assert
+                        .assertTrue(recommendationDTO.getRecommendationDateTime().isAfter(LocalDateTime.now())));
+
+        // Test with FF is OFF (SUP-520690#2024-08) Todo: Remove below code while removing FF's
+        context.setTransactionAttribute(""component-test"",
+                FeatureIdentifier.FeatureFlags24_3.AVOID_RECOMMENDING_PAST_DATE_TIMESLOTS.getFeatureId(),
+                false);
+        recommendationsOutputDTO =
+                getRecommendations(appointmentPath1, preferredAppointmentTime);
+
+        Assert.assertEquals(10, recommendationsOutputDTO.getRecommendations().size());
+        recommendationsOutputDTO.getRecommendations().forEach(
+                recommendationDTO -> Assert
+                        .assertFalse(recommendationDTO.getRecommendationDateTime().isAfter(LocalDateTime.now())));
+    }
 }
diff --git a/src/component-test/java/com/manh/cp/appointment/appointment/ScheduleCarrierAppointmentTest.java b/src/component-test/java/com/manh/cp/appointment/appointment/ScheduleCarrierAppointmentTest.java
index ff69fb02c..538ed8e51 100644
--- a/src/component-test/java/com/manh/cp/appointment/appointment/ScheduleCarrierAppointmentTest.java
+++ b/src/component-test/java/com/manh/cp/appointment/appointment/ScheduleCarrierAppointmentTest.java
@@ -266,7 +266,7 @@ public class ScheduleCarrierAppointmentTest extends AbstractComponentTest
         appointmentDocument.put(""WindowEndDateTime"", LocalDateTime.now().plusWeeks(2).toString());
         appointmentDocument.put(""AppointmentId"", appointmentId);
         LocalDateTime preferredAppointmentTime = testUtil.getNextDayOfWeek(
-                LocalDateTime.now().plusWeeks(1).toLocalDate().atTime(17, 0), DayOfWeek.TUESDAY);
+                LocalDateTime.now().plusWeeks(1).toLocalDate().atTime(17, 0), DayOfWeek.WEDNESDAY);
 
         preferredAppointmentTime = preferredAppointmentTime.withNano(0);
 
diff --git a/src/component-test/resources/appointment/appointment/recommendations/recommendationsWithSkipAvailability/AppointmentWithEarliestStartAndEndDateTime.json b/src/component-test/resources/appointment/appointment/recommendations/recommendationsWithSkipAvailability/AppointmentWithEarliestStartAndEndDateTime.json
new file mode 100644
index 000000000..96b7f1187
--- /dev/null
+++ b/src/component-test/resources/appointment/appointment/recommendations/recommendationsWithSkipAvailability/AppointmentWithEarliestStartAndEndDateTime.json
@@ -0,0 +1,11 @@
+{
+  ""AppointmentId"": ""Appointment_aWESAEDT"",
+  ""PreferredDateTime"": ""2024-08-12T20:00:00"",
+  ""ContentType"": ""EMPTY"",
+  ""SkipAvailabilityCheck"" : false,
+  ""SupplierPoAppointment"": false,
+  ""AppointmentTypeId"": ""DROP_UNLOAD"",
+  ""WindowStartDateTime"": ""@{LocalDateTime.now().minusMonths(1)}"",
+  ""WindowEndDateTime"": ""@{LocalDateTime.now().plusMonths(1)}"",
+  ""Duration"": 60
+}
diff --git a/src/main/java/com/manh/cp/appointment/appointment/constants/FeatureFlagConstants.java b/src/main/java/com/manh/cp/appointment/appointment/constants/FeatureFlagConstants.java
new file mode 100644
index 000000000..04c85e212
--- /dev/null
+++ b/src/main/java/com/manh/cp/appointment/appointment/constants/FeatureFlagConstants.java
@@ -0,0 +1,29 @@
+/*
+ * Copyright &#169; 2024 Manhattan Associates, Inc. All Rights Reserved.
+ *
+ * Confidential, Proprietary and Trade Secrets Notice
+ *
+ * Use of this software is governed by a license agreement. This software
+ * contains confidential, proprietary and trade secret information of
+ * Manhattan Associates, Inc. and is protected under United States and
+ * international copyright and other intellectual property laws. Use, disclosure,
+ * reproduction, modification, distribution, or storage in a retrieval system in
+ * any form or by any means is prohibited without the prior express written
+ * permission of Manhattan Associates, Inc.
+ *
+ * Manhattan Associates, Inc.
+ * 2300 Windy Ridge Parkway, 10th Floor
+ * Atlanta, GA 30339 USA
+ */
+package com.manh.cp.appointment.appointment.constants;
+
+public class FeatureFlagConstants
+{
+
+    private FeatureFlagConstants()
+    {
+
+    }
+
+    public static final String AVOID_RECOMMENDING_PAST_DATE_TIMESLOTS = ""SUP-520690#2024-08"";
+}
diff --git a/src/main/java/com/manh/cp/appointment/appointment/constants/FeatureIdentifier.java b/src/main/java/com/manh/cp/appointment/appointment/constants/FeatureIdentifier.java
index a2e498bb9..60e2eb9f9 100644
--- a/src/main/java/com/manh/cp/appointment/appointment/constants/FeatureIdentifier.java
+++ b/src/main/java/com/manh/cp/appointment/appointment/constants/FeatureIdentifier.java
@@ -81,7 +81,8 @@ public interface FeatureIdentifier
         SHOW_ALL_AVAILABLE_SLOTS_FOR_EXISTING_APPOINTMENTS(""SUP-494664#2024-05""),
         CONSIDER_DAY_LIGHT_SAVINGS_FOR_SOUTH_AMERICA(""SUP-493348#2024-05""),
         COPYING_EXTENDED_ATTRIBUTE(""SUP-499381#2024-06""),
-        DONT_CHANGE_APPT_TIME_ON_EDIT_IF_EXISTING_TIME_IS_STILL_VALID(""SUP-496594#2024-06"");
+        DONT_CHANGE_APPT_TIME_ON_EDIT_IF_EXISTING_TIME_IS_STILL_VALID(""SUP-496594#2024-06""),
+        AVOID_RECOMMENDING_PAST_DATE_TIMESLOTS(""SUP-520690#2024-08"");
 
         private final String featureId;
 
diff --git a/src/main/java/com/manh/cp/appointment/core/impl/service/ResourceAvailabilityServiceImpl.java b/src/main/java/com/manh/cp/appointment/core/impl/service/ResourceAvailabilityServiceImpl.java
index 19a740117..493c21442 100644
--- a/src/main/java/com/manh/cp/appointment/core/impl/service/ResourceAvailabilityServiceImpl.java
+++ b/src/main/java/com/manh/cp/appointment/core/impl/service/ResourceAvailabilityServiceImpl.java
@@ -23,6 +23,7 @@ import java.time.Duration;
 import java.time.LocalDate;
 import java.time.LocalDateTime;
 import java.time.ZoneId;
+import java.time.ZoneOffset;
 import java.time.ZonedDateTime;
 import java.util.ArrayList;
 import java.util.Collection;
@@ -1151,6 +1152,13 @@ public class ResourceAvailabilityServiceImpl<T extends AppointmentInputDTO> impl
                 windowStartDateTime = appointmentInputDTO.getWindowStartDateTime();
             }
         }
+        // Ensure windowStartDateTime is not in the past relative to the current timestamp
+        if (featureFlagService.isOn(FeatureIdentifier.FeatureFlags24_3.AVOID_RECOMMENDING_PAST_DATE_TIMESLOTS)
+                && windowStartDateTime.isBefore(LocalDateTime.now(ZoneOffset.UTC)))
+        {
+            windowStartDateTime = LocalDateTime.now(ZoneOffset.UTC);
+        }
+
         if (appointmentInputDTO.getWindowStartDateTime() != null &&
                 appointmentInputDTO.getPreferredDateTime().isBefore(appointmentInputDTO.getWindowStartDateTime()))
         {
","no manual setting of FF
Feature flag adoption PR for the appointment component has not yet been merged.
should we make it equal to requested date time if that’s the case? @{6152e14e289a54006ab32626} @{5bedeffcb7d54117988cc848} 
@{5ea829cdc5c6230baaf187f3} - As discussed with @{5bedeffcb7d54117988cc848} , we should display the latest time slots relative to the current time if EarliestStartDateTime is before the current timestamp; otherwise, EarliestStartDateTime won't be useful.

CC: @{6152e14e289a54006ab32626}
CI Reports:

![](https://bitbucket.org/repo/9p65goR/images/1180704606-image.png)
![](https://bitbucket.org/repo/9p65goR/images/2933326862-image.png)
‌
@{631ae2c862fe1e6eac6e6274} - minimal should have been merged already. You can follow new format for FF in TC
@{6152e14e289a54006ab32626} - we cannot rely on the `@AssumeFlagEnabled(FeatureFlagConstants.AVOID_RECOMMENDING_PAST_DATE_TIMESLOTS)` annotation as it is not working as expected. This may be due to the feature flag service being mocked and set to primary, which will be removed and addressed as part of the full feature flag adoption, as confirmed by @{5f91d9370ce27c006e08e6ac} . Therefore, we need to manually set the feature flag for now.
This change was made because the test case intermittently fails. All the test cases within `ScheduleCarrierAppointmentTest` use the same configurations, with some test cases sharing the same appointment schedule. Running the test cases in parallel may block the time slots, leading to failures in recommendation assertions.

CC: @{6152e14e289a54006ab32626} , @{616e5fdf3e3753006f85c4f7}
Fetch LocalDateTime.now\(\) for UTC and check validation against that.
Done!"
1726ba0c9980202ff423428aa46c579d9ee36e03,"diff --git a/src/main/java/com/manh/cp/appointment/appointment/impl/service/AppointmentServiceImpl.java b/src/main/java/com/manh/cp/appointment/appointment/impl/service/AppointmentServiceImpl.java
index fd49cc69d..66dfff4fc 100644
--- a/src/main/java/com/manh/cp/appointment/appointment/impl/service/AppointmentServiceImpl.java
+++ b/src/main/java/com/manh/cp/appointment/appointment/impl/service/AppointmentServiceImpl.java
@@ -17,6 +17,7 @@
  */
 package com.manh.cp.appointment.appointment.impl.service;
 
+import java.time.Duration;
 import java.time.LocalDateTime;
 import java.time.LocalTime;
 import java.util.ArrayList;
@@ -818,6 +819,7 @@ public class AppointmentServiceImpl extends AppointmentServiceImplBase implement
             QCalendarScheduleEntity qCalendarScheduleEntity = QCalendarScheduleEntity.calendarScheduleEntity;
 
             Map<String, CalendarSchedule> allSchedules;
+            LocalDateTime currentTimeBeforeGettingCalSchedules = LocalDateTime.now();
 
             if (featureFlagService.isOn(FeatureIdentifier.FeatureFlags24_2.REMOVE_LIST_RESULTS_USAGE))
             {
@@ -841,6 +843,10 @@ public class AppointmentServiceImpl extends AppointmentServiceImplBase implement
                                 (existing, replacement) -> existing));
             }
 
+            logger.debug(
+                    "" getAllUtilizationsForEachDay() time taken to get fw schedule  calendarScheduleEntity from db = {}"",
+                    Duration.between(currentTimeBeforeGettingCalSchedules, LocalDateTime.now()).toMillis());
+
             List<String> allScheduleIds = new ArrayList<>();
             allSchedules
                     .forEach((windowId, calendarSchedule) -> allScheduleIds
@@ -852,6 +858,8 @@ public class AppointmentServiceImpl extends AppointmentServiceImplBase implement
 
             List<CalendarScheduleUtilization> allScheduleUtilization = null;
 
+            LocalDateTime currentTimeBeforeGettingCalScheduleUtil = LocalDateTime.now();
+
             if (featureFlagService.isOn(FeatureIdentifier.FeatureFlags24_2.REMOVE_LIST_RESULTS_USAGE))
             {
                 allScheduleUtilization =
@@ -873,6 +881,10 @@ public class AppointmentServiceImpl extends AppointmentServiceImplBase implement
 
             }
 
+            logger.debug(
+                    "" getAllUtilizationsForEachDay() time taken to get fw schedule  calendarScheduleUtilizationEntity from db = {}"",
+                    Duration.between(currentTimeBeforeGettingCalScheduleUtil, LocalDateTime.now()).toMillis());
+
             Map<String, List<CalendarScheduleUtilization>> allScheduleUtilizationMap = new HashMap<>();
             allScheduleUtilization.forEach(utilization -> {
                 if (!allScheduleUtilizationMap.keySet().contains(utilization.getCalendarScheduleId()))
@@ -1113,6 +1125,7 @@ public class AppointmentServiceImpl extends AppointmentServiceImplBase implement
         QCalendarWindowEntity qCalendarWindowEntity = QCalendarWindowEntity.calendarWindowEntity;
 
         List<CalendarWindow> allCalendarWindows = null;
+        LocalDateTime currentTimeBeforeGettingCalWindow = LocalDateTime.now();
         if (featureFlagService.isOn(FeatureIdentifier.FeatureFlags24_2.REMOVE_LIST_RESULTS_USAGE))
         {
 
@@ -1129,6 +1142,9 @@ public class AppointmentServiceImpl extends AppointmentServiceImplBase implement
 
         }
 
+        logger.debug("" getCalendarDefWindowMap() time taken to get fw schedule  CalendarWindowEntity from db = {}"",
+                Duration.between(currentTimeBeforeGettingCalWindow, LocalDateTime.now()).toMillis());
+
         Map<String, List<CalendarWindow>> calendarDefWindowMap = new HashMap<>();
         allCalendarWindows.forEach(calendarWindow -> {
             if (!calendarDefWindowMap.keySet().contains(calendarWindow.getCalendarDefinitionId()))
@@ -1156,6 +1172,7 @@ public class AppointmentServiceImpl extends AppointmentServiceImplBase implement
         logger.debug("" size of partitionedWindowIdList = {} "", CollectionUtils.size(partitionedWindowIdList));
 
         List<CalendarWindowCapacity> allCapacities = null;
+        LocalDateTime currentTimeBeforeGettingCalWindowCapacity = LocalDateTime.now();
         if (featureFlagService.isOn(FeatureIdentifier.FeatureFlags24_2.REMOVE_LIST_RESULTS_USAGE))
         {
             partitionedWindowIdList.forEach(windowIdsList -> {
@@ -1181,6 +1198,10 @@ public class AppointmentServiceImpl extends AppointmentServiceImplBase implement
             capacities.addAll(allCapacities);
         }
 
+        logger.debug(
+                "" getCalendarWindowCapacityMap() time taken to get fw schedule  CalendarWindowCapacityEntity from db = {}"",
+                Duration.between(currentTimeBeforeGettingCalWindowCapacity, LocalDateTime.now()).toMillis());
+
         Map<String, List<CalendarWindowCapacity>> windowCapacityMap = new HashMap<>();
         capacities.forEach(windowCapacity -> {
             if (!windowCapacityMap.keySet().contains(windowCapacity.getCalendarWindowId()))
diff --git a/src/main/java/com/manh/cp/appointment/appointment/impl/service/CalendarServiceImpl.java b/src/main/java/com/manh/cp/appointment/appointment/impl/service/CalendarServiceImpl.java
index 630df815a..147a9fa04 100644
--- a/src/main/java/com/manh/cp/appointment/appointment/impl/service/CalendarServiceImpl.java
+++ b/src/main/java/com/manh/cp/appointment/appointment/impl/service/CalendarServiceImpl.java
@@ -1003,9 +1003,14 @@ public class CalendarServiceImpl implements CalendarService
         List<Pair<LocalDateTime, List<String>>> startOfDaysCalendarsList = new ArrayList<>();
         startOfDaysCalendarsList.add(startOfDaysCalendars);
 
+        LocalDateTime currentTimeBeforeGettingUtilizationData = LocalDateTime.now();
+
         List<DefinitionUtilization> utilizationList =
                 appointmentService.getAllUtilizationsForEachDay(context, startOfDaysCalendarsList);
 
+        logger.debug("" getAllUtilizations() time taken to get fw schedule utilization from db = {}"",
+                Duration.between(currentTimeBeforeGettingUtilizationData, LocalDateTime.now()).toMillis());
+
         logger.debug(""All Utilization data for calendar = {} "", appointmentUtil.getUtilizationLog(utilizationList));
 
         logger.trace(""<< getAllUtilizations()"");
diff --git a/src/main/java/com/manh/cp/appointment/core/impl/service/ScheduleManager.java b/src/main/java/com/manh/cp/appointment/core/impl/service/ScheduleManager.java
index b1bed3aa8..c7e66393a 100644
--- a/src/main/java/com/manh/cp/appointment/core/impl/service/ScheduleManager.java
+++ b/src/main/java/com/manh/cp/appointment/core/impl/service/ScheduleManager.java
@@ -18,6 +18,7 @@
 package com.manh.cp.appointment.core.impl.service;
 
 import java.time.Duration;
+import java.time.LocalDateTime;
 import java.util.ArrayList;
 import java.util.HashMap;
 import java.util.List;
@@ -398,8 +399,13 @@ public class ScheduleManager<T extends AppointmentInputDTO>
         Schedule existingSchedule =
                 editedAppointmentInputDTO.getExistingAppointmentDetails().getExistingSchedules().get(0);
 
+        LocalDateTime currentTimeBeforeremoveUtillization = LocalDateTime.now();
+
         removeUtilization(context, existingSchedule, (T) editedAppointmentInputDTO.getExistingAppointmentDetails());
 
+        logger.debug("" editSchedule() time taken to get fw schedule remove utilization  = {}"",
+                Duration.between(currentTimeBeforeremoveUtillization, LocalDateTime.now()).toMillis());
+
         utilizationHelper.saveUtilization(context, selectedRecommendation, editedAppointmentInputDTO);
 
         List<ScheduleResources> scheduleResources = new ArrayList<>(existingSchedule.getScheduleResourcesList());
diff --git a/src/main/java/com/manh/cp/appointment/core/impl/service/UtilizationHelper.java b/src/main/java/com/manh/cp/appointment/core/impl/service/UtilizationHelper.java
index 89b439c8f..0e333d52a 100644
--- a/src/main/java/com/manh/cp/appointment/core/impl/service/UtilizationHelper.java
+++ b/src/main/java/com/manh/cp/appointment/core/impl/service/UtilizationHelper.java
@@ -18,6 +18,7 @@
 package com.manh.cp.appointment.core.impl.service;
 
 import java.math.BigDecimal;
+import java.time.Duration;
 import java.time.LocalDateTime;
 import java.util.ArrayList;
 import java.util.Collection;
@@ -375,12 +376,18 @@ public class UtilizationHelper<T extends AppointmentInputDTO>
             }
         }
 
+        LocalDateTime currentTimeBeforeFetchUtilization = LocalDateTime.now();
+
         FetcherResponse response = fetcherFactory.getFetcher(FetchType.FETCH_BY_WINDOW)
                 .fetchUtilization(context, FetcherRequest.newBuilder()
                         .withCalendarDefinitionIds(calendarsThatCanBeUsedForAppointment)
                         .withDateTimeRange(DateTimeRange.from(startTime, endTime))
                         .build());
 
+        logger.debug(
+                "" getAllUtilizationsForAppointmentSchedules() time taken to get fw schedule utilization from db = {}"",
+                Duration.between(currentTimeBeforeFetchUtilization, LocalDateTime.now()).toMillis());
+
         if (CollectionUtils.isNotEmpty(response.getErrors()))
         {
             scheduleUtil.throwError(context, response.getErrors());
",
259e4d6596ca63e2068bbe51e4671d706bb9472a,"diff --git a/src/main/java/com/manh/cp/appointment/appointment/impl/service/AppointmentManagerHelper.java b/src/main/java/com/manh/cp/appointment/appointment/impl/service/AppointmentManagerHelper.java
index 1b9225d93..8dc75bfc4 100644
--- a/src/main/java/com/manh/cp/appointment/appointment/impl/service/AppointmentManagerHelper.java
+++ b/src/main/java/com/manh/cp/appointment/appointment/impl/service/AppointmentManagerHelper.java
@@ -941,12 +941,13 @@ public class AppointmentManagerHelper
         {
             appointmentDTO.getAsn().forEach(asnDTO -> asnDTO.setPk(null));
         }
+        boolean isSupportAddlPoFieldsPersistence = featureFlagService
+                .isOn(FeatureIdentifier.FeatureFlags24_2.SUPPORT_ADDL_PO_FIELDS_PERSISTENCE);
         if (CollectionUtils.isNotEmpty(appointmentDTO.getPurchaseOrder()))
         {
             appointmentDTO.getPurchaseOrder().forEach(purchaseOrderDTO -> {
                 purchaseOrderDTO.setPk(null);
-                if (featureFlagService
-                        .isOn(FeatureIdentifier.FeatureFlags24_2.SUPPORT_ADDL_PO_FIELDS_PERSISTENCE))
+                if (isSupportAddlPoFieldsPersistence)
                 {
                     purchaseOrderIdDTOMap
                             .put(purchaseOrderDTO.getPurchaseOrderId(), purchaseOrderDTO);
@@ -971,8 +972,7 @@ public class AppointmentManagerHelper
                     {
                         appointmentContentsDTO
                                 .setPurchaseOrder(appointmentContentsDTO.getPurchaseOrderId().getPurchaseOrderId());
-                        if (featureFlagService.isOn(
-                                FeatureIdentifier.FeatureFlags24_2.SUPPORT_ADDL_PO_FIELDS_PERSISTENCE)
+                        if (isSupportAddlPoFieldsPersistence
                                 && MapUtils.isNotEmpty(purchaseOrderIdDTOMap))
                         {
                             PurchaseOrderDTO purchaseOrderDTO = purchaseOrderIdDTOMap
diff --git a/src/main/java/com/manh/cp/appointment/appointment/impl/service/AppointmentMapServiceImpl.java b/src/main/java/com/manh/cp/appointment/appointment/impl/service/AppointmentMapServiceImpl.java
index d697a0a5a..7b36a578c 100644
--- a/src/main/java/com/manh/cp/appointment/appointment/impl/service/AppointmentMapServiceImpl.java
+++ b/src/main/java/com/manh/cp/appointment/appointment/impl/service/AppointmentMapServiceImpl.java
@@ -138,6 +138,8 @@ public class AppointmentMapServiceImpl extends AppointmentMapServiceImplBase imp
 
         String contentType = ""EMPTY"";
         boolean inboundShipment = false;
+        boolean isSupportAddlPoFieldsPersistence = featureFlagService.isOn(
+                FeatureIdentifier.FeatureFlags24_2.SUPPORT_ADDL_PO_FIELDS_PERSISTENCE);
 
         if (CollectionUtils.isNotEmpty(appointment.getAppointmentContentsList()))
         {
@@ -181,8 +183,7 @@ public class AppointmentMapServiceImpl extends AppointmentMapServiceImplBase imp
                     purchaseOrderDTO.setBillOfLadingNumber(
                             appointmentContent.getPurchaseOrderIdEntity().getBillOfLadingNumber());
                     purchaseOrderDTO.setProNumber(appointmentContent.getPurchaseOrderIdEntity().getProNumber());
-                    if (featureFlagService.isOn(
-                            FeatureIdentifier.FeatureFlags24_2.SUPPORT_ADDL_PO_FIELDS_PERSISTENCE))
+                    if (isSupportAddlPoFieldsPersistence)
                     {
                         purchaseOrderDTO.setVendorId(appointmentContent.getPurchaseOrderIdEntity().getVendorId());
                         purchaseOrderDTO.setAppointmentContentBolNumber(appointmentContent.getBillOfLadingNumber());
diff --git a/src/main/java/com/manh/cp/appointment/appointment/impl/service/AppointmentServiceImpl.java b/src/main/java/com/manh/cp/appointment/appointment/impl/service/AppointmentServiceImpl.java
index 90a4a5295..fd49cc69d 100644
--- a/src/main/java/com/manh/cp/appointment/appointment/impl/service/AppointmentServiceImpl.java
+++ b/src/main/java/com/manh/cp/appointment/appointment/impl/service/AppointmentServiceImpl.java
@@ -26,6 +26,7 @@ import java.util.HashSet;
 import java.util.Iterator;
 import java.util.List;
 import java.util.Map;
+import java.util.TimeZone;
 import java.util.stream.Collectors;
 
 import javax.annotation.Generated;
@@ -760,18 +761,34 @@ public class AppointmentServiceImpl extends AppointmentServiceImplBase implement
             LocalDateTime endTime =
                     startOfDaysCalendars.get(startOfDaysCalendars.size() - 1).getLeft().withNano(0).plusDays(1);
 
-            if (featureFlagService
-                    .isOn(FeatureIdentifier.FeatureFlags24_3.CONSIDER_DAY_LIGHT_SAVINGS_FOR_SOUTH_AMERICA))
-            {
-                if (!appointmentUtil.wasConfigurationMadeDuringDayLightSavings(context)
-                        && appointmentUtil.isInputInDaylightSavings(context, startTime)
-                        && !appointmentUtil.isInputInDaylightSavings(context, endTime))
+            TimeZone facilityTimeZone =
+                    appointmentUtil.getFacilityTimeZone(context);
+            boolean wasConfigurationMadeDuringDayLightSavings =
+                    appointmentUtil.wasConfigurationMadeDuringDayLightSavings(facilityTimeZone);
+            boolean isConsiderDayLightSavingsForSouthAmericaFFEnabled = featureFlagService
+                    .isOn(FeatureIdentifier.FeatureFlags24_3.CONSIDER_DAY_LIGHT_SAVINGS_FOR_SOUTH_AMERICA);
+            boolean isConsiderDayLightSavingChangeFFEnabled = featureFlagService
+                    .isOn(FeatureIdentifier.FeatureFlags99_9.CONSIDER_DAY_LIGHT_SAVING_CHANGE);
+
+            if (isConsiderDayLightSavingsForSouthAmericaFFEnabled)
+            {
+                if (!wasConfigurationMadeDuringDayLightSavings
+                        && appointmentUtil.isInputInDaylightSavings(startTime, facilityTimeZone,
+                                isConsiderDayLightSavingsForSouthAmericaFFEnabled,
+                                isConsiderDayLightSavingChangeFFEnabled)
+                        && !appointmentUtil.isInputInDaylightSavings(endTime, facilityTimeZone,
+                                isConsiderDayLightSavingsForSouthAmericaFFEnabled,
+                                isConsiderDayLightSavingChangeFFEnabled))
                 {
                     endTime = endTime.plusHours(1);
                 }
-                if (appointmentUtil.wasConfigurationMadeDuringDayLightSavings(context)
-                        && !appointmentUtil.isInputInDaylightSavings(context, startTime)
-                        && appointmentUtil.isInputInDaylightSavings(context, endTime))
+                if (wasConfigurationMadeDuringDayLightSavings
+                        && !appointmentUtil.isInputInDaylightSavings(startTime, facilityTimeZone,
+                                isConsiderDayLightSavingsForSouthAmericaFFEnabled,
+                                isConsiderDayLightSavingChangeFFEnabled)
+                        && appointmentUtil.isInputInDaylightSavings(endTime, facilityTimeZone,
+                                isConsiderDayLightSavingsForSouthAmericaFFEnabled,
+                                isConsiderDayLightSavingChangeFFEnabled))
                 {
                     endTime = endTime.minusHours(1);
                 }
@@ -779,11 +796,19 @@ public class AppointmentServiceImpl extends AppointmentServiceImplBase implement
             }
             else
             {
-                if (featureFlagService.isOn(FeatureIdentifier.FeatureFlags99_9.CONSIDER_DAY_LIGHT_SAVING_CHANGE)
-                        && ((appointmentUtil.isInputInDaylightSavings(context, startTime)
-                                && !appointmentUtil.isInputInDaylightSavings(context, endTime))
-                                || (appointmentUtil.isInputInDaylightSavings(context, startTime)
-                                        && appointmentUtil.isInputInDaylightSavings(context, endTime))))
+                if (isConsiderDayLightSavingChangeFFEnabled
+                        && ((appointmentUtil.isInputInDaylightSavings(startTime, facilityTimeZone,
+                                isConsiderDayLightSavingsForSouthAmericaFFEnabled,
+                                isConsiderDayLightSavingChangeFFEnabled)
+                                && !appointmentUtil.isInputInDaylightSavings(endTime, facilityTimeZone,
+                                        isConsiderDayLightSavingsForSouthAmericaFFEnabled,
+                                        isConsiderDayLightSavingChangeFFEnabled))
+                                || (appointmentUtil.isInputInDaylightSavings(startTime, facilityTimeZone,
+                                        isConsiderDayLightSavingsForSouthAmericaFFEnabled,
+                                        isConsiderDayLightSavingChangeFFEnabled)
+                                        && appointmentUtil.isInputInDaylightSavings(endTime, facilityTimeZone,
+                                                isConsiderDayLightSavingsForSouthAmericaFFEnabled,
+                                                isConsiderDayLightSavingChangeFFEnabled))))
                 {
                     endTime = endTime.plusHours(1);
                 }
@@ -881,7 +906,9 @@ public class AppointmentServiceImpl extends AppointmentServiceImplBase implement
                     if (isNotEmpty(calendarWindows))
                     {
                         calendarWindows.forEach(window -> {
-                            if (isCalendarWindowApplicableForTheDay(context, startOfDay, window))
+                            if (isCalendarWindowApplicableForTheDay(startOfDay, window, facilityTimeZone,
+                                    isConsiderDayLightSavingsForSouthAmericaFFEnabled,
+                                    isConsiderDayLightSavingChangeFFEnabled))
                             {
                                 List<CalendarWindowCapacity> capacitiesOfWindow =
                                         calendarWindowCapacityMap.get(window.getCalendarWindowId());
@@ -995,24 +1022,29 @@ public class AppointmentServiceImpl extends AppointmentServiceImplBase implement
         return isCancelledAppointmentExists;
     }
 
-    private boolean isCalendarWindowApplicableForTheDay(Context context, LocalDateTime startOfDay,
-            CalendarWindow window)
+    private boolean isCalendarWindowApplicableForTheDay(LocalDateTime startOfDay,
+            CalendarWindow window, TimeZone facilityTimeZone, boolean isConsiderDayLightSavingsForSouthAmericaFFEnabled,
+            boolean isConsiderDayLightSavingChangeFFEnabled)
     {
         logger.trace("">> isCalendarWindowApplicableForTheDay startOfDay = {} , window = {} "", startOfDay, window);
         LocalDateTime endOfDay = startOfDay.plusDays(1);
 
         // Remove this part during cleanup for CONSIDER_DAY_LIGHT_SAVINGS_FOR_SOUTH_AMERICA
-        if (!featureFlagService.isOn(FeatureIdentifier.FeatureFlags24_3.CONSIDER_DAY_LIGHT_SAVINGS_FOR_SOUTH_AMERICA))
-        {
-            if (featureFlagService.isOn(FeatureIdentifier.FeatureFlags99_9.CONSIDER_DAY_LIGHT_SAVING_CHANGE)
-                    && ((appointmentUtil.isInputInDaylightSavings(context, startOfDay)
-                            && !appointmentUtil.isInputInDaylightSavings(context, endOfDay))
-                            || (appointmentUtil.isInputInDaylightSavings(context, startOfDay)
-                                    && appointmentUtil.isInputInDaylightSavings(context, endOfDay))))
+        if (!isConsiderDayLightSavingsForSouthAmericaFFEnabled && isConsiderDayLightSavingChangeFFEnabled
+                && ((appointmentUtil.isInputInDaylightSavings(startOfDay, facilityTimeZone,
+                        isConsiderDayLightSavingsForSouthAmericaFFEnabled, isConsiderDayLightSavingChangeFFEnabled)
+                        && !appointmentUtil.isInputInDaylightSavings(endOfDay, facilityTimeZone,
+                                isConsiderDayLightSavingsForSouthAmericaFFEnabled,
+                                isConsiderDayLightSavingChangeFFEnabled))
+                        || (appointmentUtil.isInputInDaylightSavings(startOfDay, facilityTimeZone,
+                                isConsiderDayLightSavingsForSouthAmericaFFEnabled,
+                                isConsiderDayLightSavingChangeFFEnabled)
+                                && appointmentUtil.isInputInDaylightSavings(endOfDay, facilityTimeZone,
+                                        isConsiderDayLightSavingsForSouthAmericaFFEnabled,
+                                        isConsiderDayLightSavingChangeFFEnabled))))
         {
             endOfDay = endOfDay.plusHours(1);
         }
-        }
 
         boolean isCalendarWindowApplicableForTheDay = false;
 
diff --git a/src/main/java/com/manh/cp/appointment/appointment/impl/service/AppointmentUtil.java b/src/main/java/com/manh/cp/appointment/appointment/impl/service/AppointmentUtil.java
index 1b3e8db5f..acf69ecce 100644
--- a/src/main/java/com/manh/cp/appointment/appointment/impl/service/AppointmentUtil.java
+++ b/src/main/java/com/manh/cp/appointment/appointment/impl/service/AppointmentUtil.java
@@ -49,7 +49,6 @@ import com.manh.cp.appointment.appointment.client.dto.AppointmentSchedulesDTO;
 import com.manh.cp.appointment.appointment.client.dto.ResourceDTO;
 import com.manh.cp.appointment.appointment.client.dto.recommendation.RecommendationDTO;
 import com.manh.cp.appointment.appointment.client.dto.recommendation.RecommendationsOutputDTO;
-import com.manh.cp.appointment.appointment.constants.FeatureIdentifier;
 import com.manh.cp.appointment.appointment.validations.Rules.userexit.FacilityTimezoneRule;
 import com.manh.cp.appointment.config.client.dto.AppointmentContactTypeBaseDTO;
 import com.manh.cp.appointment.core.api.domain.ScheduleResources;
@@ -124,26 +123,24 @@ public class AppointmentUtil
         }
     }
 
-    public boolean wasConfigurationMadeDuringDayLightSavings(Context context)
+    public boolean wasConfigurationMadeDuringDayLightSavings(TimeZone facilityTimeZone)
     {
-        TimeZone facilityTimZone = getFacilityTimeZone(context);
-
         Date configurationDate = new Date(
-                LocalDateTime.of(1972, 1, 1, 0, 0).atZone(facilityTimZone.toZoneId()).toInstant().toEpochMilli());
-        Boolean wasConfigurationMadeDuringDayLightSavings = facilityTimZone.inDaylightTime(configurationDate);
+                LocalDateTime.of(1972, 1, 1, 0, 0).atZone(facilityTimeZone.toZoneId()).toInstant().toEpochMilli());
+        boolean wasConfigurationMadeDuringDayLightSavings = facilityTimeZone.inDaylightTime(configurationDate);
 
         logger.trace(""wasConfigurationMadeDuringDayLightSavings - {} "", wasConfigurationMadeDuringDayLightSavings);
         return wasConfigurationMadeDuringDayLightSavings;
     }
 
-    public boolean isInputInDaylightSavings(Context context, LocalDateTime inputDateTime)
+    public boolean isInputInDaylightSavings(LocalDateTime inputDateTime, TimeZone facilityTimeZone,
+            boolean isConsiderDayLightSavingsForSouthAmericaFFEnabled, boolean isConsiderDayLightSavingChangeFFEnabled)
     {
         Boolean isInputInDayLightSavings = false;
-        TimeZone facilityTimZone = getFacilityTimeZone(context);
-        if (featureFlagService.isOn(FeatureIdentifier.FeatureFlags24_3.CONSIDER_DAY_LIGHT_SAVINGS_FOR_SOUTH_AMERICA)
-                || featureFlagService.isOn(FeatureIdentifier.FeatureFlags99_9.CONSIDER_DAY_LIGHT_SAVING_CHANGE))
+        if (isConsiderDayLightSavingsForSouthAmericaFFEnabled
+                || isConsiderDayLightSavingChangeFFEnabled)
         {
-            ZoneId zoneId = facilityTimZone.toZoneId();
+            ZoneId zoneId = facilityTimeZone.toZoneId();
             ZoneRules zoneRules = zoneId.getRules();
             Instant zonedInstant = ZonedDateTime.of(inputDateTime, ZoneId.of(""UTC"")).toInstant();
             isInputInDayLightSavings = zoneRules.isDaylightSavings(zonedInstant);
@@ -153,28 +150,31 @@ public class AppointmentUtil
         {
 
             Date inputDateObject =
-                    new Date(inputDateTime.atZone(facilityTimZone.toZoneId()).toInstant().toEpochMilli());
-            isInputInDayLightSavings = facilityTimZone.inDaylightTime(inputDateObject);
+                    new Date(inputDateTime.atZone(facilityTimeZone.toZoneId()).toInstant().toEpochMilli());
+            isInputInDayLightSavings = facilityTimeZone.inDaylightTime(inputDateObject);
         }
 
         logger.trace(""isInputInDaylightSavings - {} "", isInputInDayLightSavings);
         return isInputInDayLightSavings;
     }
 
-    public LocalDateTime getConfigurationTimeAdjustedToDaylightSavings(Context context, LocalDateTime inputDateTime)
+    public LocalDateTime getConfigurationTimeAdjustedToDaylightSavings(LocalDateTime inputDateTime,
+            boolean wasConfigurationMadeDuringDayLightSavings, TimeZone facilityTimeZone,
+            boolean isConsiderDayLightSavingsForSouthAmericaFFEnabled, boolean isConsiderDayLightSavingChangeFFEnabled)
     {
         LocalDateTime configurationTime = inputDateTime;
 
-        if (featureFlagService
-                .isOn(FeatureIdentifier.FeatureFlags24_3.CONSIDER_DAY_LIGHT_SAVINGS_FOR_SOUTH_AMERICA))
+        if (isConsiderDayLightSavingsForSouthAmericaFFEnabled)
         {
-            if (wasConfigurationMadeDuringDayLightSavings(context)
-                    && !isInputInDaylightSavings(context, inputDateTime))
+            if (wasConfigurationMadeDuringDayLightSavings
+                    && !isInputInDaylightSavings(inputDateTime, facilityTimeZone,
+                            isConsiderDayLightSavingsForSouthAmericaFFEnabled, isConsiderDayLightSavingChangeFFEnabled))
             {
                 configurationTime = configurationTime.plusHours(1);
             }
-            else if (!wasConfigurationMadeDuringDayLightSavings(context)
-                    && isInputInDaylightSavings(context, inputDateTime))
+            else if (!wasConfigurationMadeDuringDayLightSavings
+                    && isInputInDaylightSavings(inputDateTime, facilityTimeZone,
+                            isConsiderDayLightSavingsForSouthAmericaFFEnabled, isConsiderDayLightSavingChangeFFEnabled))
             {
                 configurationTime = configurationTime.minusHours(1);
             }
@@ -182,9 +182,11 @@ public class AppointmentUtil
         }
         else
         {
-            if (!wasConfigurationMadeDuringDayLightSavings(context)
-                    && isInputInDaylightSavings(context, inputDateTime)
-                    && isInputInDaylightSavings(context, inputDateTime.plusDays(1)))
+            if (!wasConfigurationMadeDuringDayLightSavings
+                    && isInputInDaylightSavings(inputDateTime, facilityTimeZone,
+                            isConsiderDayLightSavingsForSouthAmericaFFEnabled, isConsiderDayLightSavingChangeFFEnabled)
+                    && isInputInDaylightSavings(inputDateTime.plusDays(1), facilityTimeZone,
+                            isConsiderDayLightSavingsForSouthAmericaFFEnabled, isConsiderDayLightSavingChangeFFEnabled))
             {
                 configurationTime = configurationTime.minusHours(1);
             }
@@ -555,37 +557,45 @@ public class AppointmentUtil
      * Start Time will be 04:00 return 05:00 UTC for America/Santiago : on DayLight Start Day Start Time will be 04:00
      * UTC and return 03:00 UTC for America/Santiago : on DayLight End Day Start Time will be 03:00 return 05:00 UTC
      *
-     * @param context
      * @param calendarStart
      * @param calendarEnd
      * @return
      */
-    public LocalDateTime getConfigurationTimeAdjustedEndOfDayTime(Context context, LocalDateTime calendarStart,
-            LocalDateTime calendarEnd)
+    public LocalDateTime getConfigurationTimeAdjustedEndOfDayTime(LocalDateTime calendarStart,
+            LocalDateTime calendarEnd, boolean wasConfigurationMadeDuringDayLightSavings, TimeZone facilityTimeZone,
+            boolean isConsiderDayLightSavingsForSouthAmericaFFEnabled, boolean isConsiderDayLightSavingChangeFFEnabled)
     {
-        if (wasConfigurationMadeDuringDayLightSavings(context))
+        if (wasConfigurationMadeDuringDayLightSavings)
         {
-            if (isInputInDaylightSavings(context, calendarStart)
-                    && !isInputInDaylightSavings(context, calendarStart.minusDays(1).plusHours(1)))
+            if (isInputInDaylightSavings(calendarStart, facilityTimeZone,
+                    isConsiderDayLightSavingsForSouthAmericaFFEnabled, isConsiderDayLightSavingChangeFFEnabled)
+                    && !isInputInDaylightSavings(calendarStart.minusDays(1).plusHours(1), facilityTimeZone,
+                            isConsiderDayLightSavingsForSouthAmericaFFEnabled, isConsiderDayLightSavingChangeFFEnabled))
             {
                 calendarEnd = calendarEnd.minusHours(1);
             }
             // For Chile Time Zone happens at 0:00
-            else if (isInputInDaylightSavings(context, calendarStart) &&
-                    !isInputInDaylightSavings(context, calendarEnd.plusMinutes(1)))
+            else if (isInputInDaylightSavings(calendarStart, facilityTimeZone,
+                    isConsiderDayLightSavingsForSouthAmericaFFEnabled, isConsiderDayLightSavingChangeFFEnabled) &&
+                    !isInputInDaylightSavings(calendarEnd.plusMinutes(1), facilityTimeZone,
+                            isConsiderDayLightSavingsForSouthAmericaFFEnabled, isConsiderDayLightSavingChangeFFEnabled))
             {
                 calendarEnd = calendarEnd.plusHours(1);
             }
         }
-        if (!wasConfigurationMadeDuringDayLightSavings(context))
+        if (!wasConfigurationMadeDuringDayLightSavings)
         {
-            if (isInputInDaylightSavings(context, calendarStart) &&
-                    !isInputInDaylightSavings(context, calendarEnd))
+            if (isInputInDaylightSavings(calendarStart, facilityTimeZone,
+                    isConsiderDayLightSavingsForSouthAmericaFFEnabled, isConsiderDayLightSavingChangeFFEnabled) &&
+                    !isInputInDaylightSavings(calendarEnd, facilityTimeZone,
+                            isConsiderDayLightSavingsForSouthAmericaFFEnabled, isConsiderDayLightSavingChangeFFEnabled))
             {
                 calendarEnd = calendarEnd.plusHours(1);
             }
-            else if (!isInputInDaylightSavings(context, calendarStart) &&
-                    isInputInDaylightSavings(context, calendarEnd))
+            else if (!isInputInDaylightSavings(calendarStart, facilityTimeZone,
+                    isConsiderDayLightSavingsForSouthAmericaFFEnabled, isConsiderDayLightSavingChangeFFEnabled) &&
+                    isInputInDaylightSavings(calendarEnd, facilityTimeZone,
+                            isConsiderDayLightSavingsForSouthAmericaFFEnabled, isConsiderDayLightSavingChangeFFEnabled))
             {
                 calendarEnd = calendarEnd.minusHours(1);
             }
diff --git a/src/main/java/com/manh/cp/appointment/appointment/impl/service/CalendarServiceImpl.java b/src/main/java/com/manh/cp/appointment/appointment/impl/service/CalendarServiceImpl.java
index 67085b21a..630df815a 100644
--- a/src/main/java/com/manh/cp/appointment/appointment/impl/service/CalendarServiceImpl.java
+++ b/src/main/java/com/manh/cp/appointment/appointment/impl/service/CalendarServiceImpl.java
@@ -25,6 +25,7 @@ import java.util.Comparator;
 import java.util.HashMap;
 import java.util.List;
 import java.util.Map;
+import java.util.TimeZone;
 import java.util.stream.Collectors;
 
 import com.fasterxml.jackson.databind.ObjectMapper;
@@ -202,15 +203,25 @@ public class CalendarServiceImpl implements CalendarService
 
         LocalDateTime calendarStartTime = calendarRequestDTO.getCalendarDate();
 
-        if (featureFlagService.isOn(FeatureIdentifier.FeatureFlags24_3.CONSIDER_DAY_LIGHT_SAVINGS_FOR_SOUTH_AMERICA))
+        TimeZone facilityTimeZone = appointmentUtil.getFacilityTimeZone(context);
+        boolean wasConfigurationMadeDuringDayLightSavings =
+                appointmentUtil.wasConfigurationMadeDuringDayLightSavings(facilityTimeZone);
+        boolean isConsiderDayLightSavingsForSouthAmericaFFEnabled = featureFlagService
+                .isOn(FeatureIdentifier.FeatureFlags24_3.CONSIDER_DAY_LIGHT_SAVINGS_FOR_SOUTH_AMERICA);
+        boolean isConsiderDayLightSavingChangeFFEnabled = featureFlagService
+                .isOn(FeatureIdentifier.FeatureFlags99_9.CONSIDER_DAY_LIGHT_SAVING_CHANGE);
+
+        if (isConsiderDayLightSavingsForSouthAmericaFFEnabled)
         {
-            if (!appointmentUtil.wasConfigurationMadeDuringDayLightSavings(context)
-                    && appointmentUtil.isInputInDaylightSavings(context, calendarStartTime))
+            if (!wasConfigurationMadeDuringDayLightSavings
+                    && appointmentUtil.isInputInDaylightSavings(calendarStartTime, facilityTimeZone,
+                            isConsiderDayLightSavingsForSouthAmericaFFEnabled, isConsiderDayLightSavingChangeFFEnabled))
             {
                 calendarStartTime = calendarStartTime.plusHours(1);
             }
-            else if (appointmentUtil.wasConfigurationMadeDuringDayLightSavings(context)
-                    && !appointmentUtil.isInputInDaylightSavings(context, calendarStartTime))
+            else if (wasConfigurationMadeDuringDayLightSavings
+                    && !appointmentUtil.isInputInDaylightSavings(calendarStartTime, facilityTimeZone,
+                            isConsiderDayLightSavingsForSouthAmericaFFEnabled, isConsiderDayLightSavingChangeFFEnabled))
             {
                 calendarStartTime = calendarStartTime.minusHours(1);
             }
@@ -241,18 +252,19 @@ public class CalendarServiceImpl implements CalendarService
         }
 
         // Remove this part during CONSIDER_DAY_LIGHT_SAVINGS_FOR_SOUTH_AMERICA cleanup
-        if (!featureFlagService.isOn(FeatureIdentifier.FeatureFlags24_3.CONSIDER_DAY_LIGHT_SAVINGS_FOR_SOUTH_AMERICA))
-        {
-            if (appointmentUtil.isInputInDaylightSavings(context, calendarStartTime)
-                    && appointmentUtil.isInputInDaylightSavings(context, calendarStartTime.plusDays(1)))
+        if (!isConsiderDayLightSavingsForSouthAmericaFFEnabled
+                && appointmentUtil.isInputInDaylightSavings(calendarStartTime, facilityTimeZone,
+                        isConsiderDayLightSavingsForSouthAmericaFFEnabled, isConsiderDayLightSavingChangeFFEnabled)
+                && appointmentUtil.isInputInDaylightSavings(calendarStartTime.plusDays(1), facilityTimeZone,
+                        isConsiderDayLightSavingsForSouthAmericaFFEnabled, isConsiderDayLightSavingChangeFFEnabled))
         {
             calendarStartTime = calendarStartTime.plusHours(1);
         }
-        }
 
         List<CalendarResourceGroup> gridData =
                 getUiGridData(context, allUtilizationData, resourceGroupList, calendarStartTime, appointmentList,
-                        schedulesMap, interval);
+                        schedulesMap, interval, wasConfigurationMadeDuringDayLightSavings, facilityTimeZone,
+                        isConsiderDayLightSavingsForSouthAmericaFFEnabled, isConsiderDayLightSavingChangeFFEnabled);
 
         calendarResponseDTO.setGridData(gridData);
 
@@ -356,7 +368,8 @@ public class CalendarServiceImpl implements CalendarService
             List<DefinitionUtilization> allUtilizationData,
             List<ResourceGroup> resourceGroupList,
             LocalDateTime calendarStartTime, List<Appointment> appointmentList, Map<String, Schedule> schedulesMap,
-            long minAppointmentTime)
+            long minAppointmentTime, boolean wasConfigurationMadeDuringDayLightSavings, TimeZone facilityTimeZone,
+            boolean isConsiderDayLightSavingsForSouthAmericaFFEnabled, boolean isConsiderDayLightSavingChangeFFEnabled)
     {
         logger.trace("">> getUiGridData()"");
 
@@ -364,11 +377,14 @@ public class CalendarServiceImpl implements CalendarService
 
         LocalDateTime calendarEndTime = calendarStartTime.plusDays(1);
 
-        if (featureFlagService.isOn(FeatureIdentifier.FeatureFlags24_3.CONSIDER_DAY_LIGHT_SAVINGS_FOR_SOUTH_AMERICA))
+        if (isConsiderDayLightSavingsForSouthAmericaFFEnabled)
         {
-            if (appointmentUtil.wasConfigurationMadeDuringDayLightSavings(context)
-                    && appointmentUtil.isInputInDaylightSavings(context, calendarStartTime)
-                    && !appointmentUtil.isInputInDaylightSavings(context, calendarStartTime.minusDays(1).plusHours(1)))
+            if (wasConfigurationMadeDuringDayLightSavings
+                    && appointmentUtil.isInputInDaylightSavings(calendarStartTime, facilityTimeZone,
+                            isConsiderDayLightSavingsForSouthAmericaFFEnabled, isConsiderDayLightSavingChangeFFEnabled)
+                    && !appointmentUtil.isInputInDaylightSavings(calendarStartTime.minusDays(1).plusHours(1),
+                            facilityTimeZone, isConsiderDayLightSavingsForSouthAmericaFFEnabled,
+                            isConsiderDayLightSavingChangeFFEnabled))
             {
                 calendarEndTime = calendarEndTime.minusHours(1);
             }
@@ -376,12 +392,20 @@ public class CalendarServiceImpl implements CalendarService
         else
         {
 
-            if (featureFlagService.isOn(FeatureIdentifier.FeatureFlags99_9.CONSIDER_DAY_LIGHT_SAVING_CHANGE)
-                    && (!appointmentUtil.wasConfigurationMadeDuringDayLightSavings(context) &&
-                            ((appointmentUtil.isInputInDaylightSavings(context, calendarStartTime)
-                                    && !appointmentUtil.isInputInDaylightSavings(context, calendarEndTime))
-                                    || (appointmentUtil.isInputInDaylightSavings(context, calendarStartTime)
-                                            && appointmentUtil.isInputInDaylightSavings(context, calendarEndTime)))))
+            if (isConsiderDayLightSavingChangeFFEnabled
+                    && (!appointmentUtil.wasConfigurationMadeDuringDayLightSavings(facilityTimeZone) &&
+                            ((appointmentUtil.isInputInDaylightSavings(calendarStartTime, facilityTimeZone,
+                                    isConsiderDayLightSavingsForSouthAmericaFFEnabled,
+                                    isConsiderDayLightSavingChangeFFEnabled)
+                                    && !appointmentUtil.isInputInDaylightSavings(calendarEndTime, facilityTimeZone,
+                                            isConsiderDayLightSavingsForSouthAmericaFFEnabled,
+                                            isConsiderDayLightSavingChangeFFEnabled))
+                                    || (appointmentUtil.isInputInDaylightSavings(calendarStartTime, facilityTimeZone,
+                                            isConsiderDayLightSavingsForSouthAmericaFFEnabled,
+                                            isConsiderDayLightSavingChangeFFEnabled)
+                                            && appointmentUtil.isInputInDaylightSavings(calendarEndTime,
+                                                    facilityTimeZone, isConsiderDayLightSavingsForSouthAmericaFFEnabled,
+                                                    isConsiderDayLightSavingChangeFFEnabled)))))
             {
                 calendarEndTime = calendarEndTime.plusHours(1);
             }
@@ -442,8 +466,9 @@ public class CalendarServiceImpl implements CalendarService
             {
                 ScheduleUtilization scheduleUtilization = windowUtilization.getScheduleUtilizations().get(0);
 
-                if (!shouldConsiderUtilizationRecord(context, scheduleUtilization, calendarStartTime, calendarEndTime,
-                        minAppointmentTime))
+                if (!shouldConsiderUtilizationRecord(scheduleUtilization, calendarStartTime, calendarEndTime,
+                        minAppointmentTime, wasConfigurationMadeDuringDayLightSavings, facilityTimeZone,
+                        isConsiderDayLightSavingsForSouthAmericaFFEnabled, isConsiderDayLightSavingChangeFFEnabled))
                 {
                     logger.debug(""Schedule is not considered : {}"", scheduleUtilization);
                     continue;
@@ -454,20 +479,27 @@ public class CalendarServiceImpl implements CalendarService
 
                 logger.debug(""uiGridIntervalCapacity before conversion : {} and after conversion :{}"",
                         scheduleUtilization.getDateTimeRange().getStart(),
-                        appointmentUtil.getConfigurationTimeAdjustedToDaylightSavings(context,
-                                scheduleUtilization.getDateTimeRange().getStart()));
+                        appointmentUtil.getConfigurationTimeAdjustedToDaylightSavings(
+                                scheduleUtilization.getDateTimeRange().getStart(),
+                                wasConfigurationMadeDuringDayLightSavings, facilityTimeZone,
+                                isConsiderDayLightSavingsForSouthAmericaFFEnabled,
+                                isConsiderDayLightSavingChangeFFEnabled));
                 logger.debug(""uiGridIntervalCapacity before conversion : {} and after conversion :{}"",
                         scheduleUtilization.getDateTimeRange().getEnd(),
-                        appointmentUtil.getConfigurationTimeAdjustedToDaylightSavings(context,
-                                scheduleUtilization.getDateTimeRange().getEnd()));
-                if (featureFlagService
-                        .isOn(FeatureIdentifier.FeatureFlags24_3.CONSIDER_DAY_LIGHT_SAVINGS_FOR_SOUTH_AMERICA)
-                        || featureFlagService.isOn(FeatureIdentifier.FeatureFlags99_9.CONSIDER_DAY_LIGHT_SAVING_CHANGE))
+                        appointmentUtil.getConfigurationTimeAdjustedToDaylightSavings(
+                                scheduleUtilization.getDateTimeRange().getEnd(),
+                                wasConfigurationMadeDuringDayLightSavings, facilityTimeZone,
+                                isConsiderDayLightSavingsForSouthAmericaFFEnabled,
+                                isConsiderDayLightSavingChangeFFEnabled));
+                if (isConsiderDayLightSavingsForSouthAmericaFFEnabled
+                        || isConsiderDayLightSavingChangeFFEnabled)
                 {
                     scheduleDuration = Duration.between(scheduleUtilization.getDateTimeRange().getStart(),
                             scheduleUtilization.getDateTimeRange().getEnd()).toMinutes();
-                    cellStartTime = appointmentUtil.getConfigurationTimeAdjustedToDaylightSavings(context,
-                            scheduleUtilization.getDateTimeRange().getStart());
+                    cellStartTime = appointmentUtil.getConfigurationTimeAdjustedToDaylightSavings(
+                            scheduleUtilization.getDateTimeRange().getStart(),
+                            wasConfigurationMadeDuringDayLightSavings, facilityTimeZone,
+                            isConsiderDayLightSavingsForSouthAmericaFFEnabled, isConsiderDayLightSavingChangeFFEnabled);
                     cellEndTime = cellStartTime.plusMinutes(scheduleDuration);
                     uiGridIntervalCapacity.setIntervalStart(cellStartTime);
                     uiGridIntervalCapacity.setIntervalEnd(cellEndTime);
@@ -475,11 +507,17 @@ public class CalendarServiceImpl implements CalendarService
                 else
                 {
                     uiGridIntervalCapacity
-                            .setIntervalStart(appointmentUtil.getConfigurationTimeAdjustedToDaylightSavings(context,
-                                    scheduleUtilization.getDateTimeRange().getStart()));
+                            .setIntervalStart(appointmentUtil.getConfigurationTimeAdjustedToDaylightSavings(
+                                    scheduleUtilization.getDateTimeRange().getStart(),
+                                    wasConfigurationMadeDuringDayLightSavings, facilityTimeZone,
+                                    isConsiderDayLightSavingsForSouthAmericaFFEnabled,
+                                    isConsiderDayLightSavingChangeFFEnabled));
                     uiGridIntervalCapacity
-                            .setIntervalEnd(appointmentUtil.getConfigurationTimeAdjustedToDaylightSavings(context,
-                                    scheduleUtilization.getDateTimeRange().getEnd()));
+                            .setIntervalEnd(appointmentUtil.getConfigurationTimeAdjustedToDaylightSavings(
+                                    scheduleUtilization.getDateTimeRange().getEnd(),
+                                    wasConfigurationMadeDuringDayLightSavings, facilityTimeZone,
+                                    isConsiderDayLightSavingsForSouthAmericaFFEnabled,
+                                    isConsiderDayLightSavingChangeFFEnabled));
                 }
 
                 List<CapacityTypeUtilization> utilizationByNumberOfAppointments =
@@ -537,7 +575,9 @@ public class CalendarServiceImpl implements CalendarService
             }
         }
 
-        addMissingTimeIntervals(context, gridData, calendarStartTime);
+        addMissingTimeIntervals(gridData, calendarStartTime, wasConfigurationMadeDuringDayLightSavings,
+                facilityTimeZone, isConsiderDayLightSavingsForSouthAmericaFFEnabled,
+                isConsiderDayLightSavingChangeFFEnabled);
 
         gridData = gridData.stream().sorted(Comparator.comparing(CalendarResourceGroup::getResourceGroupName))
                 .collect(Collectors.toList());
@@ -547,37 +587,52 @@ public class CalendarServiceImpl implements CalendarService
         return gridData;
     }
 
-    private void addMissingTimeIntervals(Context context, List<CalendarResourceGroup> sortedGridData,
-            LocalDateTime calendarStart)
+    private void addMissingTimeIntervals(List<CalendarResourceGroup> sortedGridData,
+            LocalDateTime calendarStart, boolean wasConfigurationMadeDuringDayLightSavings, TimeZone facilityTimeZone,
+            boolean isConsiderDayLightSavingsForSouthAmericaFFEnabled, boolean isConsiderDayLightSavingChangeFFEnabled)
     {
         logger.trace("">> addMissingTimeIntervals()"");
 
         logger.debug(""calendarStart in addMissingTimeIntervals before Conversion := {} "", calendarStart);
-        calendarStart = appointmentUtil.getConfigurationTimeAdjustedToDaylightSavings(context, calendarStart);
+        calendarStart = appointmentUtil.getConfigurationTimeAdjustedToDaylightSavings(calendarStart,
+                wasConfigurationMadeDuringDayLightSavings, facilityTimeZone,
+                isConsiderDayLightSavingsForSouthAmericaFFEnabled, isConsiderDayLightSavingChangeFFEnabled);
 
         LocalDateTime calendarEnd = calendarStart.plusDays(1);
 
-        if (featureFlagService.isOn(FeatureIdentifier.FeatureFlags24_3.CONSIDER_DAY_LIGHT_SAVINGS_FOR_SOUTH_AMERICA))
+        if (isConsiderDayLightSavingsForSouthAmericaFFEnabled)
         {
-            calendarEnd = appointmentUtil.getConfigurationTimeAdjustedEndOfDayTime(context, calendarStart, calendarEnd);
+            calendarEnd = appointmentUtil.getConfigurationTimeAdjustedEndOfDayTime(calendarStart, calendarEnd,
+                    wasConfigurationMadeDuringDayLightSavings, facilityTimeZone,
+                    isConsiderDayLightSavingsForSouthAmericaFFEnabled, isConsiderDayLightSavingChangeFFEnabled);
 
         }
         else
         {
 
-            if (featureFlagService.isOn(FeatureIdentifier.FeatureFlags99_9.CONSIDER_DAY_LIGHT_SAVING_CHANGE))
+            if (isConsiderDayLightSavingChangeFFEnabled)
             {
                 logger.debug(""Calendar Start is in Daylight Saving {}: {}"", calendarStart,
-                        appointmentUtil.isInputInDaylightSavings(context, calendarStart));
+                        appointmentUtil.isInputInDaylightSavings(calendarStart, facilityTimeZone,
+                                isConsiderDayLightSavingsForSouthAmericaFFEnabled,
+                                isConsiderDayLightSavingChangeFFEnabled));
                 logger.debug(""Calendar End is in Daylight Saving {}: {}"", calendarEnd,
-                        appointmentUtil.isInputInDaylightSavings(context, calendarEnd));
-                if (appointmentUtil.isInputInDaylightSavings(context, calendarStart) &&
-                        !appointmentUtil.isInputInDaylightSavings(context, calendarEnd))
+                        appointmentUtil.isInputInDaylightSavings(calendarEnd, facilityTimeZone,
+                                isConsiderDayLightSavingsForSouthAmericaFFEnabled,
+                                isConsiderDayLightSavingChangeFFEnabled));
+                if (appointmentUtil.isInputInDaylightSavings(calendarStart, facilityTimeZone,
+                        isConsiderDayLightSavingsForSouthAmericaFFEnabled, isConsiderDayLightSavingChangeFFEnabled) &&
+                        !appointmentUtil.isInputInDaylightSavings(calendarEnd, facilityTimeZone,
+                                isConsiderDayLightSavingsForSouthAmericaFFEnabled,
+                                isConsiderDayLightSavingChangeFFEnabled))
                 {
                     calendarEnd = calendarEnd.plusHours(1);
                 }
-                else if (!appointmentUtil.isInputInDaylightSavings(context, calendarStart) &&
-                        appointmentUtil.isInputInDaylightSavings(context, calendarEnd))
+                else if (!appointmentUtil.isInputInDaylightSavings(calendarStart, facilityTimeZone,
+                        isConsiderDayLightSavingsForSouthAmericaFFEnabled, isConsiderDayLightSavingChangeFFEnabled) &&
+                        appointmentUtil.isInputInDaylightSavings(calendarEnd, facilityTimeZone,
+                                isConsiderDayLightSavingsForSouthAmericaFFEnabled,
+                                isConsiderDayLightSavingChangeFFEnabled))
                 {
                     calendarEnd = calendarEnd.minusHours(1);
                 }
@@ -616,10 +671,8 @@ public class CalendarServiceImpl implements CalendarService
                     }
 
                     expectedStart = intervals.get(i).getIntervalEnd();
-                    if ((featureFlagService
-                            .isOn(FeatureIdentifier.FeatureFlags24_3.CONSIDER_DAY_LIGHT_SAVINGS_FOR_SOUTH_AMERICA)
-                            || featureFlagService
-                                    .isOn(FeatureIdentifier.FeatureFlags99_9.CONSIDER_DAY_LIGHT_SAVING_CHANGE))
+                    if ((isConsiderDayLightSavingsForSouthAmericaFFEnabled
+                            || isConsiderDayLightSavingChangeFFEnabled)
                             && (intervals.get(i).getIntervalEnd().isBefore(intervals.get(i).getIntervalStart())))
                     {
                         intervals.remove(intervals.get(i));
@@ -991,8 +1044,10 @@ public class CalendarServiceImpl implements CalendarService
         return appointmentIds;
     }
 
-    protected boolean shouldConsiderUtilizationRecord(Context context, ScheduleUtilization scheduleUtilization,
-            LocalDateTime calendarStartTime, LocalDateTime calendarEndTime, long minAppointmentTime)
+    protected boolean shouldConsiderUtilizationRecord(ScheduleUtilization scheduleUtilization,
+            LocalDateTime calendarStartTime, LocalDateTime calendarEndTime, long minAppointmentTime,
+            boolean wasConfigurationMadeDuringDayLightSavings, TimeZone facilityTimeZone,
+            boolean isConsiderDayLightSavingsForSouthAmericaFFEnabled, boolean isConsiderDayLightSavingChangeFFEnabled)
     {
         boolean shouldConsiderUtilizationRecord = true;
 
@@ -1012,14 +1067,19 @@ public class CalendarServiceImpl implements CalendarService
 
                 (scheduleDuration < minAppointmentTime)
 
-                || ((featureFlagService
-                        .isOn(FeatureIdentifier.FeatureFlags24_3.CONSIDER_DAY_LIGHT_SAVINGS_FOR_SOUTH_AMERICA)
-                        || featureFlagService.isOn(FeatureIdentifier.FeatureFlags99_9.CONSIDER_DAY_LIGHT_SAVING_CHANGE))
+                || ((isConsiderDayLightSavingsForSouthAmericaFFEnabled
+                        || isConsiderDayLightSavingChangeFFEnabled)
                         && (!appointmentUtil
-                                .getConfigurationTimeAdjustedToDaylightSavings(context,
-                                        scheduleUtilization.getDateTimeRange().getEnd())
-                                .isAfter(appointmentUtil.getConfigurationTimeAdjustedToDaylightSavings(context,
-                                        scheduleUtilization.getDateTimeRange().getStart())))))
+                                .getConfigurationTimeAdjustedToDaylightSavings(
+                                        scheduleUtilization.getDateTimeRange().getEnd(),
+                                        wasConfigurationMadeDuringDayLightSavings, facilityTimeZone,
+                                        isConsiderDayLightSavingsForSouthAmericaFFEnabled,
+                                        isConsiderDayLightSavingChangeFFEnabled)
+                                .isAfter(appointmentUtil.getConfigurationTimeAdjustedToDaylightSavings(
+                                        scheduleUtilization.getDateTimeRange().getStart(),
+                                        wasConfigurationMadeDuringDayLightSavings, facilityTimeZone,
+                                        isConsiderDayLightSavingsForSouthAmericaFFEnabled,
+                                        isConsiderDayLightSavingChangeFFEnabled)))))
 
         {
             shouldConsiderUtilizationRecord = false;
diff --git a/src/main/java/com/manh/cp/appointment/appointment/impl/service/EntityToDTOConverter.java b/src/main/java/com/manh/cp/appointment/appointment/impl/service/EntityToDTOConverter.java
index a6e06200a..ae63692be 100644
--- a/src/main/java/com/manh/cp/appointment/appointment/impl/service/EntityToDTOConverter.java
+++ b/src/main/java/com/manh/cp/appointment/appointment/impl/service/EntityToDTOConverter.java
@@ -70,7 +70,8 @@ public class EntityToDTOConverter
 
         // TODO see if entity can be converted to Document using documentBuilder.build from entity, and then convert
         // that to DTO.
-
+        boolean isSupportAddlPoFieldsPersistence = featureFlagService.isOn(
+                FeatureIdentifier.FeatureFlags24_2.SUPPORT_ADDL_PO_FIELDS_PERSISTENCE);
         AppointmentDTO appointmentDTO =
                 new AppointmentDTO(new AppointmentBaseDTO.KeyDTO(appointment.getAppointmentId()));
         appointmentDTO.setAppointmentTypeId(appointment.getAppointmentTypeId());
@@ -100,7 +101,7 @@ public class EntityToDTOConverter
         appointmentDTO.setSkipAvailabilityCheck(appointment.getSkipAvailabilityCheck());
         appointmentDTO.setCreatedSourceType(appointment.getCreatedSourceType());
 
-        if (featureFlagService.isOn(FeatureIdentifier.FeatureFlags24_2.SUPPORT_ADDL_PO_FIELDS_PERSISTENCE))
+        if (isSupportAddlPoFieldsPersistence)
         {
             appointmentDTO.setExtended(appointment.getExtended());
         }
@@ -146,8 +147,7 @@ public class EntityToDTOConverter
                 appointmentContentsDTO
                         .setSupplierPurchaseOrderIndicator(content.getSupplierPurchaseOrderIndicator());
 
-                if (featureFlagService.isOn(
-                        FeatureIdentifier.FeatureFlags24_2.SUPPORT_ADDL_PO_FIELDS_PERSISTENCE))
+                if (isSupportAddlPoFieldsPersistence)
                 {
                     appointmentContentsDTO.setBillOfLadingNumber(content.getBillOfLadingNumber());
                     appointmentContentsDTO.setProNumber(content.getProNumber());
@@ -196,7 +196,7 @@ public class EntityToDTOConverter
 
         if (loadAppointmentObjects)
         {
-            populateSubObjects(context, appointmentDTO, appointment);
+            populateSubObjects(context, appointmentDTO, appointment, isSupportAddlPoFieldsPersistence);
         }
 
         return appointmentDTO;
@@ -281,15 +281,14 @@ public class EntityToDTOConverter
         return dto;
     }
 
-    public PurchaseOrderDTO convertPurchaseOrder(PurchaseOrder entity)
+    public PurchaseOrderDTO convertPurchaseOrder(PurchaseOrder entity, boolean isSupportAddlPoFieldsPersistence)
     {
         PurchaseOrderDTO dto = new PurchaseOrderDTO(new PurchaseOrderDTO.KeyDTO(entity.getPurchaseOrderId()));
 
         dto.setBillOfLadingNumber(entity.getBillOfLadingNumber());
         dto.setProNumber(entity.getProNumber());
 
-        if (featureFlagService.isOn(
-                FeatureIdentifier.FeatureFlags24_2.SUPPORT_ADDL_PO_FIELDS_PERSISTENCE))
+        if (isSupportAddlPoFieldsPersistence)
         {
             dto.setVendorId(entity.getVendorId());
         }
@@ -352,7 +351,8 @@ public class EntityToDTOConverter
         return dto;
     }
 
-    private void populateSubObjects(Context context, AppointmentDTO appointmentDTO, Appointment appointment)
+    private void populateSubObjects(Context context, AppointmentDTO appointmentDTO, Appointment appointment,
+            boolean isSupportAddlPoFieldsPersistence)
     {
         List<String> asnIds = new ArrayList<>();
         List<String> purchaseOrderIds = new ArrayList<>();
@@ -400,7 +400,8 @@ public class EntityToDTOConverter
 
             List<PurchaseOrderDTO> purchaseOrderDTOList = new ArrayList<>();
             purchaseOrderPage.getObjects().stream()
-                    .forEach(purchaseOrder -> purchaseOrderDTOList.add(convertPurchaseOrder(purchaseOrder)));
+                    .forEach(purchaseOrder -> purchaseOrderDTOList
+                            .add(convertPurchaseOrder(purchaseOrder, isSupportAddlPoFieldsPersistence)));
 
             appointmentDTO.setPurchaseOrder(purchaseOrderDTOList);
         }
diff --git a/src/main/java/com/manh/cp/appointment/core/impl/service/ResourceAvailabilityServiceImpl.java b/src/main/java/com/manh/cp/appointment/core/impl/service/ResourceAvailabilityServiceImpl.java
index 493c21442..09c5502ba 100644
--- a/src/main/java/com/manh/cp/appointment/core/impl/service/ResourceAvailabilityServiceImpl.java
+++ b/src/main/java/com/manh/cp/appointment/core/impl/service/ResourceAvailabilityServiceImpl.java
@@ -229,8 +229,14 @@ public class ResourceAvailabilityServiceImpl<T extends AppointmentInputDTO> impl
             }
         }
 
+        boolean isConsiderDayLightSavingsForSouthAmericaFFEnabled = featureFlagService
+                .isOn(FeatureIdentifier.FeatureFlags24_3.CONSIDER_DAY_LIGHT_SAVINGS_FOR_SOUTH_AMERICA);
+        boolean isConsiderDayLightSavingChangeFFEnabled = featureFlagService
+                .isOn(FeatureIdentifier.FeatureFlags99_9.CONSIDER_DAY_LIGHT_SAVING_CHANGE);
+
         List<DefinitionUtilization> allUtilizationData = getAllUtilizations(context, resourceGroupList,
-                facilityScopes, windowStartDatetime, windowEndDateTime, appointmentInputDTO.getTimeZone());
+                facilityScopes, windowStartDatetime, windowEndDateTime, appointmentInputDTO.getTimeZone(),
+                isConsiderDayLightSavingsForSouthAmericaFFEnabled, isConsiderDayLightSavingChangeFFEnabled);
 
         List<Shift> shifts = shiftService.getAllShifts(context);
         logger.debug(""-- findResourceAvailabilities() : shifts {}"", shifts);
@@ -242,7 +248,8 @@ public class ResourceAvailabilityServiceImpl<T extends AppointmentInputDTO> impl
         {
             fwSchedulesHeldByAppointment = getFwSchedulesHeldByAppointment(context, appointmentInputDTO);
             fwSchedulesHeldByAppointment =
-                    getDaylightTimeAdjustedScheduleUtilizations(context, fwSchedulesHeldByAppointment);
+                    getDaylightTimeAdjustedScheduleUtilizations(context, fwSchedulesHeldByAppointment,
+                            isConsiderDayLightSavingsForSouthAmericaFFEnabled, isConsiderDayLightSavingChangeFFEnabled);
         }
 
         logger.debug(""-- windowStartDatetime = {}, windowEndDateTime = {} "", windowStartDatetime, windowEndDateTime);
@@ -656,7 +663,8 @@ public class ResourceAvailabilityServiceImpl<T extends AppointmentInputDTO> impl
     @TrackTime(value = TrackTime.DEBUG, skipArgs = true, skipResult = true)
     private List<DefinitionUtilization> getAllUtilizations(Context context, List<ResourceGroup> resourceGroupList,
             Collection<FacilityDayLevelScope> facilityDayLevelScopes,
-            LocalDateTime startTime, LocalDateTime endTime, TimeZone facilityTimeZone)
+            LocalDateTime startTime, LocalDateTime endTime, TimeZone facilityTimeZone,
+            boolean isConsiderDayLightSavingsForSouthAmericaFFEnabled, boolean isConsiderDayLightSavingChangeFFEnabled)
     {
         logger.debug(""getAllUtilizations() startTime = {}, endTime = {} "", startTime,
                 endTime);
@@ -720,7 +728,8 @@ public class ResourceAvailabilityServiceImpl<T extends AppointmentInputDTO> impl
         logger.debug("" time taken to get fw schedule utilization from db = {}"",
                 Duration.between(time2, LocalDateTime.now()).toMillis());
 
-        List<DefinitionUtilization> result = getDaylightTimeAdjustedUtilizations(allUtilizationRecords, context);
+        List<DefinitionUtilization> result = getDaylightTimeAdjustedUtilizations(allUtilizationRecords, context,
+                isConsiderDayLightSavingsForSouthAmericaFFEnabled, isConsiderDayLightSavingChangeFFEnabled);
 
         return result;
     }
@@ -980,11 +989,20 @@ public class ResourceAvailabilityServiceImpl<T extends AppointmentInputDTO> impl
             {
                 LocalDateTime startDateTime = existingAppointmentSchedule.getStartDateTime();
                 LocalDateTime endDateTime = existingAppointmentSchedule.getEndDateTime();
-                if (appointmentUtil.isInputInDaylightSavings(context, startDateTime))
+                TimeZone facilityTimeZone =
+                        appointmentUtil.getFacilityTimeZone(context);
+                boolean isConsiderDayLightSavingsForSouthAmericaFFEnabled = featureFlagService
+                        .isOn(FeatureIdentifier.FeatureFlags24_3.CONSIDER_DAY_LIGHT_SAVINGS_FOR_SOUTH_AMERICA);
+                boolean isConsiderDayLightSavingChangeFFEnabled = featureFlagService
+                        .isOn(FeatureIdentifier.FeatureFlags99_9.CONSIDER_DAY_LIGHT_SAVING_CHANGE);
+
+                if (appointmentUtil.isInputInDaylightSavings(startDateTime, facilityTimeZone,
+                        isConsiderDayLightSavingsForSouthAmericaFFEnabled, isConsiderDayLightSavingChangeFFEnabled))
                 {
                     startDateTime = startDateTime.plusHours(1);
                 }
-                if (appointmentUtil.isInputInDaylightSavings(context, endDateTime))
+                if (appointmentUtil.isInputInDaylightSavings(endDateTime, facilityTimeZone,
+                        isConsiderDayLightSavingsForSouthAmericaFFEnabled, isConsiderDayLightSavingChangeFFEnabled))
                 {
                     endDateTime = endDateTime.plusHours(1);
                 }
@@ -1209,12 +1227,15 @@ public class ResourceAvailabilityServiceImpl<T extends AppointmentInputDTO> impl
     }
 
     private List<DefinitionUtilization> getDaylightTimeAdjustedUtilizations(
-            List<DefinitionUtilization> utilizationListFromFWSchedule, Context context)
+            List<DefinitionUtilization> utilizationListFromFWSchedule, Context context,
+            boolean isConsiderDayLightSavingsForSouthAmericaFFEnabled, boolean isConsiderDayLightSavingChangeFFEnabled)
     {
         List<DefinitionUtilization> dayLightAdjustedDefinitionUtilizations = new ArrayList<>();
 
+        TimeZone facilityTimeZone =
+                appointmentUtil.getFacilityTimeZone(context);
         boolean wasConfigurationMadeDuringDayLightSavings =
-                appointmentUtil.wasConfigurationMadeDuringDayLightSavings(context);
+                appointmentUtil.wasConfigurationMadeDuringDayLightSavings(facilityTimeZone);
 
         LocalDateTime point1 = LocalDateTime.now();
 
@@ -1237,7 +1258,9 @@ public class ResourceAvailabilityServiceImpl<T extends AppointmentInputDTO> impl
                             scheduleUtilizationFw.getCapacityTypeUtilizations();
 
                     boolean isInputInDaylightSavings =
-                            appointmentUtil.isInputInDaylightSavings(context, dateTimeRangeFW.getStart());
+                            appointmentUtil.isInputInDaylightSavings(dateTimeRangeFW.getStart(), facilityTimeZone,
+                                    isConsiderDayLightSavingsForSouthAmericaFFEnabled,
+                                    isConsiderDayLightSavingChangeFFEnabled);
 
                     if (!wasConfigurationMadeDuringDayLightSavings && isInputInDaylightSavings)
                     {
@@ -1291,11 +1314,14 @@ public class ResourceAvailabilityServiceImpl<T extends AppointmentInputDTO> impl
     }
 
     private List<Pair<ScheduleUtilization, Integer>> getDaylightTimeAdjustedScheduleUtilizations(Context context,
-            List<Pair<ScheduleUtilization, Integer>> utilizationListFromFWSchedule)
+            List<Pair<ScheduleUtilization, Integer>> utilizationListFromFWSchedule,
+            boolean isConsiderDayLightSavingsForSouthAmericaFFEnabled, boolean isConsiderDayLightSavingChangeFFEnabled)
     {
         List<Pair<ScheduleUtilization, Integer>> dayLightAdjustedScheduleUtilizations = new ArrayList<>();
+        TimeZone facilityTimeZone =
+                appointmentUtil.getFacilityTimeZone(context);
         boolean wasConfigurationMadeDuringDayLightSavings =
-                appointmentUtil.wasConfigurationMadeDuringDayLightSavings(context);
+                appointmentUtil.wasConfigurationMadeDuringDayLightSavings(facilityTimeZone);
         LocalDateTime point1 = LocalDateTime.now();
         utilizationListFromFWSchedule.forEach(definitionUtilizationFwPair -> {
             ScheduleUtilization scheduleUtilizationFw = definitionUtilizationFwPair.getLeft();
@@ -1305,7 +1331,8 @@ public class ResourceAvailabilityServiceImpl<T extends AppointmentInputDTO> impl
             List<CapacityTypeUtilization> capacityTypeUtilizationsFW =
                     scheduleUtilizationFw.getCapacityTypeUtilizations();
             boolean isInputInDaylightSavings =
-                    appointmentUtil.isInputInDaylightSavings(context, dateTimeRangeFW.getStart());
+                    appointmentUtil.isInputInDaylightSavings(dateTimeRangeFW.getStart(), facilityTimeZone,
+                            isConsiderDayLightSavingsForSouthAmericaFFEnabled, isConsiderDayLightSavingChangeFFEnabled);
             if (!wasConfigurationMadeDuringDayLightSavings && isInputInDaylightSavings)
             {
                 ScheduleUtilization.Builder builder = ScheduleUtilization.newBuilder();
diff --git a/src/main/java/com/manh/cp/appointment/core/impl/service/UtilizationHelper.java b/src/main/java/com/manh/cp/appointment/core/impl/service/UtilizationHelper.java
index d59e4a5d2..89b439c8f 100644
--- a/src/main/java/com/manh/cp/appointment/core/impl/service/UtilizationHelper.java
+++ b/src/main/java/com/manh/cp/appointment/core/impl/service/UtilizationHelper.java
@@ -24,6 +24,7 @@ import java.util.Collection;
 import java.util.HashSet;
 import java.util.List;
 import java.util.Set;
+import java.util.TimeZone;
 import java.util.stream.Collectors;
 
 import org.apache.commons.collections4.CollectionUtils;
@@ -31,6 +32,8 @@ import org.apache.commons.lang3.tuple.ImmutablePair;
 import org.apache.commons.lang3.tuple.Pair;
 import org.springframework.beans.factory.annotation.Autowired;
 
+import com.manh.cp.appointment.appointment.api.service.FeatureFlagService;
+import com.manh.cp.appointment.appointment.constants.FeatureIdentifier;
 import com.manh.cp.appointment.appointment.impl.service.AppointmentUtil;
 import com.manh.cp.appointment.core.api.domain.CapacityScope;
 import com.manh.cp.appointment.core.api.domain.FacilityCapacities;
@@ -120,6 +123,9 @@ public class UtilizationHelper<T extends AppointmentInputDTO>
     @Autowired
     private CalendarScheduleUtilizationService calendarScheduleUtilizationService;
 
+    @Autowired
+    private FeatureFlagService featureFlagService;
+
     private final AppointmentInformationService<T> appointmentInformationService;
 
     /**
@@ -345,16 +351,25 @@ public class UtilizationHelper<T extends AppointmentInputDTO>
                 getCalendarsThatCanBeUsedForAppointment(context, recommendationLine,
                         resourceGroupList, facilityDayLevelScopes, startTime);
 
+        TimeZone facilityTimeZone =
+                appointmentUtil.getFacilityTimeZone(context);
         boolean wasConfigurationMadeDuringDayLightSavings =
-                appointmentUtil.wasConfigurationMadeDuringDayLightSavings(context);
+                appointmentUtil.wasConfigurationMadeDuringDayLightSavings(facilityTimeZone);
+        boolean isConsiderDayLightSavingsForSouthAmericaFFEnabled = featureFlagService
+                .isOn(FeatureIdentifier.FeatureFlags24_3.CONSIDER_DAY_LIGHT_SAVINGS_FOR_SOUTH_AMERICA);
+        boolean isConsiderDayLightSavingChangeFFEnabled = featureFlagService
+                .isOn(FeatureIdentifier.FeatureFlags99_9.CONSIDER_DAY_LIGHT_SAVING_CHANGE);
 
         if (!wasConfigurationMadeDuringDayLightSavings)
         {
-            if (appointmentUtil.isInputInDaylightSavings(context, startTime))
+            if (appointmentUtil.isInputInDaylightSavings(startTime, facilityTimeZone,
+                    isConsiderDayLightSavingsForSouthAmericaFFEnabled, isConsiderDayLightSavingChangeFFEnabled))
             {
                 startTime = startTime.plusHours(1);
             }
-            if (appointmentUtil.isInputInDaylightSavings(context, endTime))
+            if (appointmentUtil.isInputInDaylightSavings(endTime, facilityTimeZone,
+                    isConsiderDayLightSavingsForSouthAmericaFFEnabled,
+                    isConsiderDayLightSavingChangeFFEnabled))
             {
                 endTime = endTime.plusHours(1);
             }
@@ -517,8 +532,18 @@ public class UtilizationHelper<T extends AppointmentInputDTO>
 
         DateTimeRange dateTimeRange = DateTimeRange.from(schedule.getStartDateTime(), schedule.getEndDateTime());
 
-        if (!appointmentUtil.wasConfigurationMadeDuringDayLightSavings(context) &&
-                appointmentUtil.isInputInDaylightSavings(context, dateTimeRange.getStart()))
+        TimeZone facilityTimeZone =
+                appointmentUtil.getFacilityTimeZone(context);
+        boolean wasConfigurationMadeDuringDayLightSavings =
+                appointmentUtil.wasConfigurationMadeDuringDayLightSavings(facilityTimeZone);
+        boolean isConsiderDayLightSavingsForSouthAmericaFFEnabled = featureFlagService
+                .isOn(FeatureIdentifier.FeatureFlags24_3.CONSIDER_DAY_LIGHT_SAVINGS_FOR_SOUTH_AMERICA);
+        boolean isConsiderDayLightSavingChangeFFEnabled = featureFlagService
+                .isOn(FeatureIdentifier.FeatureFlags99_9.CONSIDER_DAY_LIGHT_SAVING_CHANGE);
+
+        if (!wasConfigurationMadeDuringDayLightSavings &&
+                appointmentUtil.isInputInDaylightSavings(dateTimeRange.getStart(), facilityTimeZone,
+                        isConsiderDayLightSavingsForSouthAmericaFFEnabled, isConsiderDayLightSavingChangeFFEnabled))
         {
             dateTimeRange =
                     DateTimeRange.from(dateTimeRange.getStart().plusHours(1), dateTimeRange.getEnd().plusHours(1));
","CI Reports:

![](https://bitbucket.org/repo/9p65goR/images/3950036050-image.png)
![](https://bitbucket.org/repo/9p65goR/images/1100227990-image.png)
‌
why do we need to change TC? 
@{6152e14e289a54006ab32626} - This change was made because the test case intermittently fails. All the test cases within `ScheduleCarrierAppointmentTest` use the same configurations, with some test cases sharing the same appointment schedule. Running the test cases in parallel may block the time slots, leading to failures in recommendation assertions.

CC: @{616e5fdf3e3753006f85c4f7}
we can log the time the process started here, and it’s end at the end of this method.
We are already getting the execution time as part of the API response because we have annotated the method with `@TrackTime(value = TrackTime.DEBUG, skipArgs = true, skipResult = true)`.

![](https://bitbucket.org/repo/9p65goR/images/3891147541-image.png)
‌"
eaaee88fd31f620451b7e0d94302793da4c0f041,"diff --git a/src/component-test/java/com/manh/cp/appointment/appointment/DaylightSavings/AppointmentInDayLightSavingsTest.java b/src/component-test/java/com/manh/cp/appointment/appointment/DaylightSavings/AppointmentInDayLightSavingsTest.java
index 2e8a9bdd9..cb76031cd 100644
--- a/src/component-test/java/com/manh/cp/appointment/appointment/DaylightSavings/AppointmentInDayLightSavingsTest.java
+++ b/src/component-test/java/com/manh/cp/appointment/appointment/DaylightSavings/AppointmentInDayLightSavingsTest.java
@@ -1154,8 +1154,7 @@ public class AppointmentInDayLightSavingsTest extends AbstractComponentTest
 
         calendarRequestDocument.put(""CalendarDate"", calendarRequestTimeUTC.toString());
 
-        RestApiResponse calendarResponse =
-                null;
+        RestApiResponse calendarResponse = null;
 
         String appointmentPath =
                 ""/appointment/appointment/AppointmentInDayLightSavings/calendarTestOnDayLightSavingEnd/Appointment.json"";
diff --git a/src/component-test/java/com/manh/cp/appointment/appointment/InboundDeliveryTest.java b/src/component-test/java/com/manh/cp/appointment/appointment/InboundDeliveryTest.java
index 9291a754e..1da064080 100644
--- a/src/component-test/java/com/manh/cp/appointment/appointment/InboundDeliveryTest.java
+++ b/src/component-test/java/com/manh/cp/appointment/appointment/InboundDeliveryTest.java
@@ -115,7 +115,7 @@ public class InboundDeliveryTest extends AbstractComponentTest
         createConfiguration();
 
         testUtil.createAppointment2(context, ""/appointment/appointment/InboundShipment/InboundShipmentAppointment.json"",
-                LocalDateTime.now().plusDays(1).toLocalDate().atTime(1, 0).toString());
+                LocalDateTime.now().plusDays(2).toLocalDate().atTime(1, 0).toString());
 
         Query query = new Query("" ((AppointmentContents.InboundShipment _ 'Inbound%')) "", 0, 10);
 
@@ -161,7 +161,7 @@ public class InboundDeliveryTest extends AbstractComponentTest
         createConfiguration();
 
         testUtil.createAppointment2(context, ""/appointment/appointment/InboundShipment/InboundShipmentAppointment.json"",
-                LocalDateTime.now().plusDays(1).toLocalDate().atTime(1, 0).toString());
+                LocalDateTime.now().plusDays(2).toLocalDate().atTime(1, 0).toString());
 
         Query query = new Query("""", 0, 10);
 
@@ -208,7 +208,7 @@ public class InboundDeliveryTest extends AbstractComponentTest
 
         testUtil.createAppointment2(context,
                 ""/appointment/appointment/InboundShipment/InboundShipmentAppointmentWithoutAppointmentContents.json"",
-                LocalDateTime.now().plusDays(1).toLocalDate().atTime(1, 0).toString());
+                LocalDateTime.now().plusDays(2).toLocalDate().atTime(1, 0).toString());
 
         Query query = new Query("""", 0, 10);
 
@@ -234,7 +234,7 @@ public class InboundDeliveryTest extends AbstractComponentTest
         createConfiguration();
 
         testUtil.createAppointment2(context, ""/appointment/appointment/InboundShipment/InboundShipmentAppointment.json"",
-                LocalDateTime.now().plusDays(1).toLocalDate().atTime(1, 0).toString());
+                LocalDateTime.now().plusDays(2).toLocalDate().atTime(1, 0).toString());
 
         Query query = new Query("""", 0, 10);
         Template template = new RootTemplate(""Appointment"", null);
diff --git a/src/component-test/java/com/manh/cp/appointment/appointment/RecurringAppointmentsTest.java b/src/component-test/java/com/manh/cp/appointment/appointment/RecurringAppointmentsTest.java
index b9393ce19..566a4edf8 100644
--- a/src/component-test/java/com/manh/cp/appointment/appointment/RecurringAppointmentsTest.java
+++ b/src/component-test/java/com/manh/cp/appointment/appointment/RecurringAppointmentsTest.java
@@ -771,7 +771,7 @@ public class RecurringAppointmentsTest extends AbstractComponentTest
             String templatePath = ""/appointment/appointment/recurringAppointments/TemplateForSeveralAppointments.json"";
 
             LocalDateTime templateStartDate = LocalDateTime.now().minusDays(5).toLocalDate().atStartOfDay();
-            LocalDateTime templateEndDate = LocalDateTime.now().plusDays(3).toLocalDate().atTime(23, 59);
+            LocalDateTime templateEndDate = LocalDateTime.now().plusDays(4).toLocalDate().atTime(23, 59);
             LocalDateTime appointmentTime = LocalDateTime.now().toLocalDate().atTime(2, 0);
 
             createTemplate(templatePath, templateStartDate, templateEndDate, appointmentTime);
diff --git a/src/component-test/java/com/manh/cp/appointment/appointment/ResourceDeleteTest.java b/src/component-test/java/com/manh/cp/appointment/appointment/ResourceDeleteTest.java
index dd682b921..393f86c23 100644
--- a/src/component-test/java/com/manh/cp/appointment/appointment/ResourceDeleteTest.java
+++ b/src/component-test/java/com/manh/cp/appointment/appointment/ResourceDeleteTest.java
@@ -142,7 +142,7 @@ public class ResourceDeleteTest extends AbstractComponentTest
         Document appointmentDocument = JsonUtil.readDocument(appointmentPath);
 
         AppointmentDTO appointmentDTO = objectMapper.convertValue(appointmentDocument.getMap(), AppointmentDTO.class);
-        appointmentDTO.setPreferredDateTime(LocalDateTime.now().plusDays(1).toLocalDate().atTime(1, 0));
+        appointmentDTO.setPreferredDateTime(LocalDateTime.now().plusDays(2).toLocalDate().atTime(1, 0));
         appointmentDTO.setComments(comments);
         Document documentWithAppointment = DocumentBuilder.build(appointmentDTO);
 
@@ -230,7 +230,7 @@ public class ResourceDeleteTest extends AbstractComponentTest
         Document appointmentDocument = JsonUtil.readDocument(appointmentEditPath);
 
         AppointmentDTO appointmentDTO = objectMapper.convertValue(appointmentDocument.getMap(), AppointmentDTO.class);
-        appointmentDTO.setPreferredDateTime(LocalDateTime.now().plusDays(1).toLocalDate().atTime(1, 0));
+        appointmentDTO.setPreferredDateTime(LocalDateTime.now().plusDays(2).toLocalDate().atTime(1, 0));
         appointmentDTO.setComments(""edit4"");
         Document documentWithAppointment = DocumentBuilder.build(appointmentDTO);
 
@@ -255,7 +255,7 @@ public class ResourceDeleteTest extends AbstractComponentTest
         appointmentDocument = JsonUtil.readDocument(appointmentEditPath);
 
         appointmentDTO = objectMapper.convertValue(appointmentDocument.getMap(), AppointmentDTO.class);
-        appointmentDTO.setPreferredDateTime(LocalDateTime.now().plusDays(1).toLocalDate().atTime(1, 0));
+        appointmentDTO.setPreferredDateTime(LocalDateTime.now().plusDays(2).toLocalDate().atTime(1, 0));
         appointmentDTO.setComments(""edit4"");
         documentWithAppointment = DocumentBuilder.build(appointmentDTO);
 
@@ -280,7 +280,7 @@ public class ResourceDeleteTest extends AbstractComponentTest
         Document appointmentDocument = JsonUtil.readDocument(appointmentPath);
 
         AppointmentDTO appointmentDTO = objectMapper.convertValue(appointmentDocument.getMap(), AppointmentDTO.class);
-        appointmentDTO.setPreferredDateTime(LocalDateTime.now().plusDays(1).toLocalDate().atTime(1, 0));
+        appointmentDTO.setPreferredDateTime(LocalDateTime.now().plusDays(2).toLocalDate().atTime(1, 0));
         Document documentWithAppointment = DocumentBuilder.build(appointmentDTO);
 
         try
diff --git a/src/component-test/java/com/manh/cp/appointment/appointment/UISearchTest.java b/src/component-test/java/com/manh/cp/appointment/appointment/UISearchTest.java
index 54ac5741b..7da274fd6 100644
--- a/src/component-test/java/com/manh/cp/appointment/appointment/UISearchTest.java
+++ b/src/component-test/java/com/manh/cp/appointment/appointment/UISearchTest.java
@@ -186,7 +186,7 @@ public class UISearchTest extends AbstractComponentTest
 
     private void scheduleAppointment(String appointmentPath)
     {
-        LocalDateTime preferredDateTime = LocalDateTime.now().plusDays(1).toLocalDate().atTime(1, 0);
+        LocalDateTime preferredDateTime = LocalDateTime.now().plusDays(2).toLocalDate().atTime(1, 0);
         testUtil.createAppointment2(context, appointmentPath, preferredDateTime.toString());
     }
 }
diff --git a/src/component-test/java/com/manh/cp/appointment/core/ConsiderTimeOtherThanPreferredTimeTest.java b/src/component-test/java/com/manh/cp/appointment/core/ConsiderTimeOtherThanPreferredTimeTest.java
index ff54a1f28..30c82ffd2 100644
--- a/src/component-test/java/com/manh/cp/appointment/core/ConsiderTimeOtherThanPreferredTimeTest.java
+++ b/src/component-test/java/com/manh/cp/appointment/core/ConsiderTimeOtherThanPreferredTimeTest.java
@@ -76,7 +76,7 @@ public class ConsiderTimeOtherThanPreferredTimeTest extends AbstractComponentTes
 
         AppointmentDTO appointmentDTO = objectMapper.convertValue(appointmentDocument.getMap(), AppointmentDTO.class);
 
-        appointmentDTO.setPreferredDateTime(LocalDateTime.now().plusDays(1).toLocalDate().atTime(1, 0));
+        appointmentDTO.setPreferredDateTime(LocalDateTime.now().plusDays(2).toLocalDate().atTime(1, 0));
         appointmentDTO.setConsiderTimeOtherThanPreferredTime(false);
 
         Document documentWithAppointment = DocumentBuilder.build(appointmentDTO);
diff --git a/src/component-test/resources/appointment/appointment/editAppointment/timeChange/InitialAppointmentResponse.json b/src/component-test/resources/appointment/appointment/editAppointment/timeChange/InitialAppointmentResponse.json
index 42b45e41c..dabfe620f 100644
--- a/src/component-test/resources/appointment/appointment/editAppointment/timeChange/InitialAppointmentResponse.json
+++ b/src/component-test/resources/appointment/appointment/editAppointment/timeChange/InitialAppointmentResponse.json
@@ -3,9 +3,9 @@
   ""facilityId"": ""01"",
   ""appointmentId"": ""long1"",
   ""appointmentTypeId"": ""LIVE_UNLOAD"",
+  ""duration"": 120,
   ""windowStartDateTime"": null,
   ""windowEndDateTime"": null,
-  ""duration"": 120,
   ""appointmentStatusId"": ""3000"",
   ""carrierId"": ""RDWY"",
   ""vendorId"": null,
diff --git a/src/main/java/com/manh/cp/appointment/appointment/event/TimeIntervalDefinitionEventService.java b/src/main/java/com/manh/cp/appointment/appointment/event/TimeIntervalDefinitionEventService.java
index 3e145055b..dbbbc770d 100644
--- a/src/main/java/com/manh/cp/appointment/appointment/event/TimeIntervalDefinitionEventService.java
+++ b/src/main/java/com/manh/cp/appointment/appointment/event/TimeIntervalDefinitionEventService.java
@@ -65,8 +65,8 @@ public class TimeIntervalDefinitionEventService
     {
         logger.trace("">> processTimeIntervalDefinition()"");
 
-        if (applicationParameterService
-                .getParameterValue(AppointmentApplicationParameters.APT_TIME_SLOT_POPULATION))
+        if (Boolean.TRUE.equals(applicationParameterService
+                .getParameterValue(AppointmentApplicationParameters.APT_TIME_SLOT_POPULATION)))
         {
             Document timeIntervalDefinitionDocument = new Document();
             Map<String, Object> timeIntervalDefinitionDocumentMap = timeIntervalDefinitionDocument.getMap();
diff --git a/src/main/java/com/manh/cp/appointment/appointment/impl/service/AppointmentInformationServiceImpl.java b/src/main/java/com/manh/cp/appointment/appointment/impl/service/AppointmentInformationServiceImpl.java
index 1c3748987..d620054b4 100644
--- a/src/main/java/com/manh/cp/appointment/appointment/impl/service/AppointmentInformationServiceImpl.java
+++ b/src/main/java/com/manh/cp/appointment/appointment/impl/service/AppointmentInformationServiceImpl.java
@@ -406,8 +406,6 @@ public class AppointmentInformationServiceImpl implements AppointmentInformation
 
         }
         else if (ResourceSelectionAttributes.SIZE_UOM.name().equalsIgnoreCase(criteria.getAttribute()))
-        {
-            if (ResourceSelectionAttributes.SIZE_UOM.name().equalsIgnoreCase(criteria.getAttribute()))
         {
             BigDecimal totalSize = new BigDecimal(0);
 
@@ -431,7 +429,6 @@ public class AppointmentInformationServiceImpl implements AppointmentInformation
                 }
             }
         }
-        }
         else
         {
             Map<String, Object> extendedAttributes = appointmentInputDTO.getExtendedAttributes();
diff --git a/src/main/java/com/manh/cp/appointment/appointment/impl/service/AppointmentManager.java b/src/main/java/com/manh/cp/appointment/appointment/impl/service/AppointmentManager.java
index 15300e632..4f39b0c5f 100644
--- a/src/main/java/com/manh/cp/appointment/appointment/impl/service/AppointmentManager.java
+++ b/src/main/java/com/manh/cp/appointment/appointment/impl/service/AppointmentManager.java
@@ -31,6 +31,7 @@ import org.springframework.stereotype.Component;
 import org.springframework.transaction.annotation.Propagation;
 import org.springframework.transaction.annotation.Transactional;
 
+import com.manh.cp.appointment.appointment.AppointmentApplicationParameters;
 import com.manh.cp.appointment.appointment.api.domain.Appointment;
 import com.manh.cp.appointment.appointment.api.domain.AppointmentBase;
 import com.manh.cp.appointment.appointment.api.service.AppointmentMapService;
@@ -177,7 +178,7 @@ public class AppointmentManager
     private AppointmentRecommendationUserExit appointmentRecommendationUserExit;
 
     @Autowired
-    PurgeUtils purgeUtils;
+    private PurgeUtils purgeUtils;
 
     @Autowired
     public AppointmentManagerHelper appointmentManagerHelper;
@@ -242,12 +243,23 @@ public class AppointmentManager
     @Transactional(propagation = Propagation.REQUIRED)
     @TrackTime(value = TrackTime.DEBUG, skipArgs = true, skipResult = true)
     public Document scheduleAppointment(Context context, Document document, Template template)
+    {
+        if (Boolean.TRUE.equals(applicationParameterService
+                .getParameterValue(AppointmentApplicationParameters.APT_TIME_SLOT_POPULATION)))
+        {
+            AppointmentScheduleRecommendationsDTO scheduledAppointment =
+                    appointmentManagerHelper.scheduleAppointmentWithNewConfig(context, document, template);
+
+            return scheduledAppointment.getAppointmentDocument();
+        }
+        else
         {
             AppointmentScheduleRecommendationsDTO scheduledAppointment =
                     appointmentManagerHelper.scheduleAppointment(context, document, template);
 
             return scheduledAppointment.getAppointmentDocument();
         }
+    }
 
     private void populateSourceType(AppointmentFlows appointmentFlows, AppointmentDTO appointmentDTO,
             Appointment existingAppointment)
diff --git a/src/main/java/com/manh/cp/appointment/appointment/impl/service/AppointmentManagerHelper.java b/src/main/java/com/manh/cp/appointment/appointment/impl/service/AppointmentManagerHelper.java
index 1b9225d93..a6f24a3c4 100644
--- a/src/main/java/com/manh/cp/appointment/appointment/impl/service/AppointmentManagerHelper.java
+++ b/src/main/java/com/manh/cp/appointment/appointment/impl/service/AppointmentManagerHelper.java
@@ -89,6 +89,7 @@ import com.manh.cp.appointment.config.api.service.AppointmentParameterStrategySe
 import com.manh.cp.appointment.config.client.dto.AppointmentApprovalCriteriaDTO;
 import com.manh.cp.appointment.config.impl.service.ApplicableAppointmentParametersService;
 import com.manh.cp.appointment.core.client.dto.ScheduleDTO;
+import com.manh.cp.appointment.core.dto.EnhancedAppointmentDTO;
 import com.manh.cp.appointment.core.dto.RecommendationLine;
 import com.manh.cp.appointment.core.dto.RecommendationsObject;
 import com.manh.cp.appointment.core.dto.RecommendedResource;
@@ -212,7 +213,7 @@ public class AppointmentManagerHelper
     private AppointmentRecommendationUserExit appointmentRecommendationUserExit;
 
     @Autowired
-    PurgeUtils purgeUtils;
+    private PurgeUtils purgeUtils;
 
     @Autowired
     private ApplicationParameterService applicationParameterService;
@@ -267,11 +268,21 @@ public class AppointmentManagerHelper
             {
                 document.put(""SourceType"", SourceType.CARRIER.name());
                 document.remove(""CreatedSourceType"");
+
+                if (Boolean.TRUE.equals(applicationParameterService
+                        .getParameterValue(AppointmentApplicationParameters.APT_TIME_SLOT_POPULATION)))
+                {
+                    AppointmentScheduleRecommendationsDTO appointmentScheduleRecommendationsDTO =
+                            scheduleAppointmentWithNewConfig(context, document, null);
+                    responseDoc = appointmentScheduleRecommendationsDTO.getAppointmentDocument();
+                }
+                else
+                {
                     AppointmentScheduleRecommendationsDTO appointmentScheduleRecommendationsDTO =
                             scheduleAppointment(context, document, null);
-
                     responseDoc = appointmentScheduleRecommendationsDTO.getAppointmentDocument();
                 }
+            }
 
             logger.debug(""scheduleAppointmentViaQueueForCarrier - scheduleAppointment result: {}"", responseDoc);
 
@@ -757,6 +768,105 @@ public class AppointmentManagerHelper
         return false;
     }
 
+    @Transactional(propagation = Propagation.REQUIRED)
+    @TrackTime(value = TrackTime.DEBUG, skipArgs = true, skipResult = true)
+    public AppointmentScheduleRecommendationsDTO scheduleAppointmentWithNewConfig(Context context, Document document,
+            Template template)
+    {
+        logger.trace("">> scheduleAppointmentWithNewConfig()"");
+
+        // TODO: Figure out how to enable this
+        // document = scheduleAppointmentUserExit.preprocess(context, document);
+
+        EnhancedAppointmentDTO enhancedAppointmentDTO = getEnhancedAppointmentDTO(document);
+
+        if (enhancedAppointmentDTO.isInitialized(APPOINTMENT_CONTENTS))
+            removeDuplicateEntriesInAppointmentContent(enhancedAppointmentDTO);
+
+        populateFacilityData(context, enhancedAppointmentDTO);
+
+        appointmentSaveHelper.updateSupplierPOAppointmentIndicator(context, enhancedAppointmentDTO);
+
+        populateSourceTypeForCreation(enhancedAppointmentDTO);
+
+        enhancedAppointmentDTO.setApplicableAppointmentParametersDTO(
+                applicableAppointmentParametersService.getApplicableAppointmentParameters(context,
+                        enhancedAppointmentDTO));
+
+        overrideSkipAvailabilityCheck(enhancedAppointmentDTO);
+
+        logger.debug(""-- scheduleAppointment() context {} document {} , enhancedAppointmentDTO {} "",
+                context, document, enhancedAppointmentDTO);
+
+        // TODO validate if appointment content is correct - it should have either only shipment or only PO or only ASN.
+        errorHandlerService.checkValidationResults(context);
+
+        AppointmentScheduleRecommendationsDTO appointmentScheduleRecommendationsDTO =
+                new AppointmentScheduleRecommendationsDTO();
+
+        if (errorHandlerService.getMessages(context) == null
+                && validationHelper.validate(context, enhancedAppointmentDTO, AppointmentFlows.APPOINTMENT_CREATION))
+        {
+            populateAppointmentId(context, enhancedAppointmentDTO);
+
+            labelsHelper.inheritAppointmentContents(context, enhancedAppointmentDTO);
+
+            errorHandlerService.checkValidationResults(context);
+
+            if (enhancedAppointmentDTO.getApplicableAppointmentParametersDTO().getAutoCreateParentShipment()
+                    && StringUtils.isNotBlank(enhancedAppointmentDTO.getContentType())
+                    && ContentType.SHIPMENT.getId().equals(enhancedAppointmentDTO.getContentType()))
+            {
+                enhancedAppointmentDTO = (EnhancedAppointmentDTO) shipmentHelper.autoCreateParentShipment(context,
+                        enhancedAppointmentDTO);
+            }
+
+            // Fetch user contact and initialize requestor contact for appointments
+            if (featureFlagService.isOn(FeatureIdentifier.FeatureFlags24_3.APPOINTMENT_REQUESTOR_CONTACT)
+                    && SourceType.SHIPPER.name().equals(enhancedAppointmentDTO.getSourceType()))
+            {
+                List<AppointmentContactDTO> appointmentContactList = null;
+
+                if ((BooleanUtils.isFalse(
+                        enhancedAppointmentDTO
+                                .isInitialized(AppointmentBase.Fields.APT_APPOINTMENT_CONTACT.getCode()))
+                        || CollectionUtils.isEmpty(enhancedAppointmentDTO.getAppointmentContactList())))
+                {
+                    appointmentContactList = new ArrayList<>();
+                }
+                else
+                {
+                    appointmentContactList = enhancedAppointmentDTO.getAppointmentContactList();
+                }
+
+                AppointmentContactDTO appointmentContact =
+                        appointmentUtil.fetchAppointmentContactForUser(context);
+                if (Objects.nonNull(appointmentContact))
+                {
+                    appointmentContactList.add(appointmentContact);
+                    enhancedAppointmentDTO.setAppointmentContactList(appointmentContactList);
+                }
+
+            }
+
+            Document allAppointmentDataDocument = DocumentBuilder.build(enhancedAppointmentDTO);
+            Document savedAppointmentDocument =
+                    appointmentMapService.saveAppointment(context, allAppointmentDataDocument, null);
+
+            logger.debug(""scheduleAppointment - Schedule appointment result : {}"", savedAppointmentDocument);
+            appointmentScheduleRecommendationsDTO.setAppointmentDocument(savedAppointmentDocument);
+
+            scheduleAppointmentUserExit.postprocess(context, savedAppointmentDocument);
+
+            eventHelper.processEvent(context, AppointmentFlows.APPOINTMENT_CREATION,
+                    enhancedAppointmentDTO, null);
+
+            logger.trace(""<< scheduleAppointmentWithNewConfig()"");
+        }
+
+        return appointmentScheduleRecommendationsDTO;
+    }
+
     /**
      * Schedule an appointment with best fit.
      *
@@ -916,6 +1026,24 @@ public class AppointmentManagerHelper
         return appointmentScheduleRecommendationsDTO;
     }
 
+    public EnhancedAppointmentDTO getEnhancedAppointmentDTO(Document document)
+    {
+        logger.trace("">> getEnhancedAppointmentDTO()"");
+
+        EnhancedAppointmentDTO enhancedAppointmentDTO =
+                objectMapper.convertValue(document.getMap(), EnhancedAppointmentDTO.class);
+
+        Map<String, Object> entityLabels = new HashMap<>();
+        Map<String, Object> inheritedLabels = new HashMap<>();
+        inheritedLabels.put(""Extended"", enhancedAppointmentDTO.getExtended());
+        entityLabels.put(""InheritedLabels"", inheritedLabels);
+        enhancedAppointmentDTO.setEntityLabels(entityLabels);
+
+        completeAppointmentDTO(enhancedAppointmentDTO);
+
+        return enhancedAppointmentDTO;
+    }
+
     public AppointmentDTO getAppointmentDTO(Document document)
     {
         logger.trace("">> getAppointmentDTO()"");
@@ -1054,6 +1182,21 @@ public class AppointmentManagerHelper
         logger.trace(""<< populateAppointmentId()"");
     }
 
+    private void overrideSkipAvailabilityCheck(AppointmentDTO appointmentDTO)
+    {
+        String valueFromParameters = appointmentDTO.getApplicableAppointmentParametersDTO().getSkipAvailabilityCheck();
+
+        logger.debug(
+                ""overrideSkipAvailabilityCheck - valueFromRequest = {} , valueFromParameters = {}"",
+                appointmentDTO.isInitialized(SKIP_AVAILABILITY_CHECK) ? appointmentDTO.getSkipAvailabilityCheck() : """",
+                valueFromParameters);
+
+        if (isNotBlank(valueFromParameters))
+        {
+            appointmentDTO.setSkipAvailabilityCheck(valueFromParameters.equalsIgnoreCase(YesNo.YES.name()));
+        }
+    }
+
     private void determineSkipAvailabilityCheck(AppointmentDTO appointmentDTO)
     {
         logger.trace("">> determineSkipAvailabilityCheck"");
@@ -1068,7 +1211,6 @@ public class AppointmentManagerHelper
 
         if (isNotBlank(valueFromParameters))
         {
-
             appointmentDTO.setSkipAvailabilityCheck(valueFromParameters.equalsIgnoreCase(YesNo.YES.name()));
         }
 
@@ -1127,6 +1269,19 @@ public class AppointmentManagerHelper
         return t -> seen.add(keyExtractor.apply(t));
     }
 
+    private void populateSourceTypeForCreation(AppointmentDTO appointmentDTO)
+    {
+        String sourceType = StringUtils.isNotBlank(appointmentDTO.getSourceType()) ? appointmentDTO.getSourceType()
+                : SourceType.SHIPPER.name();
+
+        appointmentDTO.setSourceType(sourceType);
+        appointmentDTO.setCreatedSourceType(sourceType);
+        appointmentDTO.setAppointmentFlow(AppointmentFlows.APPOINTMENT_CREATION);
+
+        logger.debug("" populateSourceTypeForCreation - appointment flow = {} , source type = {}"",
+                AppointmentFlows.APPOINTMENT_CREATION.name(), sourceType);
+    }
+
     private void populateSourceType(AppointmentFlows appointmentFlows, AppointmentDTO appointmentDTO,
             Appointment existingAppointment)
     {
@@ -1258,8 +1413,17 @@ public class AppointmentManagerHelper
                 }
                 logger.debug(""-- scheduleCarrierAppointment() context {} document {} , appointmentDTO {} "",
                         context, document, appointmentDTO);
+
+                if (Boolean.TRUE.equals(applicationParameterService
+                        .getParameterValue(AppointmentApplicationParameters.APT_TIME_SLOT_POPULATION)))
+                {
+                    appointmentScheduleRecommendationsDTO = scheduleAppointmentWithNewConfig(context, document, null);
+                }
+                else
+                {
                     appointmentScheduleRecommendationsDTO = scheduleAppointment(context, document, null);
                 }
+            }
             catch (ErrorHandlerRuntimeException ex)
             {
 
@@ -1741,8 +1905,17 @@ public class AppointmentManagerHelper
     public Document scheduleAppointmentWithNewTransaction(Context context, Document document)
     {
         logger.trace(() -> "">> scheduleAppointmentWithNewTransaction()"");
+        AppointmentScheduleRecommendationsDTO response;
 
-        AppointmentScheduleRecommendationsDTO response = scheduleAppointment(context, document, null);
+        if (Boolean.TRUE.equals(applicationParameterService
+                .getParameterValue(AppointmentApplicationParameters.APT_TIME_SLOT_POPULATION)))
+        {
+            response = scheduleAppointmentWithNewConfig(context, document, null);
+        }
+        else
+        {
+            response = scheduleAppointment(context, document, null);
+        }
 
         logger.trace(() -> ""<< scheduleAppointmentWithNewTransaction()"");
         return response.getAppointmentDocument();
diff --git a/src/main/java/com/manh/cp/appointment/appointment/impl/service/AppointmentSaveHelper.java b/src/main/java/com/manh/cp/appointment/appointment/impl/service/AppointmentSaveHelper.java
index 345d264ae..ef060cbbb 100644
--- a/src/main/java/com/manh/cp/appointment/appointment/impl/service/AppointmentSaveHelper.java
+++ b/src/main/java/com/manh/cp/appointment/appointment/impl/service/AppointmentSaveHelper.java
@@ -250,6 +250,14 @@ public class AppointmentSaveHelper
         return combineResultAppointment;
     }
 
+    public void updateSupplierPOAppointmentIndicator(Context context, AppointmentDTO editedAppointmentDTO)
+    {
+        boolean supplierPOAppointment =
+                appointmentParameterStrategyService.getSupplierPOAppointmentFromStrategy(context);
+
+        updateSupplierPOIndicatorInAppointmentContentsDTO(editedAppointmentDTO, supplierPOAppointment);
+    }
+
     /**
      * It compares purchaseOrderIds and updated the supplierPO indicator if there is a change. if there is no change
      * then it will not update supplierPOIndicator It is invoked from schedule appointment and edit appointment flows,
diff --git a/src/main/java/com/manh/cp/appointment/appointment/impl/service/ScheduleHelper.java b/src/main/java/com/manh/cp/appointment/appointment/impl/service/ScheduleHelper.java
index 8515c3b79..4a82c0771 100644
--- a/src/main/java/com/manh/cp/appointment/appointment/impl/service/ScheduleHelper.java
+++ b/src/main/java/com/manh/cp/appointment/appointment/impl/service/ScheduleHelper.java
@@ -338,7 +338,6 @@ public class ScheduleHelper
 
         if (appointmentDTO.getRecommendation() != null)
         {
-
             RecommendationDTO recommendationDTO = appointmentDTO.getRecommendation();
             logger.debug(""input recommendation = {}"", recommendationDTO);
 
@@ -355,5 +354,4 @@ public class ScheduleHelper
 
         logger.trace(""<< evaluateInputResourcesAndRecommendation()"");
     }
-
 }
diff --git a/src/main/java/com/manh/cp/appointment/core/dto/EnhancedAppointmentDTO.java b/src/main/java/com/manh/cp/appointment/core/dto/EnhancedAppointmentDTO.java
new file mode 100644
index 000000000..8a0d62da2
--- /dev/null
+++ b/src/main/java/com/manh/cp/appointment/core/dto/EnhancedAppointmentDTO.java
@@ -0,0 +1,33 @@
+/*
+ * Copyright &#169; 2020 Manhattan Associates, Inc. All Rights Reserved.
+ *
+ * Confidential, Proprietary and Trade Secrets Notice
+ *
+ * Use of this software is governed by a license agreement. This software
+ * contains confidential, proprietary and trade secret information of
+ * Manhattan Associates, Inc. and is protected under United States and
+ * international copyright and other intellectual property laws. Use, disclosure,
+ * reproduction, modification, distribution, or storage in a retrieval system in
+ * any form or by any means is prohibited without the prior express written
+ * permission of Manhattan Associates, Inc.
+ *
+ * Manhattan Associates, Inc.
+ * 2300 Windy Ridge Parkway, 10th Floor
+ * Atlanta, GA 30339 USA
+ */
+package com.manh.cp.appointment.core.dto;
+
+import org.apache.commons.lang3.builder.ToStringBuilder;
+
+import com.manh.cp.appointment.appointment.client.dto.AppointmentDTO;
+
+public class EnhancedAppointmentDTO extends AppointmentDTO
+{
+    // Keeping this class here so we can add variables as needed to the new appointment DTO
+
+    @Override
+    public String toString()
+    {
+        return ToStringBuilder.reflectionToString(this);
+    }
+}
diff --git a/src/test/java/com/manh/cp/appointment/appointment/impl/service/CarrierAppointmentScheduleTest.java b/src/test/java/com/manh/cp/appointment/appointment/impl/service/CarrierAppointmentScheduleTest.java
index b088aa64a..93a091adb 100644
--- a/src/test/java/com/manh/cp/appointment/appointment/impl/service/CarrierAppointmentScheduleTest.java
+++ b/src/test/java/com/manh/cp/appointment/appointment/impl/service/CarrierAppointmentScheduleTest.java
@@ -26,6 +26,7 @@ import org.mockito.Mock;
 import org.mockito.Mockito;
 import org.mockito.Spy;
 
+import com.manh.cp.appointment.appointment.AppointmentApplicationParameters;
 import com.manh.cp.appointment.appointment.api.domain.Appointment;
 import com.manh.cp.appointment.appointment.api.service.AppointmentService;
 import com.manh.cp.appointment.appointment.api.service.FeatureFlagService;
@@ -93,12 +94,18 @@ public class CarrierAppointmentScheduleTest extends BaseUnitTest
         RecommendationsOutputDTO recommendationsOutputDTO = new RecommendationsOutputDTO();
         recommendationsOutputDTO.addRecommendation(recommendationDTO);
 
-        Mockito.doReturn(null).when(appointmentManagerHelper).scheduleAppointment(Mockito.any(), Mockito.any(),
+        // Mockito.doReturn(null).when(appointmentManagerHelper).scheduleAppointment(Mockito.any(), Mockito.any(),
+        // Mockito.any());
+        Mockito.doReturn(null).when(appointmentManagerHelper).scheduleAppointmentWithNewConfig(Mockito.any(),
+                Mockito.any(),
                 Mockito.any());
         Mockito.doReturn(recommendationsOutputDTO).when(appointmentManagerHelper).recommendTimeSlots(Mockito.any(),
                 Mockito.any());
         Mockito.doReturn(true).when(featureFlagService).isOn(Mockito.any());
-        Mockito.doReturn(false).when(applicationParameterService).getParameterValue(Mockito.any());
+        Mockito.doReturn(true).when(applicationParameterService)
+                .getParameterValue(AppointmentApplicationParameters.APT_TIME_SLOT_POPULATION);
+        Mockito.doReturn(false).when(applicationParameterService)
+                .getParameterValue(AppointmentApplicationParameters.RETURN_RECOMMENDATION_IF_SLOT_NOT_FOUND);
         Mockito.when(scheduleCarrierAppointmentUserExit.preprocess(Mockito.any(), Mockito.any())).thenCallRealMethod();
 
         Document response = appointmentManagerHelper.scheduleCarrierAppointment(context, apptDoc, null);
@@ -121,12 +128,18 @@ public class CarrierAppointmentScheduleTest extends BaseUnitTest
                 new RecommendationDTO(LocalDateTime.now(), ""DRY"", ""Over booked"", true, false);
         apptDoc.put(AppointmentConstants.RECOMMENDATION, recommendationDTO);
 
-        Mockito.doReturn(null).when(appointmentManagerHelper).scheduleAppointment(Mockito.any(), Mockito.any(),
+        // Mockito.doReturn(null).when(appointmentManagerHelper).scheduleAppointment(Mockito.any(), Mockito.any(),
+        // Mockito.any());
+        Mockito.doReturn(null).when(appointmentManagerHelper).scheduleAppointmentWithNewConfig(Mockito.any(),
+                Mockito.any(),
                 Mockito.any());
         Mockito.doReturn(new RecommendationsOutputDTO()).when(appointmentManagerHelper)
                 .recommendTimeSlots(Mockito.any(), Mockito.any());
         Mockito.doReturn(true).when(featureFlagService).isOn(Mockito.any());
-        Mockito.doReturn(false).when(applicationParameterService).getParameterValue(Mockito.any());
+        Mockito.doReturn(true).when(applicationParameterService)
+                .getParameterValue(AppointmentApplicationParameters.APT_TIME_SLOT_POPULATION);
+        Mockito.doReturn(false).when(applicationParameterService)
+                .getParameterValue(AppointmentApplicationParameters.RETURN_RECOMMENDATION_IF_SLOT_NOT_FOUND);
         Mockito.when(scheduleCarrierAppointmentUserExit.preprocess(Mockito.any(), Mockito.any())).thenCallRealMethod();
 
         Document response = appointmentManagerHelper.scheduleCarrierAppointment(context, apptDoc, null);
diff --git a/src/test/resources/databuilder/data/vendorAppointment.json b/src/test/resources/databuilder/data/vendorAppointment.json
index 966a5cb6d..b6729f645 100644
--- a/src/test/resources/databuilder/data/vendorAppointment.json
+++ b/src/test/resources/databuilder/data/vendorAppointment.json
@@ -10,13 +10,11 @@
   ""TimeZone"": ""Europe/Paris"",
   ""PreferredDateTime"": ""2025-11-05T12:00:00"",
   ""SourceType"": ""VENDOR"",
-
   ""AppointmentContents"": [
     {
       ""PurchaseOrder"": ""    mkpr4""
     }
   ],
-
   ""PurchaseOrder"": [
     {
       ""PurchaseOrderId"": ""    mkpr4"",
","Same question here, do we want to log the entire `AppointmentScheduleRecommendationsDTO`? Also, method should be changed to `scheduleAppointmentWithNewConfig`\(\)
The previous `scheduleAppointment` method has these annotations: 

```
@Transactional(propagation = Propagation.REQUIRED)
@TrackTime(value = TrackTime.DEBUG, skipArgs = true, skipResult = true)
```

Are these no longer necessary?
Do we want to log the entire `enhancedAppointmentDTO` as well as the initial document that we’re passing in? Not sure how memory intensive that would be, but instead maybe there are only a few key fields that we would need to validate from both?
I might be misunderstanding the point of the refactoring, but I thought we would want a new DTO that is more pared down or substantively different from the AppointmentDTO right? If we’re just extending the same AppointmentDTO that we’ve been using this whole time, then why not just add more fields to that DTO itself?
Change trace to `getEnhancedAppointmentDTO`\(\)
Trace and debug logs should have method changed to `scheduleAppointmentWithNewConfig`\(\)
Were you able to invoke `scheduleAppointmentUserExit.preprocess` ?
No, and I’m not going to fix it in this PR, but it’ll get fixed before this branch gets merged to master
This is what we’re doing in the old flow and for consistency, I’m going to keep it the same for now. After this flow is complete, I’ll go through and remove what isn’t necessary, but for now, I don’t know what will/won’t make the cut
This is a holdover from a previous version that condensed AppointmentDTO with FacilityAppointmentInputDTO and AppointmentInputDTO. Those changes are now gone, but I’m keeping this here in case there are other fields I want to add to the new flow while it is being built. There’s also a decent chance it just gets deleted after all it is complete"
af9fa033fc9e5fee1506a0ae7178048359f38d5c,"diff --git a/src/main/java/com/manh/cp/appointment/appointment/constants/AppointmentConstants.java b/src/main/java/com/manh/cp/appointment/appointment/constants/AppointmentConstants.java
index 650152c60..a5feb3e16 100644
--- a/src/main/java/com/manh/cp/appointment/appointment/constants/AppointmentConstants.java
+++ b/src/main/java/com/manh/cp/appointment/appointment/constants/AppointmentConstants.java
@@ -277,4 +277,7 @@ public class AppointmentConstants
     public static final String REQUESTOR_CONTACT = ""RequestorContact"";
 
     public static final String FLOW_TYPE = ""FlowType"";
+
+    public static final String NOT_ON_BOARDED = ""Not-On-Boarded"";
+
 }
diff --git a/src/main/java/com/manh/cp/appointment/appointment/impl/service/CarrierService.java b/src/main/java/com/manh/cp/appointment/appointment/impl/service/CarrierService.java
index 7b1075502..78eae6b87 100644
--- a/src/main/java/com/manh/cp/appointment/appointment/impl/service/CarrierService.java
+++ b/src/main/java/com/manh/cp/appointment/appointment/impl/service/CarrierService.java
@@ -19,6 +19,7 @@ package com.manh.cp.appointment.appointment.impl.service;
 
 import java.text.MessageFormat;
 
+import org.apache.commons.lang3.ObjectUtils;
 import org.apache.commons.lang3.StringUtils;
 import org.springframework.beans.factory.annotation.Autowired;
 import org.springframework.http.HttpStatus;
@@ -28,6 +29,7 @@ import org.springframework.web.client.HttpClientErrorException;
 
 import com.manh.cp.appointment.appointment.ExternalServiceLocator;
 import com.manh.cp.appointment.appointment.constants.AppointmentConstants;
+import com.manh.cp.carrier.carrier.client.dto.CarrierBaseDTO;
 import com.manh.cp.carrier.carrier.client.dto.CarrierDTO;
 import com.manh.cp.fw.common.Context;
 import com.manh.cp.fw.core.exception.ManhRuntimeException;
@@ -80,7 +82,11 @@ public class CarrierService
             if (carrierResponse != null && carrierResponse.getBody().getData() != null)
             {
                 CarrierDTO carrierDTO = carrierResponse.getBody().getData();
-                if (carrierDTO != null && OnboardStatusEnum.ONBOARDED.getStatus()
+                if (carrierDTO != null
+                        && carrierDTO.isInitialized(CarrierBaseDTO.Fields.ON_BOARDING_STATUS_ID.getCode()) &&
+                        ObjectUtils.isNotEmpty(carrierDTO.getOnBoardingStatusId()) &&
+                        ObjectUtils.isNotEmpty(carrierDTO.getOnBoardingStatusId().getOnBoardingStatusId())
+                        && OnboardStatusEnum.ONBOARDED.getStatus()
                                 .equals(carrierDTO.getOnBoardingStatusId().getOnBoardingStatusId())
                         && carrierDTO.isInitialized(AppointmentConstants.CARRIER_PORTAL_COMMUNICATION)
                         && carrierDTO.getPortalCommunication())
diff --git a/src/test/java/com/manh/cp/appointment/appointment/util/CarrierOnboardingValidationTest.java b/src/test/java/com/manh/cp/appointment/appointment/util/CarrierOnboardingValidationTest.java
new file mode 100644
index 000000000..fa3b4b6de
--- /dev/null
+++ b/src/test/java/com/manh/cp/appointment/appointment/util/CarrierOnboardingValidationTest.java
@@ -0,0 +1,143 @@
+/*
+ * Copyright &#169; 2024 Manhattan Associates, Inc. All Rights Reserved.
+ *
+ * Confidential, Proprietary and Trade Secrets Notice
+ *
+ * Use of this software is governed by a license agreement. This software
+ * contains confidential, proprietary and trade secret information of
+ * Manhattan Associates, Inc. and is protected under United States and
+ * international copyright and other intellectual property laws. Use, disclosure,
+ * reproduction, modification, distribution, or storage in a retrieval system in
+ * any form or by any means is prohibited without the prior express written
+ * permission of Manhattan Associates, Inc.
+ *
+ * Manhattan Associates, Inc.
+ * 2300 Windy Ridge Parkway, 10th Floor
+ * Atlanta, GA 30339 USA
+ */
+package com.manh.cp.appointment.appointment.util;
+
+import org.junit.Assert;
+import org.junit.Before;
+import org.junit.Test;
+import org.junit.runner.RunWith;
+import org.mockito.InjectMocks;
+import org.mockito.Mock;
+import org.mockito.Mockito;
+import org.springframework.http.HttpHeaders;
+import org.springframework.http.HttpStatus;
+import org.springframework.http.ResponseEntity;
+import org.springframework.test.context.junit4.SpringJUnit4ClassRunner;
+
+import com.manh.cp.appointment.appointment.ExternalServiceLocator;
+import com.manh.cp.appointment.appointment.constants.AppointmentConstants;
+import com.manh.cp.appointment.appointment.impl.service.CarrierService;
+import com.manh.cp.carrier.carrier.client.dto.CarrierDTO;
+import com.manh.cp.carrier.carrier.client.dto.OnBoardingStatusDTO;
+import com.manh.cp.carrier.carrier.rest.client.CarrierConsumerServiceImpl;
+import com.manh.cp.fw.common.Context;
+import com.manh.cp.fw.core.rest.RestApiResponse;
+import com.manh.cp.fw.core.rest.RestApiResponseFactory;
+import com.manh.cp.shipment.shipment.client.shipmentstatus.OnboardStatusEnum;
+
+import static org.mockito.MockitoAnnotations.initMocks;
+
+@RunWith(SpringJUnit4ClassRunner.class)
+public class CarrierOnboardingValidationTest
+{
+    private Context context;
+
+    @InjectMocks
+    private CarrierService carrierService;
+
+    @Mock
+    private ExternalServiceLocator externalServiceLocator;
+
+    @Mock
+    private CarrierConsumerServiceImpl carrierConsumerService;
+
+    @Before
+    public void init()
+    {
+        context = Context.createTestContext();
+        initMocks(this);
+    }
+
+    /**
+     * testCarrierOnboarding when Carrier Onboarding status id is On-Boarded
+     */
+    @Test
+    public void testCarrierOnBoardingWhenCarrierOnboarded()
+    {
+
+        CarrierDTO carrierDTO = new CarrierDTO();
+        OnBoardingStatusDTO.KeyDTO keyDTO =
+                new OnBoardingStatusDTO.KeyDTO(OnboardStatusEnum.ONBOARDED.getStatus());
+        carrierDTO.setOnBoardingStatusId(keyDTO);
+        carrierDTO.setPortalCommunication(true);
+
+        ResponseEntity<RestApiResponse<CarrierDTO>> responseEntity =
+                getResponseEntity(carrierDTO);
+        Mockito.doReturn(carrierConsumerService).when(externalServiceLocator).getCarrierConsumerService();
+        Mockito.doReturn(responseEntity).when(carrierConsumerService).getByCarrierId(Mockito.any(), Mockito.any(),
+                Mockito.any());
+
+        boolean onboardedFlag = carrierService.isCarrierOnboarded(""CAR1"");
+        Assert.assertTrue(onboardedFlag);
+
+    }
+
+    /**
+     * testCarrierOnboarding when Carrier Onboarding status id is Not-On-Boarded
+     */
+    @Test
+    public void testCarrierOnBoardingWhenCarrierNotOnboarded()
+    {
+
+        CarrierDTO carrierDTO = new CarrierDTO();
+        OnBoardingStatusDTO.KeyDTO keyDTO =
+                new OnBoardingStatusDTO.KeyDTO(AppointmentConstants.NOT_ON_BOARDED);
+        carrierDTO.setOnBoardingStatusId(keyDTO);
+        carrierDTO.setPortalCommunication(true);
+
+        ResponseEntity<RestApiResponse<CarrierDTO>> responseEntity =
+                getResponseEntity(carrierDTO);
+        Mockito.doReturn(carrierConsumerService).when(externalServiceLocator).getCarrierConsumerService();
+        Mockito.doReturn(responseEntity).when(carrierConsumerService).getByCarrierId(Mockito.any(), Mockito.any(),
+                Mockito.any());
+
+        boolean onboardedFlag = carrierService.isCarrierOnboarded(""CAR1"");
+        Assert.assertFalse(onboardedFlag);
+
+    }
+
+    /**
+     * testCarrierOnboarding when Carrier Onboarding status id is null
+     */
+    @Test
+    public void testCarrierOnBoardingWhenCarrierNull()
+    {
+
+        CarrierDTO carrierDTO = new CarrierDTO();
+        carrierDTO.setPortalCommunication(true);
+
+        ResponseEntity<RestApiResponse<CarrierDTO>> responseEntity =
+                getResponseEntity(carrierDTO);
+        Mockito.doReturn(carrierConsumerService).when(externalServiceLocator).getCarrierConsumerService();
+        Mockito.doReturn(responseEntity).when(carrierConsumerService).getByCarrierId(Mockito.any(), Mockito.any(),
+                Mockito.any());
+
+        boolean onboardedFlag = carrierService.isCarrierOnboarded(""CAR1"");
+        Assert.assertFalse(onboardedFlag);
+
+    }
+
+    public static <T> ResponseEntity<RestApiResponse<T>> getResponseEntity(T body)
+    {
+        HttpHeaders responseHeaders = new HttpHeaders();
+        RestApiResponse<T> componentDTORestApiResponse =
+                (RestApiResponse<T>) RestApiResponseFactory.getApiResponse(body);
+        return new ResponseEntity<>(componentDTORestApiResponse, responseHeaders, HttpStatus.OK);
+    }
+
+}
","Add test case.
This is an existing functionality, and already test cases would've ran for the same\(build passed\). We have just added a null check here.  

@{618ad60c10bdeb007067125b}  : Don’t we need isInitialised check since this is a API call. Have we tested ?
@{5fbfefd2facfd60076fd072b} : Ive added the isInitialised\(\) check, but the issue here was caused by NPE\(logs attached below\), as the `OnBoardingStatusId` key’s value was coming as null, and it failed at :   
`carrierDTO.getOnBoardingStatusId().getOnBoardingStatusId()` since `carrierDTO.getOnBoardingStatusId()` was null.  
  
Testing done:  
When the OnboardingStatusId was null → NPE  
When the OnboardingStatusId was On-Boarded or Not-On-Boarded → Flow worked.  
  
_Handled by CustomErrorController java.lang.NullPointerException: null   at com.manh.cp.appointment.appointment.impl.service.CarrierService.isCarrierOnboarded\(CarrierService.java:84\) ~\[classes/:na\]   at com.manh.cp.appointment.appointment.publisher.AppointmentContentsPublisher.publishAppointmentUpdateToCarrierPortal\(AppointmentContentsPublisher.java:252\) ~\[classes/:na\]_
Add TC to cover these scenarios 
@{6152e14e289a54006ab32626} - Since my changes are only for null check for onboarding status id in carrierDTO, I don't think a dedicated TC is required to verify the null check. Pls let me know if any concern.

‌

Cc : @{5f8cb08a6bc6340068b81fa1} @{5ac30fd67b9e19039583e0f6} 
@{618ad60c10bdeb007067125b} - please add TC to verify flow is working as expected for different onboarding status.
Done
we dont have not on boarded status as part of `OnboardStatusEnum`?
@{6152e14e289a54006ab32626} : No, we don't have. Also, `OnboardStatusEnum` file is from Shipment client package, so couldn't add the Not-On-Boarded entry there."
7c4a8faa6431b0390253e9dbaaba58d401647fd9,"diff --git a/build.gradle b/build.gradle
index b56604a6c..8b39d38de 100644
--- a/build.gradle
+++ b/build.gradle
@@ -169,6 +169,7 @@ dependencies {
     }
 
     testImplementation(libraries.fw_entity_test)
+    testImplementation(libraries.fw_feature)
     testImplementation(libraries.fw_test)
     testImplementation(libraries.fw_dm_test_common)
     testImplementation(libraries.h2_database)
diff --git a/libraries.gradle b/libraries.gradle
index 82993c048..78013e253 100644
--- a/libraries.gradle
+++ b/libraries.gradle
@@ -72,6 +72,7 @@ ext {
         fw_entity_starter: ""com.manh.cp.fw:fw-entity-starter"",
         fw_error_handler: ""com.manh.cp.fw:fw-error-handler"",
         fw_feature_flags: ""com.manh.cp.fw:fw-feature-flags"",
+        fw_feature: ""com.manh.cp.fw:fw-feature-flags-test"",
         fw_grant: ""com.manh.cp.fw:fw-grant"",
         fw_localization: ""com.manh.cp.fw:fw-localization"",
         fw_log_admin: ""com.manh.cp.fw:fw-log-admin"",
diff --git a/version.txt b/version.txt
index f3f52b42d..d5a159609 100644
--- a/version.txt
+++ b/version.txt
@@ -1 +1 @@
-20.9.0
+20.10.0
",
